!function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="rainloop/v/0.0.0/static/js/min/",n(n.s=548)}([function(e,t,n){"use strict";n.r(t),n.d(t,"FileType",(function(){return i})),n.d(t,"StorageResultType",(function(){return o})),n.d(t,"Focused",(function(){return a})),n.d(t,"State",(function(){return r})),n.d(t,"StateType",(function(){return s})),n.d(t,"Capa",(function(){return c})),n.d(t,"KeyState",(function(){return l})),n.d(t,"FolderType",(function(){return u})),n.d(t,"ServerFolderType",(function(){return d})),n.d(t,"LoginSignMeTypeAsString",(function(){return p})),n.d(t,"LoginSignMeType",(function(){return f})),n.d(t,"ComposeType",(function(){return h})),n.d(t,"UploadErrorCode",(function(){return m})),n.d(t,"SetSystemFoldersNotification",(function(){return b})),n.d(t,"ClientSideKeyName",(function(){return g})),n.d(t,"EventKeyCode",(function(){return v})),n.d(t,"MessageSetAction",(function(){return y})),n.d(t,"MessageSelectAction",(function(){return S})),n.d(t,"DesktopNotification",(function(){return O})),n.d(t,"MessagePriority",(function(){return w})),n.d(t,"EditorDefaultType",(function(){return T})),n.d(t,"ServerSecure",(function(){return C})),n.d(t,"SearchDateType",(function(){return A})),n.d(t,"SaveSettingsStep",(function(){return E})),n.d(t,"Layout",(function(){return j})),n.d(t,"FilterConditionField",(function(){return F})),n.d(t,"FilterConditionType",(function(){return R})),n.d(t,"FiltersAction",(function(){return N})),n.d(t,"FilterRulesType",(function(){return I})),n.d(t,"SignedVerifyStatus",(function(){return L})),n.d(t,"ContactPropertyType",(function(){return P})),n.d(t,"Magics",(function(){return _})),n.d(t,"Ports",(function(){return M})),n.d(t,"Notification",(function(){return D}));var i={Unknown:"unknown",Text:"text",Html:"html",Code:"code",Eml:"eml",WordText:"word-text",Pdf:"pdf",Image:"image",Audio:"audio",Video:"video",Sheet:"sheet",Presentation:"presentation",Certificate:"certificate",CertificateBin:"certificate-bin",Archive:"archive"},o={Success:"success",Abort:"abort",Error:"error",Unload:"unload"},a={None:"none",MessageList:"message-list",MessageView:"message-view",FolderList:"folder-list"},r={Empty:10,Login:20,Auth:30},s={Webmail:0,Admin:1},c={TwoFactor:"TWO_FACTOR",TwoFactorForce:"TWO_FACTOR_FORCE",OpenPGP:"OPEN_PGP",Prefetch:"PREFETCH",Gravatar:"GRAVATAR",Folders:"FOLDERS",Composer:"COMPOSER",Contacts:"CONTACTS",Reload:"RELOAD",Search:"SEARCH",SearchAdv:"SEARCH_ADV",MessageActions:"MESSAGE_ACTIONS",MessageListActions:"MESSAGELIST_ACTIONS",AttachmentsActions:"ATTACHMENTS_ACTIONS",DangerousActions:"DANGEROUS_ACTIONS",Settings:"SETTINGS",Help:"HELP",Themes:"THEMES",UserBackground:"USER_BACKGROUND",Sieve:"SIEVE",Filters:"FILTERS",AttachmentThumbnails:"ATTACHMENT_THUMBNAILS",Templates:"TEMPLATES",AutoLogout:"AUTOLOGOUT",AdditionalAccounts:"ADDITIONAL_ACCOUNTS",Identities:"IDENTITIES"},l={All:"all",None:"none",ContactList:"contact-list",MessageList:"message-list",FolderList:"folder-list",MessageView:"message-view",Compose:"compose",Settings:"settings",Menu:"menu",PopupComposeOpenPGP:"compose-open-pgp",PopupMessageOpenPGP:"message-open-pgp",PopupViewOpenPGP:"view-open-pgp",PopupKeyboardShortcutsHelp:"popup-keyboard-shortcuts-help",PopupAsk:"popup-ask"},u={Inbox:10,SentItems:11,Draft:12,Trash:13,Spam:14,Archive:15,NotSpam:80,User:99},d={USER:0,INBOX:1,SENT:2,DRAFTS:3,JUNK:4,TRASH:5,IMPORTANT:10,FLAGGED:11,ALL:12},p={DefaultOff:"defaultoff",DefaultOn:"defaulton",Unused:"unused"},f={DefaultOff:0,DefaultOn:1,Unused:2},h={Empty:"empty",Reply:"reply",ReplyAll:"replyall",Forward:"forward",ForwardAsAttachment:"forward-as-attachment",Draft:"draft",EditAsNew:"editasnew"},m={Normal:0,FileIsTooBig:1,FilePartiallyUploaded:2,FileNoUploaded:3,MissingTempFolder:4,FileOnSaveingError:5,FileType:98,Unknown:99},b={None:0,Sent:1,Draft:2,Spam:3,Trash:4,Archive:5},g={FoldersLashHash:0,MessagesInboxLastHash:1,MailBoxListSize:2,ExpandedFolders:3,FolderListSize:4,MessageListSize:5,LastReplyAction:6,LastSignMe:7,ComposeLastIdentityID:8,MessageHeaderFullInfo:9,MessageAttachmnetControls:10},v={Backspace:8,Tab:9,Enter:13,Esc:27,PageUp:33,PageDown:34,Left:37,Right:39,Up:38,Down:40,End:35,Home:36,Space:32,Insert:45,Delete:46,A:65,S:83},y={SetSeen:0,UnsetSeen:1,SetFlag:2,UnsetFlag:3},S={All:0,None:1,Invert:2,Unseen:3,Seen:4,Flagged:5,Unflagged:6},O={Allowed:0,NotAllowed:1,Denied:2,NotSupported:9},w={Low:5,Normal:3,High:1},T={Html:"Html",Plain:"Plain",HtmlForced:"HtmlForced",PlainForced:"PlainForced"},C={None:0,SSL:1,TLS:2},A={All:-1,Days3:3,Days7:7,Month:30},E={Animate:-2,Idle:-1,TrueResult:1,FalseResult:0},j={NoPreview:0,SidePreview:1,BottomPreview:2},F={From:"From",Recipient:"Recipient",Subject:"Subject",Header:"Header",Size:"Size"},R={Contains:"Contains",NotContains:"NotContains",EqualTo:"EqualTo",NotEqualTo:"NotEqualTo",Regex:"Regex",Over:"Over",Under:"Under"},N={None:"None",MoveTo:"MoveTo",Discard:"Discard",Vacation:"Vacation",Reject:"Reject",Forward:"Forward"},I={All:"All",Any:"Any"},L={UnknownPublicKeys:-4,UnknownPrivateKey:-3,Unverified:-2,Error:-1,None:0,Success:1},P={Unknown:0,FullName:10,FirstName:15,LastName:16,MiddleName:16,Nick:18,NamePrefix:20,NameSuffix:21,Email:30,Phone:31,Web:32,Birthday:40,Facebook:90,Skype:91,GitHub:92,Note:110,Custom:250},_={EventWhichMouseMiddle:3,ifvisibleIdle10s:10,BitLength2048:2048,BitLength1024:1024,Size350px:350,Size50px:50,Size20px:20,Size1px:1,Time30mInMin:30,Time60m:36e5,Time30m:18e5,Time20m:12e5,Time15m:9e5,Time10m:6e5,Time5m:3e5,Time3m:18e4,Time2m:12e4,Time1m:6e4,Time30s:3e4,Time10s:1e4,Time7s:7e3,Time5s:5e3,Time3s:3e3,Time1s:1e3,Time500ms:500,Time350ms:350,Time250ms:250,Time200ms:200,Time100ms:100,Time50ms:50,Time20ms:20,Time10ms:10,Time1ms:1},M={Imap:143,ImapSsl:993,Smtp:25,SmtpSsl:465,SmtpStartTls:587},D={InvalidToken:101,AuthError:102,AccessError:103,ConnectionError:104,CaptchaError:105,SocialFacebookLoginAccessDisable:106,SocialTwitterLoginAccessDisable:107,SocialGoogleLoginAccessDisable:108,DomainNotAllowed:109,AccountNotAllowed:110,AccountTwoFactorAuthRequired:120,AccountTwoFactorAuthError:121,CouldNotSaveNewPassword:130,CurrentPasswordIncorrect:131,NewPasswordShort:132,NewPasswordWeak:133,NewPasswordForbidden:134,ContactsSyncError:140,CantGetMessageList:201,CantGetMessage:202,CantDeleteMessage:203,CantMoveMessage:204,CantCopyMessage:205,CantSaveMessage:301,CantSendMessage:302,InvalidRecipients:303,CantSaveFilters:351,CantGetFilters:352,FiltersAreNotCorrect:355,CantCreateFolder:400,CantRenameFolder:401,CantDeleteFolder:402,CantSubscribeFolder:403,CantUnsubscribeFolder:404,CantDeleteNonEmptyFolder:405,CantSaveSettings:501,CantSavePluginSettings:502,DomainAlreadyExists:601,CantInstallPackage:701,CantDeletePackage:702,InvalidPluginPackage:703,UnsupportedPluginPackage:704,LicensingServerIsUnavailable:710,LicensingExpired:711,LicensingBanned:712,DemoSendMessageError:750,DemoAccountError:751,AccountAlreadyExists:801,AccountDoesNotExist:802,MailServerError:901,ClientViewError:902,InvalidInputArgument:903,AjaxFalse:950,AjaxAbort:951,AjaxParse:952,AjaxTimeout:953,UnknownNotification:999,UnknownError:999}},function(e,t,n){"use strict";n(205),n(86),n(119);var i=n(33),o=n.n(i),a=n(12),r=n.n(a),s=n(57),c=n.n(s),l=n(154),u=n.n(l),d=n(17),p=n.n(d),f=n(4),h=n.n(f),m=n(3),b=n.n(m),g=n(8),v=n.n(g),y=n(229),S=n(230),O=n.n(S),w=n(0),T=h.a.ko,C=v()(h.a);T.bindingHandlers.updateWidth={init:function(e,t){var n=v()(e),i=t(),a=function(){i(n.width()),o()((function(){i(n.width())}),w.Magics.Time500ms)};C.on("resize",a),a(),T.utils.domNodeDisposal.addDisposeCallback(e,(function(){C.off("resize",a)}))}},T.bindingHandlers.editor={init:function(e,t){var i=null,o=t(),a=n(227).default,r=function(){o&&o.__editor&&o.__editor.setHtmlOrPlain(o())},s=function(){o&&o.__editor&&o(o.__editor.getDataWithHtmlMark())};T.isObservable(o)&&a&&(i=new a(e,s,(function(){o.__editor=i,r()}),s),o.__fetchEditorValue=s,o.subscribe(r))}},T.bindingHandlers.json={init:function(e,t){v()(e).text(h.a.JSON.stringify(T.unwrap(t())))},update:function(e,t){v()(e).text(h.a.JSON.stringify(T.unwrap(t())))}},T.bindingHandlers.scrollerShadows={init:function(e){var t=v()(e),n=r()(t).call(t,"[data-scroller-shadows-content]")[0]||null,i=b.a.throttle((function(){t.toggleClass("scroller-shadow-top",8<n.scrollTop).toggleClass("scroller-shadow-bottom",n.scrollTop+8<n.scrollHeight-n.clientHeight)}),100);n&&(v()(n).on("scroll resize",i),C.on("resize",i),T.utils.domNodeDisposal.addDisposeCallback(n,(function(){v()(n).off(),C.off("resize",i)})))}},T.bindingHandlers.pikaday={init:function(e,t,n,i,o){T.bindingHandlers.textInput.init(e,t,n,i,o),O.a&&(e.__pikaday=new O.a({field:e}))}},T.bindingHandlers.visibleAnimated={init:function(e,t){var n=v()(e);n.addClass("rl-animated-inited"),T.unwrap(t())?n.show():n.hide()},update:function(e,t){var n=v()(e);T.unwrap(t())?(n.addClass("rl-animated-hidden").show(),b.a.delay((function(){n.removeClass("rl-animated-hidden")}),10)):n.hide().removeClass("rl-animated-hidden")}},T.bindingHandlers.tooltip={init:function(e,t){var i=v()(e),o=t(),a="on"===(i.data("tooltip-mobile")||"off"),r="on"===(i.data("tooltip-i18n")||"on"),s=n(6);if(!s.bMobileDevice||a){var c=!T.isObservable(o)&&b.a.isFunction(o)?o():T.unwrap(o);if(e.__opentip=new y.a(e,{style:"rainloopTip",element:e,tipJoint:i.data("tooltip-join")||"bottom"}),s.dropdownVisibility.subscribe((function(t){t&&e.__opentip.hide()})),""===c?(e.__opentip.hide(),e.__opentip.deactivate(),e.__opentip.setContent("")):e.__opentip.activate(),r){var l=n(9);e.__opentip.setContent(l.i18n(c)),l.trigger.subscribe((function(){e.__opentip.setContent(l.i18n(c))})),s.dropdownVisibility.subscribe((function(){e&&e.__opentip&&e.__opentip.setContent(l.i18n(c))}))}else e.__opentip.setContent(c);C.on("rl.tooltips.diactivate",(function(){e.__opentip.hide(),e.__opentip.deactivate()})),C.on("rl.tooltips.activate",(function(){e.__opentip.activate()}))}},update:function(e,t){var i=v()(e),o=t(),a="on"===(i.data("tooltip-mobile")||"off"),r="on"===(i.data("tooltip-i18n")||"on");if((!n(6).bMobileDevice||a)&&e.__opentip){var s=!T.isObservable(o)&&b.a.isFunction(o)?o():T.unwrap(o);s?(e.__opentip.setContent(r?n(9).i18n(s):s),e.__opentip.activate()):(e.__opentip.hide(),e.__opentip.deactivate(),e.__opentip.setContent(""))}}},T.bindingHandlers.tooltipErrorTip={init:function(e){var t=v()(e);e.__opentip=new y.a(e,{style:"rainloopErrorTip",hideOn:"mouseout click",element:e,tipJoint:t.data("tooltip-join")||"top"}),e.__opentip.deactivate(),v()(h.a.document).on("click",(function(){e&&e.__opentip&&e.__opentip.hide()})),function(e){T.utils.domNodeDisposal.addDisposeCallback(e,(function(){e&&e.__opentip&&e.__opentip.deactivate()}))}(e)},update:function(e,t){var n=v()(e),i=t(),o=!T.isObservable(i)&&b.a.isFunction(i)?i():T.unwrap(i),a=e.__opentip;a&&(""===o?(a.hide(),a.deactivate(),a.setContent("")):b.a.delay((function(){n.is(":visible")?(a.setContent(o),a.activate(),a.show()):(a.hide(),a.deactivate(),a.setContent(""))}),w.Magics.Time100ms))}},T.bindingHandlers.registrateBootstrapDropdown={init:function(e){var t=n(6);t&&t.data.aBootstrapDropdowns&&(t.data.aBootstrapDropdowns.push(v()(e)),v()(e).click((function(){n(2).detectDropdownVisibility()})))}},T.bindingHandlers.openDropdownTrigger={update:function(e,t){if(T.unwrap(t())){var i=v()(e);i.hasClass("open")||r()(i).call(i,".dropdown-toggle").dropdown("toggle"),r()(i).call(i,".dropdown-toggle").focus(),n(2).detectDropdownVisibility(),t()(!1)}}},T.bindingHandlers.dropdownCloser={init:function(e){v()(e).closest(".dropdown").on("click",".e-item",(function(){v()(e).dropdown("toggle")}))}},T.bindingHandlers.popover={init:function(e,t){v()(e).popover(T.unwrap(t())),T.utils.domNodeDisposal.addDisposeCallback(e,(function(){v()(e).popover("destroy")}))}},T.bindingHandlers.csstext={},T.bindingHandlers.csstext.init=T.bindingHandlers.csstext.update=function(e,t){e&&e.styleSheet&&void 0!==e.styleSheet.cssText?e.styleSheet.cssText=T.unwrap(t()):v()(e).text(T.unwrap(t()))},T.bindingHandlers.resizecrop={init:function(e){v()(e).addClass("resizecrop").resizecrop({width:"100",height:"100",wrapperCSS:{"border-radius":"10px"}})},update:function(e,t){t()(),v()(e).resizecrop({width:"100",height:"100"})}},T.bindingHandlers.onKeyDown={init:function(e,t,n,i){v()(e).on("keydown.koOnKeyDown",(function(e){return!e||t().call(i,e)})),T.utils.domNodeDisposal.addDisposeCallback(e,(function(){v()(e).off("keydown.koOnKeyDown")}))}},T.bindingHandlers.onEnter={init:function(e,t,n,i){v()(e).on("keypress.koOnEnter",(function(n){n&&13===h.a.parseInt(n.keyCode,10)&&(v()(e).trigger("change"),t().call(i))})),T.utils.domNodeDisposal.addDisposeCallback(e,(function(){v()(e).off("keypress.koOnEnter")}))}},T.bindingHandlers.onSpace={init:function(e,t,n,i){v()(e).on("keyup.koOnSpace",(function(e){e&&32===h.a.parseInt(e.keyCode,10)&&t().call(i,e)})),T.utils.domNodeDisposal.addDisposeCallback(e,(function(){v()(e).off("keyup.koOnSpace")}))}},T.bindingHandlers.onTab={init:function(e,t,n,i){v()(e).on("keydown.koOnTab",(function(e){return!e||9!==h.a.parseInt(e.keyCode,10)||t().call(i,!!e.shiftKey)})),T.utils.domNodeDisposal.addDisposeCallback(e,(function(){v()(e).off("keydown.koOnTab")}))}},T.bindingHandlers.onEsc={init:function(e,t,n,i){v()(e).on("keyup.koOnEsc",(function(n){n&&27===h.a.parseInt(n.keyCode,10)&&(v()(e).trigger("change"),t().call(i))})),T.utils.domNodeDisposal.addDisposeCallback(e,(function(){v()(e).off("keyup.koOnEsc")}))}},T.bindingHandlers.clickOnTrue={update:function(e,t){T.unwrap(t())&&v()(e).click()}},T.bindingHandlers.modal={init:function(e,t){var i,o=n(6),a=n(2);r()(i=v()(e).toggleClass("fade",!o.bMobileDevice).modal({keyboard:!1,show:T.unwrap(t())}).on("shown.koModal",a.windowResizeCallback)).call(i,".close").on("click.koModal",(function(){t()(!1)})),T.utils.domNodeDisposal.addDisposeCallback(e,(function(){var t;r()(t=v()(e).off("shown.koModal")).call(t,".close").off("click.koModal")}))},update:function(e,t){var i=n(6);v()(e).modal(T.unwrap(t())?"show":"hide"),i.$html.hasClass("rl-anim")&&(i.$html.addClass("rl-modal-animation"),b.a.delay((function(){i.$html.removeClass("rl-modal-animation")}),w.Magics.Time500ms))}},T.bindingHandlers.moment={init:function(e,t){n(61).momentToNode(v()(e).addClass("moment").data("moment-time",T.unwrap(t())))},update:function(e,t){n(61).momentToNode(v()(e).data("moment-time",T.unwrap(t())))}},T.bindingHandlers.i18nInit={init:function(e){n(9).i18nToNodes(e)}},T.bindingHandlers.translatorInit={init:function(e){n(9).i18nToNodes(e)}},T.bindingHandlers.i18nUpdate={update:function(e,t){T.unwrap(t()),n(9).i18nToNodes(e)}},T.bindingHandlers.link={update:function(e,t){v()(e).attr("href",T.unwrap(t()))}},T.bindingHandlers.title={update:function(e,t){v()(e).attr("title",T.unwrap(t()))}},T.bindingHandlers.textF={init:function(e,t){v()(e).text(T.unwrap(t()))}},T.bindingHandlers.initDom={init:function(e,t){t()(e)}},T.bindingHandlers.initFixedTrigger={init:function(e,t){var n=T.unwrap(t()),i=v()(e),o=n[1]||0,a=v()(n[0]||null);(a=a[0]?a:null)&&C.resize((function(){var e=a?a.offset():null;e&&e.top&&i.css("top",e.top+o)}))}},T.bindingHandlers.initResizeTrigger={init:function(e,t){var n=T.unwrap(t());v()(e).css({height:n[1],"min-height":n[1]})},update:function(e,t){var i=n(2),o=n(6),a=T.unwrap(t()),r=i.pInt(a[1]),s=0,c=v()(e).offset().top;0<c&&(c+=i.pInt(a[2]),r<(s=o.$win.height()-c)&&(r=s),v()(e).css({height:r,"min-height":r}))}},T.bindingHandlers.appendDom={update:function(e,t){v()(e).hide().empty().append(T.unwrap(t())).show()}},T.bindingHandlers.draggable={init:function(e,t,i){var o=n(6),a=n(2);if(!o.bMobileDevice){var r=i(),s=r&&r.droppableSelector?r.droppableSelector:"",l={distance:20,handle:".dragHandle",cursorAt:{top:22,left:3},refreshPositions:!0,scroll:!0,drag:null,stop:null,helper:null};s&&(l.drag=function(e){v()(s).each((function(){var t=v()(this),n=t.offset(),i=n.top+t.height();if(h.a.clearInterval(t.data("timerScroll")),t.data("timerScroll",!1),e.pageX>=n.left&&e.pageX<=n.left+t.width()){if(e.pageY>=i-100&&e.pageY<=i){var o=function(){t.scrollTop(t.scrollTop()+3),a.windowResize()};t.data("timerScroll",c()(o,10)),o()}if(e.pageY>=n.top&&e.pageY<=n.top+100){var r=function(){t.scrollTop(t.scrollTop()-3),a.windowResize()};t.data("timerScroll",c()(r,10)),r()}}}))},l.stop=function(){v()(s).each((function(){var e=v()(this);h.a.clearInterval(e.data("timerScroll")),e.data("timerScroll",!1)}))}),l.helper=function(e){return t()(e&&e.target?T.dataFor(e.target):null)},v()(e).draggable(l).on("mousedown.koDraggable",(function(){a.removeInFocus()})),T.utils.domNodeDisposal.addDisposeCallback(e,(function(){v()(e).off("mousedown.koDraggable").draggable("destroy")}))}}},T.bindingHandlers.droppable={init:function(e,t,i){if(!n(6).bMobileDevice){var o=t(),a=i(),r=a&&a.droppableOver?a.droppableOver:null,s=a&&a.droppableOut?a.droppableOut:null,c={tolerance:"pointer",hoverClass:"droppableHover",drop:null,over:null,out:null};o&&(c.drop=function(e,t){o(e,t)},r&&(c.over=function(e,t){r(e,t)}),s&&(c.out=function(e,t){s(e,t)}),v()(e).droppable(c),T.utils.domNodeDisposal.addDisposeCallback(e,(function(){v()(e).droppable("destroy")})))}}},T.bindingHandlers.nano={init:function(e){var t=n(6),i=n(5);t.bDisableNanoScroll||i.appSettingsGet("useNativeScrollbars")||v()(e).addClass("nano").nanoScroller({iOSNativeScrolling:!1,preventPageScrolling:!0})}},T.bindingHandlers.saveTrigger={init:function(e){var t=v()(e);t.data("save-trigger-type",t.is("input[type=text],input[type=email],input[type=password],select,textarea")?"input":"custom"),"custom"===t.data("save-trigger-type")?t.append('&nbsp;&nbsp;<i class="icon-spinner animated"></i><i class="icon-remove error"></i><i class="icon-ok success"></i>').addClass("settings-saved-trigger"):t.addClass("settings-saved-trigger-input")},update:function(e,t){var n,i,o,a,s=T.unwrap(t()),c=v()(e);if("custom"===c.data("save-trigger-type"))switch(s.toString()){case"1":r()(n=r()(c).call(c,".animated,.error").hide().removeClass("visible").end()).call(n,".success").show().addClass("visible");break;case"0":r()(i=r()(c).call(c,".animated,.success").hide().removeClass("visible").end()).call(i,".error").show().addClass("visible");break;case"-2":r()(o=r()(c).call(c,".error,.success").hide().removeClass("visible").end()).call(o,".animated").show().addClass("visible");break;default:r()(a=r()(c).call(c,".animated").hide().end()).call(a,".error,.success").removeClass("visible")}else switch(s.toString()){case"1":c.addClass("success").removeClass("error");break;case"0":c.addClass("error").removeClass("success");break;case"-2":break;default:c.removeClass("error success")}}},T.bindingHandlers.emailsTags={init:function(e,t,i){var o=n(2),a=n(83).default,r=v()(e),s=t(),c=i().autoCompleteSource||null,l=[",",";","\n"];r.inputosaurus({parseOnBlur:!0,allowDragAndDrop:!0,focusCallback:function(e){s&&s.focused&&s.focused(!!e)},inputDelimiters:l,autoCompleteSource:c,splitHook:function(e){var t=u()(o).call(o,e);return t&&-1<l.indexOf(t.substr(-1))?a.splitEmailLine(e):null},parseHook:function(e){return p()(b.a).call(b.a,b.a.flatten(p()(b.a).call(b.a,e,(function(e){var t=a.parseEmailLine(e);return t.length?t:e}))),(function(e){return b.a.isObject(e)?[e.toLine(!1),e]:[e,null]}))},change:function(e){r.data("EmailsTagsValue",e.target.value),s(e.target.value)}}),s&&s.focused&&s.focused.subscribe&&s.focused.subscribe((function(e){r.inputosaurus(e?"focus":"blur")}))},update:function(e,t){var n=v()(e),i=t(),o=T.unwrap(i);n.data("EmailsTagsValue")!==o&&(n.val(o),n.data("EmailsTagsValue",o),n.inputosaurus("refresh"))}},T.bindingHandlers.command={init:function(e,t,n,i,o){var a=v()(e),r=t();if(!r||!r.isCommand)throw new Error("Value should be a command");if(r.enabled||(r.enabled=T.observable(!0)),!r.canExecute){var s=r.__realCanExecute;b.a.isFunction(s)?r.canExecute=T.computed((function(){return r.enabled()&&s.call(i,i)})):r.canExecute=T.computed((function(){return r.enabled()&&!!s}))}a.addClass("command"),T.bindingHandlers[a.is("form")?"submit":"click"].init(e,t,n,i,o)},update:function(e,t){var n=v()(e),i=t(),o=i.enabled();n.toggleClass("command-not-enabled",!o),o&&(o=i.canExecute(),n.toggleClass("command-can-not-be-execute",!o)),n.toggleClass("command-disabled disable disabled",!o).toggleClass("no-disabled",!!o),(n.is("input")||n.is("button"))&&n.prop("disabled",!o)}},T.extenders.trimmer=function(e){var t=n(2),i=T.computed({read:e,write:function(n){e(u()(t).call(t,n.toString()))}});return i(e()),i},T.extenders.posInterer=function(e,t){var i=n(2),o=T.computed({read:e,write:function(n){var o=i.pInt(n.toString(),t);0>=o&&(o=t),o===e()&&""+o!=""+n&&e(o+1),e(o)}});return o(e()),o},T.extenders.limitedList=function(e,t){var i=n(2),o=T.computed({read:e,write:function(n){var o=T.unwrap(e),a=T.unwrap(t);i.isNonEmptyArray(a)?-1<i.inArray(n,a)?e(n):-1<i.inArray(o,a)?(e(o+" "),e(o)):(e(a[0]+" "),e(a[0])):e("")}}).extend({notify:"always"});return o(e()),o.valueHasMutated||(o.valueHasMutated=function(){e.valueHasMutated()}),o},T.extenders.reversible=function(e){var t=e();return e.commit=function(){t=e()},e.reverse=function(){e(t)},e.commitedValue=function(){return t},e},T.extenders.toggleSubscribe=function(e,t){return e.subscribe(t[1],t[0],"beforeChange"),e.subscribe(t[2],t[0]),e},T.extenders.toggleSubscribeProperty=function(e,t){var n=t[1];return n&&(e.subscribe((function(e){e&&e[n]&&e[n](!1)}),t[0],"beforeChange"),e.subscribe((function(e){e&&e[n]&&e[n](!0)}),t[0])),e},T.extenders.falseTimeout=function(e,t){return e.iFalseTimeoutTimeout=0,e.subscribe((function(i){i&&(h.a.clearTimeout(e.iFalseTimeoutTimeout),e.iFalseTimeoutTimeout=o()((function(){e(!1),e.iFalseTimeoutTimeout=0}),n(2).pInt(t)))})),e},T.extenders.specialThrottle=function(e,t){return e.iSpecialThrottleTimeoutValue=n(2).pInt(t),0<e.iSpecialThrottleTimeoutValue?(e.iSpecialThrottleTimeout=0,e.valueForRead=T.observable(!!e()).extend({throttle:10}),T.computed({read:e.valueForRead,write:function(t){t?e.valueForRead(t):e.valueForRead()?(h.a.clearTimeout(e.iSpecialThrottleTimeout),e.iSpecialThrottleTimeout=o()((function(){e.valueForRead(!1),e.iSpecialThrottleTimeout=0}),e.iSpecialThrottleTimeoutValue)):e.valueForRead(t)}})):e},T.extenders.idleTrigger=function(e){return e.trigger=T.observable(w.SaveSettingsStep.Idle),e},T.observable.fn.idleTrigger=function(){return this.extend({idleTrigger:!0})},T.observable.fn.validateNone=function(){return this.hasError=T.observable(!1),this},T.observable.fn.validateEmail=function(){var e=this;return this.hasError=T.observable(!1),this.subscribe((function(t){e.hasError(""!==t&&!/^[^@\s]+@[^@\s]+$/.test(t))})),this.valueHasMutated(),this},T.observable.fn.validateSimpleEmail=function(){var e=this;return this.hasError=T.observable(!1),this.subscribe((function(t){e.hasError(""!==t&&!/^.+@.+$/.test(t))})),this.valueHasMutated(),this},T.observable.fn.deleteAccessHelper=function(){return this.extend({falseTimeout:3e3}).extend({toggleSubscribeProperty:[this,"deleteAccess"]}),this},T.observable.fn.validateFunc=function(e){var t=this;return this.hasFuncError=T.observable(!1),b.a.isFunction(e)&&(this.subscribe((function(n){t.hasFuncError(!e(n))})),this.valueHasMutated()),this},t.a=T},function(e,t,n){"use strict";n.r(t),n.d(t,"trim",(function(){return F})),n.d(t,"inArray",(function(){return R})),n.d(t,"isArray",(function(){return N})),n.d(t,"isObject",(function(){return I})),n.d(t,"isFunc",(function(){return L})),n.d(t,"isUnd",(function(){return P})),n.d(t,"isNull",(function(){return _})),n.d(t,"has",(function(){return M})),n.d(t,"bind",(function(){return D})),n.d(t,"noop",(function(){return k})),n.d(t,"noopTrue",(function(){return x})),n.d(t,"noopFalse",(function(){return U})),n.d(t,"silentTryCatch",(function(){return H})),n.d(t,"isNormal",(function(){return G})),n.d(t,"isPosNumeric",(function(){return B})),n.d(t,"pInt",(function(){return V})),n.d(t,"pString",(function(){return K})),n.d(t,"pBool",(function(){return q})),n.d(t,"boolToAjax",(function(){return z})),n.d(t,"isNonEmptyArray",(function(){return W})),n.d(t,"encodeURIComponent",(function(){return Y})),n.d(t,"decodeURIComponent",(function(){return $})),n.d(t,"decodeURI",(function(){return J})),n.d(t,"encodeURI",(function(){return X})),n.d(t,"simpleQueryParser",(function(){return Z})),n.d(t,"fakeMd5",(function(){return Q})),n.d(t,"encodeHtml",(function(){return ee})),n.d(t,"splitPlainText",(function(){return te})),n.d(t,"timeOutAction",(function(){return ie})),n.d(t,"timeOutActionSecond",(function(){return oe})),n.d(t,"deModule",(function(){return ae})),n.d(t,"inFocus",(function(){return re})),n.d(t,"removeInFocus",(function(){return se})),n.d(t,"removeSelection",(function(){return ce})),n.d(t,"replySubjectAdd",(function(){return le})),n.d(t,"roundNumber",(function(){return ue})),n.d(t,"friendlySize",(function(){return de})),n.d(t,"log",(function(){return pe})),n.d(t,"delegateRun",(function(){return fe})),n.d(t,"killCtrlACtrlS",(function(){return he})),n.d(t,"createCommandLegacy",(function(){return me})),n.d(t,"convertThemeName",(function(){return be})),n.d(t,"quoteName",(function(){return ge})),n.d(t,"microtime",(function(){return ve})),n.d(t,"timestamp",(function(){return ye})),n.d(t,"convertLangName",(function(){return Se})),n.d(t,"draggablePlace",(function(){return Oe})),n.d(t,"defautOptionsAfterRender",(function(){return we})),n.d(t,"clearBqSwitcher",(function(){return Te})),n.d(t,"previewMessage",(function(){return Ce})),n.d(t,"settingsSaveHelperFunction",(function(){return Ae})),n.d(t,"settingsSaveHelperSimpleFunction",(function(){return Ee})),n.d(t,"settingsSaveHelperSubscribeFunction",(function(){return je})),n.d(t,"findEmailAndLinks",(function(){return Fe})),n.d(t,"htmlToPlain",(function(){return Re})),n.d(t,"plainToHtml",(function(){return Ne})),n.d(t,"folderListOptionsBuilder",(function(){return Ie})),n.d(t,"selectElement",(function(){return Le})),n.d(t,"detectDropdownVisibility",(function(){return Pe})),n.d(t,"triggerAutocompleteInputChange",(function(){return _e})),n.d(t,"getConfigurationFromScriptTag",(function(){return De})),n.d(t,"disposeOne",(function(){return ke})),n.d(t,"disposeObject",(function(){return xe})),n.d(t,"delegateRunOnDestroy",(function(){return Ue})),n.d(t,"appendStyles",(function(){return He})),n.d(t,"changeTheme",(function(){return Ve})),n.d(t,"computedPagenatorHelper",(function(){return Ke})),n.d(t,"getFileExtension",(function(){return qe})),n.d(t,"mimeContentType",(function(){return ze})),n.d(t,"isTransparent",(function(){return We})),n.d(t,"getRealHeight",(function(){return Ye})),n.d(t,"resizeAndCrop",(function(){return $e})),n.d(t,"mailToHelper",(function(){return Je})),n.d(t,"domReady",(function(){return Xe})),n.d(t,"windowResize",(function(){return Ze})),n.d(t,"windowResizeCallback",(function(){return Qe}));n(86),n(119),n(45),n(204),n(59),n(77),n(225),n(205),n(48);var i=n(154),o=n.n(i),a=n(33),r=n.n(a),s=n(12),c=n.n(s),l=n(176),u=n.n(l),d=n(122),p=n.n(d),f=n(228),h=n.n(f),m=n(4),b=n.n(m),g=n(8),v=n.n(g),y=n(3),S=n.n(y),O=n(1),w=n(231),T=n.n(w),C=n(6),A=n(0),E=n(232),j=n(121);n.d(t,"jassl",(function(){return j.a}));var F=o()(v.a),R=v.a.inArray,N=S.a.isArray,I=S.a.isObject,L=S.a.isFunction,P=S.a.isUndefined,_=S.a.isNull,M=S.a.has,D=S.a.bind,k=function(){},x=function(){return!0},U=function(){return!1};function H(e){try{e()}catch(e){}}function G(e){return!P(e)&&!_(e)}function B(e,t){return void 0===t&&(t=!0),!!G(e)&&(t?/^[0-9]*$/.test(e.toString()):/^[1-9]+[0-9]*$/.test(e.toString()))}function V(e,t){void 0===t&&(t=0);var n=G(e)&&""!==e?b.a.parseInt(e,10):t;return b.a.isNaN(n)?t:n}function K(e){return G(e)?""+e:""}function q(e){return!!e}function z(e){return e?"1":"0"}function W(e){return N(e)&&0<e.length}function Y(e){return b.a.encodeURIComponent(e)}function $(e){return b.a.decodeURIComponent(e)}function J(e){return b.a.decodeURI(e)}function X(e){return b.a.encodeURI(e)}function Z(e){var t,n=0,i=null,o=e.split("&"),a={};for(t=o.length;n<t;n++)a[$((i=o[n].split("="))[0])]=$(i[1]);return a}function Q(e){void 0===e&&(e=32);var t="0123456789abcdefghijklmnopqrstuvwxyz",n=t.length;e=V(e);for(var i="";i.length<e;)i+=t.substr(b.a.Math.round(b.a.Math.random()*n),1);return i}function ee(e){return G(e)?S.a.escape(e.toString()):""}function te(e,t){void 0===t&&(t=100);for(var n="",i="",o=e,a=0,r=0;o.length>t;)a=(i=o.substring(0,t)).lastIndexOf(" "),-1!==(r=i.lastIndexOf("\n"))&&(a=r),-1===a&&(a=t),n+=i.substring(0,a)+"\n",o=o.substring(a+1);return n+o}var ne,ie=(ne={},function(e,t,n){ne[e]=P(ne[e])?0:ne[e],b.a.clearTimeout(ne[e]),ne[e]=r()(t,n)}),oe=function(){var e={};return function(t,n,i){e[t]||(e[t]=r()((function(){n(),e[t]=0}),i))}}();function ae(e){return(e&&e.default?e.default:e)||""}function re(){try{if(b.a.document.activeElement)return P(b.a.document.activeElement.__inFocusCache)&&(b.a.document.activeElement.__inFocusCache=v()(b.a.document.activeElement).is("input,textarea,iframe,.cke_editable")),!!b.a.document.activeElement.__inFocusCache}catch(e){}return!1}function se(e){if(b.a.document&&b.a.document.activeElement&&b.a.document.activeElement.blur)try{var t=v()(b.a.document.activeElement);(t&&t.is("input,textarea")||e)&&b.a.document.activeElement.blur()}catch(e){}}function ce(){try{if(b.a&&b.a.getSelection){var e=b.a.getSelection();e&&e.removeAllRanges&&e.removeAllRanges()}else b.a.document&&b.a.document.selection&&b.a.document.selection.empty&&b.a.document.selection.empty()}catch(e){}}function le(e,t){e=F(e.toUpperCase()),t=F(t.replace(/[\s]+/g," "));var n=!1,i="RE"===e,o="FWD"===e,a=[],r=!o;return""!==t&&S.a.each(t.split(":"),(function(e){var t=F(e);n||!/^(RE|FWD)$/i.test(t)&&!/^(RE|FWD)[[(][\d]+[\])]$/i.test(t)?(a.push(e),n=!0):(i||(i=!!/^RE/i.test(t)),o||(o=!!/^FWD/i.test(t)))})),r?i=!1:o=!1,F((r?"Re: ":"Fwd: ")+(i?"Re: ":"")+(o?"Fwd: ":"")+F(a.join(":")))}function ue(e,t){return b.a.Math.round(e*b.a.Math.pow(10,t))/b.a.Math.pow(10,t)}function de(e){switch(e=V(e),!0){case 1073741824<=e:return ue(e/1073741824,1)+"GB";case 1048576<=e:return ue(e/1048576,1)+"MB";case 1024<=e:return ue(e/1024,0)+"KB"}return e+"B"}function pe(e){b.a.console&&b.a.console.log&&b.a.console.log(e)}function fe(e,t,n,i){void 0===i&&(i=0),e&&e[t]&&(i=V(i),n=N(n)?n:[],0>=i?e[t].apply(e,n):S.a.delay((function(){e[t].apply(e,n)}),i))}function he(e){if((e=e||b.a.event)&&e.ctrlKey&&!e.shiftKey&&!e.altKey){var t=e.keyCode||e.which;if(t===A.EventKeyCode.S)return void e.preventDefault();if(t===A.EventKeyCode.A){var n=e.target||e.srcElement;if(n&&("true"==""+n.contentEditable||n.tagName&&n.tagName.match(/INPUT|TEXTAREA/i)))return;b.a.getSelection?b.a.getSelection().removeAllRanges():b.a.document.selection&&b.a.document.selection.clear&&b.a.document.selection.clear(),e.preventDefault()}}}function me(e,t,n){void 0===n&&(n=!0);var i=null;return(i=t?function(){if(i&&i.canExecute&&i.canExecute()){for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];t.apply(e,o)}return!1}:k).enabled=O.a.observable(!0),i.isCommand=!0,L(n)?i.canExecute=O.a.computed((function(){return i&&i.enabled()&&n.call(e)})):i.canExecute=O.a.computed((function(){return i&&i.enabled()&&!!n})),i}var be=S.a.memoize((function(e){return"@custom"===e.substr(-7)&&(e=F(e.substring(0,e.length-7))),F(e.replace(/[^a-zA-Z0-9]+/g," ").replace(/([A-Z])/g," $1").replace(/[\s]+/g," "))}));function ge(e){return e.replace(/["]/g,'\\"')}function ve(){return(new b.a.Date).getTime()}function ye(){return b.a.Math.round(ve()/1e3)}function Se(e,t){return void 0===t&&(t=!1),n(9).i18n("LANGS_NAMES"+(!0===t?"_EN":"")+"/LANG_"+e.toUpperCase().replace(/[^a-zA-Z0-9]+/g,"_"),null,e)}function Oe(){return v()('<div class="draggablePlace"><span class="text"></span>&nbsp;<i class="icon-copy icon-white visible-on-ctrl"></i><i class="icon-mail icon-white hidden-on-ctrl"></i></div>').appendTo("#rl-hidden")}function we(e,t){t&&!P(t.disabled)&&e&&v()(e).toggleClass("disabled",t.disabled).prop("disabled",t.disabled)}function Te(e){c()(e).call(e,"blockquote.rl-bq-switcher").removeClass("rl-bq-switcher hidden-bq"),c()(e).call(e,".rlBlockquoteSwitcher").off(".rlBlockquoteSwitcher").remove(),c()(e).call(e,"[data-html-editor-font-wrapper]").removeAttr("data-html-editor-font-wrapper")}function Ce(e,t,i,o){var a=e.title,s=e.subject,c=e.date,l=e.fromCreds,u=e.toCreds,d=e.toLabel,p=e.ccClass,f=e.ccCreds,h=e.ccLabel,m=b.a.open(""),g=m.document,v=t.clone(),y=i?"html":"plain";Te(v);var S=v?v.html():"";g.write(ae(n(358)).replace("{{title}}",ee(a)).replace("{{subject}}",ee(s)).replace("{{date}}",ee(c)).replace("{{fromCreds}}",ee(l)).replace("{{toCreds}}",ee(u)).replace("{{toLabel}}",ee(d)).replace("{{ccClass}}",ee(p)).replace("{{ccCreds}}",ee(f)).replace("{{ccLabel}}",ee(h)).replace("{{bodyClass}}",y).replace("{{html}}",S)),g.close(),o&&r()((function(){return m.print()}),100)}function Ae(e,t,n,i){return void 0===n&&(n=null),void 0===i&&(i=1e3),i=V(i),function(o,a,r,s,c){t.call(n,a&&a.Result?A.SaveSettingsStep.TrueResult:A.SaveSettingsStep.FalseResult),e&&e.call(n,o,a,r,s,c),S.a.delay((function(){t.call(n,A.SaveSettingsStep.Idle)}),i)}}function Ee(e,t){return Ae(null,e,t,1e3)}function je(e,t,n,i){return function(o){if(e){switch(n){case"bool":case"boolean":o=o?"1":"0";break;case"int":case"integer":case"number":o=V(o);break;case"trim":o=F(o);break;default:o=K(o)}var a={};a[t]=o,e.saveAdminConfig?e.saveAdminConfig(i||null,a):e.saveSettings&&e.saveSettings(i||null,a)}}}function Fe(e){return T.a?T.a.link(e,{newWindow:!0,stripPrefix:!1,urls:!0,email:!0,mention:!1,phone:!1,hashtag:!1,replaceFn:function(e){return!(e&&"url"===e.getType()&&e.matchedText&&0!==e.matchedText.indexOf("http"))}}):e}function Re(e){var t,n=0,i=0,o=0,a=0,r=0,s="";for(s=e.replace(/<p[^>]*><\/p>/gi,"").replace(/<pre[^>]*>([\s\S\r\n\t]*)<\/pre>/gim,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t&&1<t.length?t[1].toString().replace(/[\n]/gm,"<br />").replace(/[\r]/gm,""):""})).replace(/[\s]+/gm," ").replace(/((?:href|data)\s?=\s?)("[^"]+?"|'[^']+?')/gim,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t&&1<t.length?""+t[1]+S.a.escape(t[2]):""})).replace(/<br[^>]*>/gim,"\n").replace(/<\/h[\d]>/gi,"\n").replace(/<\/p>/gi,"\n\n").replace(/<ul[^>]*>/gim,"\n").replace(/<\/ul>/gi,"\n").replace(/<li[^>]*>/gim," * ").replace(/<\/li>/gi,"\n").replace(/<\/td>/gi,"\n").replace(/<\/tr>/gi,"\n").replace(/<hr[^>]*>/gim,"\n_______________________________\n\n").replace(/<div[^>]*>([\s\S\r\n]*)<\/div>/gim,(function e(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];if(n&&1<n.length){var o=F(n[1]);return 0<o.length&&(o=o.replace(/<div[^>]*>([\s\S\r\n]*)<\/div>/gim,e),o="\n"+F(o)+"\n"),o}return""})).replace(/<blockquote[^>]*>/gim,"\n__bq__start__\n").replace(/<\/blockquote>/gim,"\n__bq__end__\n").replace(/<a [^>]*>([\s\S\r\n]*?)<\/a>/gim,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t&&1<t.length?F(t[1]):""})).replace(/<\/div>/gi,"\n").replace(/&nbsp;/gi," ").replace(/&quot;/gi,'"').replace(/<[^>]*>/gm,""),s=te(s=(s=C.$div.html(s).text()).replace(/\n[ \t]+/gm,"\n").replace(/[\n]{3,}/gm,"\n\n").replace(/&gt;/gi,">").replace(/&lt;/gi,"<").replace(/&amp;/gi,"&")),n=0,i=800;0<i&&(i-=1,-1<(o=s.indexOf("__bq__start__",n)));)a=s.indexOf("__bq__start__",o+5),r=s.indexOf("__bq__end__",o+5),(-1===a||r<a)&&o<r?(s=s.substring(0,o)+(t=s.substring(o+13,r),(t="> "+F(t).replace(/\n/gm,"\n> ")).replace(/(^|\n)([> ]+)/gm,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t&&2<t.length?t[1]+F(t[2].replace(/[\s]/g,""))+" ":""})))+s.substring(r+11),n=0):n=-1<a&&a<r?a-1:0;return s=s.replace(/__bq__start__/gm,"").replace(/__bq__end__/gm,"")}function Ne(e,t){void 0===t&&(t=!1);var n=!1,i=!0,o=!0,a=[],r="",s=0,c=(e=(e=e.toString().replace(/\r/g,"")).replace(/^>[> ]>+/gm,(function(e){var t=e[0];return t?t.replace(/[ ]+/g,""):t}))).split("\n");do{for(i=!1,a=[],s=0;s<c.length;s++)(o=">"===(r=c[s]).substr(0,1))&&!n?(i=!0,n=!0,a.push("~~~blockquote~~~"),a.push(r.substr(1))):!o&&n?""!==r?(n=!1,a.push("~~~/blockquote~~~"),a.push(r)):a.push(r):o&&n?a.push(r.substr(1)):a.push(r);n&&(n=!1,a.push("~~~/blockquote~~~")),c=a}while(i);return e=(e=c.join("\n")).replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/~~~blockquote~~~[\s]*/g,"<blockquote>").replace(/[\s]*~~~\/blockquote~~~/g,"</blockquote>").replace(/\n/g,"<br />"),t?Fe(e):e}function Ie(e,t,n,i,o,a,r,s,c,l){var d=null,p=!1,f=0,h=0,m=[];for(l=!P(l)&&!!l,c=G(c)?c:0<e.length,o=G(o)?o:0,a=G(a)?a:null,r=G(r)?r:null,s=G(s)?s:null,N(n)||(n=[]),N(i)||(i=[]),f=0,h=i.length;f<h;f++)m.push({id:i[f][0],name:i[f][1],system:!1,seporator:!1,disabled:!1});for(p=!0,f=0,h=e.length;f<h;f++)d=e[f],r&&!r(d)||(p&&0<m.length&&m.push({id:"---",name:"---",system:!1,seporator:!0,disabled:!0}),p=!1,m.push({id:d.fullNameRaw,name:s?s(d):d.name(),system:!0,seporator:!1,disabled:!d.selectable||-1<R(d.fullNameRaw,n)||!!a&&a(d)}));for(p=!0,f=0,h=t.length;f<h;f++)!(d=t[f]).subScribed()&&d.existen&&!l||!d.selectable&&!d.hasSubScribedSubfolders()||r&&!r(d)||A.FolderType.User!==d.type()&&c&&!d.hasSubScribedSubfolders()||(p&&0<m.length&&m.push({id:"---",name:"---",system:!1,seporator:!0,disabled:!0}),p=!1,m.push({id:d.fullNameRaw,name:new b.a.Array(d.deep+1-o).join("   ")+(s?s(d):d.name()),system:!1,seporator:!1,disabled:!d.selectable||-1<R(d.fullNameRaw,n)||!!a&&a(d)})),d.subScribed()&&0<d.subFolders().length&&(m=u()(m).call(m,Ie([],d.subFolders(),n,[],o,a,r,s,c,l)));return m}function Le(e){var t=null,n=null;b.a.getSelection?((t=b.a.getSelection()).removeAllRanges(),(n=b.a.document.createRange()).selectNodeContents(e),t.addRange(n)):b.a.document.selection&&((n=b.a.document.body.createTextRange()).moveToElementText(e),n.select())}b.a.rainloop_Utils_htmlToPlain=Re,b.a.rainloop_Utils_plainToHtml=Ne;var Pe=S.a.debounce((function(){Object(C.dropdownVisibility)(!!c()(S.a).call(S.a,C.data.aBootstrapDropdowns,(function(e){return e.hasClass("open")})))}),50);function _e(e){void 0===e&&(e=!1);var t=function(){v()(".checkAutocomplete").trigger("change")};e?S.a.delay(t,100):t()}var Me={};function De(e){Me[e]||(Me[e]=v()('script[type="application/json"][data-configuration="'+e+'"]'));try{return JSON.parse(Me[e].text())}catch(e){}return{}}function ke(e,t){var n=t||e;n&&"function"==typeof n.dispose&&n.dispose()}function xe(e){e&&(N(e.disposables)&&S.a.each(e.disposables,ke),O.a.utils.objectForEach(e,ke))}function Ue(e){e&&(N(e)?S.a.each(e,(function(e){Ue(e)})):e&&e.onDestroy&&e.onDestroy())}function He(e,t){return!(!e||!e[0])&&(e[0].styleSheet&&!P(e[0].styleSheet.cssText)?e[0].styleSheet.cssText=t:e.text(t),!0)}var Ge=0,Be=null;function Ve(e,t){void 0===t&&(t=k);var n=v()("#app-theme-link"),i=function(){Ge=r()((function(){return t(A.SaveSettingsStep.Idle)}),1e3),Be=null},o=v()("#app-theme-style"),a=n.attr("href");a||(a=o.attr("data-href")),a&&("Json/"!==(a=(a=(a=a.toString().replace(/\/-\/[^/]+\/-\//,"/-/"+e+"/-/")).replace(/\/Css\/[^/]+\/User\//,"/Css/0/User/")).replace(/\/Hash\/[^/]+\//,"/Hash/-/")).substring(a.length-5,a.length)&&(a+="Json/"),b.a.clearTimeout(Ge),t(A.SaveSettingsStep.Animate),Be&&Be.abort&&Be.abort(),Be=v.a.ajax({url:a,dataType:"json"}).then((function(e){e&&N(e)&&2===e.length&&(!n||!n[0]||o&&o[0]||(o=v()('<style id="app-theme-style"></style>'),n.after(o),n.remove()),o&&o[0]&&He(o,e[1])&&o.attr("data-href",a).attr("data-theme",e[0]),t(A.SaveSettingsStep.TrueResult))})).then(i,i))}function Ke(e,t){return function(){var n=e(),i=t(),o=[],a=function(e,t,i){void 0===t&&(t=!0),void 0===i&&(i="");var a={current:e===n,name:""===i?e.toString():i.toString(),custom:""!==i,title:""===i?"":e.toString(),value:e.toString()};t?o.push(a):o.unshift(a)},r=0,s=0,c=2;if(1<i||0<i&&i<n){for(i<n?(a(i),r=i,s=i):((3>=n||i-2<=n)&&(c+=2),a(n),r=n,s=n);0<c;)if(s+=1,0<(r-=1)&&(a(r,!1),c-=1),i>=s)a(s,!0),c-=1;else if(0>=r)break;3===r?a(2,!1):3<r&&a(Math.round((r-1)/2),!1,"..."),i-2===s?a(i-1,!0):i-2>s&&a(Math.round((i+s)/2),!0,"..."),1<r&&a(1,!1),i>s&&a(i,!0)}return o}}function qe(e){var t=(e=F(e).toLowerCase()).split(".").pop();return t===e?"":t}function ze(e){var t,n="application/octet-stream";return"winmail.dat"===(e=F(e).toLowerCase())?"application/ms-tnef":((t=qe(e))&&0<t.length&&!P(E.a[t])&&(n=E.a[t]),n)}function We(e){return"rgba(0, 0, 0, 0)"===e||"transparent"===e}function Ye(e){e.clone().show().appendTo(C.$hcont);var t=C.$hcont.height();return C.$hcont.empty(),t}function $e(e,t,n){var i=new b.a.Image;i.onload=function(){var e=[0,0],i=b.a.document.createElement("canvas"),o=i.getContext("2d");i.width=t,i.height=t,e=this.width>this.height?[this.width-this.height,0]:[0,this.height-this.width],o.fillStyle="#fff",o.fillRect(0,0,t,t),o.drawImage(this,e[0]/2,e[1]/2,this.width-e[0],this.height-e[1],0,0,t,t),n(i.toDataURL("image/jpeg"))},i.src=e}function Je(e,t){if(e&&"mailto:"===e.toString().substr(0,7).toLowerCase()){if(!t)return!0;var i,o=[],a=null,r=null,s=(e=e.toString().substr(7)).replace(/\?.+$/,""),c=e.replace(/^[^?]*\?/,""),l=n(83).default;return i=Z(c),P(i.to)?o=l.parseEmailLine(s):(o=l.parseEmailLine($(s+","+i.to)),o=p()(S.a).call(S.a,h()(o).call(o,(function(e,t){return t&&(e[t.email]&&e[t.email].name||(e[t.email]=t)),e}),{}))),P(i.cc)||(a=l.parseEmailLine($(i.cc))),P(i.bcc)||(r=l.parseEmailLine($(i.bcc))),n(7).showScreenPopup(t,[A.ComposeType.Empty,null,o,a,r,P(i.subject)?null:K($(i.subject)),P(i.body)?null:Ne(K($(i.body)))]),!0}return!1}function Xe(e){v()((function(){return e()}))}var Ze=S.a.debounce((function(e){P(e)||_(e)?C.$win.resize():r()((function(){C.$win.resize()}),e)}),50);function Qe(){Ze()}var et=b.a.String.substr;"b"!=="ab".substr(-1)&&(et=function(e,t,n){return t=0>t?e.length+t:t,e.substr(t,n)},b.a.String.substr=et)},function(e,t){e.exports=window._},function(e,t){e.exports=window},function(e,t,n){"use strict";n.r(t),n.d(t,"settingsGet",(function(){return c})),n.d(t,"settingsSet",(function(){return l})),n.d(t,"appSettingsGet",(function(){return u})),n.d(t,"capa",(function(){return d}));var i=n(4),o=n.n(i),a=n(2),r=o.a.__rlah_data()||null,s=(r=Object(a.isNormal)(r)?r:{}).System||null;function c(e){return Object(a.isUnd)(r[e])?null:r[e]}function l(e,t){r[e]=t}function u(e){return Object(a.isUnd)(s[e])?null:s[e]}function d(e){var t=c("Capa");return Object(a.isArray)(t)&&Object(a.isNormal)(e)&&-1<Object(a.inArray)(e,t)}s=Object(a.isNormal)(s)?s:{}},function(e,t,n){"use strict";n.r(t),n.d(t,"$win",(function(){return m})),n.d(t,"$doc",(function(){return b})),n.d(t,"$html",(function(){return g})),n.d(t,"$body",(function(){return v})),n.d(t,"$div",(function(){return y})),n.d(t,"$hcont",(function(){return S})),n.d(t,"startMicrotime",(function(){return O})),n.d(t,"community",(function(){return w})),n.d(t,"dropdownVisibility",(function(){return T})),n.d(t,"useKeyboardShortcuts",(function(){return C})),n.d(t,"sUserAgent",(function(){return A})),n.d(t,"bIE",(function(){return E})),n.d(t,"bChrome",(function(){return j})),n.d(t,"bSafari",(function(){return F})),n.d(t,"bMobileDevice",(function(){return R})),n.d(t,"bDisableNanoScroll",(function(){return N})),n.d(t,"bAnimationSupported",(function(){return I})),n.d(t,"bXMLHttpRequestSupported",(function(){return L})),n.d(t,"bIsHttps",(function(){return P})),n.d(t,"htmlEditorDefaultConfig",(function(){return _})),n.d(t,"htmlEditorLangsMap",(function(){return M})),n.d(t,"bAllowPdfPreview",(function(){return D})),n.d(t,"VIEW_MODELS",(function(){return k})),n.d(t,"moveAction",(function(){return x})),n.d(t,"leftPanelDisabled",(function(){return U})),n.d(t,"leftPanelType",(function(){return H})),n.d(t,"leftPanelWidth",(function(){return G})),n.d(t,"popupVisibilityNames",(function(){return B})),n.d(t,"popupVisibility",(function(){return V})),n.d(t,"keyScopeReal",(function(){return K})),n.d(t,"keyScopeFake",(function(){return q})),n.d(t,"keyScope",(function(){return z})),n.d(t,"data",(function(){return W}));n(315);var i=n(12),o=n.n(i),a=n(4),r=n.n(a),s=n(3),c=n.n(s),l=n(8),u=n.n(l),d=n(20),p=n.n(d),f=n(1),h=n(0),m=u()(r.a);m.__sizes=[0,0];var b=u()(r.a.document),g=u()("html"),v=u()("body"),y=u()("<div></div>"),S=u()("<div></div>");S.attr("area","hidden").css({position:"absolute",left:-5e3}).appendTo(v);var O=(new r.a.Date).getTime(),w=!0,T=f.a.observable(!1).extend({rateLimit:0}),C=f.a.observable(!0),A="navigator"in r.a&&"userAgent"in r.a.navigator&&r.a.navigator.userAgent.toLowerCase()||"",E=-1<A.indexOf("msie"),j=-1<A.indexOf("chrome"),F=!j&&-1<A.indexOf("safari"),R=/android/i.test(A)||/iphone/i.test(A)||/ipod/i.test(A)||/ipad/i.test(A)||/blackberry/i.test(A),N=R,I=!R&&g.hasClass("csstransitions")&&g.hasClass("cssanimations"),L=!!r.a.XMLHttpRequest,P=!(!r.a.document||!r.a.document.location)&&"https:"===r.a.document.location.protocol,_={title:!1,stylesSet:!1,customConfig:"",contentsCss:"",toolbarGroups:[{name:"spec"},{name:"styles"},{name:"basicstyles",groups:["basicstyles","cleanup","bidi"]},{name:"colors"},R?{}:{name:"paragraph",groups:["list","indent","blocks","align"]},{name:"links"},{name:"insert"},{name:"document",groups:["mode","document","doctools"]},{name:"others"}],removePlugins:"liststyle",removeButtons:"Format,Undo,Redo,Cut,Copy,Paste,Anchor,Strike,Subscript,Superscript,Image,SelectAll,Source",removeDialogTabs:"link:advanced;link:target;image:advanced;images:advanced",extraPlugins:"plain,signature",allowedContent:!0,extraAllowedContent:!0,fillEmptyBlocks:!1,ignoreEmptyParagraph:!0,disableNativeSpellChecker:!1,colorButton_enableAutomatic:!1,colorButton_enableMore:!0,font_defaultLabel:"Arial",fontSize_defaultLabel:"13",fontSize_sizes:"10/10px;12/12px;13/13px;14/14px;16/16px;18/18px;20/20px;24/24px;28/28px;36/36px;48/48px"},M={ar_sa:"ar-sa",bg_bg:"bg",cs_CZ:"cs",de_de:"de",el_gr:"el",es_es:"es",et_ee:"et",fr_fr:"fr",hu_hu:"hu",is_is:"is",it_it:"it",ja_jp:"ja",ko_kr:"ko",lt_lt:"lt",lv_lv:"lv",fa_ir:"fa",nb_no:"nb",nl_nl:"nl",pl_pl:"pl",pt_br:"pt-br",pt_pt:"pt",ro_ro:"ro",ru_ru:"ru",sk_sk:"sk",sl_si:"sl",sv_se:"sv",tr_tr:"tr",uk_ua:"uk",zh_cn:"zh-cn",zh_tw:"zh"},D=!R;D&&r.a.navigator&&r.a.navigator.mimeTypes&&((D=!!o()(c.a).call(c.a,r.a.navigator.mimeTypes,(function(e){return e&&"application/pdf"===e.type})))||(D=void 0!==r.a.navigator.mimeTypes["application/pdf"]));var k={settings:[],"settings-removed":[],"settings-disabled":[]},x=f.a.observable(!1),U=f.a.observable(!1),H=f.a.observable(""),G=f.a.observable(0);U.subscribe((function(e){e&&x()&&x(!1)})),x.subscribe((function(e){e&&U()&&U(!1)}));var B=f.a.observableArray([]),V=f.a.computed((function(){return 0<B().length}));V.subscribe((function(e){g.toggleClass("rl-modal",e)}));var K=f.a.observable(h.KeyState.All),q=f.a.observable(h.KeyState.All),z=f.a.computed({read:function(){return q()},write:function(e){h.KeyState.Menu!==e&&(h.KeyState.Compose===e?p.a.filter=function(){return C()}:p.a.filter=function(e){if(C()){var t=e.target||e.srcElement,n=t?t.tagName.toUpperCase():"";return!("INPUT"===n||"SELECT"===n||"TEXTAREA"===n||t&&"DIV"===n&&("editorHtmlArea"===t.className||"true"==""+t.contentEditable))}return!1},q(e),T()&&(e=h.KeyState.Menu)),K(e)}});K.subscribe((function(e){p.a.setScope(e)})),T.subscribe((function(e){e?z(h.KeyState.Menu):h.KeyState.Menu===p.a.getScope()&&z(q())}));var W={__APP__:null,iAjaxErrorCount:0,iTokenErrorCount:0,aBootstrapDropdowns:[],iMessageBodyCacheCount:0,bUnload:!1}},function(e,t,n){"use strict";n.r(t),n.d(t,"ViewType",(function(){return O})),n.d(t,"hideLoading",(function(){return w})),n.d(t,"createCommand",(function(){return T})),n.d(t,"addSettingsViewModel",(function(){return C})),n.d(t,"removeSettingsViewModel",(function(){return A})),n.d(t,"disableSettingsViewModel",(function(){return E})),n.d(t,"routeOff",(function(){return j})),n.d(t,"routeOn",(function(){return F})),n.d(t,"screen",(function(){return R})),n.d(t,"getScreenPopup",(function(){return N})),n.d(t,"hideScreenPopup",(function(){return I})),n.d(t,"vmRunHook",(function(){return L})),n.d(t,"buildViewModel",(function(){return P})),n.d(t,"showScreenPopup",(function(){return _})),n.d(t,"warmUpScreenPopup",(function(){return M})),n.d(t,"isPopupVisible",(function(){return D})),n.d(t,"screenOnRoute",(function(){return k})),n.d(t,"startScreens",(function(){return x})),n.d(t,"setHash",(function(){return U})),n.d(t,"commandDecorator",(function(){return B})),n.d(t,"command",(function(){return B})),n.d(t,"viewDecorator",(function(){return H})),n.d(t,"view",(function(){return H})),n.d(t,"viewModel",(function(){return H})),n.d(t,"popupDecorator",(function(){return G})),n.d(t,"popup",(function(){return G})),n.d(t,"settingsMenuKeysHandler",(function(){return V}));var i=n(28),o=n.n(i),a=(n(48),n(45),n(225),n(3)),r=n.n(a),s=n(8),c=n.n(s),l=n(1),u=n(63),d=n.n(u),p=n(177),f=n.n(p),h=n(0),m=n(36),b=n(6),g=n(2),v=null,y="",S={},O={Popup:"Popups",Left:"Left",Right:"Right",Center:"Center"};function w(){c()("#rl-content").addClass("rl-content-show"),c()("#rl-loading").hide().remove()}function T(e,t){return void 0===t&&(t=!0),Object(g.createCommandLegacy)(null,e,t)}function C(e,t,n,i,o){void 0===o&&(o=!1),e.__rlSettingsData={Label:n,Template:t,Route:i,IsDefault:!!o},b.VIEW_MODELS.settings.push(e)}function A(e){b.VIEW_MODELS["settings-removed"].push(e)}function E(e){b.VIEW_MODELS["settings-disabled"].push(e)}function j(){d.a.changed.active=!1}function F(){d.a.changed.active=!0}function R(e){return""===e||Object(g.isUnd)(S[e])?null:S[e]}function N(e){var t=null;return e&&(t=e,e.default&&(t=e.default)),t}function I(e){var t=N(e);t&&t.__vm&&t.__dom&&t.__vm.modalVisibility(!1)}function L(e,t,n){void 0===n&&(n=null),r.a.each(t.__names,(function(i){Object(m.f)(e,[i,t.__vm,n])}))}function P(e,t){if(e&&!e.__builded){var n=null,i=new e(t),o=e.__type||"",a=o?c()("#rl-content #rl-"+o.toLowerCase()):null;e.__builded=!0,e.__vm=i,i.onShowTrigger=l.a.observable(!1),i.onHideTrigger=l.a.observable(!1),i.viewModelName=e.__name,i.viewModelNames=e.__names,i.viewModelTemplateID=e.__templateID,i.viewModelPosition=e.__type,a&&1===a.length?((n=c()("<div></div>").addClass("rl-view-model").addClass("RL-"+i.viewModelTemplateID).hide()).appendTo(a),i.viewModelDom=n,e.__dom=n,O.Popup===o&&(i.cancelCommand=i.closeCommand=T((function(){I(e)})),i.modalVisibility.subscribe((function(t){t?(i.viewModelDom.show(),i.storeAndSetKeyScope(),b.popupVisibilityNames.push(i.viewModelName),i.viewModelDom.css("z-index",3e3+Object(b.popupVisibilityNames)().length+10),i.onShowTrigger&&i.onShowTrigger(!i.onShowTrigger()),Object(g.delegateRun)(i,"onShowWithDelay",[],500)):(Object(g.delegateRun)(i,"onHide"),Object(g.delegateRun)(i,"onHideWithDelay",[],500),i.onHideTrigger&&i.onHideTrigger(!i.onHideTrigger()),i.restoreKeyScope(),L("view-model-on-hide",e),b.popupVisibilityNames.remove(i.viewModelName),i.viewModelDom.css("z-index",2e3),r.a.delay((function(){return i.viewModelDom.hide()}),300))}))),L("view-model-pre-build",e,n),l.a.applyBindingAccessorsToNode(n[0],{translatorInit:!0,template:function(){return{name:i.viewModelTemplateID}}},i),Object(g.delegateRun)(i,"onBuild",[n]),i&&O.Popup===o&&i.registerPopupKeyDown(),L("view-model-post-build",e,n)):Object(g.log)("Cannot find view model position: "+o)}return e?e.__vm:null}function _(e,t){void 0===t&&(t=[]);var n=N(e);n&&(P(n),n.__vm&&n.__dom&&(Object(g.delegateRun)(n.__vm,"onBeforeShow",t||[]),n.__vm.modalVisibility(!0),Object(g.delegateRun)(n.__vm,"onShow",t||[]),L("view-model-on-show",n,t||[])))}function M(e){var t=N(e);t&&(P(t),t.__vm&&t.__dom&&Object(g.delegateRun)(t.__vm,"onWarmUp"))}function D(e){var t=N(e);return!(!t||!t.__vm)&&t.__vm.modalVisibility()}function k(e,t){var n=null,i=!1,o=null;""===Object(g.pString)(e)&&(e=y),""!==e&&((n=R(e))||(n=R(y))&&(t=e+"/"+t,e=y),n&&n.__started&&(i=v&&n===v,n.__builded||(n.__builded=!0,Object(g.isNonEmptyArray)(n.viewModels())&&r.a.each(n.viewModels(),(function(e){P(e,n)})),Object(g.delegateRun)(n,"onBuild")),r.a.defer((function(){v&&!i&&(Object(g.delegateRun)(v,"onHide"),Object(g.delegateRun)(v,"onHideWithDelay",[],500),v.onHideTrigger&&v.onHideTrigger(!v.onHideTrigger()),Object(g.isNonEmptyArray)(v.viewModels())&&r.a.each(v.viewModels(),(function(e){e.__vm&&e.__dom&&O.Popup!==e.__vm.viewModelPosition&&(e.__dom.hide(),e.__vm.viewModelVisibility(!1),Object(g.delegateRun)(e.__vm,"onHide"),Object(g.delegateRun)(e.__vm,"onHideWithDelay",[],500),e.__vm.onHideTrigger&&e.__vm.onHideTrigger(!e.__vm.onHideTrigger()))}))),(v=n)&&!i&&(Object(g.delegateRun)(v,"onShow"),v.onShowTrigger&&v.onShowTrigger(!v.onShowTrigger()),Object(m.f)("screen-on-show",[v.screenName(),v]),Object(g.isNonEmptyArray)(v.viewModels())&&r.a.each(v.viewModels(),(function(e){e.__vm&&e.__dom&&O.Popup!==e.__vm.viewModelPosition&&(Object(g.delegateRun)(e.__vm,"onBeforeShow"),e.__dom.show(),e.__vm.viewModelVisibility(!0),Object(g.delegateRun)(e.__vm,"onShow"),e.__vm.onShowTrigger&&e.__vm.onShowTrigger(!e.__vm.onShowTrigger()),Object(g.delegateRun)(e.__vm,"onShowWithDelay",[],200),L("view-model-on-show",e))}))),(o=n&&n.__cross?n.__cross():null)&&o.parse(t)}))))}function x(e){r.a.each(e,(function(e){if(e){var t=new e,n=t?t.screenName():"";t&&""!==n&&(""===y&&(y=n),S[n]=t)}})),r.a.each(S,(function(e){e&&!e.__started&&e.__start&&(e.__started=!0,e.__start(),Object(m.f)("screen-pre-start",[e.screenName(),e]),Object(g.delegateRun)(e,"onStart"),Object(m.f)("screen-post-start",[e.screenName(),e]))}));var t=f.a.create();t.addRoute(/^([a-zA-Z0-9-]*)\/?(.*)$/,k),d.a.initialized.add(t.parse,t),d.a.changed.add(t.parse,t),d.a.init(),r.a.delay((function(){return b.$html.removeClass("rl-started-trigger").addClass("rl-started")}),100),r.a.delay((function(){return b.$html.addClass("rl-started-delay")}),200)}function U(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1),e="/"===(e="#"===e.substr(0,1)?e.substr(1):e).substr(0,1)?e.substr(1):e;var i=n?"replaceHash":"setHash";t?(d.a.changed.active=!1,d.a[i](e),d.a.changed.active=!0):(d.a.changed.active=!0,d.a[i](e),d.a.setHash(e))}function H(e){var t=e.name,n=e.type,i=e.templateID;return function(e){e&&(t&&(Object(g.isArray)(t)?e.__names=t:e.__names=[t],e.__name=e.__names[0]),n&&(e.__type=n),i&&(e.__templateID=i))}}function G(e){var t=e.name,n=e.templateID;return H({name:t,type:O.Popup,templateID:n})}function B(e){return void 0===e&&(e=!0),function(t,n,i){if(!n||!n.match(/Command$/))throw new Error('name "'+n+'" should end with Command suffix');var o=i.value||i.initializer(),a=Object(g.isFunc)(e)?e:function(){return!!e};return i.value=function(){if(a.call(this,this)){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];o.apply(this,t)}return!1},i.value.__realCanExecute=a,i.value.isCommand=!0,i}}function V(e){return r.a.throttle((function(t,n){var i=n&&"up"===n.shortcut;if(t&&e.length){var a=e.index(o()(e).call(e,".selected"));i&&0<a?a-=1:!i&&a<e.length-1&&(a+=1);var r=e.eq(a).attr("href");r&&U(r,!1,!0)}}),h.Magics.Time200ms)}},function(e,t){e.exports=window.jQuery},function(e,t,n){"use strict";n.r(t),n.d(t,"trigger",(function(){return S})),n.d(t,"i18n",(function(){return O})),n.d(t,"i18nToNodes",(function(){return w})),n.d(t,"initNotificationLanguage",(function(){return T})),n.d(t,"initOnStartOrLangChange",(function(){return C})),n.d(t,"getNotification",(function(){return A})),n.d(t,"getNotificationFromResponse",(function(){return E})),n.d(t,"getUploadErrorDescByCode",(function(){return j})),n.d(t,"reload",(function(){return F}));var i=n(62),o=n.n(i),a=(n(45),n(59),n(152),n(4)),r=n.n(a),s=n(3),c=n.n(s),l=n(8),u=n.n(l),d=n(1),p=n(0),f=n(2),h=n(6),m=n(61),b=n(15),g=r.a.rainloopI18N||{},v={},y=[[p.Notification.InvalidToken,"NOTIFICATIONS/INVALID_TOKEN"],[p.Notification.InvalidToken,"NOTIFICATIONS/INVALID_TOKEN"],[p.Notification.AuthError,"NOTIFICATIONS/AUTH_ERROR"],[p.Notification.AccessError,"NOTIFICATIONS/ACCESS_ERROR"],[p.Notification.ConnectionError,"NOTIFICATIONS/CONNECTION_ERROR"],[p.Notification.CaptchaError,"NOTIFICATIONS/CAPTCHA_ERROR"],[p.Notification.SocialFacebookLoginAccessDisable,"NOTIFICATIONS/SOCIAL_FACEBOOK_LOGIN_ACCESS_DISABLE"],[p.Notification.SocialTwitterLoginAccessDisable,"NOTIFICATIONS/SOCIAL_TWITTER_LOGIN_ACCESS_DISABLE"],[p.Notification.SocialGoogleLoginAccessDisable,"NOTIFICATIONS/SOCIAL_GOOGLE_LOGIN_ACCESS_DISABLE"],[p.Notification.DomainNotAllowed,"NOTIFICATIONS/DOMAIN_NOT_ALLOWED"],[p.Notification.AccountNotAllowed,"NOTIFICATIONS/ACCOUNT_NOT_ALLOWED"],[p.Notification.AccountTwoFactorAuthRequired,"NOTIFICATIONS/ACCOUNT_TWO_FACTOR_AUTH_REQUIRED"],[p.Notification.AccountTwoFactorAuthError,"NOTIFICATIONS/ACCOUNT_TWO_FACTOR_AUTH_ERROR"],[p.Notification.CouldNotSaveNewPassword,"NOTIFICATIONS/COULD_NOT_SAVE_NEW_PASSWORD"],[p.Notification.CurrentPasswordIncorrect,"NOTIFICATIONS/CURRENT_PASSWORD_INCORRECT"],[p.Notification.NewPasswordShort,"NOTIFICATIONS/NEW_PASSWORD_SHORT"],[p.Notification.NewPasswordWeak,"NOTIFICATIONS/NEW_PASSWORD_WEAK"],[p.Notification.NewPasswordForbidden,"NOTIFICATIONS/NEW_PASSWORD_FORBIDDENT"],[p.Notification.ContactsSyncError,"NOTIFICATIONS/CONTACTS_SYNC_ERROR"],[p.Notification.CantGetMessageList,"NOTIFICATIONS/CANT_GET_MESSAGE_LIST"],[p.Notification.CantGetMessage,"NOTIFICATIONS/CANT_GET_MESSAGE"],[p.Notification.CantDeleteMessage,"NOTIFICATIONS/CANT_DELETE_MESSAGE"],[p.Notification.CantMoveMessage,"NOTIFICATIONS/CANT_MOVE_MESSAGE"],[p.Notification.CantCopyMessage,"NOTIFICATIONS/CANT_MOVE_MESSAGE"],[p.Notification.CantSaveMessage,"NOTIFICATIONS/CANT_SAVE_MESSAGE"],[p.Notification.CantSendMessage,"NOTIFICATIONS/CANT_SEND_MESSAGE"],[p.Notification.InvalidRecipients,"NOTIFICATIONS/INVALID_RECIPIENTS"],[p.Notification.CantSaveFilters,"NOTIFICATIONS/CANT_SAVE_FILTERS"],[p.Notification.CantGetFilters,"NOTIFICATIONS/CANT_GET_FILTERS"],[p.Notification.FiltersAreNotCorrect,"NOTIFICATIONS/FILTERS_ARE_NOT_CORRECT"],[p.Notification.CantCreateFolder,"NOTIFICATIONS/CANT_CREATE_FOLDER"],[p.Notification.CantRenameFolder,"NOTIFICATIONS/CANT_RENAME_FOLDER"],[p.Notification.CantDeleteFolder,"NOTIFICATIONS/CANT_DELETE_FOLDER"],[p.Notification.CantDeleteNonEmptyFolder,"NOTIFICATIONS/CANT_DELETE_NON_EMPTY_FOLDER"],[p.Notification.CantSubscribeFolder,"NOTIFICATIONS/CANT_SUBSCRIBE_FOLDER"],[p.Notification.CantUnsubscribeFolder,"NOTIFICATIONS/CANT_UNSUBSCRIBE_FOLDER"],[p.Notification.CantSaveSettings,"NOTIFICATIONS/CANT_SAVE_SETTINGS"],[p.Notification.CantSavePluginSettings,"NOTIFICATIONS/CANT_SAVE_PLUGIN_SETTINGS"],[p.Notification.DomainAlreadyExists,"NOTIFICATIONS/DOMAIN_ALREADY_EXISTS"],[p.Notification.CantInstallPackage,"NOTIFICATIONS/CANT_INSTALL_PACKAGE"],[p.Notification.CantDeletePackage,"NOTIFICATIONS/CANT_DELETE_PACKAGE"],[p.Notification.InvalidPluginPackage,"NOTIFICATIONS/INVALID_PLUGIN_PACKAGE"],[p.Notification.UnsupportedPluginPackage,"NOTIFICATIONS/UNSUPPORTED_PLUGIN_PACKAGE"],[p.Notification.LicensingServerIsUnavailable,"NOTIFICATIONS/LICENSING_SERVER_IS_UNAVAILABLE"],[p.Notification.LicensingExpired,"NOTIFICATIONS/LICENSING_EXPIRED"],[p.Notification.LicensingBanned,"NOTIFICATIONS/LICENSING_BANNED"],[p.Notification.DemoSendMessageError,"NOTIFICATIONS/DEMO_SEND_MESSAGE_ERROR"],[p.Notification.DemoAccountError,"NOTIFICATIONS/DEMO_ACCOUNT_ERROR"],[p.Notification.AccountAlreadyExists,"NOTIFICATIONS/ACCOUNT_ALREADY_EXISTS"],[p.Notification.AccountDoesNotExist,"NOTIFICATIONS/ACCOUNT_DOES_NOT_EXIST"],[p.Notification.MailServerError,"NOTIFICATIONS/MAIL_SERVER_ERROR"],[p.Notification.InvalidInputArgument,"NOTIFICATIONS/INVALID_INPUT_ARGUMENT"],[p.Notification.UnknownNotification,"NOTIFICATIONS/UNKNOWN_ERROR"],[p.Notification.UnknownError,"NOTIFICATIONS/UNKNOWN_ERROR"]],S=d.a.observable(!1);function O(e,t,n){var i="",o=g[e];if(Object(f.isUnd)(o)&&(o=Object(f.isUnd)(n)?e:n),!Object(f.isUnd)(t)&&!Object(f.isNull)(t))for(i in t)Object(f.has)(t,i)&&(o=o.replace("%"+i+"%",t[i]));return o}function w(e,t){void 0===t&&(t=!1),c.a.defer((function(){u()("[data-i18n]",e).each((function(e,t){!function(e){var t=u()(e),n=t.data("i18n");if(n)if("["===n.substr(0,1))switch(n.substr(0,6)){case"[html]":t.html(O(n.substr(6)));break;case"[place":t.attr("placeholder",O(n.substr(13)));break;case"[title":t.attr("title",O(n.substr(7)))}else t.text(O(n))}(t)})),t&&h.bAnimationSupported&&u()(".i18n-animation[data-i18n]",e).letterfx({fx:"fall fade",backwards:!1,timing:50,fx_duration:"50ms",letter_end:"restore",element_end:"restore"})}))}function T(){y.forEach((function(e){v[e[0]]=O(e[1])}))}function C(e,t){void 0===t&&(t=null),e&&e(),t?S.subscribe((function(){e&&e(),t&&t()})):e&&S.subscribe(e)}function A(e,t,n){return void 0===t&&(t=""),void 0===n&&(n=null),e=r.a.parseInt(e,10)||0,p.Notification.ClientViewError===e&&t?t:(n=n&&r.a.parseInt(n,10)||0,Object(f.isUnd)(v[e])?n&&Object(f.isUnd)(v[n])?v[n]:"":v[e])}function E(e,t){return void 0===t&&(t=p.Notification.UnknownNotification),e&&e.ErrorCode?A(Object(f.pInt)(e.ErrorCode),e.ErrorMessage||""):A(t)}function j(e){var t="";switch(r.a.parseInt(e,10)||0){case p.UploadErrorCode.FileIsTooBig:t=O("UPLOAD/ERROR_FILE_IS_TOO_BIG");break;case p.UploadErrorCode.FilePartiallyUploaded:t=O("UPLOAD/ERROR_FILE_PARTIALLY_UPLOADED");break;case p.UploadErrorCode.FileNoUploaded:t=O("UPLOAD/ERROR_NO_FILE_UPLOADED");break;case p.UploadErrorCode.MissingTempFolder:t=O("UPLOAD/ERROR_MISSING_TEMP_FOLDER");break;case p.UploadErrorCode.FileOnSaveingError:t=O("UPLOAD/ERROR_ON_SAVING_FILE");break;case p.UploadErrorCode.FileType:t=O("UPLOAD/ERROR_FILE_TYPE");break;default:t=O("UPLOAD/ERROR_UNKNOWN")}return t}function F(e,t){var n=Object(f.microtime)();return h.$html.addClass("rl-changing-language"),new o.a((function(i,o){u.a.ajax({url:Object(b.n)(t,e),dataType:"script",cache:!0}).then((function(){c.a.delay((function(){r.a.rainloopI18N&&(g=r.a.rainloopI18N||{},w(r.a.document,!0),Object(m.reload)(),S(!S())),r.a.rainloopI18N=null;var e=-1<Object(f.inArray)((t||"").toLowerCase(),["ar","ar_sa","he","he_he","ur","ur_ir"]);h.$html.removeClass("rl-changing-language").removeClass("rl-rtl rl-ltr").addClass(e?"rl-rtl":"rl-ltr"),i()}),500<Object(f.microtime)()-n?1:500)}),(function(){h.$html.removeClass("rl-changing-language"),r.a.rainloopI18N=null,o()}))}))}h.$html.addClass("rl-"+(h.$html.attr("dir")||"ltr"))},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(294),o=n.n(i),a=n(295);function r(e,t){e.prototype=o()(t.prototype),e.prototype.constructor=e,Object(a.a)(e,t)}},function(e,t,n){"use strict";var i=n(12),o=n.n(i),a=n(17),r=n.n(a),s=n(1),c=n(3),l=n.n(c),u=n(5),d=n(0),p=n(24),f=n(2),h=n(14),m=n(61),b=function(){function e(){this.displaySpecSetting=s.a.observable(!0),this.sentFolder=s.a.observable(""),this.draftFolder=s.a.observable(""),this.spamFolder=s.a.observable(""),this.trashFolder=s.a.observable(""),this.archiveFolder=s.a.observable(""),this.namespace="",this.folderList=s.a.observableArray([]),this.folderList.optimized=s.a.observable(!1),this.folderList.error=s.a.observable(""),this.foldersLoading=s.a.observable(!1),this.foldersCreating=s.a.observable(!1),this.foldersDeleting=s.a.observable(!1),this.foldersRenaming=s.a.observable(!1),this.foldersInboxUnreadCount=s.a.observable(0),this.currentFolder=s.a.observable(null).extend({toggleSubscribeProperty:[this,"selected"]}),this.sieveAllowFileintoInbox=!!Object(u.settingsGet)("SieveAllowFileintoInbox"),this.computers(),this.subscribers()}var t=e.prototype;return t.computers=function(){var e=this;this.draftFolderNotEnabled=s.a.computed((function(){return""===e.draftFolder()||p.r===e.draftFolder()})),this.foldersListWithSingleInboxRootFolder=s.a.computed((function(){return!o()(l.a).call(l.a,e.folderList(),(function(e){return e&&!e.isSystemFolder()&&e.visible()}))})),this.currentFolderFullNameRaw=s.a.computed((function(){return e.currentFolder()?e.currentFolder().fullNameRaw:""})),this.currentFolderFullName=s.a.computed((function(){return e.currentFolder()?e.currentFolder().fullName:""})),this.currentFolderFullNameHash=s.a.computed((function(){return e.currentFolder()?e.currentFolder().fullNameHash:""})),this.foldersChanging=s.a.computed((function(){var t=e.foldersLoading(),n=e.foldersCreating(),i=e.foldersDeleting(),o=e.foldersRenaming();return t||n||i||o})),this.folderListSystemNames=s.a.computed((function(){var t=[Object(h.h)()],n=e.folderList(),i=e.sentFolder(),o=e.draftFolder(),a=e.spamFolder(),r=e.trashFolder(),s=e.archiveFolder();return Object(f.isArray)(n)&&0<n.length&&(""!==i&&p.r!==i&&t.push(i),""!==o&&p.r!==o&&t.push(o),""!==a&&p.r!==a&&t.push(a),""!==r&&p.r!==r&&t.push(r),""!==s&&p.r!==s&&t.push(s)),t})),this.folderListSystem=s.a.computed((function(){return l.a.compact(r()(l.a).call(l.a,e.folderListSystemNames(),(function(e){return Object(h.e)(e)})))})),this.folderMenuForMove=s.a.computed((function(){return Object(f.folderListOptionsBuilder)(e.folderListSystem(),e.folderList(),[e.currentFolderFullNameRaw()],null,null,null,null,(function(e){return e?e.localName():""}))})),this.folderMenuForFilters=s.a.computed((function(){return Object(f.folderListOptionsBuilder)(e.folderListSystem(),e.folderList(),[e.sieveAllowFileintoInbox?"":"INBOX"],[["",""]],null,null,null,(function(e){return e?e.localName():""}))}))},t.subscribers=function(){var e=function(e){return function(){var t=Object(h.e)(e());t&&t.type(d.FolderType.User)}},t=function(e){return function(t){var n=Object(h.e)(t);n&&n.type(e)}};this.sentFolder.subscribe(e(this.sentFolder),this,"beforeChange"),this.draftFolder.subscribe(e(this.draftFolder),this,"beforeChange"),this.spamFolder.subscribe(e(this.spamFolder),this,"beforeChange"),this.trashFolder.subscribe(e(this.trashFolder),this,"beforeChange"),this.archiveFolder.subscribe(e(this.archiveFolder),this,"beforeChange"),this.sentFolder.subscribe(t(d.FolderType.SentItems),this),this.draftFolder.subscribe(t(d.FolderType.Draft),this),this.spamFolder.subscribe(t(d.FolderType.Spam),this),this.trashFolder.subscribe(t(d.FolderType.Trash),this),this.archiveFolder.subscribe(t(d.FolderType.Archive),this)},t.getNextFolderNames=function(){var e=[],t=Object(m.momentNowUnix)(),n=t-300,i=[],a=Object(h.h)();return function e(t){l.a.each(t,(function(t){t&&a!==t.fullNameRaw&&t.selectable&&t.existen&&n>t.interval&&(t.isSystemFolder()||t.subScribed()&&t.checkable())&&i.push([t.interval,t.fullNameRaw]),t&&0<t.subFolders().length&&e(t.subFolders())}))}(this.folderList()),i.sort((function(e,t){return e[0]<t[0]?-1:e[0]>t[0]?1:0})),o()(l.a).call(l.a,i,(function(n){var i=Object(h.e)(n[1]);return i&&(i.interval=t,e.push(n[1])),5<=e.length})),l.a.uniq(e)},e}();t.a=new b},function(e,t,n){e.exports=n(334)},function(e,t,n){"use strict";var i=n(28),o=n.n(i),a=n(12),r=n.n(a),s=n(17),c=n.n(s),l=(n(86),n(119),n(45),n(59),n(77),n(4)),u=n.n(l),d=n(3),p=n.n(d),f=n(1),h=n(8),m=n.n(h),b=n(0),g=n(2),v=n(14),y=n(24),S=n(6),O=n(15),w=n(9),T=n(61),C=n(64),A=n(321),E=n(7),j=n(27),F=n(46),R=n(11),N=n(41),I=n(35),L=n(124),P=n(21),_=n(16),M=function(){function e(){this.staticMessage=new A.a,this.messageList=f.a.observableArray([]).extend({rateLimit:0}),this.messageListCount=f.a.observable(0),this.messageListSearch=f.a.observable(""),this.messageListThreadUid=f.a.observable(""),this.messageListPage=f.a.observable(1),this.messageListPageBeforeThread=f.a.observable(1),this.messageListError=f.a.observable(""),this.messageListEndFolder=f.a.observable(""),this.messageListEndSearch=f.a.observable(""),this.messageListEndThreadUid=f.a.observable(""),this.messageListEndPage=f.a.observable(1),this.messageListLoading=f.a.observable(!1),this.messageListIsNotCompleted=f.a.observable(!1),this.messageListCompleteLoadingThrottle=f.a.observable(!1).extend({throttle:200}),this.messageListCompleteLoadingThrottleForAnimation=f.a.observable(!1).extend({specialThrottle:700}),this.messageListDisableAutoSelect=f.a.observable(!1).extend({falseTimeout:500}),this.selectorMessageSelected=f.a.observable(null),this.selectorMessageFocused=f.a.observable(null),this.message=f.a.observable(null),this.message.viewTrigger=f.a.observable(!1),this.messageError=f.a.observable(""),this.messageCurrentLoading=f.a.observable(!1),this.messageLoadingThrottle=f.a.observable(!1).extend({throttle:b.Magics.Time50ms}),this.messageFullScreenMode=f.a.observable(!1),this.messagesBodiesDom=f.a.observable(null),this.messageActiveDom=f.a.observable(null),this.computers(),this.subscribers(),this.onMessageResponse=p.a.bind(this.onMessageResponse,this),this.purgeMessageBodyCacheThrottle=p.a.throttle(this.purgeMessageBodyCache,b.Magics.Time30s)}var t=e.prototype;return t.computers=function(){var e=this;this.messageLoading=f.a.computed((function(){return e.messageCurrentLoading()})),this.messageListEndHash=f.a.computed((function(){return e.messageListEndFolder()+"|"+e.messageListEndSearch()+"|"+e.messageListEndThreadUid()+"|"+e.messageListEndPage()})),this.messageListPageCount=f.a.computed((function(){var t=u.a.Math.ceil(e.messageListCount()/I.a.messagesPerPage());return 0>=t?1:t})),this.mainMessageListSearch=f.a.computed({read:this.messageListSearch,write:function(t){Object(E.setHash)(Object(O.o)(R.a.currentFolderFullNameHash(),1,Object(g.trim)(t.toString()),e.messageListThreadUid()))}}),this.messageListCompleteLoading=f.a.computed((function(){var t=e.messageListLoading(),n=e.messageListIsNotCompleted();return t||n})),this.isMessageSelected=f.a.computed((function(){return null!==e.message()})),this.messageListChecked=f.a.computed((function(){return o()(p.a).call(p.a,e.messageList(),(function(e){return e.checked()}))})).extend({rateLimit:0}),this.hasCheckedMessages=f.a.computed((function(){return 0<e.messageListChecked().length})).extend({rateLimit:0}),this.messageListCheckedOrSelected=f.a.computed((function(){var t=e.messageListChecked(),n=e.selectorMessageSelected(),i=e.selectorMessageFocused();return t.length?p.a.union(t,n?[n]:[]):n?[n]:i?[i]:[]})),this.messageListCheckedOrSelectedUidsWithSubMails=f.a.computed((function(){var t=[];return p.a.each(e.messageListCheckedOrSelected(),(function(e){e&&(t.push(e.uid),1<e.threadsLen()&&(t=p.a.union(t,e.threads())))})),t}))},t.subscribers=function(){var e=this;this.messageListCompleteLoading.subscribe((function(t){t=!!t,e.messageListCompleteLoadingThrottle(t),e.messageListCompleteLoadingThrottleForAnimation(t)})),this.messageList.subscribe(p.a.debounce((function(e){p.a.each(e,(function(e){e&&e.newForAnimation()&&e.newForAnimation(!1)}))}),b.Magics.Time500ms)),this.message.subscribe((function(t){t?b.Layout.NoPreview===I.a.layout()&&j.a.focusedState(b.Focused.MessageView):(j.a.focusedState(b.Focused.MessageList),e.messageFullScreenMode(!1),e.hideMessageBodies())})),this.messageLoading.subscribe((function(t){e.messageLoadingThrottle(t)})),this.messagesBodiesDom.subscribe((function(t){!t||t instanceof m.a||e.messagesBodiesDom(m()(t))})),this.messageListEndFolder.subscribe((function(t){var n=e.message();n&&t&&t!==n.folderFullNameRaw&&e.message(null)}))},t.purgeMessageBodyCache=function(){var e=0,t=S.data.iMessageBodyCacheCount-y.k;if(0<t){var n=this.messagesBodiesDom();n&&(r()(n).call(n,".rl-cache-class").each((function(){var n=m()(this);t>n.data("rl-cache-count")&&(n.addClass("rl-cache-purge"),e+=1)})),0<e&&p.a.delay((function(){return r()(n).call(n,".rl-cache-purge").remove()}),b.Magics.Time350ms))}},t.initUidNextAndNewMessages=function(e,t,n){if(Object(v.h)()===e&&Object(g.isNormal)(t)&&""!==t){if(Object(g.isArray)(n)&&0<n.length){p.a.each(n,(function(t){Object(v.a)(e,t.Uid)})),L.a.playSoundNotification();var i=n.length;3<i?L.a.displayDesktopNotification(Object(O.r)(),F.a.email(),Object(w.i18n)("MESSAGE_LIST/NEW_MESSAGE_NOTIFICATION",{COUNT:i}),{Folder:"",Uid:""}):p.a.each(n,(function(e){L.a.displayDesktopNotification(Object(O.r)(),C.b(C.a(e.From),!1),e.Subject,{Folder:e.Folder,Uid:e.Uid})}))}Object(v.s)(e,t)}},t.hideMessageBodies=function(){var e=this.messagesBodiesDom();e&&r()(e).call(e,".b-text-part").hide()},t.removeMessagesFromList=function(e,t,n,i){var a=this;void 0===n&&(n=""),void 0===i&&(i=!1),t=c()(p.a).call(p.a,t,(function(e){return Object(g.pInt)(e)}));var s=0,l=this.messageList(),u=this.message(),d=R.a.trashFolder(),f=R.a.spamFolder(),h=Object(v.e)(e),m=""===n?null:Object(v.e)(n||""),y=R.a.currentFolderFullNameRaw()===e?o()(p.a).call(p.a,l,(function(e){return e&&-1<Object(g.inArray)(Object(g.pInt)(e.uid),t)})):[];if(p.a.each(y,(function(e){e&&e.unseen()&&(s+=1)})),h&&!i&&(h.messageCountAll(0<=h.messageCountAll()-t.length?h.messageCountAll()-t.length:0),0<s&&h.messageCountUnread(0<=h.messageCountUnread()-s?h.messageCountUnread()-s:0)),m&&(d!==m.fullNameRaw&&f!==m.fullNameRaw||(s=0),m.messageCountAll(m.messageCountAll()+t.length),0<s&&m.messageCountUnread(m.messageCountUnread()+s),m.actionBlink(!0)),0<y.length&&(i?p.a.each(y,(function(e){e.checked(!1)})):(this.messageListIsNotCompleted(!0),p.a.each(y,(function(e){u&&u.hash===e.hash&&(u=null,a.message(null)),e.deleted(!0)})),p.a.delay((function(){p.a.each(y,(function(e){a.messageList.remove(e)}))}),b.Magics.Time350ms))),""!==e&&Object(v.q)(e,""),""!==n&&Object(v.q)(n,""),""!==this.messageListThreadUid()&&(l=this.messageList())&&0<l.length&&r()(p.a).call(p.a,l,(function(e){return!(!e||!e.deleted()||e.uid!==a.messageListThreadUid())}))){var S=r()(p.a).call(p.a,l,(function(e){return e&&!e.deleted()}));S&&this.messageListThreadUid()!==Object(g.pString)(S.uid)?(this.messageListThreadUid(Object(g.pString)(S.uid)),Object(E.setHash)(Object(O.o)(R.a.currentFolderFullNameHash(),this.messageListPage(),this.messageListSearch(),this.messageListThreadUid()),!0,!0)):S||(1<this.messageListPage()?(this.messageListPage(this.messageListPage()-1),Object(E.setHash)(Object(O.o)(R.a.currentFolderFullNameHash(),this.messageListPage(),this.messageListSearch(),this.messageListThreadUid()),!0,!0)):(this.messageListThreadUid(""),Object(E.setHash)(Object(O.o)(R.a.currentFolderFullNameHash(),this.messageListPageBeforeThread(),this.messageListSearch()),!0,!0)))}},t.initBlockquoteSwitcher=function(e){if(e){var t,n=o()(t=m()("blockquote:not(.rl-bq-switcher)",e)).call(t,(function(){return 0===m()(this).parent().closest("blockquote",e).length}));n&&0<n.length&&n.each((function(){var e=m()(this),t=e.height();0===t&&(t=Object(g.getRealHeight)(e)),""!==Object(g.trim)(e.text())&&(0===t||100<t)&&(e.addClass("rl-bq-switcher hidden-bq"),m()('<span class="rlBlockquoteSwitcher"><i class="icon-ellipsis" /></span>').insertBefore(e).on("click.rlBlockquoteSwitcher",(function(){e.toggleClass("hidden-bq"),Object(g.windowResize)()})).after("<br />").before("<br />"))}))}},t.initOpenPgpControls=function(e,t){e&&r()(e)&&r()(e).call(e,".b-plain-openpgp:not(.inited)").each((function(){N.a.initMessageBodyControls(m()(this),t)}))},t.setMessage=function(e,t){var n=!1,i=null,o="",a="",s="",c=!1,l=this.messagesBodiesDom(),u=this.selectorMessageSelected(),d=this.message();if(e&&d&&e.Result&&"Object/Message"===e.Result["@Object"]&&d.folderFullNameRaw===e.Result.Folder){var f=d.threads();if(d.uid!==e.Result.Uid&&1<f.length&&-1<Object(g.inArray)(e.Result.Uid,f)&&(d=A.a.newInstanceFromJson(e.Result))&&(d.threads(f),Object(v.n)(d),this.message(this.staticMessage.populateByMessageListItem(d)),d=this.message(),n=!0),d&&d.uid===e.Result.Uid){if(this.messageError(""),d.initUpdateByMessageJson(e.Result),Object(v.b)(d.folderFullNameRaw,d.uid),t||d.initFlagsByJson(e.Result),l=l&&l[0]?l:null){o="rl-mgs-"+d.hash.replace(/[^a-zA-Z0-9]/g,"");var h=r()(l).call(l,"#"+o);if(h&&h[0])d.body=h,d.body&&(S.data.iMessageBodyCacheCount+=1,d.body.data("rl-cache-count",S.data.iMessageBodyCacheCount),d.fetchDataFromDom());else{var y=!1;if(Object(g.isNormal)(e.Result.Html)&&""!==e.Result.Html)y=!0,s=e.Result.Html.toString();else if(Object(g.isNormal)(e.Result.Plain)&&""!==e.Result.Plain)if(y=!1,s=Object(g.plainToHtml)(e.Result.Plain.toString(),!1),(d.isPgpSigned()||d.isPgpEncrypted())&&N.a.capaOpenPGP()){a=Object(g.pString)(e.Result.Plain);var O=/---BEGIN PGP MESSAGE---/.test(a);O||(c=/-----BEGIN PGP SIGNED MESSAGE-----/.test(a)&&/-----BEGIN PGP SIGNATURE-----/.test(a)),S.$div.empty(),s=c&&d.isPgpSigned()?S.$div.append(m()('<pre class="b-plain-openpgp signed"></pre>').text(a)).html():O&&d.isPgpEncrypted()?S.$div.append(m()('<pre class="b-plain-openpgp encrypted"></pre>').text(a)).html():"<pre>"+s+"</pre>",S.$div.empty(),d.isPgpSigned(c),d.isPgpEncrypted(O)}else s="<pre>"+s+"</pre>";else y=!1,s="<pre>"+s+"</pre>";S.data.iMessageBodyCacheCount+=1,(i=m()('<div id="'+o+'" ></div>').hide().addClass("rl-cache-class")).data("rl-cache-count",S.data.iMessageBodyCacheCount),i.html(Object(g.findEmailAndLinks)(s)).addClass("b-text-part "+(y?"html":"plain")),d.isHtml(!!y),d.hasImages(!!e.Result.HasExternals),d.body=i,d.body&&l.append(d.body),d.storeDataInDom(),e.Result.HasInternals&&d.showInternalImages(!0),d.hasImages()&&I.a.showImages()&&d.showExternalImages(!0),this.purgeMessageBodyCacheThrottle()}this.messageActiveDom(d.body),this.hideMessageBodies(),i&&(this.initOpenPgpControls(i,d),this.initBlockquoteSwitcher(i)),d.body.show()}Object(v.n)(d),(d.unseen()||d.hasUnseenSubMessage())&&Object(P.a)().messageListAction(d.folderFullNameRaw,b.MessageSetAction.SetSeen,[d]),n&&(d=this.message(),u&&d&&(d.folderFullNameRaw!==u.folderFullNameRaw||d.uid!==u.uid)?(this.selectorMessageSelected(null),1===this.messageList().length&&this.selectorMessageFocused(null)):!u&&d&&(u=r()(p.a).call(p.a,this.messageList(),(function(e){return e&&e.folderFullNameRaw===d.folderFullNameRaw&&e.uid===d.uid})))&&(this.selectorMessageSelected(u),this.selectorMessageFocused(u))),Object(g.windowResize)()}}},t.selectMessage=function(e){e?(this.message(this.staticMessage.populateByMessageListItem(e)),this.populateMessageBody(this.message())):this.message(null)},t.selectMessageByFolderAndUid=function(e,t){e&&t?(this.message(this.staticMessage.populateByMessageListItem(null)),this.message().folderFullNameRaw=e,this.message().uid=t,this.populateMessageBody(this.message())):this.message(null)},t.populateMessageBody=function(e){e&&_.a.message(this.onMessageResponse,e.folderFullNameRaw,e.uid)&&this.messageCurrentLoading(!0)},t.onMessageResponse=function(e,t,n){this.hideMessageBodies(),this.messageCurrentLoading(!1),b.StorageResultType.Success===e&&t&&t.Result?this.setMessage(t,n):b.StorageResultType.Unload===e?(this.message(null),this.messageError("")):b.StorageResultType.Abort!==e&&(this.message(null),this.messageError(t&&t.ErrorCode?Object(w.getNotification)(t.ErrorCode):Object(w.getNotification)(b.Notification.UnknownError)))},t.calculateMessageListHash=function(e){return c()(p.a).call(p.a,e,(function(e){return e.hash+"_"+e.threadsLen()+"_"+e.flagHash()})).join("|")},t.setMessageList=function(e,t){if(e&&e.Result&&"Collection/MessageCollection"===e.Result["@Object"]&&e.Result["@Collection"]&&Object(g.isArray)(e.Result["@Collection"])){var n=0,i=!1,o=[],a=Object(T.momentNowUnix)(),r=Object(g.pInt)(e.Result.MessageResultCount),s=Object(g.pInt)(e.Result.Offset),c=Object(v.e)(Object(g.isNormal)(e.Result.Folder)?e.Result.Folder:"");c&&!t&&(c.interval=a,Object(v.q)(e.Result.Folder,e.Result.FolderHash),Object(g.isNormal)(e.Result.MessageCount)&&c.messageCountAll(e.Result.MessageCount),Object(g.isNormal)(e.Result.MessageUnseenCount)&&(Object(g.pInt)(c.messageCountUnread())!==Object(g.pInt)(e.Result.MessageUnseenCount)&&(i=!0),c.messageCountUnread(e.Result.MessageUnseenCount)),this.initUidNextAndNewMessages(c.fullNameRaw,e.Result.UidNext,e.Result.NewMessages)),i&&c&&Object(v.c)(c.fullNameRaw),p.a.each(e.Result["@Collection"],(function(e){if(e&&"Object/Message"===e["@Object"]){var i=A.a.newInstanceFromJson(e);i&&(Object(v.l)(i.folderFullNameRaw,i.uid)&&5>=n&&(n+=1,i.newForAnimation(!0)),i.deleted(!1),t?Object(v.n)(i):Object(v.u)(i),o.push(i))}})),this.messageListCount(r),this.messageListSearch(Object(g.isNormal)(e.Result.Search)?e.Result.Search:""),this.messageListPage(u.a.Math.ceil(s/I.a.messagesPerPage()+1)),this.messageListThreadUid(Object(g.isNormal)(e.Result.ThreadUid)?Object(g.pString)(e.Result.ThreadUid):""),this.messageListEndFolder(Object(g.isNormal)(e.Result.Folder)?e.Result.Folder:""),this.messageListEndSearch(this.messageListSearch()),this.messageListEndThreadUid(this.messageListThreadUid()),this.messageListEndPage(this.messageListPage()),this.messageListDisableAutoSelect(!0),this.messageList(o),this.messageListIsNotCompleted(!1),Object(v.d)(),c&&(t||i||I.a.useThreads())&&Object(P.a)().folderInformation(c.fullNameRaw,o)}else this.messageListCount(0),this.messageList([]),this.messageListError(Object(w.getNotification)(e&&e.ErrorCode?e.ErrorCode:b.Notification.CantGetMessageList))},e}();t.a=new M},function(e,t,n){"use strict";n.d(t,"k",(function(){return S})),n.d(t,"b",(function(){return w})),n.d(t,"m",(function(){return T})),n.d(t,"a",(function(){return C})),n.d(t,"l",(function(){return A})),n.d(t,"d",(function(){return E})),n.d(t,"h",(function(){return j})),n.d(t,"f",(function(){return F})),n.d(t,"p",(function(){return R})),n.d(t,"g",(function(){return N})),n.d(t,"q",(function(){return I})),n.d(t,"i",(function(){return L})),n.d(t,"s",(function(){return P})),n.d(t,"e",(function(){return _})),n.d(t,"r",(function(){return M})),n.d(t,"o",(function(){return D})),n.d(t,"j",(function(){return k})),n.d(t,"t",(function(){return x})),n.d(t,"c",(function(){return U})),n.d(t,"n",(function(){return H})),n.d(t,"u",(function(){return G})),n.d(t,"v",(function(){return B})),n.d(t,"w",(function(){return V}));var i=n(12),o=n.n(i),a=n(3),r=n.n(a),s=n(0),c=n(2),l=n(15),u=n(5),d={},p={},f={},h={},m={},b={},g="",v={},y=u.capa(s.Capa.Gravatar);function S(e,t){e=Object(c.trim)(e),t(y&&""!==e?l.h(e):"",e)}function O(e,t){return e+"#"+t}function w(e,t){v[O(e,t)]=!0}function T(e,t){return!0===v[O(e,t)]}function C(e,t){b[O(e,t)]=!0}function A(e,t){return!!b[O(e,t)]&&(b[O(e,t)]=null,!0)}function E(){b={}}function j(){return""===g?"INBOX":g}function F(e){return""!==e&&p[e]?p[e]:""}function R(e,t){p[e]=t,"INBOX"!==t&&""!==g||(g=t)}function N(e){return""!==e&&f[e]?f[e]:""}function I(e,t){""!==e&&(f[e]=t)}function L(e){return""!==e&&h[e]?h[e]:""}function P(e,t){h[e]=t}function _(e){return""!==e&&d[e]?d[e]:null}function M(e,t){d[e]=t}function D(e){M(e,null)}function k(e,t){return m[e]&&m[e][t]?m[e][t]:null}function x(e,t,n){m[e]||(m[e]={}),m[e][t]=n}function U(e){m[e]={}}function H(e){if(e){var t=e.uid,n=k(e.folderFullNameRaw,t);if(n&&0<n.length&&(e.flagged(!!n[1]),e.isSimpleMessage||(e.unseen(!!n[0]),e.answered(!!n[2]),e.forwarded(!!n[3]),e.isReadReceipt(!!n[4]),e.deletedMark(!!n[5]))),0<e.threads().length){var i=o()(r.a).call(r.a,e.threads(),(function(n){if(t!==n){var i=k(e.folderFullNameRaw,n);return i&&0<i.length&&!!i[0]}return!1})),a=o()(r.a).call(r.a,e.threads(),(function(n){if(t!==n){var i=k(e.folderFullNameRaw,n);return i&&0<i.length&&!!i[1]}return!1}));e.hasUnseenSubMessage(i&&0<Object(c.pInt)(i)),e.hasFlaggedSubMessage(a&&0<Object(c.pInt)(a))}}}function G(e){e&&x(e.folderFullNameRaw,e.uid,[e.unseen(),e.flagged(),e.answered(),e.forwarded(),e.isReadReceipt(),e.deletedMark()])}function B(e,t,n){Object(c.isArray)(n)&&0<n.length&&x(e,t,n)}function V(e,t,n){var i=0,o=k(e,t);if(Object(c.isArray)(o)&&0<o.length){switch(o[0]&&(i=1),n){case s.MessageSetAction.SetSeen:o[0]=!1;break;case s.MessageSetAction.UnsetSeen:o[0]=!0;break;case s.MessageSetAction.SetFlag:o[1]=!0;break;case s.MessageSetAction.UnsetFlag:o[1]=!1}x(e,t,o)}return i}},function(e,t,n){"use strict";n.d(t,"v",(function(){return g})),n.d(t,"E",(function(){return v})),n.d(t,"w",(function(){return y})),n.d(t,"x",(function(){return S})),n.d(t,"y",(function(){return O})),n.d(t,"c",(function(){return T})),n.d(t,"e",(function(){return C})),n.d(t,"g",(function(){return A})),n.d(t,"f",(function(){return E})),n.d(t,"d",(function(){return j})),n.d(t,"G",(function(){return R})),n.d(t,"I",(function(){return N})),n.d(t,"H",(function(){return I})),n.d(t,"b",(function(){return L})),n.d(t,"i",(function(){return P})),n.d(t,"a",(function(){return _})),n.d(t,"q",(function(){return M})),n.d(t,"p",(function(){return D})),n.d(t,"h",(function(){return k})),n.d(t,"J",(function(){return x})),n.d(t,"u",(function(){return U})),n.d(t,"n",(function(){return H})),n.d(t,"l",(function(){return G})),n.d(t,"k",(function(){return B})),n.d(t,"B",(function(){return V})),n.d(t,"C",(function(){return K})),n.d(t,"A",(function(){return q})),n.d(t,"j",(function(){return W})),n.d(t,"D",(function(){return Y})),n.d(t,"r",(function(){return $})),n.d(t,"s",(function(){return J})),n.d(t,"t",(function(){return X})),n.d(t,"F",(function(){return Z})),n.d(t,"m",(function(){return Q})),n.d(t,"z",(function(){return ee})),n.d(t,"o",(function(){return te}));n(45),n(59);var i=n(4),o=n.n(i),a=n(2),r=n(5),s="#/",c="./?",l="&q[]=",u=r.appSettingsGet("version"),d=r.appSettingsGet("webPath")||"",p=r.appSettingsGet("webVersionPath")||"rainloop/v/"+u+"/",f=p+"static/",h=!!r.appSettingsGet("adminHostUse"),m=r.appSettingsGet("adminPath")||"admin",b=r.settingsGet("AuthAccountHash")||"0";function g(){b=r.settingsGet("AuthAccountHash")||"0"}function v(){return l}function y(e){return void 0===e&&(e=""),s+Object(a.pString)(e)}function S(){return h?"./":c+m}function O(){return"./"}function w(e,t,n){return"./?/Raw/&q[]=/"+(n=Object(a.isUnd)(n)?b:n)+"/"+e+"/"+"&q[]=/"+t}function T(e,t){return w("Download",e,t)}function C(e,t){return w("View",e,t)}function A(e,t){return w("ViewThumbnail",e,t)}function E(e,t){return w("ViewAsPlain",e,t)}function j(e,t){return w("FramedView",e,t)}function F(e){return"./?/"+e+"/"+"&q[]=/"+b+"/"}function R(){return F("Upload")}function N(){return F("UploadContacts")}function I(){return F("UploadBackground")}function L(){return F("Append")}function P(e){return F("Change")+Object(a.encodeURIComponent)(e)+"/"}function _(e){return F("Ajax")+e}function M(e){return"./?/Raw/&q[]=/"+b+"/ViewAsPlain/"+"&q[]=/"+e}function D(e){return"./?/Raw/&q[]=/"+b+"/Download/"+"&q[]=/"+e}function k(e){return"./?/Raw/0/Avatar/"+Object(a.encodeURIComponent)(e)+"/"}function x(e){return"./?/Raw/&q[]=/"+b+"/UserBackground/"+"&q[]=/"+e}function U(){return"./?/Info"}function H(e,t){return"./?/Lang/0/"+(t?"Admin":"App")+"/"+o.a.encodeURI(e)+"/"+u+"/"}function G(){return"./?/Raw/&q[]=/"+b+"/ContactsVcf/"}function B(){return"./?/Raw/&q[]=/"+b+"/ContactsCsv/"}function V(e){return void 0===e&&(e=!1),"./?SocialGoogle"+(""!==b?"/&q[]=/"+b+"/":"")+(e?"&xauth=1":"")}function K(){return"./?SocialTwitter"+(""!==b?"/&q[]=/"+b+"/":"")}function q(){return"./?SocialFacebook"+(""!==b?"/&q[]=/"+b+"/":"")}function z(e){return f+e}function W(){return z("css/images/empty-contact.png")}function Y(e){return z("sounds/"+e)}function $(){return z("css/images/icom-message-notification.png")}function J(){return z("js/min/openpgp.min.js")}function X(){return z("js/min/openpgp.worker.min.js")}function Z(e){var t=p;return"@custom"===e.substr(-7)&&(e=Object(a.trim)(e.substring(0,e.length-7)),t=d),t+"themes/"+o.a.encodeURI(e)+"/images/preview.png"}function Q(e){return void 0===e&&(e="INBOX"),"#/mailbox/"+e}function ee(e){return void 0===e&&(e=""),"#/settings"+(e?"/"+e:"")}function te(e,t,n,i){void 0===t&&(t=1),void 0===n&&(n=""),void 0===i&&(i=""),t=Object(a.isNormal)(t)?Object(a.pInt)(t):1,n=Object(a.pString)(n);var r="#/mailbox/";if(""!==e){var s=Object(a.pInt)(i);r+=o.a.encodeURI(e)+(0<s?"~"+s:"")}return 1<t&&(r=r.replace(/[/]+$/,""),r+="/p"+t),""!==n&&(r=r.replace(/[/]+$/,""),r+="/"+o.a.encodeURI(n)),r}},function(e,t,n){"use strict";var i=n(10),o=(n(77),n(17)),a=n.n(o),r=n(3),s=n.n(r),c=n(2),l=n(24),u=n(14),d=n(15),p=n(406),f=n(5),h=n(27),m=n(35),b=n(21),g=function(e){function t(){var t;return(t=e.call(this)||this).oRequests={},t}Object(i.a)(t,e);var n=t.prototype;return n.folders=function(e){this.defaultRequest(e,"Folders",{SentFolder:f.settingsGet("SentFolder"),DraftFolder:f.settingsGet("DraftFolder"),SpamFolder:f.settingsGet("SpamFolder"),TrashFolder:f.settingsGet("TrashFolder"),ArchiveFolder:f.settingsGet("ArchiveFolder")},null,"",["Folders"])},n.login=function(e,t,n,i,o,a,r,s){this.defaultRequest(e,"Login",{Email:t,Login:n,Password:i,Language:a||"",AdditionalCode:r||"",AdditionalCodeSignMe:s?"1":"0",SignMe:o?"1":"0"})},n.getTwoFactor=function(e){this.defaultRequest(e,"GetTwoFactorInfo")},n.createTwoFactor=function(e){this.defaultRequest(e,"CreateTwoFactorSecret")},n.clearTwoFactor=function(e){this.defaultRequest(e,"ClearTwoFactorInfo")},n.showTwoFactorSecret=function(e){this.defaultRequest(e,"ShowTwoFactorSecret")},n.testTwoFactor=function(e,t){this.defaultRequest(e,"TestTwoFactorInfo",{Code:t})},n.enableTwoFactor=function(e,t){this.defaultRequest(e,"EnableTwoFactor",{Enable:t?"1":"0"})},n.clearTwoFactorInfo=function(e){this.defaultRequest(e,"ClearTwoFactorInfo")},n.contactsSync=function(e){this.defaultRequest(e,"ContactsSync",null,l.d)},n.saveContactsSyncData=function(e,t,n,i,o){this.defaultRequest(e,"SaveContactsSyncData",{Enable:t?"1":"0",Url:n,User:i,Password:o})},n.accountSetup=function(e,t,n,i){void 0===i&&(i=!0),this.defaultRequest(e,"AccountSetup",{Email:t,Password:n,New:i?"1":"0"})},n.accountDelete=function(e,t){this.defaultRequest(e,"AccountDelete",{EmailToDelete:t})},n.accountsAndIdentitiesSortOrder=function(e,t,n){this.defaultRequest(e,"AccountsAndIdentitiesSortOrder",{Accounts:t,Identities:n})},n.identityUpdate=function(e,t,n,i,o,a,r,s){this.defaultRequest(e,"IdentityUpdate",{Id:t,Email:n,Name:i,ReplyTo:o,Bcc:a,Signature:r,SignatureInsertBefore:s?"1":"0"})},n.identityDelete=function(e,t){this.defaultRequest(e,"IdentityDelete",{IdToDelete:t})},n.accountsAndIdentities=function(e){this.defaultRequest(e,"AccountsAndIdentities")},n.accountsCounts=function(e){this.defaultRequest(e,"AccountsCounts")},n.filtersSave=function(e,t,n,i){this.defaultRequest(e,"FiltersSave",{Raw:n,RawIsActive:Object(c.boolToAjax)(i),Filters:a()(s.a).call(s.a,t,(function(e){return e.toJson()}))})},n.filtersGet=function(e){this.defaultRequest(e,"Filters",{})},n.templates=function(e){this.defaultRequest(e,"Templates",{})},n.templateGetById=function(e,t){this.defaultRequest(e,"TemplateGetByID",{ID:t})},n.templateDelete=function(e,t){this.defaultRequest(e,"TemplateDelete",{IdToDelete:t})},n.templateSetup=function(e,t,n,i){this.defaultRequest(e,"TemplateSetup",{ID:t,Name:n,Body:i})},n.messageList=function(e,t,n,i,o,a,r){void 0===n&&(n=0),void 0===i&&(i=20),void 0===o&&(o=""),void 0===a&&(a=""),void 0===r&&(r=!1),t=Object(c.pString)(t);var s=Object(u.g)(t),f=h.a.threadsAllowed()&&m.a.useThreads(),b=Object(u.h)()===t?Object(u.i)(t):"";return""===s||""!==o&&-1!==o.indexOf("is:")?this.defaultRequest(e,"MessageList",{Folder:t,Offset:n,Limit:i,Search:o,UidNext:b,UseThreads:f?"1":"0",ThreadUid:f?a:""},""===o?l.g:l.m,"",r?[]:["MessageList"]):this.defaultRequest(e,"MessageList",{},""===o?l.g:l.m,"MessageList/"+Object(d.E)()+"/"+p.a([t,n,i,o,h.a.projectHash(),s,b,f?"1":"0",f?a:""].join(String.fromCharCode(0))),r?[]:["MessageList"])},n.messageUploadAttachments=function(e,t){this.defaultRequest(e,"MessageUploadAttachments",{Attachments:t},999e3)},n.message=function(e,t,n){return t=Object(c.pString)(t),n=Object(c.pInt)(n),!!(Object(u.e)(t)&&0<n)&&(this.defaultRequest(e,"Message",{},null,"Message/"+Object(d.E)()+"/"+p.a([t,n,h.a.projectHash(),h.a.threadsAllowed()&&m.a.useThreads()?"1":"0"].join(String.fromCharCode(0))),["Message"]),!0)},n.composeUploadExternals=function(e,t){this.defaultRequest(e,"ComposeUploadExternals",{Externals:t},999e3)},n.composeUploadDrive=function(e,t,n){this.defaultRequest(e,"ComposeUploadDrive",{AccessToken:n,Url:t},999e3)},n.folderInformation=function(e,t,n){void 0===n&&(n=[]);var i=!0,o=[];Object(c.isArray)(n)&&0<n.length&&(i=!1,s.a.each(n,(function(e){Object(u.j)(e.folderFullNameRaw,e.uid)||o.push(e.uid),0<e.threads().length&&s.a.each(e.threads(),(function(t){Object(u.j)(e.folderFullNameRaw,t)||o.push(t)}))})),0<o.length&&(i=!0)),i?this.defaultRequest(e,"FolderInformation",{Folder:t,FlagsUids:Object(c.isArray)(o)?o.join(","):"",UidNext:Object(u.h)()===t?Object(u.i)(t):""}):m.a.useThreads()&&Object(b.a)().reloadFlagsCurrentMessageListAndMessageFromCache()},n.folderInformationMultiply=function(e,t){this.defaultRequest(e,"FolderInformationMultiply",{Folders:t})},n.logout=function(e){this.defaultRequest(e,"Logout")},n.messageSetFlagged=function(e,t,n,i){this.defaultRequest(e,"MessageSetFlagged",{Folder:t,Uids:n.join(","),SetAction:i?"1":"0"})},n.messageSetSeen=function(e,t,n,i){this.defaultRequest(e,"MessageSetSeen",{Folder:t,Uids:n.join(","),SetAction:i?"1":"0"})},n.messageSetSeenToAll=function(e,t,n,i){void 0===i&&(i=null),this.defaultRequest(e,"MessageSetSeenToAll",{Folder:t,SetAction:n?"1":"0",ThreadUids:i?i.join(","):""})},n.saveMessage=function(e,t,n,i,o,a,r,s,c,u,d,p,f,h,m,b,g){this.defaultRequest(e,"SaveMessage",{IdentityID:t,MessageFolder:n,MessageUid:i,DraftFolder:o,To:a,Cc:r,Bcc:s,ReplyTo:c,Subject:u,TextIsHtml:d?"1":"0",Text:p,DraftInfo:h,InReplyTo:m,References:b,MarkAsImportant:g?"1":"0",Attachments:f},l.l)},n.sendReadReceiptMessage=function(e,t,n,i,o,a){this.defaultRequest(e,"SendReadReceiptMessage",{MessageFolder:t,MessageUid:n,ReadReceipt:i,Subject:o,Text:a})},n.sendMessage=function(e,t,n,i,o,a,r,s,c,u,d,p,f,h,m,b,g,v,y){this.defaultRequest(e,"SendMessage",{IdentityID:t,MessageFolder:n,MessageUid:i,SentFolder:o,To:a,Cc:r,Bcc:s,ReplyTo:c,Subject:u,TextIsHtml:d?"1":"0",Text:p,DraftInfo:h,InReplyTo:m,References:b,Dsn:g?"1":"0",ReadReceiptRequest:v?"1":"0",MarkAsImportant:y?"1":"0",Attachments:f},l.n)},n.saveSystemFolders=function(e,t){this.defaultRequest(e,"SystemFoldersUpdate",t)},n.saveSettings=function(e,t){this.defaultRequest(e,"SettingsUpdate",t)},n.saveSettingsHelper=function(e,t,n){var i=this;return function(o){var a;i.saveSettings(n||null,((a={})[e]=t?t(o):o,a))}},n.changePassword=function(e,t,n){this.defaultRequest(e,"ChangePassword",{PrevPassword:t,NewPassword:n})},n.folderClear=function(e,t){this.defaultRequest(e,"FolderClear",{Folder:t})},n.folderSetSubscribe=function(e,t,n){this.defaultRequest(e,"FolderSubscribe",{Folder:t,Subscribe:n?"1":"0"})},n.folderSetCheckable=function(e,t,n){this.defaultRequest(e,"FolderCheckable",{Folder:t,Checkable:n?"1":"0"})},n.messagesMove=function(e,t,n,i,o,a){this.defaultRequest(e,"MessageMove",{FromFolder:t,ToFolder:n,Uids:i.join(","),MarkAsRead:a?"1":"0",Learning:o||""},null,"",["MessageList"])},n.messagesCopy=function(e,t,n,i){this.defaultRequest(e,"MessageCopy",{FromFolder:t,ToFolder:n,Uids:i.join(",")})},n.messagesDelete=function(e,t,n){this.defaultRequest(e,"MessageDelete",{Folder:t,Uids:n.join(",")},null,"",["MessageList"])},n.appDelayStart=function(e){this.defaultRequest(e,"AppDelayStart")},n.quota=function(e){this.defaultRequest(e,"Quota")},n.contacts=function(e,t,n,i){this.defaultRequest(e,"Contacts",{Offset:t,Limit:n,Search:i},null,"",["Contacts"])},n.contactSave=function(e,t,n,i){this.defaultRequest(e,"ContactSave",{RequestUid:t,Uid:Object(c.trim)(n),Properties:i})},n.contactsDelete=function(e,t){this.defaultRequest(e,"ContactsDelete",{Uids:t.join(",")})},n.suggestions=function(e,t,n){this.defaultRequest(e,"Suggestions",{Query:t,Page:n},null,"",["Suggestions"])},n.clearUserBackground=function(e){this.defaultRequest(e,"ClearUserBackground")},n.facebookUser=function(e){this.defaultRequest(e,"SocialFacebookUserInformation")},n.facebookDisconnect=function(e){this.defaultRequest(e,"SocialFacebookDisconnect")},n.twitterUser=function(e){this.defaultRequest(e,"SocialTwitterUserInformation")},n.twitterDisconnect=function(e){this.defaultRequest(e,"SocialTwitterDisconnect")},n.googleUser=function(e){this.defaultRequest(e,"SocialGoogleUserInformation")},n.googleDisconnect=function(e){this.defaultRequest(e,"SocialGoogleDisconnect")},n.socialUsers=function(e){this.defaultRequest(e,"SocialUsers")},t}(n(304).a);t.a=new g},function(e,t,n){e.exports=n(349)},function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var i=n(298),o=n.n(i),a=n(299),r=n.n(a),s=n(300),c=n.n(s),l=n(301),u=n.n(l),d=n(302),p=n.n(d),f=n(303),h=n.n(f);function m(e,t,n,i,a){var s,l,d,f={};return o()(s=r()(i)).call(s,(function(e){f[e]=i[e]})),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c()(l=u()(d=p()(n).call(n)).call(d)).call(l,(function(n,i){return i(e,t,n)||n}),f),a&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(a):void 0,f.initializer=void 0),void 0===f.initializer&&(h()(e,t,f),f=null),f}},function(e,t,n){e.exports=n(390)},function(e,t){e.exports=window.key},function(e,t,n){"use strict";function i(){return n(403).default}n.d(t,"a",(function(){return i}))},,function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return l}));var i=n(3),o=n.n(i),a=n(2),r=n(36),s={};function c(e,t,n){Object(a.isObject)(e)?(n=t||null,t=null,o.a.each(e,(function(e,t){c(t,e,n)}))):(Object(a.isUnd)(s[e])&&(s[e]=[]),s[e].push([t,n]))}function l(e,t){r.f("rl-pub",[e,t]),Object(a.isUnd)(s[e])||o.a.each(s[e],(function(e){e[0]&&e[0].apply(e[1]||null,t||[])}))}},function(e,t,n){"use strict";n.d(t,"i",(function(){return i})),n.d(t,"j",(function(){return o})),n.d(t,"c",(function(){return a})),n.d(t,"g",(function(){return r})),n.d(t,"m",(function(){return s})),n.d(t,"n",(function(){return c})),n.d(t,"l",(function(){return l})),n.d(t,"d",(function(){return u})),n.d(t,"r",(function(){return d})),n.d(t,"b",(function(){return p})),n.d(t,"h",(function(){return f})),n.d(t,"p",(function(){return h})),n.d(t,"o",(function(){return m})),n.d(t,"k",(function(){return b})),n.d(t,"a",(function(){return g})),n.d(t,"q",(function(){return v})),n.d(t,"f",(function(){return y})),n.d(t,"e",(function(){return S}));var i=20,o=[10,20,30,50,100],a=50,r=3e4,s=3e5,c=3e5,l=2e5,u=2e5,d="__UNUSE__",p="rlcsc",f=143,h=25,m=4190,b=15,g=7,v=10,y="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC4AAAAuCAYAAABXuSs3AAAHHklEQVRoQ7VZW08bVxCeXRuwIbTGXIwNtBBaqjwgVUiR8lDlbza9qe1DpVZ9aNQ/0KpPeaJK07SpcuEeCEmUAObm21bfrL9lONjexSYrWfbunj37zXdmvpkz9oIgCKTD0Wg0xPd94TDP83Q0zvWa50vzklSrdanVanqf4/D84GBGr+F+Op3S8fqoJxLOdnZgTvsO/nYhenHA+UC7CWF1uXwkb9++ldPTUwVerVbVqFQqpR8YPjQ0JCMjI5LNDijoRgP3PQVu5+5Eor2XGLg7IV4GkIdHJ/LmzRs5ODiIwNbrdR0O0GCcq4Xz4eFhmZyclP7+tDQaIik/BG5XKQn4SwG3zJTLZXn9+rUclI8UHD5YVoDDN8bSzXhONwL48fFxGR4eilzFZT1uFRIB5yT8BqCdnR3Z3d0VP9Un6XRawYJpggVrZBv38ME4XKtUKnLt2jUplUoy1PR/l3U7T6sVSAQcgMAkj8PDQ9ne3pajoyMRL7zeKsYZWHgWYDGmv78/mmdwcFA+mJlSgziHDWrERrsjEXDXegTi1tZW+DLxI2bxIrqFNYTXyDyCFweMAHCwb8e4RnTNuOsqe3t7sra21pTD0Kct666E8XlcZyzw9/RUUXK5nK5oUinUQI6TQ3cynO/v78vq6qrKXCNwlTiJJpyNGc3nZHp6uqV2dwrQWOCtZBDAV1ZWwsQk7f0wiQn5kffbAu/0/KWBYzIC1+XukfGx0RGZmppKlC2tIV0Bh4aDcZW7HhkfH8urLLZL7T2pihvlkMNnz56FiadHxicL41IsFpN41bkxsYxbRdFo9jwB8KdPn14J8KnSpBQKhQs63nPmbCVRcBUAR2Lq1VVmpksyMTFxAXjcEsQybiegESionjx5osCZOeNe1O4+EhCAX7bQSgQcxRHTMgAgcz5+/Dis/hL4uHU3/B4YGNASGHIKxuEql0k+l05AeIAF1vPnz5VxFFmdDlaJrMtZITJeSsXCOTlMunKxjLtMYOKNjQ158eJFuAuKkUOb5sEwgff19SkJUBVkThZUbnXZrtCKBQ6gbnWIkjZpyne3ejAWoGnA7Icz6irvBLgbOMicCM6TkxPx/LAkbXfgWcsazuE2kFRsKD5Z+CiqDumKncpZvieWcS6dDVD8xiYCNflpJdwcdwJOf9airLmVQ7DPzMxIYWLsXGXoVqLt5k0M3K3JUVPDZdbWNzsCp48TPFdvdnZWUz32nDha7bJ63kgAJPzSdRks9/Kf9xMJAQ1gq2NpaUmy2Yz4zar4nQC3xb99AQwCcGzLAAwuhG8YiWvcOKts+r4GOe5nMhm5efOm9lUA3E3vSZJRrKvE0fnPv//Jy5cvo5cTHIPQbSjhOoqq69evS19f6lxDKK4+sVhigZPtKJqbrQeqxd5+WR4+fKgqgT0k2XX3nhiPgETWXFhYkFzuPZ2yVq1GTSOXpE47/VjgNnD4m4GG7/LhsTx69EiwD4Vr2MwIIxgbAH18fKx1yfz8vEogNvGtWnCuhLZa9UTAreVWFsHy/b/+Vrbdl7E5REMQD2jDoUbByty+/ZnU64GkU2HzyJLhktU1cLv8nARgkYS2d3ajAgwG8qU2oLmDZ92CMaOjo7K4uCiZgbDWaRWgnZhPxLhrMUCvr69riwKZk1LHF7XqrWAO9hJxH6ozNzcnCx/PqztZg9mf6SQMscCtm2C5ke4BGMlHWTUp36036AJajDVrFMzBrhhWslQsSrFYiOqVpMriNYIgqFRq2j3FAb/zffT6zuxFXxsNzs3NTXn16lW4gYiW96w1FyedF+83xG/2FNGCRpU4NjamMsn+OZ9xE5RXqdaDdPpib6RWCzuwKF9RxqI2AVNQBwQYJoK0wdBejnqtEikP3pfP51XjUTESl12FqJEKxsEorARYDD44ONTeID7YpsEnrRvQfWAI2e8WfDaTUSIwJ0iBCmFOtOUAHvVMPp/TPwvYFVYFIuP8l+DBgwdaa2Miqwa0GgYwfeMltovbDfh6c1vIgMYcliSsKv4IWFr6VDHxvldvBAH+1sA+cnl5WYOPmmr9ir+1l9I0Cgz0yjhXjfJJ0JROnmezWbl165ayr/5fqwcBNr7IfhjMqKcvESSM4eRcCasQ3bDNObmKPLdGUGpZsN24cUNLBm9zazu4d++e6qpNBFaTuUS26U5dpuR1CxyA7J9ddrMRqlz4pwLLYawymPd++/2PADt2ugcGwq9gCCdhQ96C6xWwa6j1ceuq+I0EhW0i8MAIVJfeL3d/DVD8EKi12P6/2S2jV/EccVB54O/ejz/9HGCpoBBMta5rXMXLu53D1XAwjhXwvvv+h4BAXVe4bOu3O3ChxF08LiZFG3fel199G9CH3fLyqv24NcB44MRhpdK788U3CpyKwsCw590xmfSpzsBt0Fqc3ud3vtZigxWcVZCklVpSiN0w3q5E/h9TGMIUuA3+EQAAAABJRU5ErkJggg==",S="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n(1),o=n(2),a=n(0),r=n(6),s=function(){function e(){this.bDisabeCloseOnEsc=!1,this.sDefaultKeyScope=a.KeyState.None,this.sCurrentKeyScope=a.KeyState.None,this.viewModelVisibility=i.a.observable(!1),this.modalVisibility=i.a.observable(!1).extend({rateLimit:0}),this.viewModelName="",this.viewModelNames=[],this.viewModelDom=null}var t=e.prototype;return t.storeAndSetKeyScope=function(){this.sCurrentKeyScope=Object(r.keyScope)(),Object(r.keyScope)(this.sDefaultKeyScope)},t.restoreKeyScope=function(){Object(r.keyScope)(this.sCurrentKeyScope)},t.registerPopupKeyDown=function(){var e=this;r.$win.on("keydown",(function(t){if(t&&e.modalVisibility&&e.modalVisibility()){if(!e.bDisabeCloseOnEsc&&a.EventKeyCode.Esc===t.keyCode)return Object(o.delegateRun)(e,"cancelCommand"),!1;if(a.EventKeyCode.Backspace===t.keyCode&&!Object(o.inFocus)())return!1}return!0}))},t.cancelCommand=function(){},t.closeCommand=function(){},e}()},function(e,t,n){"use strict";var i=n(4),o=n.n(i),a=n(1),r=n(8),s=n.n(r),c=n(5),l=function(){function e(){var e=this;this.google={},this.twitter={},this.facebook={},this.dropbox={},this.google.enabled=a.a.observable(!1),this.google.clientID=a.a.observable(""),this.google.clientSecret=a.a.observable(""),this.google.apiKey=a.a.observable(""),this.google.loading=a.a.observable(!1),this.google.userName=a.a.observable(""),this.google.loggined=a.a.computed((function(){return""!==e.google.userName()})),this.google.capa={},this.google.capa.auth=a.a.observable(!1),this.google.capa.authGmail=a.a.observable(!1),this.google.capa.drive=a.a.observable(!1),this.google.capa.preview=a.a.observable(!1),this.google.require={},this.google.require.clientSettings=a.a.computed((function(){return e.google.enabled()&&(e.google.capa.auth()||e.google.capa.authGmail()||e.google.capa.drive())})),this.google.require.apiKeySettings=a.a.computed((function(){return e.google.enabled()&&e.google.capa.drive()})),this.facebook.enabled=a.a.observable(!1),this.facebook.appID=a.a.observable(""),this.facebook.appSecret=a.a.observable(""),this.facebook.loading=a.a.observable(!1),this.facebook.userName=a.a.observable(""),this.facebook.supported=a.a.observable(!1),this.facebook.loggined=a.a.computed((function(){return""!==e.facebook.userName()})),this.twitter.enabled=a.a.observable(!1),this.twitter.consumerKey=a.a.observable(""),this.twitter.consumerSecret=a.a.observable(""),this.twitter.loading=a.a.observable(!1),this.twitter.userName=a.a.observable(""),this.twitter.loggined=a.a.computed((function(){return""!==e.twitter.userName()})),this.dropbox.enabled=a.a.observable(!1),this.dropbox.apiKey=a.a.observable("")}var t=e.prototype;return t.populate=function(){this.google.enabled(!!c.settingsGet("AllowGoogleSocial")),this.google.clientID(c.settingsGet("GoogleClientID")),this.google.clientSecret(c.settingsGet("GoogleClientSecret")),this.google.apiKey(c.settingsGet("GoogleApiKey")),this.google.capa.auth(!!c.settingsGet("AllowGoogleSocialAuth")),this.google.capa.authGmail(!!c.settingsGet("AllowGoogleSocialAuthGmail")),this.google.capa.drive(!!c.settingsGet("AllowGoogleSocialDrive")),this.google.capa.preview(!!c.settingsGet("AllowGoogleSocialPreview")),this.facebook.enabled(!!c.settingsGet("AllowFacebookSocial")),this.facebook.appID(c.settingsGet("FacebookAppID")),this.facebook.appSecret(c.settingsGet("FacebookAppSecret")),this.facebook.supported(!!c.settingsGet("SupportedFacebookSocial")),this.twitter.enabled=a.a.observable(!!c.settingsGet("AllowTwitterSocial")),this.twitter.consumerKey=a.a.observable(c.settingsGet("TwitterConsumerKey")),this.twitter.consumerSecret=a.a.observable(c.settingsGet("TwitterConsumerSecret")),this.dropbox.enabled(!!c.settingsGet("AllowDropboxSocial")),this.dropbox.apiKey(c.settingsGet("DropboxApiKey"))},t.appendDropbox=function(){if(!o.a.Dropbox&&this.dropbox.enabled()&&this.dropbox.apiKey()&&!o.a.document.getElementById("dropboxjs")){var e=o.a.document.createElement("script");e.type="text/javascript",e.src="https://www.dropbox.com/static/api/2/dropins.js",s()(e).attr("id","dropboxjs").attr("data-app-key",this.dropbox.apiKey()),o.a.document.body.appendChild(e)}},e}();t.a=new l},function(e,t,n){"use strict";var i=n(10),o=n(1),a=n(0),r=n(6),s=n(2),c=n(5),l=function(e){function t(){var t;(t=e.call(this)||this).currentAudio=o.a.observable(""),t.focusedState=o.a.observable(a.Focused.None);var n=c.appSettingsGet("mobile");return t.focusedState.subscribe((function(e){switch(e){case a.Focused.MessageList:Object(r.keyScope)(a.KeyState.MessageList),n&&Object(r.leftPanelDisabled)(!0);break;case a.Focused.MessageView:Object(r.keyScope)(a.KeyState.MessageView),n&&Object(r.leftPanelDisabled)(!0);break;case a.Focused.FolderList:Object(r.keyScope)(a.KeyState.FolderList),n&&Object(r.leftPanelDisabled)(!1)}})),t.projectHash=o.a.observable(""),t.threadsAllowed=o.a.observable(!1),t.composeInEdit=o.a.observable(!1),t.contactsAutosave=o.a.observable(!1),t.useLocalProxyForExternalImages=o.a.observable(!1),t.contactsIsAllowed=o.a.observable(!1),t.attachmentsActions=o.a.observableArray([]),t.devEmail="",t.devPassword="",t}return Object(i.a)(t,e),t.prototype.populate=function(){e.prototype.populate.call(this),this.projectHash(c.settingsGet("ProjectHash")),this.contactsAutosave(!!c.settingsGet("ContactsAutosave")),this.useLocalProxyForExternalImages(!!c.settingsGet("UseLocalProxyForExternalImages")),this.contactsIsAllowed(!!c.settingsGet("ContactsIsAllowed"));var t=c.appSettingsGet("attachmentsActions");this.attachmentsActions(Object(s.isNonEmptyArray)(t)?t:[]),this.devEmail=c.settingsGet("DevEmail"),this.devPassword=c.settingsGet("DevPassword")},t}(n(297).a);t.a=new l},function(e,t,n){e.exports=n(359)},function(e,t,n){"use strict";function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,"a",(function(){return i}))},function(e,t,n){(function(t){var n=function(e){return e&&e.Math==Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof t&&t)||function(){return this}()||Function("return this")()}).call(this,n(127))},function(e,t,n){(function(t){var n=function(e){return e&&e.Math==Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof t&&t)||function(){return this}()||Function("return this")()}).call(this,n(127))},function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l}));n(152);var i=n(8),o=n.n(i),a=n(1),r=n(2),s=n(9),c=function(){function e(){this.disposable=[]}return e.prototype.dispose=function(){this.disposable.forEach((function(e){e&&e.dispose&&e.dispose()}))},e}(),l=function(e,t){return void 0===t&&(t=""),{template:t?{element:t}:"<b></b>",viewModel:{createViewModel:function(t,n){return(t=t||{}).element=null,n&&n.element&&(t.component=n,t.element=o()(n.element),Object(s.i18nToNodes)(t.element),!Object(r.isUnd)(t.inline)&&a.a.unwrap(t.inline)&&t.element.css("display","inline-block")),new e(t)}}}}},function(e,t,n){e.exports=n(249)},function(e,t,n){"use strict";var i=n(31),o=n(158).f,a=n(188),r=n(51),s=n(116),c=n(52),l=n(54),u=function(e){var t=function(t,n,i){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,i)}return e.apply(this,arguments)};return t.prototype=e.prototype,t};e.exports=function(e,t){var n,d,p,f,h,m,b,g,v=e.target,y=e.global,S=e.stat,O=e.proto,w=y?i:S?i[v]:(i[v]||{}).prototype,T=y?r:r[v]||(r[v]={}),C=T.prototype;for(p in t)n=!a(y?p:v+(S?".":"#")+p,e.forced)&&w&&l(w,p),h=T[p],n&&(m=e.noTargetGet?(g=o(w,p))&&g.value:w[p]),f=n&&m?m:t[p],n&&typeof h==typeof f||(b=e.bind&&n?s(f,i):e.wrap&&n?u(f):O&&"function"==typeof f?s(Function.call,f):f,(e.sham||f&&f.sham||h&&h.sham)&&c(b,"sham",!0),T[p]=b,O&&(l(r,d=v+"Prototype")||c(r,d,{}),r[d][p]=f,e.real&&C&&!C[p]&&c(C,p,f)))}},function(e,t,n){"use strict";var i=n(33),o=n.n(i),a=n(4),r=n.n(a),s=n(1),c=n(24),l=n(0),u=n(6),d=n(2),p=n(23),f=n(5),h=function(){function e(){this.iAutoLogoutTimer=0,this.layout=s.a.observable(l.Layout.SidePreview).extend({limitedList:[l.Layout.SidePreview,l.Layout.BottomPreview,l.Layout.NoPreview]}),this.editorDefaultType=s.a.observable(l.EditorDefaultType.Html).extend({limitedList:[l.EditorDefaultType.Html,l.EditorDefaultType.Plain,l.EditorDefaultType.HtmlForced,l.EditorDefaultType.PlainForced]}),this.messagesPerPage=s.a.observable(c.i).extend({limitedList:c.j}),this.showImages=s.a.observable(!1),this.useCheckboxesInList=s.a.observable(!0),this.allowDraftAutosave=s.a.observable(!0),this.useThreads=s.a.observable(!1),this.replySameFolder=s.a.observable(!1),this.autoLogout=s.a.observable(l.Magics.Time30mInMin),this.computers(),this.subscribers()}var t=e.prototype;return t.computers=function(){var e=this;this.usePreviewPane=s.a.computed((function(){return l.Layout.NoPreview!==e.layout()}))},t.subscribers=function(){this.layout.subscribe((function(e){u.$html.toggleClass("rl-no-preview-pane",l.Layout.NoPreview===e),u.$html.toggleClass("rl-side-preview-pane",l.Layout.SidePreview===e),u.$html.toggleClass("rl-bottom-preview-pane",l.Layout.BottomPreview===e),p.a("layout",[e])}))},t.populate=function(){var e=this;this.layout(Object(d.pInt)(f.settingsGet("Layout"))),this.editorDefaultType(f.settingsGet("EditorDefaultType")),this.autoLogout(Object(d.pInt)(f.settingsGet("AutoLogout"))),this.messagesPerPage(f.settingsGet("MPP")),this.showImages(!!f.settingsGet("ShowImages")),this.useCheckboxesInList(!!f.settingsGet("UseCheckboxesInList")),this.allowDraftAutosave(!!f.settingsGet("AllowDraftAutosave")),this.useThreads(!!f.settingsGet("UseThreads")),this.replySameFolder(!!f.settingsGet("ReplySameFolder")),p.b("rl.auto-logout-refresh",(function(){r.a.clearTimeout(e.iAutoLogoutTimer),0<e.autoLogout()&&!f.settingsGet("AccountSignMe")&&(e.iAutoLogoutTimer=o()((function(){p.a("rl.auto-logout")}),e.autoLogout()*l.Magics.Time1m))})),p.a("rl.auto-logout-refresh")},e}();t.a=new h},function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"f",(function(){return p})),n.d(t,"d",(function(){return f})),n.d(t,"e",(function(){return h})),n.d(t,"b",(function(){return m})),n.d(t,"c",(function(){return b})),n.d(t,"g",(function(){return g})),n.d(t,"h",(function(){return v}));var i=n(3),o=n.n(i),a=n(2),r=n(6),s=n(5),c={},l=[],u=[];function d(e,t){Object(a.isFunc)(t)&&(Object(a.isArray)(c[e])||(c[e]=[]),c[e].push(t))}function p(e,t){void 0===t&&(t=[]),Object(a.isArray)(c[e])&&o.a.each(c[e],(function(e){e.apply(void 0,t)}))}function f(e){return s.settingsGet(e)}function h(e,t,n,i){r.data.__APP__&&r.data.__APP__.remote().defaultRequest(e,"Plugin"+t,n,i)}function m(e,t,n,i){l.push([e,t,n,i])}function b(e,t,n,i){u.push([e,t,n,i])}function g(e){var t=n(7);o.a.each(e?u:l,(function(e){t.addSettingsViewModel(e[0],e[1],e[2],e[3])}))}function v(e,t){var n=s.settingsGet("Plugins");return(n=n&&!Object(a.isUnd)(n[e])?n[e]:null)?Object(a.isUnd)(n[t])?null:n[t]:null}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){var i=n(31),o=n(189),a=n(54),r=n(190),s=n(193),c=n(262),l=o("wks"),u=i.Symbol,d=c?u:u&&u.withoutSetter||r;e.exports=function(e){return a(l,e)||(s&&a(u,e)?l[e]=u[e]:l[e]=d("Symbol."+e)),l[e]}},function(e,t,n){var i=n(30),o=n(105),a=n(44),r=n(137),s=n(138),c=n(214),l=o("wks"),u=i.Symbol,d=c?u:u&&u.withoutSetter||r;e.exports=function(e){return a(l,e)&&(s||"string"==typeof l[e])||(s&&a(u,e)?l[e]=u[e]:l[e]=d("Symbol."+e)),l[e]}},,function(e,t,n){"use strict";n(77);var i=n(28),o=n.n(i),a=n(12),r=n.n(a),s=n(17),c=n.n(s),l=n(1),u=n(3),d=n.n(u),p=n(8),f=n.n(p),h=n(9),m=n(2),b=n(46),g=n(7),v=function(){function e(){var e=this;this.capaOpenPGP=l.a.observable(!1),this.openpgp=null,this.openpgpkeys=l.a.observableArray([]),this.openpgpKeyring=null,this.openpgpkeysPublic=l.a.computed((function(){return o()(d.a).call(d.a,e.openpgpkeys(),(function(e){return!(!e||e.isPrivate)}))})),this.openpgpkeysPrivate=l.a.computed((function(){return o()(d.a).call(d.a,e.openpgpkeys(),(function(e){return!(!e||!e.isPrivate)}))}))}var t=e.prototype;return t.isSupported=function(){return!!this.openpgp},t.findKeyByHex=function(e,t){return r()(d.a).call(d.a,e,(function(e){return t&&e&&(t===e.id||-1<e.ids.indexOf(t))}))},t.findPublicKeyByHex=function(e){return this.findKeyByHex(this.openpgpkeysPublic(),e)},t.findPrivateKeyByHex=function(e){return this.findKeyByHex(this.openpgpkeysPrivate(),e)},t.findPublicKeysByEmail=function(e){return d.a.compact(d.a.flatten(c()(d.a).call(d.a,this.openpgpkeysPublic(),(function(t){var n=t&&-1<t.emails.indexOf(e)?t:null;return n?n.getNativeKeys():[null]})),!0))},t.findPublicKeysBySigningKeyIds=function(e){var t=this;return d.a.compact(d.a.flatten(c()(d.a).call(d.a,e,(function(e){var n=e&&e.toHex?t.findPublicKeyByHex(e.toHex()):null;return n?n.getNativeKeys():[null]})),!0))},t.findPrivateKeysByEncryptionKeyIds=function(e,t,n){var i=this,o=Object(m.isArray)(e)?d.a.compact(d.a.flatten(c()(d.a).call(d.a,e,(function(e){var t=e&&e.toHex?i.findPrivateKeyByHex(e.toHex()):null;return t?n?[t]:t.getNativeKeys():[null]})),!0)):[];return 0===o.length&&Object(m.isNonEmptyArray)(t)&&(o=d.a.uniq(d.a.compact(d.a.flatten(c()(d.a).call(d.a,t,(function(e){var t=e?i.findAllPrivateKeysByEmailNotNative(e):null;return t?n?t:d.a.flatten(c()(d.a).call(d.a,t,(function(e){return e.getNativeKeys()})),!0):[null]})),!0)),(function(e){return e.id}))),o},t.findPublicKeyByEmailNotNative=function(e){return r()(d.a).call(d.a,this.openpgpkeysPublic(),(function(t){return t&&-1<t.emails.indexOf(e)}))||null},t.findPrivateKeyByEmailNotNative=function(e){return r()(d.a).call(d.a,this.openpgpkeysPrivate(),(function(t){return t&&-1<t.emails.indexOf(e)}))||null},t.findAllPublicKeysByEmailNotNative=function(e){return o()(d.a).call(d.a,this.openpgpkeysPublic(),(function(t){return t&&-1<t.emails.indexOf(e)}))||null},t.findAllPrivateKeysByEmailNotNative=function(e){return o()(d.a).call(d.a,this.openpgpkeysPrivate(),(function(t){return t&&-1<t.emails.indexOf(e)}))||null},t.findPrivateKeyByEmail=function(e,t){var n=null,i=r()(d.a).call(d.a,this.openpgpkeysPrivate(),(function(t){return t&&-1<t.emails.indexOf(e)}));if(i)try{(n=i.getNativeKeys()[0]||null)&&n.decrypt(Object(m.pString)(t))}catch(e){n=null}return n},t.findSelfPrivateKey=function(e){return this.findPrivateKeyByEmail(b.a.email(),e)},t.decryptMessage=function(e,t,i){var o=this;if(e&&e.getEncryptionKeyIds){var a=this.findPrivateKeysByEncryptionKeyIds(e.getEncryptionKeyIds(),t,!0);if(a&&0<a.length)return Object(g.showScreenPopup)(n(549),[function(t){t?e.decrypt(t).then((function(e){var n=null;e&&(n=o.findPrivateKeyByHex(t.primaryKey.keyid.toHex()))?o.verifyMessage(e,(function(t,o){i(n,e,t||null,o||null)})):i(n,e)}),(function(){i(null,null)})):i(null,null)},a]),!1}return i(null,null),!1},t.verifyMessage=function(e,t){if(e&&e.getSigningKeyIds){var n=e.getSigningKeyIds();if(n&&0<n.length){var i=this.findPublicKeysBySigningKeyIds(n);if(i&&0<i.length)try{var o=e.verify(i),a=r()(d.a).call(d.a,d.a.isArray(o)?o:[],(function(e){return e&&e.valid&&e.keyid}));if(a&&a.keyid&&a.keyid&&a.keyid.toHex)return t(this.findPublicKeyByHex(a.keyid.toHex())),!0}catch(e){Object(m.log)(e)}return t(null,n),!1}}return t(null),!1},t.controlsHelper=function(e,t,n,i,o){n?(e.removeClass("error").addClass("success").attr("title",i),t.removeClass("error").addClass("success").attr("title",i)):(e.removeClass("success").addClass("error").attr("title",i),t.removeClass("success").addClass("error").attr("title",i)),Object(m.isUnd)(o)||e.text(Object(m.trim)(o))},e.domControlEncryptedClickHelper=function(e,t,n,i){return function(){var o=null,a=f()(this);if(a.hasClass("success"))return!1;try{o=e.openpgp.message.readArmored(n)}catch(e){Object(m.log)(e)}return o&&o.getText&&o.verify&&o.decrypt?(e.decryptMessage(o,i,(function(n,i,o,r){if(i)if(o)e.controlsHelper(t,a,!0,Object(h.i18n)("PGP_NOTIFICATIONS/GOOD_SIGNATURE",{USER:o.user+" ("+o.id+")"}),i.getText());else if(n){var s=Object(m.isNonEmptyArray)(r)?r:null,l=s?d.a.compact(c()(d.a).call(d.a,s,(function(e){return e&&e.toHex?e.toHex():null}))).join(", "):"";e.controlsHelper(t,a,!1,Object(h.i18n)("PGP_NOTIFICATIONS/UNVERIFIRED_SIGNATURE")+(l?" ("+l+")":""),i.getText())}else e.controlsHelper(t,a,!1,Object(h.i18n)("PGP_NOTIFICATIONS/DECRYPTION_ERROR"));else e.controlsHelper(t,a,!1,Object(h.i18n)("PGP_NOTIFICATIONS/DECRYPTION_ERROR"))})),!1):(e.controlsHelper(t,a,!1,Object(h.i18n)("PGP_NOTIFICATIONS/DECRYPTION_ERROR")),!1)}},e.domControlSignedClickHelper=function(e,t,n){return function(){var i=null,o=f()(this);if(o.hasClass("success")||o.hasClass("error"))return!1;try{i=e.openpgp.cleartext.readArmored(n)}catch(e){Object(m.log)(e)}return i&&i.getText&&i.verify?(e.verifyMessage(i,(function(n,a){if(n)e.controlsHelper(t,o,!0,Object(h.i18n)("PGP_NOTIFICATIONS/GOOD_SIGNATURE",{USER:n.user+" ("+n.id+")"}),i.getText());else{var r=Object(m.isNonEmptyArray)(a)?a:null,s=r?d.a.compact(c()(d.a).call(d.a,r,(function(e){return e&&e.toHex?e.toHex():null}))).join(", "):"";e.controlsHelper(t,o,!1,Object(h.i18n)("PGP_NOTIFICATIONS/UNVERIFIRED_SIGNATURE")+(s?" ("+s+")":""))}})),!1):(e.controlsHelper(t,o,!1,Object(h.i18n)("PGP_NOTIFICATIONS/DECRYPTION_ERROR")),!1)}},t.initMessageBodyControls=function(t,n){if(t&&!t.hasClass("inited")){t.addClass("inited");var i=t.hasClass("encrypted"),o=t.hasClass("signed"),a=n?n.getEmails(["from","to","cc"]):[],r=null;if(i||o){var s=t.text();t.data("openpgp-original",s),i?r=f()('<div class="b-openpgp-control"><i class="icon-lock"></i></div>').attr("title",Object(h.i18n)("MESSAGE/PGP_ENCRYPTED_MESSAGE_DESC")).on("click",e.domControlEncryptedClickHelper(this,t,s,a)):o&&(r=f()('<div class="b-openpgp-control"><i class="icon-lock"></i></div>').attr("title",Object(h.i18n)("MESSAGE/PGP_SIGNED_MESSAGE_DESC")).on("click",e.domControlSignedClickHelper(this,t,s))),r&&t.before(r).before("<div></div>")}}},e}();t.a=new v},function(e,t,n){var i=n(49);e.exports=function(e){if(!i(e))throw TypeError(String(e)+" is not an object");return e}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){var i=n(90),o={}.hasOwnProperty;e.exports=function(e,t){return o.call(i(e),t)}},function(e,t,n){"use strict";var i=n(65),o=n(163);i({target:"RegExp",proto:!0,forced:/./.exec!==o},{exec:o})},function(e,t,n){"use strict";var i=n(17),o=n.n(i),a=n(1),r=n(3),s=n.n(r),c=n(0),l=n(5),u=function(){function e(){this.email=a.a.observable(""),this.parentEmail=a.a.observable(""),this.signature=a.a.observable(""),this.accounts=a.a.observableArray([]),this.accounts.loading=a.a.observable(!1).extend({throttle:c.Magics.Time100ms}),this.computers()}var t=e.prototype;return t.computers=function(){var e=this;this.accountsEmails=a.a.computed((function(){return s.a.compact(o()(s.a).call(s.a,e.accounts(),(function(e){return e?e.email:null})))})),this.accountsUnreadCount=a.a.computed((function(){return 0}))},t.populate=function(){this.email(l.settingsGet("Email")),this.parentEmail(l.settingsGet("ParentEmail"))},t.isRootAccount=function(){return""===this.parentEmail()},e}();t.a=new u},function(e,t,n){var i=n(55),o=n(66),a=n(96);e.exports=i?function(e,t,n){return o.f(e,t,a(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var i=n(55),o=n(66).f,a=Function.prototype,r=a.toString,s=/^\s*function ([^ (]*)/,c="name";i&&!(c in a)&&o(a,c,{configurable:!0,get:function(){try{return r.call(this).match(s)[1]}catch(e){return""}}})},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t){e.exports={}},function(e,t,n){var i=n(53),o=n(82),a=n(91);e.exports=i?function(e,t,n){return o.f(e,t,a(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var i=n(43);e.exports=!i((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var i=n(37);e.exports=!i((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},function(e,t,n){e.exports=n(284)},function(e,t,n){var i=n(50);e.exports=function(e){if(!i(e))throw TypeError(String(e)+" is not an object");return e}},function(e,t,n){"use strict";var i=n(150),o=n(42),a=n(85),r=n(80),s=n(56),c=n(172),l=n(283),u=n(151),d=Math.max,p=Math.min;i("replace",2,(function(e,t,n,i){var f=i.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,h=i.REPLACE_KEEPS_$0,m=f?"$":"$0";return[function(n,i){var o=s(this),a=null==n?void 0:n[e];return void 0!==a?a.call(n,o,i):t.call(String(o),n,i)},function(e,i){if(!f&&h||"string"==typeof i&&-1===i.indexOf(m)){var s=n(t,e,this,i);if(s.done)return s.value}var b=o(e),g=String(this),v="function"==typeof i;v||(i=String(i));var y=b.global;if(y){var S=b.unicode;b.lastIndex=0}for(var O=[];;){var w=u(b,g);if(null===w)break;if(O.push(w),!y)break;""===String(w[0])&&(b.lastIndex=c(g,a(b.lastIndex),S))}for(var T,C="",A=0,E=0;E<O.length;E++){w=O[E];for(var j=String(w[0]),F=d(p(r(w.index),g.length),0),R=[],N=1;N<w.length;N++)R.push(void 0===(T=w[N])?T:String(T));var I=w.groups;if(v){var L=[j].concat(R,F,g);void 0!==I&&L.push(I);var P=String(i.apply(void 0,L))}else P=l(j,g,F,R,I,i);F>=A&&(C+=g.slice(A,F)+P,A=F+j.length)}return C+g.slice(A)}]}))},function(e,t,n){"use strict";n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return p}));var i=n(12),o=n.n(i),a=n(3),r=n.n(a),s=n(439),c=n(440),l=o()(r.a).call(r.a,[c.a,s.a],(function(e){return e&&e.supported()})),u=l?new l:null;function d(e,t){return!!u&&u.set("p"+e,t)}function p(e){return u?u.get("p"+e):null}},function(e,t,n){"use strict";n.r(t),n.d(t,"momentNow",(function(){return b})),n.d(t,"momentNowUnix",(function(){return g})),n.d(t,"searchSubtractFormatDateHelper",(function(){return v})),n.d(t,"format",(function(){return y})),n.d(t,"momentToNode",(function(){return S})),n.d(t,"reload",(function(){return O}));var i=n(4),o=n.n(i),a=n(3),r=n.n(a),s=n(8),c=n.n(s),l=n(101),u=n.n(l),d=n(9),p=null,f=0,h=r.a.debounce((function(){p=u()()}),500,!0),m=r.a.debounce((function(){f=u()().unix()}),500,!0);function b(){return h(),p||u()()}function g(){return m(),f||0}function v(e){return b().clone().subtract(e,"days").format("YYYY.MM.DD")}function y(e,t){var n=null,i="",o=g();if((n=0<(e=o<(e=0<e?e:0===e?o:0)?o:e)?u.a.unix(e):null)&&1970===n.year()&&(n=null),n)switch(t){case"FROMNOW":i=n.fromNow();break;case"SHORT":i=function(e){var t=b();if(e&&t)switch(!0){case 4>=t.diff(e,"hours"):return e.fromNow();case t.format("L")===e.format("L"):return Object(d.i18n)("MESSAGE_LIST/TODAY_AT",{TIME:e.format("LT")});case t.clone().subtract(1,"days").format("L")===e.format("L"):return Object(d.i18n)("MESSAGE_LIST/YESTERDAY_AT",{TIME:e.format("LT")});case t.year()===e.year():return e.format("D MMM.")}return e?e.format("LL"):""}(n);break;case"FULL":i=n.format("LLL");break;default:i=n.format(t)}return i}function S(e){var t,n="",i=c()(e);(t=i.data("moment-time"))&&((n=i.data("moment-format"))&&i.text(y(t,n)),(n=i.data("moment-format-title"))&&i.attr("title",y(t,n)))}function O(){r.a.defer((function(){c()(".moment",o.a.document).each((function(e,t){S(t)}))}))}},function(e,t,n){e.exports=n(252)},function(e,t){e.exports=window.hasher},function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return s})),n.d(t,"d",(function(){return c}));n(77),n(48);var i=n(2),o=n(83);function a(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var o=0,a=0,r=[];if(Object(i.isNonEmptyArray)(e))for(a=e.length;o<a;o++)r.push(e[o].toLine(t,n));return r.join(", ")}function r(e){var t=0,n=0,o=[];if(Object(i.isNonEmptyArray)(e))for(n=e.length;t<n;t++)e[t]&&e[t].email&&""!==e[t].name&&o.push(e[t].email);return o.join(", ")}function s(e){var t=0,n=0,a=null,r=[];if(Object(i.isNonEmptyArray)(e))for(t=0,n=e.length;t<n;t++)(a=o.EmailModel.newInstanceFromJson(e[t]))&&r.push(a);return r}function c(e,t,n){if(e&&0<e.length)for(var o=0,a=e.length;o<a;o++)Object(i.isUnd)(t[e[o].email])&&(t[e[o].email]=!0,n.push(e[o]))}},function(e,t,n){var i=n(30),o=n(128).f,a=n(47),r=n(69),s=n(97),c=n(210),l=n(183);e.exports=function(e,t){var n,u,d,p,f,h=e.target,m=e.global,b=e.stat;if(n=m?i:b?i[h]||s(h,{}):(i[h]||{}).prototype)for(u in t){if(p=t[u],d=e.noTargetGet?(f=o(n,u))&&f.value:n[u],!l(m?u:h+(b?".":"#")+u,e.forced)&&void 0!==d){if(typeof p==typeof d)continue;c(p,d)}(e.sham||d&&d.sham)&&a(p,"sham",!0),r(n,u,p,e)}}},function(e,t,n){var i=n(55),o=n(135),a=n(42),r=n(134),s=Object.defineProperty;t.f=i?s:function(e,t,n){if(a(e),t=r(t,!0),a(n),o)try{return s(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));n(152);var i=n(2),o=function(){function e(e){void 0===e&&(e=""),this.sModelName="",this.disposables=[],this.sModelName=e||""}var t=e.prototype;return t.regDisposables=function(e){var t=this;Object(i.isArray)(e)?e.forEach((function(e){t.disposables.push(e)})):e&&this.disposables.push(e)},t.onDestroy=function(){Object(i.disposeObject)(this)},e}()},,function(e,t,n){var i=n(30),o=n(47),a=n(44),r=n(97),s=n(130),c=n(131),l=c.get,u=c.enforce,d=String(String).split("String");(e.exports=function(e,t,n,s){var c,l=!!s&&!!s.unsafe,p=!!s&&!!s.enumerable,f=!!s&&!!s.noTargetGet;"function"==typeof n&&("string"!=typeof t||a(n,"name")||o(n,"name",t),(c=u(n)).source||(c.source=d.join("string"==typeof t?t:""))),e!==i?(l?!f&&e[t]&&(p=!0):delete e[t],p?e[t]=n:o(e,t,n)):p?e[t]=n:r(t,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&l(this).source||s(this)}))},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},function(e,t,n){var i=n(51);e.exports=function(e){return i[e+"Prototype"]}},function(e,t,n){"use strict";var i=n(1),o=n(2),a=n(5),r=function(){function e(){this.languages=i.a.observableArray([]),this.languagesAdmin=i.a.observableArray([]),this.language=i.a.observable("").extend({limitedList:this.languages}).extend({reversible:!0}),this.languageAdmin=i.a.observable("").extend({limitedList:this.languagesAdmin}).extend({reversible:!0}),this.userLanguage=i.a.observable(""),this.userLanguageAdmin=i.a.observable("")}return e.prototype.populate=function(){var e=a.appSettingsGet("languages"),t=a.appSettingsGet("languagesAdmin");this.languages(Object(o.isArray)(e)?e:[]),this.languagesAdmin(Object(o.isArray)(t)?t:[]),this.language(a.settingsGet("Language")),this.languageAdmin(a.settingsGet("LanguageAdmin")),this.userLanguage(a.settingsGet("UserLanguage")),this.userLanguageAdmin(a.settingsGet("UserLanguageAdmin"))},e}();t.a=new r},function(e,t,n){var i=n(129),o=n(56);e.exports=function(e){return i(o(e))}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var i=n(51),o=n(31),a=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,t){return arguments.length<2?a(i[e])||a(o[e]):i[e]&&i[e][t]||o[e]&&o[e][t]}},function(e,t){e.exports={}},function(e,t,n){"use strict";var i=n(65),o=n(129),a=n(73),r=n(285),s=[].join,c=o!=Object,l=r("join",",");i({target:"Array",proto:!0,forced:c||!l},{join:function(e){return s.call(a(this),void 0===e?",":e)}})},,function(e,t,n){var i=n(166),o=n(30),a=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,t){return arguments.length<2?a(i[e])||a(o[e]):i[e]&&i[e][t]||o[e]&&o[e][t]}},function(e,t){var n=Math.ceil,i=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?i:n)(e)}},function(e,t,n){var i=n(171),o=n(115);e.exports=function(e){return i(o(e))}},function(e,t,n){var i=n(53),o=n(187),a=n(58),r=n(159),s=Object.defineProperty;t.f=i?s:function(e,t,n){if(a(e),t=r(t,!0),a(n),o)try{return s(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){"use strict";n.r(t),n.d(t,"EmailModel",(function(){return u})),n.d(t,"default",(function(){return u}));var i=n(17),o=n.n(i),a=(n(48),n(45),n(316),n(152),n(59),n(3)),r=n.n(a),s=n(179),c=n.n(s),l=n(2),u=function(){function e(e,t,n,i){void 0===e&&(e=""),void 0===t&&(t=""),void 0===n&&(n="none"),void 0===i&&(i=""),this.email="",this.name="",this.dkimStatus="",this.dkimValue="",this.email=e,this.name=t,this.dkimStatus=n,this.dkimValue=i,this.clearDuplicateName()}e.newInstanceFromJson=function(t){var n=new e;return n.initByJson(t)?n:null};var t=e.prototype;return t.clear=function(){this.email="",this.name="",this.dkimStatus="none",this.dkimValue=""},t.validate=function(){return""!==this.name||""!==this.email},t.hash=function(e){return void 0===e&&(e=!1),"#"+(e?"":this.name)+"#"+this.email+"#"},t.clearDuplicateName=function(){this.name===this.email&&(this.name="")},t.search=function(e){return-1<(this.name+" "+this.email).toLowerCase().indexOf(e.toLowerCase())},t.initByJson=function(e){var t=!1;return e&&"Object/Email"===e["@Object"]&&(this.name=Object(l.trim)(e.Name),this.email=Object(l.trim)(e.Email),this.dkimStatus=Object(l.trim)(e.DkimStatus||""),this.dkimValue=Object(l.trim)(e.DkimValue||""),t=""!==this.email,this.clearDuplicateName()),t},t.toLine=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var i="";return""!==this.email&&(e&&""!==this.name?i=t?'<a href="mailto:'+Object(l.encodeHtml)(this.email)+"?to="+Object(l.encodeHtml)('"'+this.name+'" <'+this.email+">")+'" target="_blank" tabindex="-1">'+Object(l.encodeHtml)(this.name)+"</a>":n?Object(l.encodeHtml)(this.name):this.name:(i=this.email,""!==this.name?t?i=Object(l.encodeHtml)('"'+this.name+'" <')+'<a href="mailto:'+Object(l.encodeHtml)(this.email)+"?to="+Object(l.encodeHtml)('"'+this.name+'" <'+this.email+">")+'" target="_blank" tabindex="-1">'+Object(l.encodeHtml)(i)+"</a>"+Object(l.encodeHtml)(">"):(i='"'+this.name+'" <'+i+">",n&&(i=Object(l.encodeHtml)(i))):t&&(i='<a href="mailto:'+Object(l.encodeHtml)(this.email)+'" target="_blank" tabindex="-1">'+Object(l.encodeHtml)(this.email)+"</a>"))),i},e.splitEmailLine=function(t){var n=c()(t);if(Object(l.isNonEmptyArray)(n)){var i=[],o=!1;return n.forEach((function(t){var n=t.address?new e(t.address.replace(/^[<]+(.*)[>]+$/g,"$1"),t.name||""):null;n&&n.email&&(o=!0),i.push(n?n.toLine(!1):t.name)})),o?i:null}return null},e.parseEmailLine=function(t){var n=c()(t);return Object(l.isNonEmptyArray)(n)?r.a.compact(o()(r.a).call(r.a,n,(function(t){return t.address?new e(t.address.replace(/^[<]+(.*)[>]+$/g,"$1"),t.name||""):null}))):[]},t.parse=function(e){if(""===(e=Object(l.trim)(e)))return!1;var t=c()(e);return!(!Object(l.isNonEmptyArray)(t)||!t[0])&&(this.name=t[0].name||"",this.email=t[0].address||"",this.clearDuplicateName(),!0)},e}()},function(e,t,n){"use strict";n(45),n(59);var i=n(4),o=n.n(i),a=n(6),r=n(15),s=n(23),c=n(2),l=function(){function e(){var e=this;if(this.notificator=null,this.player=null,this.supported=!1,this.supportedMp3=!1,this.supportedOgg=!1,this.supportedWav=!1,this.supportedNotification=!1,this.player=this.createNewObject(),this.supported=!(a.bMobileDevice||a.bSafari||!this.player||!this.player.play),this.supported&&this.player&&this.player.canPlayType&&(this.supportedMp3=""!==this.player.canPlayType("audio/mpeg;").replace(/no/,""),this.supportedWav=""!==this.player.canPlayType('audio/wav; codecs="1"').replace(/no/,""),this.supportedOgg=""!==this.player.canPlayType('audio/ogg; codecs="vorbis"').replace(/no/,""),this.supportedNotification=this.supported&&this.supportedMp3),this.player&&(this.supportedMp3||this.supportedOgg||this.supportedWav)||(this.supported=!1,this.supportedMp3=!1,this.supportedOgg=!1,this.supportedWav=!1,this.supportedNotification=!1),this.supported&&this.player){var t=function(){return e.stop()};this.player.addEventListener("ended",t),this.player.addEventListener("error",t),s.b("audio.api.stop",t)}}var t=e.prototype;return t.createNewObject=function(){try{var e=o.a.Audio?new o.a.Audio:null;return e&&e.canPlayType&&e.pause&&e.play&&(e.preload="none",e.loop=!1,e.autoplay=!1,e.muted=!1),e}catch(e){}return null},t.paused=function(){return!this.supported||!!this.player.paused},t.stop=function(){this.supported&&this.player.pause&&this.player.pause(),s.a("audio.stop")},t.pause=function(){this.stop()},t.clearName=function(e,t){return void 0===e&&(e=""),void 0===t&&(t=""),e=Object(c.trim)(e),t&&"."+t===e.toLowerCase().substr(-1*(t.length+1))&&(e=Object(c.trim)(e.substr(0,e.length-4))),""===e?"audio":e},t.playMp3=function(e,t){this.supported&&this.supportedMp3&&(this.player.src=e,this.player.play(),s.a("audio.start",[this.clearName(t,"mp3"),"mp3"]))},t.playOgg=function(e,t){this.supported&&this.supportedOgg&&(this.player.src=e,this.player.play(),t=this.clearName(t,"oga"),t=this.clearName(t,"ogg"),s.a("audio.start",[t,"ogg"]))},t.playWav=function(e,t){this.supported&&this.supportedWav&&(this.player.src=e,this.player.play(),s.a("audio.start",[this.clearName(t,"wav"),"wav"]))},t.playNotification=function(){this.supported&&this.supportedMp3&&(this.notificator||(this.notificator=this.createNewObject(),this.notificator.src=r.D("new-mail.mp3")),this.notificator&&this.notificator.play&&this.notificator.play())},e}();t.a=new l},function(e,t,n){var i=n(80),o=Math.min;e.exports=function(e){return e>0?o(i(e),9007199254740991):0}},function(e,t,n){var i=n(100),o=n(69),a=n(217);i||o(Object.prototype,"toString",a,{unsafe:!0})},function(e,t){e.exports=!0},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var i=n(29),o=n(10),a=n(12),r=n.n(a),s=n(1),c=n(2),l=n(0),u=function(e){function t(t){var n,o;((n=e.call(this)||this).value=t.value||"",n.size=t.size||0,n.label=t.label||"",n.preLabel=t.preLabel||"",n.enable=!!Object(c.isUnd)(t.enable)||t.enable,n.trigger=t.trigger&&t.trigger.subscribe?t.trigger:null,n.placeholder=t.placeholder||"",n.labeled=!Object(c.isUnd)(t.label),n.preLabeled=!Object(c.isUnd)(t.preLabel),n.triggered=!Object(c.isUnd)(t.trigger)&&!!n.trigger,n.classForTrigger=s.a.observable(""),n.className=s.a.computed((function(){var e=s.a.unwrap(n.size);return(0<e?"span"+e:"")+(n.trigger?" "+Object(c.trim)("settings-saved-trigger-input "+n.classForTrigger()):"")})),!Object(c.isUnd)(t.width)&&t.element)&&r()(o=t.element).call(o,"input,select,textarea").css("width",t.width);return n.disposable.push(n.className),n.trigger&&(n.setTriggerState(n.trigger()),n.disposable.push(n.trigger.subscribe(n.setTriggerState,Object(i.a)(n)))),n}return Object(o.a)(t,e),t.prototype.setTriggerState=function(e){switch(Object(c.pInt)(e)){case l.SaveSettingsStep.TrueResult:this.classForTrigger("success");break;case l.SaveSettingsStep.FalseResult:this.classForTrigger("error");break;default:this.classForTrigger("")}},t}(n(32).a)},,function(e,t,n){var i=n(56);e.exports=function(e){return Object(i(e))}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var i=n(143),o=Math.min;e.exports=function(e){return e>0?o(i(e),9007199254740991):0}},function(e,t,n){var i=n(145),o=n(114),a=n(38)("toStringTag"),r="Arguments"==o(function(){return arguments}());e.exports=i?o:function(e){var t,n,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),a))?n:r?o(t):"Object"==(i=o(t))&&"function"==typeof t.callee?"Arguments":i}},function(e,t,n){"use strict";var i=n(10),o=n(33),a=n.n(o),r=n(4),s=n.n(r),c=n(407),l=function(e){function t(){var t;return(t=e.call(this)||this).foldersTimeout=0,t}Object(i.a)(t,e);var n=t.prototype;return n.foldersReload=function(e){return this.abort("Folders").postRequest("Folders",e).then((function(e){return c.a.foldersList(e.Result),c.a.foldersAdditionalParameters(e.Result),!0}))},n.foldersReloadWithTimeout=function(e){var t=this;this.setTrigger(e,!0),s.a.clearTimeout(this.foldersTimeout),this.foldersTimeout=a()((function(){t.foldersReload(e)}),500)},n.folderDelete=function(e,t){return this.postRequest("FolderDelete",t,{Folder:e})},n.folderCreate=function(e,t,n){return this.postRequest("FolderCreate",n,{Folder:e,Parent:t})},n.folderRename=function(e,t,n){return this.postRequest("FolderRename",n,{Folder:e,NewFolderName:t})},n.attachmentsActions=function(e,t,n){return this.postRequest("AttachmentsActions",n,{Do:e,Hashes:t})},n.welcomeClose=function(){return this.postRequest("WelcomeClose")},t}(n(442).a);t.a=new l},,function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var i=n(30),o=n(47);e.exports=function(e,t){try{o(i,e,t)}catch(n){i[e]=t}return t}},function(e,t,n){var i=n(30),o=n(97),a="__core-js_shared__",r=i[a]||o(a,{});e.exports=r},function(e,t){e.exports=!1},function(e,t,n){var i={};i[n(39)("toStringTag")]="z",e.exports="[object z]"===String(i)},function(e,t){e.exports=window.moment},function(e,t){e.exports=window.progressJs},function(e,t,n){"use strict";var i=n(17),o=n.n(i),a=n(3),r=n.n(a),s=n(1);t.a=new function(){var e=this;this.identities=s.a.observableArray([]),this.identities.loading=s.a.observable(!1).extend({throttle:100}),this.identitiesIDS=s.a.computed((function(){return r.a.compact(o()(r.a).call(r.a,e.identities(),(function(e){return e?e.id:null})))}))}},function(e,t,n){"use strict";var i=n(1),o=n(0),a=n(5),r=function(){function e(){this.contacts=i.a.observableArray([]),this.contacts.loading=i.a.observable(!1).extend({throttle:o.Magics.Time200ms}),this.contacts.importing=i.a.observable(!1).extend({throttle:o.Magics.Time200ms}),this.contacts.syncing=i.a.observable(!1).extend({throttle:o.Magics.Time200ms}),this.contacts.exportingVcf=i.a.observable(!1).extend({throttle:o.Magics.Time200ms}),this.contacts.exportingCsv=i.a.observable(!1).extend({throttle:o.Magics.Time200ms}),this.allowContactsSync=i.a.observable(!1),this.enableContactsSync=i.a.observable(!1),this.contactsSyncUrl=i.a.observable(""),this.contactsSyncUser=i.a.observable(""),this.contactsSyncPass=i.a.observable("")}return e.prototype.populate=function(){this.allowContactsSync(!!a.settingsGet("ContactsSyncIsAllowed")),this.enableContactsSync(!!a.settingsGet("EnableContactsSync")),this.contactsSyncUrl(a.settingsGet("ContactsSyncUrl")),this.contactsSyncUser(a.settingsGet("ContactsSyncUser")),this.contactsSyncPass(a.settingsGet("ContactsSyncPassword"))},e}();t.a=new r},function(e,t,n){var i=n(99),o=n(98);(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.12.0",mode:i?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},function(e,t){e.exports={}},function(e,t,n){var i=n(75);e.exports=i("navigator","userAgent")||""},function(e,t,n){var i=n(58),o=n(261),a=n(92),r=n(116),s=n(263),c=n(264),l=function(e,t){this.stopped=e,this.result=t};e.exports=function(e,t,n){var u,d,p,f,h,m,b,g=n&&n.that,v=!(!n||!n.AS_ENTRIES),y=!(!n||!n.IS_ITERATOR),S=!(!n||!n.INTERRUPTED),O=r(t,g,1+v+S),w=function(e){return u&&c(u),new l(!0,e)},T=function(e){return v?(i(e),S?O(e[0],e[1],w):O(e[0],e[1])):S?O(e,w):O(e)};if(y)u=e;else{if("function"!=typeof(d=s(e)))throw TypeError("Target is not iterable");if(o(d)){for(p=0,f=a(e.length);f>p;p++)if((h=T(e[p]))&&h instanceof l)return h;return new l(!1)}u=d.call(e)}for(m=u.next;!(b=m.call(u)).done;){try{h=T(b.value)}catch(e){throw c(u),e}if("object"==typeof h&&h&&h instanceof l)return h}return new l(!1)}},function(e,t,n){var i=n(52);e.exports=function(e,t,n,o){o&&o.enumerable?e[t]=n:i(e,t,n)}},function(e,t,n){"use strict";var i=n(70),o=function(e){var t,n;this.promise=new e((function(e,i){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=i})),this.resolve=i(t),this.reject=i(n)};e.exports.f=function(e){return new o(e)}},function(e,t,n){var i=n(105),o=n(137),a=i("keys");e.exports=function(e){return a[e]||(a[e]=o(e))}},function(e,t){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(e,t){e.exports={}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},function(e,t,n){var i=n(70);e.exports=function(e,t,n){if(i(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,o){return e.call(t,n,i,o)}}return function(){return e.apply(t,arguments)}}},function(e,t,n){var i=n(115);e.exports=function(e){return Object(i(e))}},function(e,t,n){var i=n(114),o=n(31);e.exports="process"==i(o.process)},function(e,t,n){"use strict";var i=n(69),o=n(42),a=n(37),r=n(203),s="toString",c=RegExp.prototype,l=c.toString,u=a((function(){return"/a/b"!=l.call({source:"a",flags:"b"})})),d=l.name!=s;(u||d)&&i(RegExp.prototype,s,(function(){var e=o(this),t=String(e.source),n=e.flags;return"/"+t+"/"+String(void 0===n&&e instanceof RegExp&&!("flags"in c)?r.call(e):n)}),{unsafe:!0})},function(e,t,n){var i=n(53),o=n(43),a=n(54),r=Object.defineProperty,s={},c=function(e){throw e};e.exports=function(e,t){if(a(s,e))return s[e];t||(t={});var n=[][e],l=!!a(t,"ACCESSORS")&&t.ACCESSORS,u=a(t,0)?t[0]:c,d=a(t,1)?t[1]:void 0;return s[e]=!!n&&!o((function(){if(l&&!i)return!0;var e={length:-1};l?r(e,1,{enumerable:!0,get:c}):e[1]=1,n.call(e,u,d)}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n(62),o=n.n(i),a=n(4),r=n.n(a);function s(e,t){if(void 0===t&&(t=!1),!o.a||!o.a.all)throw new Error("Promises are not available your environment.");if(!e)throw new Error("src should not be empty.");return new o.a((function(n,i){var o=r.a.document.createElement("script");o.onload=function(){n(e)},o.onerror=function(){i(new Error(e))},o.async=!0===t,o.src=e,r.a.document.body.appendChild(o)}))}},function(e,t,n){e.exports=n(342)},function(e,t,n){"use strict";var i=n(1),o=n(2),a=n(5),r=function(){function e(){this.themes=i.a.observableArray([]),this.themeBackgroundName=i.a.observable(""),this.themeBackgroundHash=i.a.observable(""),this.theme=i.a.observable("").extend({limitedList:this.themes})}return e.prototype.populate=function(){var e=a.appSettingsGet("themes");this.themes(Object(o.isArray)(e)?e:[]),this.theme(a.settingsGet("Theme")),this.themeBackgroundName(a.settingsGet("UserBackgroundName")),this.themeBackgroundHash(a.settingsGet("UserBackgroundHash"))},e}();t.a=new r},function(e,t,n){"use strict";var i=n(33),o=n.n(i),a=n(4),r=n.n(a),s=n(1),c=n(0),l=n(23),u=n(84),d=n(5),p=function(){function e(){var e=this;this.enableSoundNotification=s.a.observable(!1),this.soundNotificationIsSupported=s.a.observable(!1),this.allowDesktopNotification=s.a.observable(!1),this.desktopNotificationPermissions=s.a.computed((function(){e.allowDesktopNotification();var t=c.DesktopNotification.NotSupported,n=e.notificationClass();if(n&&n.permission)switch(n.permission.toLowerCase()){case"granted":t=c.DesktopNotification.Allowed;break;case"denied":t=c.DesktopNotification.Denied;break;case"default":t=c.DesktopNotification.NotAllowed}else r.a.webkitNotifications&&r.a.webkitNotifications.checkPermission&&(t=r.a.webkitNotifications.checkPermission());return t})).extend({notify:"always"}),this.enableDesktopNotification=s.a.computed({read:function(){return e.allowDesktopNotification()&&c.DesktopNotification.Allowed===e.desktopNotificationPermissions()},write:function(t){if(t){var n=e.notificationClass(),i=e.desktopNotificationPermissions();n&&c.DesktopNotification.Allowed===i?e.allowDesktopNotification(!0):n&&c.DesktopNotification.NotAllowed===i?n.requestPermission((function(){e.allowDesktopNotification.valueHasMutated(),c.DesktopNotification.Allowed===e.desktopNotificationPermissions()?e.allowDesktopNotification()?e.allowDesktopNotification.valueHasMutated():e.allowDesktopNotification(!0):e.allowDesktopNotification()?e.allowDesktopNotification(!1):e.allowDesktopNotification.valueHasMutated()})):e.allowDesktopNotification(!1)}else e.allowDesktopNotification(!1)}}).extend({notify:"always"}),this.enableDesktopNotification.valueHasMutated||(this.enableDesktopNotification.valueHasMutated=function(){e.allowDesktopNotification.valueHasMutated()}),this.computers(),this.initNotificationPlayer()}var t=e.prototype;return t.computers=function(){var e=this;this.isDesktopNotificationSupported=s.a.computed((function(){return c.DesktopNotification.NotSupported!==e.desktopNotificationPermissions()})),this.isDesktopNotificationDenied=s.a.computed((function(){return c.DesktopNotification.NotSupported===e.desktopNotificationPermissions()||c.DesktopNotification.Denied===e.desktopNotificationPermissions()}))},t.initNotificationPlayer=function(){u.a&&u.a.supportedNotification?this.soundNotificationIsSupported(!0):(this.enableSoundNotification(!1),this.soundNotificationIsSupported(!1))},t.playSoundNotification=function(e){u.a&&u.a.supportedNotification&&(e||this.enableSoundNotification())&&u.a.playNotification()},t.displayDesktopNotification=function(e,t,n,i){if(this.enableDesktopNotification()){var a=this.notificationClass(),s=a?new a(t,{body:n,icon:e}):null;s&&(s.show&&s.show(),i&&(s.onclick=function(){r.a.focus(),i.Folder&&i.Uid&&l.a("mailbox.message.show",[i.Folder,i.Uid])}),o()((u=s,function(){u.cancel?u.cancel():u.close&&u.close()}),c.Magics.Time7s))}var u},t.populate=function(){this.enableSoundNotification(!!d.settingsGet("SoundNotification")),this.enableDesktopNotification(!!d.settingsGet("DesktopNotifications"))},t.notificationClass=function(){return r.a.Notification&&r.a.Notification.requestPermission?r.a.Notification:null},e}();t.a=new p},,,function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){var i=n(55),o=n(180),a=n(96),r=n(73),s=n(134),c=n(44),l=n(135),u=Object.getOwnPropertyDescriptor;t.f=i?u:function(e,t){if(e=r(e),t=s(t,!0),l)try{return u(e,t)}catch(e){}if(c(e,t))return a(!o.f.call(e,t),e[t])}},function(e,t,n){var i=n(37),o=n(74),a="".split;e.exports=i((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==o(e)?a.call(e,""):Object(e)}:Object},function(e,t,n){var i=n(98),o=Function.toString;"function"!=typeof i.inspectSource&&(i.inspectSource=function(e){return o.call(e)}),e.exports=i.inspectSource},function(e,t,n){var i,o,a,r=n(209),s=n(30),c=n(49),l=n(47),u=n(44),d=n(98),p=n(111),f=n(106),h="Object already initialized",m=s.WeakMap;if(r){var b=d.state||(d.state=new m),g=b.get,v=b.has,y=b.set;i=function(e,t){if(v.call(b,e))throw new TypeError(h);return t.facade=e,y.call(b,e,t),t},o=function(e){return g.call(b,e)||{}},a=function(e){return v.call(b,e)}}else{var S=p("state");f[S]=!0,i=function(e,t){if(u(e,S))throw new TypeError(h);return t.facade=e,l(e,S,t),t},o=function(e){return u(e,S)?e[S]:{}},a=function(e){return u(e,S)}}e.exports={set:i,get:o,has:a,enforce:function(e){return a(e)?o(e):i(e,{})},getterFor:function(e){return function(t){var n;if(!c(t)||(n=o(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},function(e,t,n){"use strict";n.r(t),n.d(t,"ComposePopupView",(function(){return le})),n.d(t,"default",(function(){return le}));var i,o,a,r,s,c,l,u,d,p,f=n(29),h=n(10),m=n(18),b=n(28),g=n.n(b),v=n(17),y=n.n(v),S=n(33),O=n.n(S),w=n(57),T=n.n(w),C=n(12),A=n.n(C),E=n(19),j=n.n(E),F=(n(45),n(204),n(77),n(205),n(59),n(86),n(119),n(48),n(4)),R=n.n(F),N=n(3),I=n.n(N),L=n(8),P=n.n(L),_=n(1),M=n(20),D=n.n(M),k=n(206),x=n.n(k),U=n(0),H=n(2),G=n(24),B=n(6),V=n(15),K=n(9),q=n(61),z=n(14),W=n(227),Y=n(27),$=n(35),J=n(103),X=n(46),Z=n(11),Q=n(41),ee=n(13),te=n(26),ne=n(16),ie=n(5),oe=n(23),ae=n(310),re=n(21),se=n(7),ce=n(25),le=(i=Object(se.popup)({name:"View/Popup/Compose",templateID:"PopupsCompose"}),o=Object(se.command)((function(e){return e.canBeSentOrSaved()})),a=Object(se.command)((function(e){return e.canBeSentOrSaved()})),r=Object(se.command)((function(e){return e.isDraftFolderMessage()})),s=Object(se.command)((function(e){return e.canBeSentOrSaved()})),c=Object(se.command)((function(e){return e.allowContacts})),l=Object(se.command)((function(e){return e.dropboxEnabled()})),u=Object(se.command)((function(e){return e.driveEnabled()})),i((p=function(e){function t(){var t;t=e.call(this)||this;var n=function(e,t,n,i){if(t&&e&&t[n]()&&(i||e[n]())){var o=t[n](),a=Object(H.trim)(e[n]()).split(/[,]/);a=g()(I.a).call(I.a,a,(function(e){return(e=Object(H.trim)(e))&&Object(H.trim)(o)!==e})),i&&a.push(o),e[n](a.join(","))}};return t.oLastMessage=null,t.oEditor=null,t.aDraftInfo=null,t.sInReplyTo="",t.bFromDraft=!1,t.sReferences="",t.sLastFocusedField="to",t.resizerTrigger=I.a.bind(t.resizerTrigger,Object(f.a)(t)),t.allowContacts=!!Y.a.contactsIsAllowed(),t.allowFolders=!!ie.capa(U.Capa.Folders),t.bSkipNextHide=!1,t.composeInEdit=Y.a.composeInEdit,t.editorDefaultType=$.a.editorDefaultType,t.capaOpenPGP=Q.a.capaOpenPGP,t.identitiesDropdownTrigger=_.a.observable(!1),t.to=_.a.observable(""),t.to.focused=_.a.observable(!1),t.cc=_.a.observable(""),t.cc.focused=_.a.observable(!1),t.bcc=_.a.observable(""),t.bcc.focused=_.a.observable(!1),t.replyTo=_.a.observable(""),t.replyTo.focused=_.a.observable(!1),_.a.computed((function(){switch(!0){case t.to.focused():t.sLastFocusedField="to";break;case t.cc.focused():t.sLastFocusedField="cc";break;case t.bcc.focused():t.sLastFocusedField="bcc"}})).extend({notify:"always"}),t.subject=_.a.observable(""),t.subject.focused=_.a.observable(!1),t.isHtml=_.a.observable(!1),t.requestDsn=_.a.observable(!1),t.requestReadReceipt=_.a.observable(!1),t.markAsImportant=_.a.observable(!1),t.sendError=_.a.observable(!1),t.sendSuccessButSaveError=_.a.observable(!1),t.savedError=_.a.observable(!1),t.sendButtonSuccess=_.a.computed((function(){return!t.sendError()&&!t.sendSuccessButSaveError()})),t.sendErrorDesc=_.a.observable(""),t.savedErrorDesc=_.a.observable(""),t.sendError.subscribe((function(e){e||t.sendErrorDesc("")})),t.savedError.subscribe((function(e){e||t.savedErrorDesc("")})),t.sendSuccessButSaveError.subscribe((function(e){e||t.savedErrorDesc("")})),t.savedTime=_.a.observable(0),t.savedTimeText=_.a.computed((function(){return 0<t.savedTime()?Object(K.i18n)("COMPOSE/SAVED_TIME",{TIME:Object(q.format)(t.savedTime()-1,"LT")}):""})),t.emptyToError=_.a.observable(!1),t.emptyToErrorTooltip=_.a.computed((function(){return t.emptyToError()?Object(K.i18n)("COMPOSE/EMPTY_TO_ERROR_DESC"):""})),t.attachmentsInProcessError=_.a.observable(!1),t.attachmentsInErrorError=_.a.observable(!1),t.attachmentsErrorTooltip=_.a.computed((function(){var e="";switch(!0){case t.attachmentsInProcessError():e=Object(K.i18n)("COMPOSE/ATTACHMENTS_UPLOAD_ERROR_DESC");break;case t.attachmentsInErrorError():e=Object(K.i18n)("COMPOSE/ATTACHMENTS_ERROR_DESC")}return e})),t.showCc=_.a.observable(!1),t.showBcc=_.a.observable(!1),t.showReplyTo=_.a.observable(!1),t.cc.subscribe((function(e){!1===t.showCc()&&0<e.length&&t.showCc(!0)})),t.bcc.subscribe((function(e){!1===t.showBcc()&&0<e.length&&t.showBcc(!0)})),t.replyTo.subscribe((function(e){!1===t.showReplyTo()&&0<e.length&&t.showReplyTo(!0)})),t.draftFolder=_.a.observable(""),t.draftUid=_.a.observable(""),t.sending=_.a.observable(!1),t.saving=_.a.observable(!1),t.attachments=_.a.observableArray([]),t.attachmentsInProcess=_.a.computed((function(){return g()(I.a).call(I.a,t.attachments(),(function(e){return e&&!e.complete()}))})),t.attachmentsInReady=_.a.computed((function(){return g()(I.a).call(I.a,t.attachments(),(function(e){return e&&e.complete()}))})),t.attachmentsInError=_.a.computed((function(){return g()(I.a).call(I.a,t.attachments(),(function(e){return e&&""!==e.error()}))})),t.attachmentsCount=_.a.computed((function(){return t.attachments().length})),t.attachmentsInErrorCount=_.a.computed((function(){return t.attachmentsInError().length})),t.attachmentsInProcessCount=_.a.computed((function(){return t.attachmentsInProcess().length})),t.isDraftFolderMessage=_.a.computed((function(){return""!==t.draftFolder()&&""!==t.draftUid()})),t.attachmentsPlace=_.a.observable(!1),t.attachments.subscribe(t.resizerTrigger),t.attachmentsPlace.subscribe(t.resizerTrigger),t.attachmentsInErrorCount.subscribe((function(e){0===e&&t.attachmentsInErrorError(!1)})),t.composeUploaderButton=_.a.observable(null),t.composeUploaderDropPlace=_.a.observable(null),t.dragAndDropEnabled=_.a.observable(!1),t.dragAndDropOver=_.a.observable(!1).extend({throttle:1}),t.dragAndDropVisible=_.a.observable(!1).extend({throttle:1}),t.attacheMultipleAllowed=_.a.observable(!1),t.addAttachmentEnabled=_.a.observable(!1),t.composeEditorArea=_.a.observable(null),t.identities=J.a.identities,t.identitiesOptions=_.a.computed((function(){return y()(I.a).call(I.a,J.a.identities(),(function(e){return{item:e,optValue:e.id(),optText:e.formattedName()}}))})),t.currentIdentity=_.a.observable(t.identities()[0]?t.identities()[0]:null),t.currentIdentity.extend({toggleSubscribe:[Object(f.a)(t),function(e){n(Object(f.a)(t),e,"bcc"),n(Object(f.a)(t),e,"replyTo")},function(e){n(Object(f.a)(t),e,"bcc",!0),n(Object(f.a)(t),e,"replyTo",!0)}]}),t.currentIdentityView=_.a.computed((function(){var e=t.currentIdentity();return e?e.formattedName():"unknown"})),t.to.subscribe((function(e){t.emptyToError()&&0<e.length&&t.emptyToError(!1)})),t.attachmentsInProcess.subscribe((function(e){t.attachmentsInProcessError()&&Object(H.isArray)(e)&&0===e.length&&t.attachmentsInProcessError(!1)})),t.resizer=_.a.observable(!1).extend({throttle:50}),t.resizer.subscribe((function(){t.oEditor&&t.oEditor.resize()})),t.canBeSentOrSaved=_.a.computed((function(){return!t.sending()&&!t.saving()})),t.sendMessageResponse=I.a.bind(t.sendMessageResponse,Object(f.a)(t)),t.saveMessageResponse=I.a.bind(t.saveMessageResponse,Object(f.a)(t)),oe.b("interval.2m",(function(){!t.modalVisibility()||Z.a.draftFolderNotEnabled()||!$.a.allowDraftAutosave()||t.isEmptyForm(!1)||t.saving()||t.sending()||t.savedError()||t.saveCommand()})),t.showCc.subscribe(t.resizerTrigger),t.showBcc.subscribe(t.resizerTrigger),t.showReplyTo.subscribe(t.resizerTrigger),t.dropboxEnabled=te.a.dropbox.enabled,t.dropboxApiKey=te.a.dropbox.apiKey,t.driveEnabled=_.a.observable(B.bXMLHttpRequestSupported&&!!ie.settingsGet("AllowGoogleSocial")&&!!ie.settingsGet("AllowGoogleSocialDrive")&&!!ie.settingsGet("GoogleClientID")&&!!ie.settingsGet("GoogleApiKey")),t.driveVisible=_.a.observable(!1),t.driveCallback=I.a.bind(t.driveCallback,Object(f.a)(t)),t.onMessageUploadAttachments=I.a.bind(t.onMessageUploadAttachments,Object(f.a)(t)),t.bDisabeCloseOnEsc=!0,t.sDefaultKeyScope=U.KeyState.Compose,t.tryToClosePopup=I.a.debounce(I.a.bind(t.tryToClosePopup,Object(f.a)(t)),U.Magics.Time200ms),t.emailsSource=I.a.bind(t.emailsSource,Object(f.a)(t)),t.autosaveFunction=I.a.bind(t.autosaveFunction,Object(f.a)(t)),t.iTimer=0,t}Object(h.a)(t,e);var i=t.prototype;return i.sendCommand=function(){var e=Object(H.trim)(this.to()),t=Object(H.trim)(this.cc()),i=Object(H.trim)(this.bcc()),o=Z.a.sentFolder();if(this.attachmentsInProcessError(!1),this.attachmentsInErrorError(!1),this.emptyToError(!1),0<this.attachmentsInProcess().length?(this.attachmentsInProcessError(!0),this.attachmentsPlace(!0)):0<this.attachmentsInError().length&&(this.attachmentsInErrorError(!0),this.attachmentsPlace(!0)),""===e&&""===t&&""===i&&this.emptyToError(!0),!this.emptyToError()&&!this.attachmentsInErrorError()&&!this.attachmentsInProcessError())if($.a.replySameFolder()&&Object(H.isArray)(this.aDraftInfo)&&3===this.aDraftInfo.length&&Object(H.isNormal)(this.aDraftInfo[2])&&0<this.aDraftInfo[2].length&&(o=this.aDraftInfo[2]),this.allowFolders||(o=G.r),""===o)Object(se.showScreenPopup)(n(317),[U.SetSystemFoldersNotification.Sent]);else{if(this.sendError(!1),this.sending(!0),Object(H.isArray)(this.aDraftInfo)&&3===this.aDraftInfo.length){var a=Object(z.j)(this.aDraftInfo[2],this.aDraftInfo[1]);a&&("forward"===this.aDraftInfo[0]?a[3]=!0:a[2]=!0,Object(z.t)(this.aDraftInfo[2],this.aDraftInfo[1],a),Object(re.a)().reloadFlagsCurrentMessageListAndMessageFromCache(),Object(z.q)(this.aDraftInfo[2],""))}o=G.r===o?"":o,Object(z.q)(this.draftFolder(),""),Object(z.q)(o,""),ne.a.sendMessage(this.sendMessageResponse,this.currentIdentity()?this.currentIdentity().id():"",this.draftFolder(),this.draftUid(),o,e,this.cc(),this.bcc(),this.replyTo(),this.subject(),!!this.oEditor&&this.oEditor.isHtml(),this.oEditor?this.oEditor.getData(!0):"",this.prepearAttachmentsForSendOrSave(),this.aDraftInfo,this.sInReplyTo,this.sReferences,this.requestDsn(),this.requestReadReceipt(),this.markAsImportant())}},i.saveCommand=function(){return!!this.allowFolders&&(Z.a.draftFolderNotEnabled()?Object(se.showScreenPopup)(n(317),[U.SetSystemFoldersNotification.Draft]):(this.savedError(!1),this.saving(!0),this.autosaveStart(),Object(z.q)(Z.a.draftFolder(),""),ne.a.saveMessage(this.saveMessageResponse,this.currentIdentity()?this.currentIdentity().id():"",this.draftFolder(),this.draftUid(),Z.a.draftFolder(),this.to(),this.cc(),this.bcc(),this.replyTo(),this.subject(),!!this.oEditor&&this.oEditor.isHtml(),this.oEditor?this.oEditor.getData(!0):"",this.prepearAttachmentsForSendOrSave(),this.aDraftInfo,this.sInReplyTo,this.sReferences,this.markAsImportant())),!0)},i.deleteCommand=function(){var e=this,i=n(239);!Object(se.isPopupVisible)(i)&&this.modalVisibility()&&Object(se.showScreenPopup)(i,[Object(K.i18n)("POPUPS_ASK/DESC_WANT_DELETE_MESSAGES"),function(){e.modalVisibility()&&(Object(re.a)().deleteMessagesFromFolderWithoutCheck(e.draftFolder(),[e.draftUid()]),Object(se.hideScreenPopup)(t))}])},i.skipCommand=function(){this.bSkipNextHide=!0,!this.modalVisibility()||this.saving()||this.sending()||Z.a.draftFolderNotEnabled()||!$.a.allowDraftAutosave()||this.saveCommand(),this.tryToClosePopup()},i.contactsCommand=function(){var e=this;this.allowContacts&&(this.skipCommand(),I.a.delay((function(){Object(se.showScreenPopup)(n(428),[!0,e.sLastFocusedField])}),U.Magics.Time200ms))},i.dropboxCommand=function(){var e=this;return R.a.Dropbox&&R.a.Dropbox.choose({success:function(t){t&&t[0]&&t[0].link&&e.addDropboxAttachment(t[0])},linkType:"direct",multiselect:!1}),!0},i.driveCommand=function(){return this.driveOpenPopup(),!0},i.autosaveFunction=function(){!this.modalVisibility()||Z.a.draftFolderNotEnabled()||!$.a.allowDraftAutosave()||this.isEmptyForm(!1)||this.saving()||this.sending()||this.savedError()||this.saveCommand(),this.autosaveStart()},i.autosaveStart=function(){R.a.clearTimeout(this.iTimer),this.iTimer=O()(this.autosaveFunction,U.Magics.Time1m)},i.autosaveStop=function(){R.a.clearTimeout(this.iTimer)},i.emailsSource=function(e,t){Object(re.a)().getAutocomplete(e.term,(function(e){t(y()(I.a).call(I.a,e,(function(e){return e.toLine(!1)})))}))},i.openOpenPgpPopup=function(){var e=this;Q.a.capaOpenPGP()&&this.oEditor&&!this.oEditor.isHtml()&&Object(se.showScreenPopup)(n(553),[function(t){e.editor((function(e){e.setPlain(t)}))},this.oEditor.getData(!1),this.currentIdentity(),this.to(),this.cc(),this.bcc()])},i.reloadDraftFolder=function(){var e=Z.a.draftFolder();""!==e&&G.r!==e&&(Object(z.q)(e,""),Z.a.currentFolderFullNameRaw()===e?Object(re.a)().reloadMessageList(!0):Object(re.a)().folderInformation(e))},i.findIdentityByMessage=function(e,t){var n=1e3,i=null,o=J.a.identities(),a={},r=function(e){e&&e.email&&a[e.email]&&(!i||n>a[e.email][1])&&(i=a[e.email][0],n=a[e.email][1])};if(I.a.each(o,(function(e,t){a[e.email()]=[e,t]})),t)switch(e){case U.ComposeType.Empty:break;case U.ComposeType.Reply:case U.ComposeType.ReplyAll:case U.ComposeType.Forward:case U.ComposeType.ForwardAsAttachment:I.a.each(I.a.union(t.to,t.cc,t.bcc),r),i||I.a.each(t.deliveredTo,r);break;case U.ComposeType.Draft:I.a.each(I.a.union(t.from,t.replyTo),r)}return i||o[0]||null},i.selectIdentity=function(e){e&&e.item&&(this.currentIdentity(e.item),this.setSignatureFromIdentity(e.item))},i.sendMessageResponse=function(e,t){var n=!1,i="";this.sending(!1),U.StorageResultType.Success===e&&t&&t.Result&&(n=!0,this.modalVisibility()&&Object(H.delegateRun)(this,"closeCommand")),this.modalVisibility()&&!n&&(t&&U.Notification.CantSaveMessage===t.ErrorCode?(this.sendSuccessButSaveError(!0),this.savedErrorDesc(Object(H.trim)(Object(K.i18n)("COMPOSE/SAVED_ERROR_ON_SEND")))):(i=Object(K.getNotification)(t&&t.ErrorCode?t.ErrorCode:U.Notification.CantSendMessage,t&&t.ErrorMessage?t.ErrorMessage:""),this.sendError(!0),this.sendErrorDesc(i||Object(K.getNotification)(U.Notification.CantSendMessage)))),this.reloadDraftFolder()},i.saveMessageResponse=function(e,t){var n=!1;if(this.saving(!1),U.StorageResultType.Success===e&&t&&t.Result&&t.Result.NewFolder&&t.Result.NewUid){if(n=!0,this.bFromDraft){var i=ee.a.message();i&&this.draftFolder()===i.folderFullNameRaw&&this.draftUid()===i.uid&&ee.a.message(null)}this.draftFolder(t.Result.NewFolder),this.draftUid(t.Result.NewUid),this.savedTime(R.a.Math.round((new R.a.Date).getTime()/1e3)),this.bFromDraft&&Object(z.q)(this.draftFolder(),"")}n||(this.savedError(!0),this.savedErrorDesc(Object(K.getNotification)(U.Notification.CantSaveMessage))),this.reloadDraftFolder()},i.onHide=function(){this.autosaveStop(),this.bSkipNextHide||(Y.a.composeInEdit(!1),this.reset()),this.bSkipNextHide=!1,this.to.focused(!1),Object(se.routeOn)()},i.editor=function(e){var t=this;e&&(!this.oEditor&&this.composeEditorArea()?this.oEditor=new W.HtmlEditor(this.composeEditorArea(),null,(function(){e(t.oEditor),t.resizerTrigger()}),(function(e){t.isHtml(!!e)})):this.oEditor&&(e(this.oEditor),this.resizerTrigger()))},i.converSignature=function(e){var t=10,n="",i=[],o=/{{MOMENT:([^}]+)}}/g;if(e=e.replace(/[\r]/g,""),""!==(n=this.oLastMessage?this.emailArrayToStringLineHelper(this.oLastMessage.from,!0):"")&&(e=e.replace(/{{FROM-FULL}}/g,n),-1===n.indexOf(" ")&&0<n.indexOf("@")&&(n=n.replace(/@[\S]+/,"")),e=e.replace(/{{FROM}}/g,n)),-1<(e=(e=(e=(e=e.replace(/[\s]{1,2}{{FROM}}/g,"{{FROM}}")).replace(/[\s]{1,2}{{FROM-FULL}}/g,"{{FROM-FULL}}")).replace(/{{FROM}}/g,"")).replace(/{{FROM-FULL}}/g,"")).indexOf("{{DATE}}")&&(e=e.replace(/{{DATE}}/g,Object(q.format)(0,"llll"))),-1<e.indexOf("{{TIME}}")&&(e=e.replace(/{{TIME}}/g,Object(q.format)(0,"LT"))),-1<e.indexOf("{{MOMENT:"))try{for(var a=null;null!==(a=o.exec(e))&&(a&&a[0]&&a[1]&&i.push([a[0],a[1]]),0!=(t-=1)););i&&0<i.length&&I.a.each(i,(function(t){e=e.replace(t[0],Object(q.format)(0,t[1]))})),e=e.replace(/{{MOMENT:[^}]+}}/g,"")}catch(e){}return e},i.setSignatureFromIdentity=function(e){var t=this;e&&this.editor((function(n){var i=!1,o=e.signature();""!==o&&":HTML:"===o.substr(0,6)&&(i=!0,o=o.substr(6)),n.setSignature(t.converSignature(o),i,!!e.signatureInsertBefore())}))},i.onShow=function(e,t,i,o,a,r,s){var c=this;Object(se.routeOff)(),this.autosaveStart(),Y.a.composeInEdit()?(e=e||U.ComposeType.Empty,U.ComposeType.Empty!==e?Object(se.showScreenPopup)(n(239),[Object(K.i18n)("COMPOSE/DISCARD_UNSAVED_DATA"),function(){c.initOnShow(e,t,i,o,a,r,s)},null,null,null,!1]):(this.addEmailsTo(this.to,i),this.addEmailsTo(this.cc,o),this.addEmailsTo(this.bcc,a),Object(H.isNormal)(r)&&""!==r&&""===this.subject()&&this.subject(r))):this.initOnShow(e,t,i,o,a,r,s)},i.onWarmUp=function(){this.modalVisibility&&!this.modalVisibility()&&this.editor((function(e){return e.modeToggle(!1)}))},i.addEmailsTo=function(e,t){if(Object(H.isNonEmptyArray)(t)){var n=Object(H.trim)(e()),i=I.a.uniq(I.a.compact(y()(I.a).call(I.a,t,(function(e){return e?e.toLine(!1):null}))));e(n+(""===n?"":", ")+Object(H.trim)(i.join(", ")))}},i.emailArrayToStringLineHelper=function(e,t){return t=!!t,y()(I.a).call(I.a,e,(function(e){return e.toLine(t)})).join(", ")},i.initOnShow=function(e,t,n,i,o,a,r){var s=this;Y.a.composeInEdit(!0);var c="",l="",u="",d="",p="",f="",h="",m=null,b=null,g=null,v={},y=X.a.email(),S=e||U.ComposeType.Empty;if((t=t||null)&&Object(H.isNormal)(t)&&(g=Object(H.isArray)(t)&&1===t.length?t[0]:Object(H.isArray)(t)?null:t),this.oLastMessage=g,null!==y&&(v[y]=!0),this.reset(),(m=this.findIdentityByMessage(S,g))&&(v[m.email()]=!0),Object(H.isNonEmptyArray)(n)&&this.to(this.emailArrayToStringLineHelper(n)),Object(H.isNonEmptyArray)(i)&&this.cc(this.emailArrayToStringLineHelper(i)),Object(H.isNonEmptyArray)(o)&&this.bcc(this.emailArrayToStringLineHelper(o)),""!==S&&g){d=Object(q.format)(g.dateTimeStampInUTC(),"FULL"),p=g.subject(),b=g.aDraftInfo;var O=P()(g.body).clone();O&&(Object(H.clearBqSwitcher)(O),f=O.html());var w=null;switch(S){case U.ComposeType.Empty:break;case U.ComposeType.Reply:this.to(this.emailArrayToStringLineHelper(g.replyEmails(v))),this.subject(Object(H.replySubjectAdd)("Re",p)),this.prepearMessageAttachments(g,S),this.aDraftInfo=["reply",g.uid,g.folderFullNameRaw],this.sInReplyTo=g.sMessageId,this.sReferences=Object(H.trim)(this.sInReplyTo+" "+g.sReferences);break;case U.ComposeType.ReplyAll:w=g.replyAllEmails(v),this.to(this.emailArrayToStringLineHelper(w[0])),this.cc(this.emailArrayToStringLineHelper(w[1])),this.subject(Object(H.replySubjectAdd)("Re",p)),this.prepearMessageAttachments(g,S),this.aDraftInfo=["reply",g.uid,g.folderFullNameRaw],this.sInReplyTo=g.sMessageId,this.sReferences=Object(H.trim)(this.sInReplyTo+" "+g.references());break;case U.ComposeType.Forward:case U.ComposeType.ForwardAsAttachment:this.subject(Object(H.replySubjectAdd)("Fwd",p)),this.prepearMessageAttachments(g,S),this.aDraftInfo=["forward",g.uid,g.folderFullNameRaw],this.sInReplyTo=g.sMessageId,this.sReferences=Object(H.trim)(this.sInReplyTo+" "+g.sReferences);break;case U.ComposeType.Draft:this.to(this.emailArrayToStringLineHelper(g.to)),this.cc(this.emailArrayToStringLineHelper(g.cc)),this.bcc(this.emailArrayToStringLineHelper(g.bcc)),this.replyTo(this.emailArrayToStringLineHelper(g.replyTo)),this.bFromDraft=!0,this.draftFolder(g.folderFullNameRaw),this.draftUid(g.uid),this.subject(p),this.prepearMessageAttachments(g,S),this.aDraftInfo=Object(H.isNonEmptyArray)(b)&&3===b.length?b:null,this.sInReplyTo=g.sInReplyTo,this.sReferences=g.sReferences;break;case U.ComposeType.EditAsNew:this.to(this.emailArrayToStringLineHelper(g.to)),this.cc(this.emailArrayToStringLineHelper(g.cc)),this.bcc(this.emailArrayToStringLineHelper(g.bcc)),this.replyTo(this.emailArrayToStringLineHelper(g.replyTo)),this.subject(p),this.prepearMessageAttachments(g,S),this.aDraftInfo=Object(H.isNonEmptyArray)(b)&&3===b.length?b:null,this.sInReplyTo=g.sInReplyTo,this.sReferences=g.sReferences}switch(S){case U.ComposeType.Reply:case U.ComposeType.ReplyAll:c=g.fromToLine(!1,!0),h=Object(K.i18n)("COMPOSE/REPLY_MESSAGE_TITLE",{DATETIME:d,EMAIL:c}),f="<br /><br />"+h+":<br /><br /><blockquote>"+Object(H.trim)(f)+"</blockquote>";break;case U.ComposeType.Forward:c=g.fromToLine(!1,!0),l=g.toToLine(!1,!0),u=g.ccToLine(!1,!0),f="<br /><br />"+Object(K.i18n)("COMPOSE/FORWARD_MESSAGE_TOP_TITLE")+"<br />"+Object(K.i18n)("COMPOSE/FORWARD_MESSAGE_TOP_FROM")+": "+c+"<br />"+Object(K.i18n)("COMPOSE/FORWARD_MESSAGE_TOP_TO")+": "+l+(0<u.length?"<br />"+Object(K.i18n)("COMPOSE/FORWARD_MESSAGE_TOP_CC")+": "+u:"")+"<br />"+Object(K.i18n)("COMPOSE/FORWARD_MESSAGE_TOP_SENT")+": "+Object(H.encodeHtml)(d)+"<br />"+Object(K.i18n)("COMPOSE/FORWARD_MESSAGE_TOP_SUBJECT")+": "+Object(H.encodeHtml)(p)+"<br /><br />"+Object(H.trim)(f)+"<br /><br />";break;case U.ComposeType.ForwardAsAttachment:f=""}this.editor((function(e){e.setHtml(f,!1),(U.EditorDefaultType.PlainForced===s.editorDefaultType()||!g.isHtml()&&U.EditorDefaultType.HtmlForced!==s.editorDefaultType())&&e.modeToggle(!1),m&&U.ComposeType.Draft!==S&&U.ComposeType.EditAsNew!==S&&s.setSignatureFromIdentity(m),s.setFocusInPopup()}))}else U.ComposeType.Empty===S?(this.subject(Object(H.isNormal)(a)?""+a:""),f=Object(H.isNormal)(r)?""+r:"",this.editor((function(e){e.setHtml(f,!1),U.EditorDefaultType.Html!==s.editorDefaultType()&&U.EditorDefaultType.HtmlForced!==s.editorDefaultType()&&e.modeToggle(!1),m&&s.setSignatureFromIdentity(m),s.setFocusInPopup()}))):Object(H.isNonEmptyArray)(t)?(I.a.each(t,(function(e){s.addMessageAsAttachment(e)})),this.editor((function(e){e.setHtml("",!1),U.EditorDefaultType.Html!==s.editorDefaultType()&&U.EditorDefaultType.HtmlForced!==s.editorDefaultType()&&e.modeToggle(!1),m&&U.ComposeType.Draft!==S&&U.ComposeType.EditAsNew!==S&&s.setSignatureFromIdentity(m),s.setFocusInPopup()}))):this.setFocusInPopup();var T=this.getAttachmentsDownloadsForUpload();Object(H.isNonEmptyArray)(T)&&ne.a.messageUploadAttachments(this.onMessageUploadAttachments,T),m&&this.currentIdentity(m),this.resizerTrigger()},i.onMessageUploadAttachments=function(e,t){var n=this;U.StorageResultType.Success===e&&t&&t.Result?this.viewModelVisibility()||I.a.each(t.Result,(function(e,t){var i=n.getAttachmentById(e);i&&(i.tempName(t),i.waiting(!1).uploading(!1).complete(!0))})):this.setMessageAttachmentFailedDownloadText()},i.setFocusInPopup=function(){var e=this;B.bMobileDevice||I.a.delay((function(){""===e.to()?e.to.focused(!0):e.oEditor&&(e.to.focused()||e.oEditor.focus())}),U.Magics.Time100ms)},i.onShowWithDelay=function(){this.resizerTrigger()},i.tryToClosePopup=function(){var e=this,t=n(239);!Object(se.isPopupVisible)(t)&&this.modalVisibility()&&(this.bSkipNextHide||this.isEmptyForm()&&!this.draftUid()?Object(H.delegateRun)(this,"closeCommand"):Object(se.showScreenPopup)(t,[Object(K.i18n)("POPUPS_ASK/DESC_WANT_CLOSE_THIS_WINDOW"),function(){e.modalVisibility()&&Object(H.delegateRun)(e,"closeCommand")}]))},i.onBuild=function(){var e=this;this.initUploader(),D()("ctrl+q, command+q, ctrl+w, command+w",U.KeyState.Compose,H.noopFalse),D()("`",U.KeyState.Compose,(function(){return!(e.oEditor&&!e.oEditor.hasFocus()&&!Object(H.inFocus)())||(e.identitiesDropdownTrigger(!0),!1)})),D()("ctrl+`",U.KeyState.Compose,(function(){return e.identitiesDropdownTrigger(!0),!1})),D()("esc, ctrl+down, command+down",U.KeyState.Compose,(function(){return e.skipCommand(),!1})),this.allowFolders&&D()("ctrl+s, command+s",U.KeyState.Compose,(function(){return e.saveCommand(),!1})),ie.appSettingsGet("allowCtrlEnterOnCompose")&&D()("ctrl+enter, command+enter",U.KeyState.Compose,(function(){return e.sendCommand(),!1})),D()("shift+esc",U.KeyState.Compose,(function(){return e.modalVisibility()&&e.tryToClosePopup(),!1})),oe.b("window.resize.real",this.resizerTrigger),oe.b("window.resize.real",I.a.debounce(this.resizerTrigger,U.Magics.Time50ms)),te.a.appendDropbox(),this.driveEnabled()&&P.a.getScript("https://apis.google.com/js/api.js",(function(){R.a.gapi&&e.driveVisible(!0)})),T()((function(){e.modalVisibility()&&e.oEditor&&e.oEditor.resize()}),U.Magics.Time5s)},i.driveCallback=function(e,t){var n=this;if(t&&R.a.XMLHttpRequest&&R.a.google&&t[R.a.google.picker.Response.ACTION]===R.a.google.picker.Action.PICKED&&t[R.a.google.picker.Response.DOCUMENTS]&&t[R.a.google.picker.Response.DOCUMENTS][0]&&t[R.a.google.picker.Response.DOCUMENTS][0].id){var i=new R.a.XMLHttpRequest;i.open("GET","https://www.googleapis.com/drive/v2/files/"+t[R.a.google.picker.Response.DOCUMENTS][0].id),i.setRequestHeader("Authorization","Bearer "+e),i.addEventListener("load",(function(){if(i&&i.responseText){var t=R.a.JSON.parse(i.responseText),o=function(e,n,i){e&&e.exportLinks&&(e.exportLinks[n]?(t.downloadUrl=e.exportLinks[n],t.title=e.title+"."+i,t.mimeType=n):e.exportLinks["application/pdf"]&&(t.downloadUrl=e.exportLinks["application/pdf"],t.title=e.title+".pdf",t.mimeType="application/pdf"))};if(t&&!t.downloadUrl&&t.mimeType&&t.exportLinks)switch(t.mimeType.toString().toLowerCase()){case"application/vnd.google-apps.document":o(t,"application/vnd.openxmlformats-officedocument.wordprocessingml.document","docx");break;case"application/vnd.google-apps.spreadsheet":o(t,"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","xlsx");break;case"application/vnd.google-apps.drawing":o(t,"image/png","png");break;case"application/vnd.google-apps.presentation":o(t,"application/vnd.openxmlformats-officedocument.presentationml.presentation","pptx");break;default:o(t,"application/pdf","pdf")}t&&t.downloadUrl&&n.addDriveAttachment(t,e)}})),i.send()}},i.driveCreatePiker=function(e){var t=this;R.a.gapi&&e&&e.access_token&&R.a.gapi.load("picker",{callback:function(){R.a.google&&R.a.google.picker&&(new R.a.google.picker.PickerBuilder).addView(R.a.google.picker.ViewId.DOCS).setAppId(ie.settingsGet("GoogleClientID")).setOAuthToken(e.access_token).setCallback(I.a.bind(t.driveCallback,t,e.access_token)).enableFeature(R.a.google.picker.Feature.NAV_HIDDEN).build().setVisible(!0)}})},i.driveOpenPopup=function(){var e=this;R.a.gapi&&R.a.gapi.load("auth",{callback:function(){var t=R.a.gapi.auth.getToken(),n=function(t){if(t&&!t.error){var n=R.a.gapi.auth.getToken();return n&&e.driveCreatePiker(n),!0}return!1};t?e.driveCreatePiker(t):R.a.gapi.auth.authorize({client_id:ie.settingsGet("GoogleClientID"),scope:"https://www.googleapis.com/auth/drive.readonly",immediate:!0},(function(e){n(e)||R.a.gapi.auth.authorize({client_id:ie.settingsGet("GoogleClientID"),scope:"https://www.googleapis.com/auth/drive.readonly",immediate:!1},n)}))}})},i.getAttachmentById=function(e){return A()(I.a).call(I.a,this.attachments(),(function(t){return t&&e===t.id}))},i.cancelAttachmentHelper=function(e,t){var n=this;return function(){var i=A()(I.a).call(I.a,n.attachments(),(function(t){return t&&t.id===e}));i&&(n.attachments.remove(i),Object(H.delegateRunOnDestroy)(i),t&&t.cancel(e))}},i.initUploader=function(){var e=this;if(this.composeUploaderButton()){var t={},n=Object(H.pInt)(ie.settingsGet("AttachmentLimit")),i=new x.a({action:Object(V.G)(),name:"uploader",queueSize:2,multipleSizeLimit:50,clickElement:this.composeUploaderButton(),dragAndDropElement:this.composeUploaderDropPlace()});i?(i.on("onDragEnter",(function(){e.dragAndDropOver(!0)})).on("onDragLeave",(function(){e.dragAndDropOver(!1)})).on("onBodyDragEnter",(function(){e.attachmentsPlace(!0),e.dragAndDropVisible(!0)})).on("onBodyDragLeave",(function(){e.dragAndDropVisible(!1)})).on("onProgress",(function(n,i,o){var a=t[n];a||(a=e.getAttachmentById(n))&&(t[n]=a),a&&a.progress(R.a.Math.floor(i/o*100))})).on("onSelect",(function(t,o){e.dragAndDropOver(!1);var a=Object(H.isUnd)(o.FileName)?"":o.FileName.toString(),r=Object(H.isNormal)(o.Size)?Object(H.pInt)(o.Size):null,s=new ae.a(t,a,r);return s.cancel=e.cancelAttachmentHelper(t,i),e.attachments.push(s),e.attachmentsPlace(!0),!(0<r&&0<n&&n<r)||(s.waiting(!1).uploading(!0).complete(!0).error(Object(K.i18n)("UPLOAD/ERROR_FILE_IS_TOO_BIG")),!1)})).on("onStart",(function(n){var i=t[n];i||(i=e.getAttachmentById(n))&&(t[n]=i),i&&i.waiting(!1).uploading(!0).complete(!1)})).on("onComplete",(function(n,i,o){var a=e.getAttachmentById(n),r=o&&o.Result&&o.Result.ErrorCode?o.Result.ErrorCode:null,s=i&&o&&o.Result&&o.Result.Attachment?o.Result.Attachment:null,c="";null!==r?c=Object(K.getUploadErrorDescByCode)(r):s||(c=Object(K.i18n)("UPLOAD/ERROR_UNKNOWN")),a&&(""!==c&&0<c.length?a.waiting(!1).uploading(!1).complete(!0).error(c):s&&(a.waiting(!1).uploading(!1).complete(!0),a.initByUploadJson(s)),Object(H.isUnd)(t[n])&&delete t[n])})),this.addAttachmentEnabled(!0).dragAndDropEnabled(i.isDragAndDropSupported())):this.addAttachmentEnabled(!1).dragAndDropEnabled(!1)}},i.prepearAttachmentsForSendOrSave=function(){var e={};return I.a.each(this.attachmentsInReady(),(function(t){t&&""!==t.tempName()&&t.enabled()&&(e[t.tempName()]=[t.fileName(),t.isInline?"1":"0",t.CID,t.contentLocation])})),e},i.addMessageAsAttachment=function(e){if(e){var t=e.subject();t=".eml"===t.substr(-4).toLowerCase()?t:t+".eml";var n=new ae.a(e.requestHash,t,e.size());n.fromMessage=!0,n.cancel=this.cancelAttachmentHelper(e.requestHash),n.waiting(!1).uploading(!0).complete(!0),this.attachments.push(n)}},i.addAttachmentHelper=function(e,t,n){var i=new ae.a(e,t,n);return i.fromMessage=!1,i.cancel=this.cancelAttachmentHelper(e),i.waiting(!1).uploading(!0).complete(!1),this.attachments.push(i),this.attachmentsPlace(!0),i},i.addDropboxAttachment=function(e){var t=Object(H.pInt)(ie.settingsGet("AttachmentLimit")),n=e.bytes,i=this.addAttachmentHelper(e.link,e.name,n);return 0<n&&0<t&&t<n?(i.uploading(!1).complete(!0),i.error(Object(K.i18n)("UPLOAD/ERROR_FILE_IS_TOO_BIG")),!1):(ne.a.composeUploadExternals((function(e,t){var n=!1;i.uploading(!1).complete(!0),U.StorageResultType.Success===e&&t&&t.Result&&t.Result[i.id]&&(n=!0,i.tempName(t.Result[i.id])),n||i.error(Object(K.getUploadErrorDescByCode)(U.UploadErrorCode.FileNoUploaded))}),[e.link]),!0)},i.addDriveAttachment=function(e,t){var n=Object(H.pInt)(ie.settingsGet("AttachmentLimit")),i=e.fileSize?Object(H.pInt)(e.fileSize):0,o=this.addAttachmentHelper(e.downloadUrl,e.title,i);return 0<i&&0<n&&n<i?(o.uploading(!1).complete(!0),o.error(Object(K.i18n)("UPLOAD/ERROR_FILE_IS_TOO_BIG")),!1):(ne.a.composeUploadDrive((function(e,t){var n=!1;o.uploading(!1).complete(!0),U.StorageResultType.Success===e&&t&&t.Result&&t.Result[o.id]&&(n=!0,o.tempName(t.Result[o.id][0]),o.size(Object(H.pInt)(t.Result[o.id][1]))),n||o.error(Object(K.getUploadErrorDescByCode)(U.UploadErrorCode.FileNoUploaded))}),e.downloadUrl,t),!0)},i.prepearMessageAttachments=function(e,t){var n=this;if(e)if(U.ComposeType.ForwardAsAttachment===t)this.addMessageAsAttachment(e);else{var i=e.attachments();I.a.each(Object(H.isNonEmptyArray)(i)?i:[],(function(e){var i=!1;switch(t){case U.ComposeType.Reply:case U.ComposeType.ReplyAll:i=e.isLinked;break;case U.ComposeType.Forward:case U.ComposeType.Draft:case U.ComposeType.EditAsNew:i=!0}if(i){var o=new ae.a(e.download,e.fileName,e.estimatedSize,e.isInline,e.isLinked,e.cid,e.contentLocation);o.fromMessage=!0,o.cancel=n.cancelAttachmentHelper(e.download),o.waiting(!1).uploading(!0).complete(!1),n.attachments.push(o)}}))}},i.removeLinkedAttachments=function(){var e=A()(I.a).call(I.a,this.attachments(),(function(e){return e&&e.isLinked}));e&&(this.attachments.remove(e),Object(H.delegateRunOnDestroy)(e))},i.setMessageAttachmentFailedDownloadText=function(){I.a.each(this.attachments(),(function(e){e&&e.fromMessage&&e.waiting(!1).uploading(!1).complete(!0).error(Object(K.getUploadErrorDescByCode)(U.UploadErrorCode.FileNoUploaded))}))},i.isEmptyForm=function(e){void 0===e&&(e=!0);var t=e?0===this.attachments().length:0===this.attachmentsInReady().length;return 0===this.to().length&&0===this.cc().length&&0===this.bcc().length&&0===this.replyTo().length&&0===this.subject().length&&t&&(!this.oEditor||""===this.oEditor.getData())},i.reset=function(){this.to(""),this.cc(""),this.bcc(""),this.replyTo(""),this.subject(""),this.requestDsn(!1),this.requestReadReceipt(!1),this.markAsImportant(!1),this.attachmentsPlace(!1),this.aDraftInfo=null,this.sInReplyTo="",this.bFromDraft=!1,this.sReferences="",this.sendError(!1),this.sendSuccessButSaveError(!1),this.savedError(!1),this.savedTime(0),this.emptyToError(!1),this.attachmentsInProcessError(!1),this.showCc(!1),this.showBcc(!1),this.showReplyTo(!1),Object(H.delegateRunOnDestroy)(this.attachments()),this.attachments([]),this.dragAndDropOver(!1),this.dragAndDropVisible(!1),this.draftFolder(""),this.draftUid(""),this.sending(!1),this.saving(!1),this.oEditor&&this.oEditor.clear(!1)},i.getAttachmentsDownloadsForUpload=function(){return y()(I.a).call(I.a,g()(I.a).call(I.a,this.attachments(),(function(e){return e&&""===e.tempName()})),(function(e){return e.id}))},i.resizerTrigger=function(){this.resizer(!this.resizer())},t}(ce.a),Object(m.a)(p.prototype,"sendCommand",[o],j()(p.prototype,"sendCommand"),p.prototype),Object(m.a)(p.prototype,"saveCommand",[a],j()(p.prototype,"saveCommand"),p.prototype),Object(m.a)(p.prototype,"deleteCommand",[r],j()(p.prototype,"deleteCommand"),p.prototype),Object(m.a)(p.prototype,"skipCommand",[s],j()(p.prototype,"skipCommand"),p.prototype),Object(m.a)(p.prototype,"contactsCommand",[c],j()(p.prototype,"contactsCommand"),p.prototype),Object(m.a)(p.prototype,"dropboxCommand",[l],j()(p.prototype,"dropboxCommand"),p.prototype),Object(m.a)(p.prototype,"driveCommand",[u],j()(p.prototype,"driveCommand"),p.prototype),d=p))||d)},function(e,t,n){var i=n(49);e.exports=function(e,t){if(!i(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!i(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!i(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!i(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){var i=n(55),o=n(37),a=n(136);e.exports=!i&&!o((function(){return 7!=Object.defineProperty(a("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){var i=n(30),o=n(49),a=i.document,r=o(a)&&o(a.createElement);e.exports=function(e){return r?a.createElement(e):{}}},function(e,t){var n=0,i=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++n+i).toString(36)}},function(e,t,n){var i=n(157),o=n(37);e.exports=!!Object.getOwnPropertySymbols&&!o((function(){return!String(Symbol())||!Symbol.sham&&i&&i<41}))},function(e,t,n){var i=n(31),o=n(50),a=i.document,r=o(a)&&o(a.createElement);e.exports=function(e){return r?a.createElement(e):{}}},function(e,t,n){var i=n(54),o=n(117),a=n(141),r=n(256),s=a("IE_PROTO"),c=Object.prototype;e.exports=r?Object.getPrototypeOf:function(e){return e=o(e),i(e,s)?e[s]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?c:null}},function(e,t,n){var i=n(189),o=n(190),a=i("keys");e.exports=function(e){return a[e]||(a[e]=o(e))}},function(e,t,n){var i=n(31),o=n(255),a="__core-js_shared__",r=i[a]||o(a,{});e.exports=r},function(e,t){var n=Math.ceil,i=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?i:n)(e)}},function(e,t){e.exports={}},function(e,t,n){var i={};i[n(38)("toStringTag")]="z",e.exports="[object z]"===String(i)},function(e,t,n){var i=n(145),o=n(82).f,a=n(52),r=n(54),s=n(268),c=n(38)("toStringTag");e.exports=function(e,t,n,l){if(e){var u=n?e:e.prototype;r(u,c)||o(u,c,{configurable:!0,value:t}),l&&!i&&a(u,"toString",s)}}},function(e,t){e.exports=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}}},function(e,t,n){var i,o,a,r=n(275),s=n(31),c=n(50),l=n(52),u=n(54),d=n(142),p=n(141),f=n(144),h=s.WeakMap;if(r){var m=d.state||(d.state=new h),b=m.get,g=m.has,v=m.set;i=function(e,t){return t.facade=e,v.call(m,e,t),t},o=function(e){return b.call(m,e)||{}},a=function(e){return g.call(m,e)}}else{var y=p("state");f[y]=!0,i=function(e,t){return t.facade=e,l(e,y,t),t},o=function(e){return u(e,y)?e[y]:{}},a=function(e){return u(e,y)}}e.exports={set:i,get:o,has:a,enforce:function(e){return a(e)?o(e):i(e,{})},getterFor:function(e){return function(t){var n;if(!c(t)||(n=o(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}}},function(e,t,n){var i,o,a=n(31),r=n(107),s=a.process,c=s&&s.versions,l=c&&c.v8;l?o=(i=l.split("."))[0]+i[1]:r&&(!(i=r.match(/Edge\/(\d+)/))||i[1]>=74)&&(i=r.match(/Chrome\/(\d+)/))&&(o=i[1]),e.exports=o&&+o},function(e,t,n){"use strict";n(45);var i=n(69),o=n(37),a=n(39),r=n(47),s=a("species"),c=!o((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),l="$0"==="a".replace(/./,"$0"),u=a("replace"),d=!!/./[u]&&""===/./[u]("a","$0"),p=!o((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));e.exports=function(e,t,n,u){var f=a(e),h=!o((function(){var t={};return t[f]=function(){return 7},7!=""[e](t)})),m=h&&!o((function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[s]=function(){return n},n.flags="",n[f]=/./[f]),n.exec=function(){return t=!0,null},n[f](""),!t}));if(!h||!m||"replace"===e&&(!c||!l||d)||"split"===e&&!p){var b=/./[f],g=n(f,""[e],(function(e,t,n,i,o){return t.exec===RegExp.prototype.exec?h&&!o?{done:!0,value:b.call(t,n,i)}:{done:!0,value:e.call(n,t,i)}:{done:!1}}),{REPLACE_KEEPS_$0:l,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:d}),v=g[0],y=g[1];i(String.prototype,e,v),i(RegExp.prototype,f,2==t?function(e,t){return y.call(e,this,t)}:function(e){return y.call(e,this)})}u&&r(RegExp.prototype[f],"sham",!0)}},function(e,t,n){var i=n(74),o=n(163);e.exports=function(e,t){var n=e.exec;if("function"==typeof n){var a=n.call(e,t);if("object"!=typeof a)throw TypeError("RegExp exec method returned something other than an Object or null");return a}if("RegExp"!==i(e))throw TypeError("RegExp#exec called on incompatible receiver");return o.call(e,t)}},function(e,t,n){var i=n(30),o=n(219),a=n(356),r=n(47);for(var s in o){var c=i[s],l=c&&c.prototype;if(l&&l.forEach!==a)try{r(l,"forEach",a)}catch(e){l.forEach=a}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));n(152);var i=n(3),o=n.n(i),a=n(177),r=n.n(a),s=n(2),c=function(){function e(e,t){void 0===t&&(t=[]),this.oCross=null,this.sScreenName=void 0,this.aViewModels=void 0,this.sScreenName=e,this.aViewModels=Object(s.isArray)(t)?t:[]}var t=e.prototype;return t.viewModels=function(){return this.aViewModels},t.screenName=function(){return this.sScreenName},t.routes=function(){return null},t.__cross=function(){return this.oCross},t.__start=function(){var e=null,t=null,n=this.routes();Object(s.isNonEmptyArray)(n)&&(t=o.a.bind(this.onRoute||s.noop,this),e=r.a.create(),n.forEach((function(n){n&&e&&(e.addRoute(n[0],t).rules=n[1])})),this.oCross=e)},e}()},function(e,t,n){e.exports=n(328)},function(e,t){e.exports=window.ssm},function(e,t,n){var i=n(44),o=n(73),a=n(181).indexOf,r=n(106);e.exports=function(e,t){var n,s=o(e),c=0,l=[];for(n in s)!i(r,n)&&i(s,n)&&l.push(n);for(;t.length>c;)i(s,n=t[c++])&&(~a(l,n)||l.push(n));return l}},function(e,t,n){var i,o,a=n(30),r=n(167),s=a.process,c=s&&s.versions,l=c&&c.v8;l?o=(i=l.split("."))[0]<4?1:i[0]+i[1]:r&&(!(i=r.match(/Edge\/(\d+)/))||i[1]>=74)&&(i=r.match(/Chrome\/(\d+)/))&&(o=i[1]),e.exports=o&&+o},function(e,t,n){var i=n(53),o=n(250),a=n(91),r=n(81),s=n(159),c=n(54),l=n(187),u=Object.getOwnPropertyDescriptor;t.f=i?u:function(e,t){if(e=r(e),t=s(t,!0),l)try{return u(e,t)}catch(e){}if(c(e,t))return a(!o.f.call(e,t),e[t])}},function(e,t,n){var i=n(50);e.exports=function(e,t){if(!i(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!i(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!i(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!i(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){var i=n(58),o=n(257);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),t=n instanceof Array}catch(e){}return function(n,a){return i(n),o(a),t?e.call(n,a):n.__proto__=a,n}}():void 0)},function(e,t,n){var i,o=n(58),a=n(258),r=n(191),s=n(144),c=n(192),l=n(139),u=n(141),d=u("IE_PROTO"),p=function(){},f=function(e){return"<script>"+e+"</"+"script>"},h=function(){try{i=document.domain&&new ActiveXObject("htmlfile")}catch(e){}var e,t;h=i?function(e){e.write(f("")),e.close();var t=e.parentWindow.Object;return e=null,t}(i):((t=l("iframe")).style.display="none",c.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(f("document.F=Object")),e.close(),e.F);for(var n=r.length;n--;)delete h.prototype[r[n]];return h()};s[d]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(p.prototype=o(e),n=new p,p.prototype=null,n[d]=e):n=h(),void 0===t?n:a(n,t)}},function(e,t,n){n(202);var i=n(282),o=n(31),a=n(93),r=n(52),s=n(76),c=n(38)("toStringTag");for(var l in i){var u=o[l],d=u&&u.prototype;d&&a(d)!==c&&r(d,c,l),s[l]=s.Array}},function(e,t,n){"use strict";var i,o,a=n(203),r=n(224),s=n(105),c=RegExp.prototype.exec,l=s("native-string-replace",String.prototype.replace),u=c,d=(i=/a/,o=/b*/g,c.call(i,"a"),c.call(o,"a"),0!==i.lastIndex||0!==o.lastIndex),p=r.UNSUPPORTED_Y||r.BROKEN_CARET,f=void 0!==/()??/.exec("")[1];(d||f||p)&&(u=function(e){var t,n,i,o,r=this,s=p&&r.sticky,u=a.call(r),h=r.source,m=0,b=e;return s&&(-1===(u=u.replace("y","")).indexOf("g")&&(u+="g"),b=String(e).slice(r.lastIndex),r.lastIndex>0&&(!r.multiline||r.multiline&&"\n"!==e[r.lastIndex-1])&&(h="(?: "+h+")",b=" "+b,m++),n=new RegExp("^(?:"+h+")",u)),f&&(n=new RegExp("^"+h+"$(?!\\s)",u)),d&&(t=r.lastIndex),i=c.call(s?n:r,b),s?i?(i.input=i.input.slice(m),i[0]=i[0].slice(m),i.index=r.lastIndex,r.lastIndex+=i[0].length):r.lastIndex=0:d&&i&&(r.lastIndex=r.global?i.index+i[0].length:t),f&&i&&i.length>1&&l.call(i[0],n,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(i[o]=void 0)})),i}),e.exports=u},function(e,t,n){"use strict";n.d(t,"d",(function(){return l})),n.d(t,"c",(function(){return b})),n.d(t,"e",(function(){return g})),n.d(t,"b",(function(){return v})),n.d(t,"a",(function(){return y}));var i=n(57),o=n.n(i),a=(n(48),n(86),n(119),n(4)),r=n.n(a),s="__rlA",c="__rlT";function l(e){var t=!1;try{t=e in r.a&&r.a[e]&&r.a[e].setItem}catch(e){}if(t){var n=r.a[e],i="testLocalStorage_"+r.a.Math.random();try{if(n.setItem(i,i),i===n.getItem(i))return n.removeItem(i),!0}catch(e){}}return!1}var u=l("sessionStorage")&&r.a.sessionStorage||null,d=r.a.top||r.a||null,p=function(e){var t=null;if(u)t=u.getItem(e)||null;else if(d&&r.a.JSON){var n=d.name&&"{"===d.name.toString().substr(0,1)?r.a.JSON.parse(d.name.toString()):null;t=n&&n[e]||null}return t},f=function(e,t){if(u)u.setItem(e,t);else if(d&&r.a.JSON){var n=d.name&&"{"===d.name.toString().substr(0,1)?r.a.JSON.parse(d.name.toString()):null;(n=n||{})[e]=t,d.name=r.a.JSON.stringify(n)}},h=function(){return r.a.Math.round((new r.a.Date).getTime()/1e3)},m=function(){return f(c,h())};function b(){return p(s)}function g(){var e="AuthAccountHash",t=r.a.__rlah_data();f(s,t&&t[e]?t[e]:""),m()}function v(){f(s,""),m()}function y(){return h()>((e=p(c))&&r.a.parseInt(e,10)||0)+36e5&&(v(),!0);var e}o()(m,6e4)},,function(e,t,n){var i=n(30);e.exports=i},function(e,t,n){var i=n(79);e.exports=i("navigator","userAgent")||""},function(e,t,n){var i,o=n(42),a=n(242),r=n(112),s=n(106),c=n(236),l=n(136),u=n(111),d=u("IE_PROTO"),p=function(){},f=function(e){return"<script>"+e+"</"+"script>"},h=function(){try{i=document.domain&&new ActiveXObject("htmlfile")}catch(e){}var e,t;h=i?function(e){e.write(f("")),e.close();var t=e.parentWindow.Object;return e=null,t}(i):((t=l("iframe")).style.display="none",c.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(f("document.F=Object")),e.close(),e.F);for(var n=r.length;n--;)delete h.prototype[r[n]];return h()};s[d]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(p.prototype=o(e),n=new p,p.prototype=null,n[d]=e):n=h(),void 0===t?n:a(n,t)}},function(e,t,n){var i=n(44),o=n(90),a=n(111),r=n(244),s=a("IE_PROTO"),c=Object.prototype;e.exports=r?Object.getPrototypeOf:function(e){return e=o(e),i(e,s)?e[s]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?c:null}},function(e,t,n){var i=n(66).f,o=n(44),a=n(39)("toStringTag");e.exports=function(e,t,n){e&&!o(e=n?e:e.prototype,a)&&i(e,a,{configurable:!0,value:t})}},function(e,t,n){var i=n(43),o=n(114),a="".split;e.exports=i((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==o(e)?a.call(e,""):Object(e)}:Object},function(e,t,n){"use strict";var i=n(218).charAt;e.exports=function(e,t,n){return t+(n?i(e,t).length:1)}},function(e,t,n){var i=n(116),o=n(171),a=n(117),r=n(92),s=n(287),c=[].push,l=function(e){var t=1==e,n=2==e,l=3==e,u=4==e,d=6==e,p=7==e,f=5==e||d;return function(h,m,b,g){for(var v,y,S=a(h),O=o(S),w=i(m,b,3),T=r(O.length),C=0,A=g||s,E=t?A(h,T):n||p?A(h,0):void 0;T>C;C++)if((f||C in O)&&(y=w(v=O[C],C,S),e))if(t)E[C]=y;else if(y)switch(e){case 3:return!0;case 5:return v;case 6:return C;case 2:c.call(E,v)}else switch(e){case 4:return!1;case 7:c.call(E,v)}return d?-1:l||u?u:E}};e.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6),filterOut:l(7)}},function(e,t,n){var i=n(114);e.exports=Array.isArray||function(e){return"Array"==i(e)}},function(e,t,n){var i=n(43),o=n(38),a=n(149),r=o("species");e.exports=function(e){return a>=51||!i((function(){var t=[];return(t.constructor={})[r]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},function(e,t,n){e.exports=n(338)},function(e,t){e.exports=window.crossroads},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(10),o=n(1),a=n(2),r=function(e){function t(t){var n;return void 0===t&&(t={}),(n=e.call(this)||this).value=t.value,!Object(a.isUnd)(n.value)&&n.value.subscribe||(n.value=o.a.observable(!Object(a.isUnd)(n.value)&&!!n.value)),n.enable=t.enable,!Object(a.isUnd)(n.enable)&&n.enable.subscribe||(n.enable=o.a.observable(!!Object(a.isUnd)(n.enable)||!!n.enable)),n.disable=t.disable,!Object(a.isUnd)(n.disable)&&n.disable.subscribe||(n.disable=o.a.observable(!Object(a.isUnd)(n.disable)&&!!n.disable)),n.label=t.label||"",n.inline=!Object(a.isUnd)(t.inline)&&t.inline,n.readOnly=!Object(a.isUnd)(t.readOnly)&&!!t.readOnly,n.inverted=!Object(a.isUnd)(t.inverted)&&!!t.inverted,n.labeled=!Object(a.isUnd)(t.label),n.labelAnimated=!!t.labelAnimated,n}return Object(i.a)(t,e),t.prototype.click=function(){this.readOnly||!this.enable()||this.disable()||this.value(!this.value())},t}(n(32).a)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function o(e){var t=new r(e).tokenize(),n=[],i=[],a=[];return t.forEach((function(e){"operator"!==e.type||","!==e.value&&";"!==e.value?i.push(e):(i.length&&n.push(i),i=[])})),i.length&&n.push(i),n.forEach((function(e){(e=function(e){for(var t=!1,n="text",i=void 0,a=[],r={address:[],comment:[],group:[],text:[]},s=0,c=e.length;s<c;s++){var l=e[s];if("operator"===l.type)switch(l.value){case"<":n="address";break;case"(":n="comment";break;case":":n="group",t=!0;break;default:n="text"}else l.value&&r[n].push(l.value)}!r.text.length&&r.comment.length&&(r.text=r.comment,r.comment=[]);if(t)r.text=r.text.join(" "),a.push({name:r.text||i&&i.name,group:r.group.length?o(r.group.join(",")):[]});else{if(!r.address.length&&r.text.length){for(var u=r.text.length-1;u>=0;u--)if(r.text[u].match(/^[^@\s]+@[^@\s]+$/)){r.address=r.text.splice(u,1);break}var d=function(e){return r.address.length?e:(r.address=[e.trim()]," ")};if(!r.address.length)for(var p=r.text.length-1;p>=0&&(r.text[p]=r.text[p].replace(/\s*\b[^@\s]+@[^@\s]+\b\s*/,d).trim(),!r.address.length);p--);}if(!r.text.length&&r.comment.length&&(r.text=r.comment,r.comment=[]),r.address.length>1&&(r.text=r.text.concat(r.address.splice(1))),r.text=r.text.join(" "),r.address=r.address.join(" "),!r.address&&t)return[];(i={address:r.address||r.text||"",name:r.text||r.address||""}).address===i.name&&((i.address||"").match(/@/)?i.name="":i.address=""),a.push(i)}return a}(e)).length&&(a=a.concat(e))})),a}t.default=o;var a={'"':'"',"(":")","<":">",",":"",":":";",";":""},r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.str=(t||"").toString(),this.operatorCurrent="",this.operatorExpecting="",this.node=null,this.escaped=!1,this.list=[]}return i(e,[{key:"tokenize",value:function(){for(var e=void 0,t=[],n=0,i=this.str.length;n<i;n++)e=this.str.charAt(n),this.checkChar(e);return this.list.forEach((function(e){e.value=(e.value||"").toString().trim(),e.value&&t.push(e)})),t}},{key:"checkChar",value:function(e){if((e in a||"\\"===e)&&this.escaped)this.escaped=!1;else{if(this.operatorExpecting&&e===this.operatorExpecting)return this.node={type:"operator",value:e},this.list.push(this.node),this.node=null,this.operatorExpecting="",void(this.escaped=!1);if(!this.operatorExpecting&&e in a)return this.node={type:"operator",value:e},this.list.push(this.node),this.node=null,this.operatorExpecting=a[e],void(this.escaped=!1)}this.escaped||"\\"!==e?(this.node||(this.node={type:"text",value:""},this.list.push(this.node)),this.escaped&&"\\"!==e&&(this.node.value+="\\"),this.node.value+=e,this.escaped=!1):this.escaped=!0}}]),e}()},function(e,t,n){"use strict";var i={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,a=o&&!i.call({1:2},1);t.f=a?function(e){var t=o(this,e);return!!t&&t.enumerable}:i},function(e,t,n){var i=n(73),o=n(85),a=n(213),r=function(e){return function(t,n,r){var s,c=i(t),l=o(c.length),u=a(r,l);if(e&&n!=n){for(;l>u;)if((s=c[u++])!=s)return!0}else for(;l>u;u++)if((e||u in c)&&c[u]===n)return e||u||0;return!e&&-1}};e.exports={includes:r(!0),indexOf:r(!1)}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var i=n(37),o=/#|\.prototype\./,a=function(e,t){var n=s[r(e)];return n==l||n!=c&&("function"==typeof t?i(t):!!t)},r=a.normalize=function(e){return String(e).replace(o,".").toLowerCase()},s=a.data={},c=a.NATIVE="N",l=a.POLYFILL="P";e.exports=a},function(e,t,n){var i=n(100),o=n(74),a=n(39)("toStringTag"),r="Arguments"==o(function(){return arguments}());e.exports=i?o:function(e){var t,n,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),a))?n:r?o(t):"Object"==(i=o(t))&&"function"==typeof t.callee?"Arguments":i}},function(e,t,n){"use strict";var i,o,a,r=n(37),s=n(169),c=n(47),l=n(44),u=n(39),d=n(99),p=u("iterator"),f=!1;[].keys&&("next"in(a=[].keys())?(o=s(s(a)))!==Object.prototype&&(i=o):f=!0);var h=null==i||r((function(){var e={};return i[p].call(e)!==e}));h&&(i={}),d&&!h||l(i,p)||c(i,p,(function(){return this})),e.exports={IteratorPrototype:i,BUGGY_SAFARI_ITERATORS:f}},function(e,t,n){var i=n(34),o=n(31),a=n(107),r=[].slice,s=function(e){return function(t,n){var i=arguments.length>2,o=i?r.call(arguments,2):void 0;return e(i?function(){("function"==typeof t?t:Function(t)).apply(this,o)}:t,n)}};i({global:!0,bind:!0,forced:/MSIE .\./.test(a)},{setTimeout:s(o.setTimeout),setInterval:s(o.setInterval)})},function(e,t,n){var i=n(53),o=n(43),a=n(139);e.exports=!i&&!o((function(){return 7!=Object.defineProperty(a("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){var i=n(43),o=/#|\.prototype\./,a=function(e,t){var n=s[r(e)];return n==l||n!=c&&("function"==typeof t?i(t):!!t)},r=a.normalize=function(e){return String(e).replace(o,".").toLowerCase()},s=a.data={},c=a.NATIVE="N",l=a.POLYFILL="P";e.exports=a},function(e,t,n){var i=n(87),o=n(142);(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.8.2",mode:i?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},function(e,t){var n=0,i=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++n+i).toString(36)}},function(e,t){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(e,t,n){var i=n(75);e.exports=i("document","documentElement")},function(e,t,n){var i=n(43);e.exports=!!Object.getOwnPropertySymbols&&!i((function(){return!String(Symbol())}))},function(e,t,n){var i=n(31);e.exports=i.Promise},function(e,t,n){var i=n(142),o=Function.toString;"function"!=typeof i.inspectSource&&(i.inspectSource=function(e){return o.call(e)}),e.exports=i.inspectSource},function(e,t,n){var i=n(58),o=n(70),a=n(38)("species");e.exports=function(e,t){var n,r=i(e).constructor;return void 0===r||null==(n=i(r)[a])?t:o(n)}},function(e,t,n){var i,o,a,r=n(31),s=n(43),c=n(116),l=n(192),u=n(139),d=n(198),p=n(118),f=r.location,h=r.setImmediate,m=r.clearImmediate,b=r.process,g=r.MessageChannel,v=r.Dispatch,y=0,S={},O="onreadystatechange",w=function(e){if(S.hasOwnProperty(e)){var t=S[e];delete S[e],t()}},T=function(e){return function(){w(e)}},C=function(e){w(e.data)},A=function(e){r.postMessage(e+"",f.protocol+"//"+f.host)};h&&m||(h=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return S[++y]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},i(y),y},m=function(e){delete S[e]},p?i=function(e){b.nextTick(T(e))}:v&&v.now?i=function(e){v.now(T(e))}:g&&!d?(a=(o=new g).port2,o.port1.onmessage=C,i=c(a.postMessage,a,1)):r.addEventListener&&"function"==typeof postMessage&&!r.importScripts&&f&&"file:"!==f.protocol&&!s(A)?(i=A,r.addEventListener("message",C,!1)):i=O in u("script")?function(e){l.appendChild(u("script")).onreadystatechange=function(){l.removeChild(this),w(e)}}:function(e){setTimeout(T(e),0)}),e.exports={set:h,clear:m}},function(e,t,n){var i=n(107);e.exports=/(iphone|ipod|ipad).*applewebkit/i.test(i)},function(e,t,n){var i=n(58),o=n(50),a=n(110);e.exports=function(e,t){if(i(e),o(t)&&t.constructor===e)return t;var n=a.f(e);return(0,n.resolve)(t),n.promise}},function(e,t,n){"use strict";var i=n(34),o=n(281),a=n(140),r=n(160),s=n(146),c=n(52),l=n(109),u=n(38),d=n(87),p=n(76),f=n(201),h=f.IteratorPrototype,m=f.BUGGY_SAFARI_ITERATORS,b=u("iterator"),g="keys",v="values",y="entries",S=function(){return this};e.exports=function(e,t,n,u,f,O,w){o(n,t,u);var T,C,A,E=function(e){if(e===f&&I)return I;if(!m&&e in R)return R[e];switch(e){case g:case v:case y:return function(){return new n(this,e)}}return function(){return new n(this)}},j=t+" Iterator",F=!1,R=e.prototype,N=R[b]||R["@@iterator"]||f&&R[f],I=!m&&N||E(f),L="Array"==t&&R.entries||N;if(L&&(T=a(L.call(new e)),h!==Object.prototype&&T.next&&(d||a(T)===h||(r?r(T,h):"function"!=typeof T[b]&&c(T,b,S)),s(T,j,!0,!0),d&&(p[j]=S))),f==v&&N&&N.name!==v&&(F=!0,I=function(){return N.call(this)}),d&&!w||R[b]===I||c(R,b,I),p[t]=I,f)if(C={values:E(v),keys:O?I:E(g),entries:E(y)},w)for(A in C)(m||F||!(A in R))&&l(R,A,C[A]);else i({target:t,proto:!0,forced:m||F},C);return C}},function(e,t,n){"use strict";var i,o,a,r=n(140),s=n(52),c=n(54),l=n(38),u=n(87),d=l("iterator"),p=!1;[].keys&&("next"in(a=[].keys())?(o=r(r(a)))!==Object.prototype&&(i=o):p=!0),null==i&&(i={}),u||c(i,d)||s(i,d,(function(){return this})),e.exports={IteratorPrototype:i,BUGGY_SAFARI_ITERATORS:p}},function(e,t,n){"use strict";var i=n(81),o=n(223),a=n(76),r=n(148),s=n(200),c="Array Iterator",l=r.set,u=r.getterFor(c);e.exports=s(Array,"Array",(function(e,t){l(this,{type:c,target:i(e),index:0,kind:t})}),(function(){var e=u(this),t=e.target,n=e.kind,i=e.index++;return!t||i>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:i,done:!1}:"values"==n?{value:t[i],done:!1}:{value:[i,t[i]],done:!1}}),"values"),a.Arguments=a.Array,o("keys"),o("values"),o("entries")},function(e,t,n){"use strict";var i=n(42);e.exports=function(){var e=i(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,t,n){"use strict";var i=n(150),o=n(243),a=n(42),r=n(56),s=n(237),c=n(172),l=n(85),u=n(151),d=n(163),p=n(224).UNSUPPORTED_Y,f=[].push,h=Math.min,m=4294967295;i("split",2,(function(e,t,n){var i;return i="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var i=String(r(this)),a=void 0===n?m:n>>>0;if(0===a)return[];if(void 0===e)return[i];if(!o(e))return t.call(i,e,a);for(var s,c,l,u=[],p=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),h=0,b=new RegExp(e.source,p+"g");(s=d.call(b,i))&&!((c=b.lastIndex)>h&&(u.push(i.slice(h,s.index)),s.length>1&&s.index<i.length&&f.apply(u,s.slice(1)),l=s[0].length,h=c,u.length>=a));)b.lastIndex===s.index&&b.lastIndex++;return h===i.length?!l&&b.test("")||u.push(""):u.push(i.slice(h)),u.length>a?u.slice(0,a):u}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:t.call(this,e,n)}:t,[function(t,n){var o=r(this),a=null==t?void 0:t[e];return void 0!==a?a.call(t,o,n):i.call(String(o),t,n)},function(e,o){var r=n(i,e,this,o,i!==t);if(r.done)return r.value;var d=a(e),f=String(this),b=s(d,RegExp),g=d.unicode,v=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.unicode?"u":"")+(p?"g":"y"),y=new b(p?"^(?:"+d.source+")":d,v),S=void 0===o?m:o>>>0;if(0===S)return[];if(0===f.length)return null===u(y,f)?[f]:[];for(var O=0,w=0,T=[];w<f.length;){y.lastIndex=p?0:w;var C,A=u(y,p?f.slice(w):f);if(null===A||(C=h(l(y.lastIndex+(p?w:0)),f.length))===O)w=c(f,w,g);else{if(T.push(f.slice(O,w)),T.length===S)return T;for(var E=1;E<=A.length-1;E++)if(T.push(A[E]),T.length===S)return T;w=O=C}}return T.push(f.slice(O)),T}]}),p)},function(e,t,n){"use strict";var i=n(65),o=n(326);i({target:"String",proto:!0,forced:n(327)("link")},{link:function(e){return o(this,"a","href",e)}})},function(e,t){e.exports=window.Jua},function(e,t,n){"use strict";n(48);var i=n(17),o=n.n(i),a=n(1),r=n(3),s=n.n(r),c=function(){function e(){this.templates=a.a.observableArray([]),this.templates.loading=a.a.observable(!1).extend({throttle:100}),this.templatesNames=a.a.observableArray([]).extend({throttle:1e3}),this.templatesNames.skipFirst=!0,this.subscribers()}return e.prototype.subscribers=function(){var e=this;this.templates.subscribe((function(t){e.templatesNames(s.a.compact(o()(s.a).call(s.a,t,(function(e){return e?e.name:null}))))}))},e}();t.a=new c},function(e,t,n){"use strict";n.d(t,"c",(function(){return g})),n.d(t,"d",(function(){return v})),n.d(t,"b",(function(){return y})),n.d(t,"a",(function(){return S}));var i=n(10),o=n(17),a=n.n(o),r=(n(45),n(204),n(59),n(4)),s=n.n(r),c=n(3),l=n.n(c),u=n(1),d=n(0),p=n(6),f=n(2),h=n(15),m=n(67),b=n(84),g=l.a.memoize((function(e,t){e=Object(f.trim)(e).toLowerCase(),t=Object(f.trim)(t).toLowerCase();var n=d.FileType.Unknown,i=t.split("/");switch(!0){case"image"===i[0]||-1<Object(f.inArray)(e,["png","jpg","jpeg","gif","bmp"]):n=d.FileType.Image;break;case"audio"===i[0]||-1<Object(f.inArray)(e,["mp3","ogg","oga","wav"]):n=d.FileType.Audio;break;case"video"===i[0]||-1<Object(f.inArray)(e,["mkv","avi"]):n=d.FileType.Video;break;case-1<Object(f.inArray)(e,["php","js","css"]):n=d.FileType.Code;break;case"eml"===e||-1<Object(f.inArray)(t,["message/delivery-status","message/rfc822"]):n=d.FileType.Eml;break;case"text"===i[0]&&"html"!==i[1]||-1<Object(f.inArray)(e,["txt","log"]):n=d.FileType.Text;break;case"text/html"===t||-1<Object(f.inArray)(e,["html"]):n=d.FileType.Html;break;case-1<Object(f.inArray)(i[1],["zip","7z","tar","rar","gzip","bzip","bzip2","x-zip","x-7z","x-rar","x-tar","x-gzip","x-bzip","x-bzip2","x-zip-compressed","x-7z-compressed","x-rar-compressed"])||-1<Object(f.inArray)(e,["zip","7z","tar","rar","gzip","bzip","bzip2"]):n=d.FileType.Archive;break;case-1<Object(f.inArray)(i[1],["pdf","x-pdf"])||-1<Object(f.inArray)(e,["pdf"]):n=d.FileType.Pdf;break;case-1<Object(f.inArray)(t,["application/pgp-signature","application/pgp-keys"])||-1<Object(f.inArray)(e,["asc","pem","ppk"]):n=d.FileType.Certificate;break;case-1<Object(f.inArray)(t,["application/pkcs7-signature"])||-1<Object(f.inArray)(e,["p7s"]):n=d.FileType.CertificateBin;break;case-1<Object(f.inArray)(i[1],["rtf","msword","vnd.msword","vnd.openxmlformats-officedocument.wordprocessingml.document","vnd.openxmlformats-officedocument.wordprocessingml.template","vnd.ms-word.document.macroEnabled.12","vnd.ms-word.template.macroEnabled.12"]):n=d.FileType.WordText;break;case-1<Object(f.inArray)(i[1],["excel","ms-excel","vnd.ms-excel","vnd.openxmlformats-officedocument.spreadsheetml.sheet","vnd.openxmlformats-officedocument.spreadsheetml.template","vnd.ms-excel.sheet.macroEnabled.12","vnd.ms-excel.template.macroEnabled.12","vnd.ms-excel.addin.macroEnabled.12","vnd.ms-excel.sheet.binary.macroEnabled.12"]):n=d.FileType.Sheet;break;case-1<Object(f.inArray)(i[1],["powerpoint","ms-powerpoint","vnd.ms-powerpoint","vnd.openxmlformats-officedocument.presentationml.presentation","vnd.openxmlformats-officedocument.presentationml.template","vnd.openxmlformats-officedocument.presentationml.slideshow","vnd.ms-powerpoint.addin.macroEnabled.12","vnd.ms-powerpoint.presentation.macroEnabled.12","vnd.ms-powerpoint.template.macroEnabled.12","vnd.ms-powerpoint.slideshow.macroEnabled.12"]):n=d.FileType.Presentation}return n})),v=l.a.memoize((function(e){var t="",n="icon-file";switch(e){case d.FileType.Text:case d.FileType.Eml:case d.FileType.WordText:n="icon-file-text";break;case d.FileType.Html:case d.FileType.Code:n="icon-file-code";break;case d.FileType.Image:n="icon-file-image";break;case d.FileType.Audio:n="icon-file-music";break;case d.FileType.Video:n="icon-file-movie";break;case d.FileType.Archive:n="icon-file-zip";break;case d.FileType.Certificate:case d.FileType.CertificateBin:n="icon-file-certificate";break;case d.FileType.Sheet:n="icon-file-excel";break;case d.FileType.Presentation:n="icon-file-chart-graph";break;case d.FileType.Pdf:t="pdf",n="icon-none"}return[n,t]})),y=function(e){var t="",n=[];if(Object(f.isNonEmptyArray)(e)&&(t="icon-attachment",(n=l.a.uniq(l.a.compact(a()(l.a).call(l.a,e,(function(e){return e?g(Object(f.getFileExtension)(e[0]),e[1]):""})))))&&1===n.length&&n[0]))switch(n[0]){case d.FileType.Text:case d.FileType.WordText:t="icon-file-text";break;case d.FileType.Html:case d.FileType.Code:t="icon-file-code";break;case d.FileType.Image:t="icon-file-image";break;case d.FileType.Audio:t="icon-file-music";break;case d.FileType.Video:t="icon-file-movie";break;case d.FileType.Archive:t="icon-file-zip";break;case d.FileType.Certificate:case d.FileType.CertificateBin:t="icon-file-certificate";break;case d.FileType.Sheet:t="icon-file-excel";break;case d.FileType.Presentation:t="icon-file-chart-graph"}return t},S=function(e){function t(){var t;return(t=e.call(this,"AttachmentModel")||this).checked=u.a.observable(!1),t.mimeType="",t.fileName="",t.fileNameExt="",t.fileType=d.FileType.Unknown,t.estimatedSize=0,t.friendlySize="",t.isInline=!1,t.isLinked=!1,t.isThumbnail=!1,t.cid="",t.cidWithOutTags="",t.contentLocation="",t.download="",t.folder="",t.uid="",t.mimeIndex="",t.framed=!1,t}Object(i.a)(t,e),t.newInstanceFromJson=function(e){var n=new t;return n.initByJson(e)?n:null};var n=t.prototype;return n.initByJson=function(e){var t=!1;return e&&"Object/Attachment"===e["@Object"]&&(this.mimeType=Object(f.trim)((e.MimeType||"").toLowerCase()),this.fileName=Object(f.trim)(e.FileName),this.estimatedSize=Object(f.pInt)(e.EstimatedSize),this.isInline=!!e.IsInline,this.isLinked=!!e.IsLinked,this.isThumbnail=!!e.IsThumbnail,this.cid=e.CID,this.contentLocation=e.ContentLocation,this.download=e.Download,this.folder=e.Folder,this.uid=e.Uid,this.mimeIndex=e.MimeIndex,this.framed=!!e.Framed,this.friendlySize=Object(f.friendlySize)(this.estimatedSize),this.cidWithOutTags=this.cid.replace(/^<+/,"").replace(/>+$/,""),this.fileNameExt=Object(f.getFileExtension)(this.fileName),this.fileType=g(this.fileNameExt,this.mimeType),t=!0),t},n.isImage=function(){return d.FileType.Image===this.fileType},n.isMp3=function(){return d.FileType.Audio===this.fileType&&"mp3"===this.fileNameExt},n.isOgg=function(){return d.FileType.Audio===this.fileType&&("oga"===this.fileNameExt||"ogg"===this.fileNameExt)},n.isWav=function(){return d.FileType.Audio===this.fileType&&"wav"===this.fileNameExt},n.hasThumbnail=function(){return this.isThumbnail},n.isText=function(){return d.FileType.Text===this.fileType||d.FileType.Eml===this.fileType||d.FileType.Certificate===this.fileType||d.FileType.Html===this.fileType||d.FileType.Code===this.fileType},n.isPdf=function(){return d.FileType.Pdf===this.fileType},n.isFramed=function(){return this.framed&&p.data.__APP__&&p.data.__APP__.googlePreviewSupported()&&!(this.isPdf()&&p.bAllowPdfPreview)&&!this.isText()&&!this.isImage()},n.hasPreview=function(){return this.isImage()||this.isPdf()&&p.bAllowPdfPreview||this.isText()||this.isFramed()},n.hasPreplay=function(){return b.a.supportedMp3&&this.isMp3()||b.a.supportedOgg&&this.isOgg()||b.a.supportedWav&&this.isWav()},n.linkDownload=function(){return Object(h.c)(this.download)},n.linkPreview=function(){return Object(h.e)(this.download)},n.linkThumbnail=function(){return this.hasThumbnail()?Object(h.g)(this.download):""},n.linkThumbnailPreviewStyle=function(){var e=this.linkThumbnail();return""===e?"":"background:url("+e+")"},n.linkFramed=function(){return Object(h.d)(this.download)},n.linkPreviewAsPlain=function(){return Object(h.f)(this.download)},n.linkPreviewMain=function(){var e="";switch(!0){case this.isImage():case this.isPdf()&&p.bAllowPdfPreview:e=this.linkPreview();break;case this.isText():e=this.linkPreviewAsPlain();break;case this.isFramed():e=this.linkFramed()}return e},n.generateTransferDownloadUrl=function(){var e=this.linkDownload();return"http"!==e.substr(0,4)&&(e=s.a.location.protocol+"//"+s.a.location.host+s.a.location.pathname+e),this.mimeType+":"+this.fileName+":"+e},n.eventDragStart=function(e,t){var n=t.originalEvent||t;return e&&n&&n.dataTransfer&&n.dataTransfer.setData&&n.dataTransfer.setData("DownloadURL",this.generateTransferDownloadUrl()),!0},n.iconClass=function(){return v(this.fileType)[0]},n.iconText=function(){return v(this.fileType)[1]},t}(m.a)},function(e,t,n){var i=n(30),o=n(130),a=i.WeakMap;e.exports="function"==typeof a&&/native code/.test(o(a))},function(e,t,n){var i=n(44),o=n(211),a=n(128),r=n(66);e.exports=function(e,t){for(var n=o(t),s=r.f,c=a.f,l=0;l<n.length;l++){var u=n[l];i(e,u)||s(e,u,c(t,u))}}},function(e,t,n){var i=n(79),o=n(212),a=n(182),r=n(42);e.exports=i("Reflect","ownKeys")||function(e){var t=o.f(r(e)),n=a.f;return n?t.concat(n(e)):t}},function(e,t,n){var i=n(156),o=n(112).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return i(e,o)}},function(e,t,n){var i=n(80),o=Math.max,a=Math.min;e.exports=function(e,t){var n=i(e);return n<0?o(n+t,0):a(n,t)}},function(e,t,n){var i=n(138);e.exports=i&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(e,t,n){var i=n(132);e.exports=function(e,t,n){if(i(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,o){return e.call(t,n,i,o)}}return function(){return e.apply(t,arguments)}}},function(e,t,n){var i=n(42),o=n(245);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),t=n instanceof Array}catch(e){}return function(n,a){return i(n),o(a),t?e.call(n,a):n.__proto__=a,n}}():void 0)},function(e,t,n){"use strict";var i=n(100),o=n(184);e.exports=i?{}.toString:function(){return"[object "+o(this)+"]"}},function(e,t,n){var i=n(80),o=n(56),a=function(e){return function(t,n){var a,r,s=String(o(t)),c=i(n),l=s.length;return c<0||c>=l?e?"":void 0:(a=s.charCodeAt(c))<55296||a>56319||c+1===l||(r=s.charCodeAt(c+1))<56320||r>57343?e?s.charAt(c):a:e?s.slice(c,c+2):r-56320+(a-55296<<10)+65536}};e.exports={codeAt:a(!1),charAt:a(!0)}},function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(e,t,n){"use strict";var i=n(73),o=n(235),a=n(113),r=n(131),s=n(238),c="Array Iterator",l=r.set,u=r.getterFor(c);e.exports=s(Array,"Array",(function(e,t){l(this,{type:c,target:i(e),index:0,kind:t})}),(function(){var e=u(this),t=e.target,n=e.kind,i=e.index++;return!t||i>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:i,done:!1}:"values"==n?{value:t[i],done:!1}:{value:[i,t[i]],done:!1}}),"values"),a.Arguments=a.Array,o("keys"),o("values"),o("entries")},function(e,t,n){var i=n(259),o=n(191);e.exports=Object.keys||function(e){return i(e,o)}},function(e,t,n){var i=n(143),o=Math.max,a=Math.min;e.exports=function(e,t){var n=i(e);return n<0?o(n+t,0):a(n,t)}},function(e,t){e.exports=function(){}},function(e,t,n){"use strict";var i=n(37);function o(e,t){return RegExp(e,t)}t.UNSUPPORTED_Y=i((function(){var e=o("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=i((function(){var e=o("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},function(e,t,n){"use strict";var i=n(150),o=n(42),a=n(85),r=n(56),s=n(172),c=n(151);i("match",1,(function(e,t,n){return[function(t){var n=r(this),i=null==t?void 0:t[e];return void 0!==i?i.call(t,n):new RegExp(t)[e](String(n))},function(e){var i=n(t,e,this);if(i.done)return i.value;var r=o(e),l=String(this);if(!r.global)return c(r,l);var u=r.unicode;r.lastIndex=0;for(var d,p=[],f=0;null!==(d=c(r,l));){var h=String(d[0]);p[f]=h,""===h&&(r.lastIndex=s(l,a(r.lastIndex),u)),f++}return 0===f?null:p}]}))},function(e,t,n){"use strict";n.r(t);var i=n(10),o=n(32),a=function(e){function t(){return e.apply(this,arguments)||this}return Object(i.a)(t,e),t}(n(178).a);t.default=Object(o.b)(a,"CheckboxComponent")},function(e,t,n){"use strict";n.r(t),n.d(t,"HtmlEditor",(function(){return h})),n.d(t,"default",(function(){return h}));n(45),n(59),n(225);var i=n(33),o=n.n(i),a=n(4),r=n.n(a),s=n(3),c=n.n(s),l=n(8),u=n.n(l),d=n(6),p=n(0),f=n(5),h=function(){function e(e,t,n,i){void 0===t&&(t=null),void 0===n&&(n=null),void 0===i&&(i=null),this.editor=void 0,this.blurTimer=0,this.__resizable=!1,this.__inited=!1,this.onBlur=null,this.onReady=null,this.onModeChange=null,this.element=void 0,this.$element=void 0,this.resize=void 0,this.onBlur=t,this.onReady=n,this.onModeChange=i,this.element=e,this.$element=u()(e),this.resize=c.a.throttle(c.a.bind(this.resizeEditor,this),100),this.init()}var t=e.prototype;return t.runOnBlur=function(){this.onBlur&&this.onBlur()},t.blurTrigger=function(){var e=this;this.onBlur&&(r.a.clearTimeout(this.blurTimer),this.blurTimer=o()((function(){e.runOnBlur()}),p.Magics.Time200ms))},t.focusTrigger=function(){this.onBlur&&r.a.clearTimeout(this.blurTimer)},t.isHtml=function(){return!!this.editor&&"wysiwyg"===this.editor.mode},t.clearCachedSignature=function(){this.editor&&this.editor.execCommand("insertSignature",{clearCache:!0})},t.setSignature=function(e,t,n){void 0===n&&(n=!1),this.editor&&this.editor.execCommand("insertSignature",{isHtml:t,insertBefore:n,signature:e})},t.checkDirty=function(){return!!this.editor&&this.editor.checkDirty()},t.resetDirty=function(){this.editor&&this.editor.resetDirty()},t.getData=function(e){void 0===e&&(e=!1);var t="";if(this.editor)try{t="plain"===this.editor.mode&&this.editor.plugins.plain&&this.editor.__plain?this.editor.__plain.getRawData():e?'<div data-html-editor-font-wrapper="true" style="font-family: arial, sans-serif; font-size: 13px;">'+this.editor.getData()+"</div>":this.editor.getData()}catch(e){}return t},t.getDataWithHtmlMark=function(e){return void 0===e&&(e=!1),(this.isHtml()?":HTML:":"")+this.getData(e)},t.modeToggle=function(e,t){if(this.editor){try{e?"plain"===this.editor.mode&&this.editor.setMode("wysiwyg"):"wysiwyg"===this.editor.mode&&this.editor.setMode("plain")}catch(e){}t&&this.resize()}},t.setHtmlOrPlain=function(e,t){":HTML:"===e.substr(0,6)?this.setHtml(e.substr(6),t):this.setPlain(e,t)},t.setHtml=function(e,t){if(this.editor&&this.__inited){this.clearCachedSignature(),this.modeToggle(!0),e=e.replace(/<p[^>]*><\/p>/gi,"");try{this.editor.setData(e)}catch(e){}t&&this.focus()}},t.replaceHtml=function(e,t){if(this.editor&&this.__inited&&"wysiwyg"===this.editor.mode)try{this.editor.setData(this.editor.getData().replace(e,t))}catch(e){}},t.setPlain=function(e,t){if(this.editor&&this.__inited){if(this.clearCachedSignature(),this.modeToggle(!1),"plain"===this.editor.mode&&this.editor.plugins.plain&&this.editor.__plain)this.editor.__plain.setRawData(e);else try{this.editor.setData(e)}catch(e){}t&&this.focus()}},t.init=function(){var e=this;if(this.element&&!this.editor){var t=function(){var t=d.htmlEditorDefaultConfig,n=f.settingsGet("Language"),i=!!f.appSettingsGet("allowHtmlEditorSourceButton"),o=!!f.appSettingsGet("allowHtmlEditorBitiButtons");!i&&o||t.toolbarGroups.__cfgInited||(t.toolbarGroups.__cfgInited=!0,i&&(t.removeButtons=t.removeButtons.replace(",Source","")),o||(t.removePlugins+=(t.removePlugins?",":"")+"bidi")),t.enterMode=r.a.CKEDITOR.ENTER_BR,t.shiftEnterMode=r.a.CKEDITOR.ENTER_P,t.language=d.htmlEditorLangsMap[(n||"en").toLowerCase()]||"en",r.a.CKEDITOR.env&&(r.a.CKEDITOR.env.isCompatible=!0),e.editor=r.a.CKEDITOR.appendTo(e.element,t),e.editor.on("key",(function(e){return!e||!e.data||p.EventKeyCode.Tab!==e.data.keyCode})),e.editor.on("blur",(function(){e.blurTrigger()})),e.editor.on("mode",(function(){e.blurTrigger(),e.onModeChange&&e.onModeChange("plain"!==e.editor.mode)})),e.editor.on("focus",(function(){e.focusTrigger()})),r.a.FileReader&&e.editor.on("drop",(function(t){if(0<t.data.dataTransfer.getFilesCount()){var n=t.data.dataTransfer.getFile(0);if(n&&r.a.FileReader&&t.data.dataTransfer.id&&n.type&&n.type.match(/^image/i)){var i="[img="+t.data.dataTransfer.id+"]",o=new r.a.FileReader;o.onloadend=function(){o.result&&e.replaceHtml(i,'<img src="'+o.result+'" />')},o.readAsDataURL(n),t.data.dataTransfer.setData("text/html",i)}}})),e.editor.on("instanceReady",(function(){e.editor.removeMenuItem&&(e.editor.removeMenuItem("cut"),e.editor.removeMenuItem("copy"),e.editor.removeMenuItem("paste")),e.__resizable=!0,e.__inited=!0,e.resize(),e.onReady&&e.onReady()}))};r.a.CKEDITOR?t():r.a.__initEditor=t}},t.focus=function(){if(this.editor)try{this.editor.focus()}catch(e){}},t.hasFocus=function(){if(this.editor)try{return!!this.editor.focusManager.hasFocus}catch(e){}return!1},t.blur=function(){if(this.editor)try{this.editor.focusManager.blur(!0)}catch(e){}},t.resizeEditor=function(){if(this.editor&&this.__resizable)try{this.editor.resize(this.$element.width(),this.$element.innerHeight())}catch(e){}},t.setReadOnly=function(e){if(this.editor)try{this.editor.setReadOnly(!!e)}catch(e){}},t.clear=function(e){this.setHtml("",e)},e}()},function(e,t,n){e.exports=n(345)},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n(4),o=n.n(i).a.Opentip||{};o.styles=o.styles||{},o.styles.rainloop={extends:"standard",fixed:!0,target:!0,delay:.2,hideDelay:0,hideEffect:"fade",hideEffectDuration:.2,showEffect:"fade",showEffectDuration:.2,showOn:"mouseover click",removeElementsOnHide:!0,background:"#fff",shadow:!1,borderColor:"#999",borderRadius:2,borderWidth:1},o.styles.rainloopTip={extends:"rainloop",delay:.4,group:"rainloopTips"},o.styles.rainloopErrorTip={extends:"rainloop",className:"rainloopErrorTip"}},function(e,t,n){!function(t,i){"use strict";var o;try{o=n(101)}catch(e){}e.exports=function(e){var t="function"==typeof e,n=!!window.addEventListener,i=window.document,o=window.setTimeout,a=function(e,t,i,o){n?e.addEventListener(t,i,!!o):e.attachEvent("on"+t,i)},r=function(e,t,i,o){n?e.removeEventListener(t,i,!!o):e.detachEvent("on"+t,i)},s=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},c=function(e,t){return-1!==(" "+e.className+" ").indexOf(" "+t+" ")},l=function(e,t){c(e,t)||(e.className=""===e.className?t:e.className+" "+t)},u=function(e,t){e.className=s((" "+e.className+" ").replace(" "+t+" "," "))},d=function(e){return/Array/.test(Object.prototype.toString.call(e))},p=function(e){return/Date/.test(Object.prototype.toString.call(e))&&!isNaN(e.getTime())},f=function(e){var t=e.getDay();return 0===t||6===t},h=function(e){return e%4==0&&e%100!=0||e%400==0},m=function(e,t){return[31,h(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]},b=function(e){p(e)&&e.setHours(0,0,0,0)},g=function(e,t){return e.getTime()===t.getTime()},v=function(e,t,n){var i,o;for(i in t)(o=void 0!==e[i])&&"object"==typeof t[i]&&null!==t[i]&&void 0===t[i].nodeName?p(t[i])?n&&(e[i]=new Date(t[i].getTime())):d(t[i])?n&&(e[i]=t[i].slice(0)):e[i]=v({},t[i],n):!n&&o||(e[i]=t[i]);return e},y=function(e,t,n){var o;i.createEvent?((o=i.createEvent("HTMLEvents")).initEvent(t,!0,!1),o=v(o,n),e.dispatchEvent(o)):i.createEventObject&&(o=i.createEventObject(),o=v(o,n),e.fireEvent("on"+t,o))},S=function(e){return e.month<0&&(e.year-=Math.ceil(Math.abs(e.month)/12),e.month+=12),e.month>11&&(e.year+=Math.floor(Math.abs(e.month)/12),e.month-=12),e},O={field:null,bound:void 0,ariaLabel:"Use the arrow keys to pick a date",position:"bottom left",reposition:!0,format:"YYYY-MM-DD",toString:null,parse:null,defaultDate:null,setDefaultDate:!1,firstDay:0,firstWeekOfYearMinDays:4,formatStrict:!1,minDate:null,maxDate:null,yearRange:10,showWeekNumber:!1,pickWholeWeek:!1,minYear:0,maxYear:9999,minMonth:void 0,maxMonth:void 0,startRange:null,endRange:null,isRTL:!1,yearSuffix:"",showMonthAfterYear:!1,showDaysInNextAndPreviousMonths:!1,enableSelectionDaysInNextAndPreviousMonths:!1,numberOfMonths:1,mainCalendar:"left",container:void 0,blurFieldOnSelect:!0,i18n:{previousMonth:"Previous Month",nextMonth:"Next Month",months:["January","February","March","April","May","June","July","August","September","October","November","December"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},theme:null,events:[],onSelect:null,onOpen:null,onClose:null,onDraw:null,keyboardInput:!0},w=function(e,t,n){for(t+=e.firstDay;t>=7;)t-=7;return n?e.i18n.weekdaysShort[t]:e.i18n.weekdays[t]},T=function(e){var t=[],n="false";if(e.isEmpty){if(!e.showDaysInNextAndPreviousMonths)return'<td class="is-empty"></td>';t.push("is-outside-current-month"),e.enableSelectionDaysInNextAndPreviousMonths||t.push("is-selection-disabled")}return e.isDisabled&&t.push("is-disabled"),e.isToday&&t.push("is-today"),e.isSelected&&(t.push("is-selected"),n="true"),e.hasEvent&&t.push("has-event"),e.isInRange&&t.push("is-inrange"),e.isStartRange&&t.push("is-startrange"),e.isEndRange&&t.push("is-endrange"),'<td data-day="'+e.day+'" class="'+t.join(" ")+'" aria-selected="'+n+'"><button class="pika-button pika-day" type="button" data-pika-year="'+e.year+'" data-pika-month="'+e.month+'" data-pika-day="'+e.day+'">'+e.day+"</button></td>"},C=function(e,t){e.setHours(0,0,0,0);var n=e.getDate(),i=e.getDay(),o=t,a=o-1,r=7,s=function(e){return(e+r-1)%r};e.setDate(n+a-s(i));var c=new Date(e.getFullYear(),0,o),l=864e5,u=(e.getTime()-c.getTime())/l;return 1+Math.round((u-a+s(c.getDay()))/r)},A=function(n,i,o,a){var r=new Date(o,i,n);return'<td class="pika-week">'+(t?e(r).isoWeek():C(r,a))+"</td>"},E=function(e,t,n,i){return'<tr class="pika-row'+(n?" pick-whole-week":"")+(i?" is-selected":"")+'">'+(t?e.reverse():e).join("")+"</tr>"},j=function(e){return"<tbody>"+e.join("")+"</tbody>"},F=function(e){var t,n=[];for(e.showWeekNumber&&n.push("<th></th>"),t=0;t<7;t++)n.push('<th scope="col"><abbr title="'+w(e,t)+'">'+w(e,t,!0)+"</abbr></th>");return"<thead><tr>"+(e.isRTL?n.reverse():n).join("")+"</tr></thead>"},R=function(e,t,n,i,o,a){var r,s,c,l,u,p=e._o,f=n===p.minYear,h=n===p.maxYear,m='<div id="'+a+'" class="pika-title" role="heading" aria-live="assertive">',b=!0,g=!0;for(c=[],r=0;r<12;r++)c.push('<option value="'+(n===o?r-t:12+r-t)+'"'+(r===i?' selected="selected"':"")+(f&&r<p.minMonth||h&&r>p.maxMonth?' disabled="disabled"':"")+">"+p.i18n.months[r]+"</option>");for(l='<div class="pika-label">'+p.i18n.months[i]+'<select class="pika-select pika-select-month" tabindex="-1">'+c.join("")+"</select></div>",d(p.yearRange)?(r=p.yearRange[0],s=p.yearRange[1]+1):(r=n-p.yearRange,s=1+n+p.yearRange),c=[];r<s&&r<=p.maxYear;r++)r>=p.minYear&&c.push('<option value="'+r+'"'+(r===n?' selected="selected"':"")+">"+r+"</option>");return u='<div class="pika-label">'+n+p.yearSuffix+'<select class="pika-select pika-select-year" tabindex="-1">'+c.join("")+"</select></div>",p.showMonthAfterYear?m+=u+l:m+=l+u,f&&(0===i||p.minMonth>=i)&&(b=!1),h&&(11===i||p.maxMonth<=i)&&(g=!1),0===t&&(m+='<button class="pika-prev'+(b?"":" is-disabled")+'" type="button">'+p.i18n.previousMonth+"</button>"),t===e._o.numberOfMonths-1&&(m+='<button class="pika-next'+(g?"":" is-disabled")+'" type="button">'+p.i18n.nextMonth+"</button>"),m+"</div>"},N=function(e,t,n){return'<table cellpadding="0" cellspacing="0" class="pika-table" role="grid" aria-labelledby="'+n+'">'+F(e)+j(t)+"</table>"},I=function(r){var s=this,l=s.config(r);s._onMouseDown=function(e){if(s._v){var t=(e=e||window.event).target||e.srcElement;if(t)if(c(t,"is-disabled")||(!c(t,"pika-button")||c(t,"is-empty")||c(t.parentNode,"is-disabled")?c(t,"pika-prev")?s.prevMonth():c(t,"pika-next")&&s.nextMonth():(s.setDate(new Date(t.getAttribute("data-pika-year"),t.getAttribute("data-pika-month"),t.getAttribute("data-pika-day"))),l.bound&&o((function(){s.hide(),l.blurFieldOnSelect&&l.field&&l.field.blur()}),100))),c(t,"pika-select"))s._c=!0;else{if(!e.preventDefault)return e.returnValue=!1,!1;e.preventDefault()}}},s._onChange=function(e){var t=(e=e||window.event).target||e.srcElement;t&&(c(t,"pika-select-month")?s.gotoMonth(t.value):c(t,"pika-select-year")&&s.gotoYear(t.value))},s._onKeyChange=function(e){if(e=e||window.event,s.isVisible())switch(e.keyCode){case 13:case 27:l.field&&l.field.blur();break;case 37:s.adjustDate("subtract",1);break;case 38:s.adjustDate("subtract",7);break;case 39:s.adjustDate("add",1);break;case 40:s.adjustDate("add",7);break;case 8:case 46:s.setDate(null)}},s._parseFieldValue=function(){if(l.parse)return l.parse(l.field.value,l.format);if(t){var n=e(l.field.value,l.format,l.formatStrict);return n&&n.isValid()?n.toDate():null}return new Date(Date.parse(l.field.value))},s._onInputChange=function(e){var t;e.firedBy!==s&&(t=s._parseFieldValue(),p(t)&&s.setDate(t),s._v||s.show())},s._onInputFocus=function(){s.show()},s._onInputClick=function(){s.show()},s._onInputBlur=function(){var e=i.activeElement;do{if(c(e,"pika-single"))return}while(e=e.parentNode);s._c||(s._b=o((function(){s.hide()}),50)),s._c=!1},s._onClick=function(e){var t=(e=e||window.event).target||e.srcElement,i=t;if(t){!n&&c(t,"pika-select")&&(t.onchange||(t.setAttribute("onchange","return;"),a(t,"change",s._onChange)));do{if(c(i,"pika-single")||i===l.trigger)return}while(i=i.parentNode);s._v&&t!==l.trigger&&i!==l.trigger&&s.hide()}},s.el=i.createElement("div"),s.el.className="pika-single"+(l.isRTL?" is-rtl":"")+(l.theme?" "+l.theme:""),a(s.el,"mousedown",s._onMouseDown,!0),a(s.el,"touchend",s._onMouseDown,!0),a(s.el,"change",s._onChange),l.keyboardInput&&a(i,"keydown",s._onKeyChange),l.field&&(l.container?l.container.appendChild(s.el):l.bound?i.body.appendChild(s.el):l.field.parentNode.insertBefore(s.el,l.field.nextSibling),a(l.field,"change",s._onInputChange),l.defaultDate||(l.defaultDate=s._parseFieldValue(),l.setDefaultDate=!0));var u=l.defaultDate;p(u)?l.setDefaultDate?s.setDate(u,!0):s.gotoDate(u):s.gotoDate(new Date),l.bound?(this.hide(),s.el.className+=" is-bound",a(l.trigger,"click",s._onInputClick),a(l.trigger,"focus",s._onInputFocus),a(l.trigger,"blur",s._onInputBlur)):this.show()};return I.prototype={config:function(e){this._o||(this._o=v({},O,!0));var t=v(this._o,e,!0);t.isRTL=!!t.isRTL,t.field=t.field&&t.field.nodeName?t.field:null,t.theme="string"==typeof t.theme&&t.theme?t.theme:null,t.bound=!!(void 0!==t.bound?t.field&&t.bound:t.field),t.trigger=t.trigger&&t.trigger.nodeName?t.trigger:t.field,t.disableWeekends=!!t.disableWeekends,t.disableDayFn="function"==typeof t.disableDayFn?t.disableDayFn:null;var n=parseInt(t.numberOfMonths,10)||1;if(t.numberOfMonths=n>4?4:n,p(t.minDate)||(t.minDate=!1),p(t.maxDate)||(t.maxDate=!1),t.minDate&&t.maxDate&&t.maxDate<t.minDate&&(t.maxDate=t.minDate=!1),t.minDate&&this.setMinDate(t.minDate),t.maxDate&&this.setMaxDate(t.maxDate),d(t.yearRange)){var i=(new Date).getFullYear()-10;t.yearRange[0]=parseInt(t.yearRange[0],10)||i,t.yearRange[1]=parseInt(t.yearRange[1],10)||i}else t.yearRange=Math.abs(parseInt(t.yearRange,10))||O.yearRange,t.yearRange>100&&(t.yearRange=100);return t},toString:function(n){return n=n||this._o.format,p(this._d)?this._o.toString?this._o.toString(this._d,n):t?e(this._d).format(n):this._d.toDateString():""},getMoment:function(){return t?e(this._d):null},setMoment:function(n,i){t&&e.isMoment(n)&&this.setDate(n.toDate(),i)},getDate:function(){return p(this._d)?new Date(this._d.getTime()):null},setDate:function(e,t){if(!e)return this._d=null,this._o.field&&(this._o.field.value="",y(this._o.field,"change",{firedBy:this})),this.draw();if("string"==typeof e&&(e=new Date(Date.parse(e))),p(e)){var n=this._o.minDate,i=this._o.maxDate;p(n)&&e<n?e=n:p(i)&&e>i&&(e=i),this._d=new Date(e.getTime()),b(this._d),this.gotoDate(this._d),this._o.field&&(this._o.field.value=this.toString(),y(this._o.field,"change",{firedBy:this})),t||"function"!=typeof this._o.onSelect||this._o.onSelect.call(this,this.getDate())}},clear:function(){this.setDate(null)},gotoDate:function(e){var t=!0;if(p(e)){if(this.calendars){var n=new Date(this.calendars[0].year,this.calendars[0].month,1),i=new Date(this.calendars[this.calendars.length-1].year,this.calendars[this.calendars.length-1].month,1),o=e.getTime();i.setMonth(i.getMonth()+1),i.setDate(i.getDate()-1),t=o<n.getTime()||i.getTime()<o}t&&(this.calendars=[{month:e.getMonth(),year:e.getFullYear()}],"right"===this._o.mainCalendar&&(this.calendars[0].month+=1-this._o.numberOfMonths)),this.adjustCalendars()}},adjustDate:function(e,t){var n,i=this.getDate()||new Date,o=24*parseInt(t)*60*60*1e3;"add"===e?n=new Date(i.valueOf()+o):"subtract"===e&&(n=new Date(i.valueOf()-o)),this.setDate(n)},adjustCalendars:function(){this.calendars[0]=S(this.calendars[0]);for(var e=1;e<this._o.numberOfMonths;e++)this.calendars[e]=S({month:this.calendars[0].month+e,year:this.calendars[0].year});this.draw()},gotoToday:function(){this.gotoDate(new Date)},gotoMonth:function(e){isNaN(e)||(this.calendars[0].month=parseInt(e,10),this.adjustCalendars())},nextMonth:function(){this.calendars[0].month++,this.adjustCalendars()},prevMonth:function(){this.calendars[0].month--,this.adjustCalendars()},gotoYear:function(e){isNaN(e)||(this.calendars[0].year=parseInt(e,10),this.adjustCalendars())},setMinDate:function(e){e instanceof Date?(b(e),this._o.minDate=e,this._o.minYear=e.getFullYear(),this._o.minMonth=e.getMonth()):(this._o.minDate=O.minDate,this._o.minYear=O.minYear,this._o.minMonth=O.minMonth,this._o.startRange=O.startRange),this.draw()},setMaxDate:function(e){e instanceof Date?(b(e),this._o.maxDate=e,this._o.maxYear=e.getFullYear(),this._o.maxMonth=e.getMonth()):(this._o.maxDate=O.maxDate,this._o.maxYear=O.maxYear,this._o.maxMonth=O.maxMonth,this._o.endRange=O.endRange),this.draw()},setStartRange:function(e){this._o.startRange=e},setEndRange:function(e){this._o.endRange=e},draw:function(e){if(this._v||e){var t,n=this._o,i=n.minYear,a=n.maxYear,r=n.minMonth,s=n.maxMonth,c="";this._y<=i&&(this._y=i,!isNaN(r)&&this._m<r&&(this._m=r)),this._y>=a&&(this._y=a,!isNaN(s)&&this._m>s&&(this._m=s));for(var l=0;l<n.numberOfMonths;l++)t="pika-title-"+Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,2),c+='<div class="pika-lendar">'+R(this,l,this.calendars[l].year,this.calendars[l].month,this.calendars[0].year,t)+this.render(this.calendars[l].year,this.calendars[l].month,t)+"</div>";this.el.innerHTML=c,n.bound&&"hidden"!==n.field.type&&o((function(){n.trigger.focus()}),1),"function"==typeof this._o.onDraw&&this._o.onDraw(this),n.bound&&n.field.setAttribute("aria-label",n.ariaLabel)}},adjustPosition:function(){var e,t,n,o,a,r,s,c,d,p,f,h;if(!this._o.container){if(this.el.style.position="absolute",t=e=this._o.trigger,n=this.el.offsetWidth,o=this.el.offsetHeight,a=window.innerWidth||i.documentElement.clientWidth,r=window.innerHeight||i.documentElement.clientHeight,s=window.pageYOffset||i.body.scrollTop||i.documentElement.scrollTop,f=!0,h=!0,"function"==typeof e.getBoundingClientRect)c=(p=e.getBoundingClientRect()).left+window.pageXOffset,d=p.bottom+window.pageYOffset;else for(c=t.offsetLeft,d=t.offsetTop+t.offsetHeight;t=t.offsetParent;)c+=t.offsetLeft,d+=t.offsetTop;(this._o.reposition&&c+n>a||this._o.position.indexOf("right")>-1&&c-n+e.offsetWidth>0)&&(c=c-n+e.offsetWidth,f=!1),(this._o.reposition&&d+o>r+s||this._o.position.indexOf("top")>-1&&d-o-e.offsetHeight>0)&&(d=d-o-e.offsetHeight,h=!1),this.el.style.left=c+"px",this.el.style.top=d+"px",l(this.el,f?"left-aligned":"right-aligned"),l(this.el,h?"bottom-aligned":"top-aligned"),u(this.el,f?"right-aligned":"left-aligned"),u(this.el,h?"top-aligned":"bottom-aligned")}},render:function(e,t,n){var i=this._o,o=new Date,a=m(e,t),r=new Date(e,t,1).getDay(),s=[],c=[];b(o),i.firstDay>0&&(r-=i.firstDay)<0&&(r+=7);for(var l=0===t?11:t-1,u=11===t?0:t+1,d=0===t?e-1:e,h=11===t?e+1:e,v=m(d,l),y=a+r,S=y;S>7;)S-=7;y+=7-S;for(var O=!1,w=0,C=0;w<y;w++){var j=new Date(e,t,w-r+1),F=!!p(this._d)&&g(j,this._d),R=g(j,o),I=-1!==i.events.indexOf(j.toDateString()),L=w<r||w>=a+r,P=w-r+1,_=t,M=e,D=i.startRange&&g(i.startRange,j),k=i.endRange&&g(i.endRange,j),x=i.startRange&&i.endRange&&i.startRange<j&&j<i.endRange;L&&(w<r?(P=v+P,_=l,M=d):(P-=a,_=u,M=h));var U={day:P,month:_,year:M,hasEvent:I,isSelected:F,isToday:R,isDisabled:i.minDate&&j<i.minDate||i.maxDate&&j>i.maxDate||i.disableWeekends&&f(j)||i.disableDayFn&&i.disableDayFn(j),isEmpty:L,isStartRange:D,isEndRange:k,isInRange:x,showDaysInNextAndPreviousMonths:i.showDaysInNextAndPreviousMonths,enableSelectionDaysInNextAndPreviousMonths:i.enableSelectionDaysInNextAndPreviousMonths};i.pickWholeWeek&&F&&(O=!0),c.push(T(U)),7==++C&&(i.showWeekNumber&&c.unshift(A(w-r,t,e,i.firstWeekOfYearMinDays)),s.push(E(c,i.isRTL,i.pickWholeWeek,O)),c=[],C=0,O=!1)}return N(i,s,n)},isVisible:function(){return this._v},show:function(){this.isVisible()||(this._v=!0,this.draw(),u(this.el,"is-hidden"),this._o.bound&&(a(i,"click",this._onClick),this.adjustPosition()),"function"==typeof this._o.onOpen&&this._o.onOpen.call(this))},hide:function(){var e=this._v;!1!==e&&(this._o.bound&&r(i,"click",this._onClick),this._o.container||(this.el.style.position="static",this.el.style.left="auto",this.el.style.top="auto"),l(this.el,"is-hidden"),this._v=!1,void 0!==e&&"function"==typeof this._o.onClose&&this._o.onClose.call(this))},destroy:function(){var e=this._o;this.hide(),r(this.el,"mousedown",this._onMouseDown,!0),r(this.el,"touchend",this._onMouseDown,!0),r(this.el,"change",this._onChange),e.keyboardInput&&r(i,"keydown",this._onKeyChange),e.field&&(r(e.field,"change",this._onInputChange),e.bound&&(r(e.trigger,"click",this._onInputClick),r(e.trigger,"focus",this._onInputFocus),r(e.trigger,"blur",this._onInputBlur))),this.el.parentNode&&this.el.parentNode.removeChild(this.el)}},I}(o)}()},function(e,t){e.exports=window.Autolinker},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i={eml:"message/rfc822",mime:"message/rfc822",txt:"text/plain",text:"text/plain",def:"text/plain",list:"text/plain",in:"text/plain",ini:"text/plain",log:"text/plain",sql:"text/plain",cfg:"text/plain",conf:"text/plain",asc:"text/plain",rtx:"text/richtext",vcard:"text/vcard",vcf:"text/vcard",htm:"text/html",html:"text/html",csv:"text/csv",ics:"text/calendar",ifb:"text/calendar",xml:"text/xml",json:"application/json",swf:"application/x-shockwave-flash",hlp:"application/winhlp",wgt:"application/widget",chm:"application/vnd.ms-htmlhelp",p10:"application/pkcs10",p7c:"application/pkcs7-mime",p7m:"application/pkcs7-mime",p7s:"application/pkcs7-signature",torrent:"application/x-bittorrent",js:"application/javascript",pl:"text/perl",css:"text/css",asp:"text/asp",php:"application/x-httpd-php",php3:"application/x-httpd-php",php4:"application/x-httpd-php",php5:"application/x-httpd-php",phtml:"application/x-httpd-php",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",jpe:"image/jpeg",jfif:"image/jpeg",gif:"image/gif",bmp:"image/bmp",cgm:"image/cgm",ief:"image/ief",ico:"image/x-icon",tif:"image/tiff",tiff:"image/tiff",svg:"image/svg+xml",svgz:"image/svg+xml",djv:"image/vnd.djvu",djvu:"image/vnd.djvu",webp:"image/webp",zip:"application/zip","7z":"application/x-7z-compressed",rar:"application/x-rar-compressed",exe:"application/x-msdownload",dll:"application/x-msdownload",scr:"application/x-msdownload",com:"application/x-msdownload",bat:"application/x-msdownload",msi:"application/x-msdownload",cab:"application/vnd.ms-cab-compressed",gz:"application/x-gzip",tgz:"application/x-gzip",bz:"application/x-bzip",bz2:"application/x-bzip2",deb:"application/x-debian-package",psf:"application/x-font-linux-psf",otf:"application/x-font-otf",pcf:"application/x-font-pcf",snf:"application/x-font-snf",ttf:"application/x-font-ttf",ttc:"application/x-font-ttf",mp3:"audio/mpeg",amr:"audio/amr",aac:"audio/x-aac",aif:"audio/x-aiff",aifc:"audio/x-aiff",aiff:"audio/x-aiff",wav:"audio/x-wav",wma:"audio/x-ms-wma",wax:"audio/x-ms-wax",midi:"audio/midi",mp4a:"audio/mp4",ogg:"audio/ogg",weba:"audio/webm",ra:"audio/x-pn-realaudio",ram:"audio/x-pn-realaudio",rmp:"audio/x-pn-realaudio-plugin",m3u:"audio/x-mpegurl",flv:"video/x-flv",qt:"video/quicktime",mov:"video/quicktime",wmv:"video/windows-media",avi:"video/x-msvideo",mpg:"video/mpeg",mpeg:"video/mpeg",mpe:"video/mpeg",m1v:"video/mpeg",m2v:"video/mpeg","3gp":"video/3gpp","3g2":"video/3gpp2",h261:"video/h261",h263:"video/h263",h264:"video/h264",jpgv:"video/jpgv",mp4:"video/mp4",mp4v:"video/mp4",mpg4:"video/mp4",ogv:"video/ogg",webm:"video/webm",m4v:"video/x-m4v",asf:"video/x-ms-asf",asx:"video/x-ms-asf",wm:"video/x-ms-wm",wmx:"video/x-ms-wmx",wvx:"video/x-ms-wvx",movie:"video/x-sgi-movie",pdf:"application/pdf",psd:"image/vnd.adobe.photoshop",ai:"application/postscript",eps:"application/postscript",ps:"application/postscript",doc:"application/msword",dot:"application/msword",rtf:"application/rtf",xls:"application/vnd.ms-excel",ppt:"application/vnd.ms-powerpoint",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",dotx:"application/vnd.openxmlformats-officedocument.wordprocessingml.template",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",odt:"application/vnd.oasis.opendocument.text",ods:"application/vnd.oasis.opendocument.spreadsheet"}},function(e,t,n){"use strict";var i=n(1),o=n(0);t.a=new function(){this.capa=i.a.observable(""),this.modules=i.a.observable({}),this.filters=i.a.observableArray([]),this.filters.loading=i.a.observable(!1).extend({throttle:o.Magics.Time200ms}),this.filters.saving=i.a.observable(!1).extend({throttle:o.Magics.Time200ms}),this.raw=i.a.observable("")}},function(e,t,n){var i=n(156),o=n(112);e.exports=Object.keys||function(e){return i(e,o)}},function(e,t,n){var i=n(39),o=n(168),a=n(66),r=i("unscopables"),s=Array.prototype;null==s[r]&&a.f(s,r,{configurable:!0,value:o(null)}),e.exports=function(e){s[r][e]=!0}},function(e,t,n){var i=n(79);e.exports=i("document","documentElement")},function(e,t,n){var i=n(42),o=n(132),a=n(39)("species");e.exports=function(e,t){var n,r=i(e).constructor;return void 0===r||null==(n=i(r)[a])?t:o(n)}},function(e,t,n){"use strict";var i=n(65),o=n(247),a=n(169),r=n(216),s=n(170),c=n(47),l=n(69),u=n(39),d=n(99),p=n(113),f=n(185),h=f.IteratorPrototype,m=f.BUGGY_SAFARI_ITERATORS,b=u("iterator"),g="keys",v="values",y="entries",S=function(){return this};e.exports=function(e,t,n,u,f,O,w){o(n,t,u);var T,C,A,E=function(e){if(e===f&&I)return I;if(!m&&e in R)return R[e];switch(e){case g:case v:case y:return function(){return new n(this,e)}}return function(){return new n(this)}},j=t+" Iterator",F=!1,R=e.prototype,N=R[b]||R["@@iterator"]||f&&R[f],I=!m&&N||E(f),L="Array"==t&&R.entries||N;if(L&&(T=a(L.call(new e)),h!==Object.prototype&&T.next&&(d||a(T)===h||(r?r(T,h):"function"!=typeof T[b]&&c(T,b,S)),s(T,j,!0,!0),d&&(p[j]=S))),f==v&&N&&N.name!==v&&(F=!0,I=function(){return N.call(this)}),d&&!w||R[b]===I||c(R,b,I),p[t]=I,f)if(C={values:E(v),keys:O?I:E(g),entries:E(y)},w)for(A in C)(m||F||!(A in R))&&l(R,A,C[A]);else i({target:t,proto:!0,forced:m||F},C);return C}},function(e,t,n){"use strict";n.r(t),n.d(t,"AskPopupView",(function(){return f})),n.d(t,"default",(function(){return f}));var i,o=n(10),a=n(1),r=n(20),s=n.n(r),c=n(0),l=n(2),u=n(9),d=n(7),p=n(25),f=Object(d.popup)({name:"View/Popup/Ask",templateID:"PopupsAsk"})(i=function(e){function t(){var t;return(t=e.call(this)||this).askDesc=a.a.observable(""),t.yesButton=a.a.observable(""),t.noButton=a.a.observable(""),t.yesFocus=a.a.observable(!1),t.noFocus=a.a.observable(!1),t.fYesAction=null,t.fNoAction=null,t.bFocusYesOnShow=!0,t.bDisabeCloseOnEsc=!0,t.sDefaultKeyScope=c.KeyState.PopupAsk,t}Object(o.a)(t,e);var n=t.prototype;return n.clearPopup=function(){this.askDesc(""),this.yesButton(Object(u.i18n)("POPUPS_ASK/BUTTON_YES")),this.noButton(Object(u.i18n)("POPUPS_ASK/BUTTON_NO")),this.yesFocus(!1),this.noFocus(!1),this.fYesAction=null,this.fNoAction=null},n.yesClick=function(){this.cancelCommand(),Object(l.isFunc)(this.fYesAction)&&this.fYesAction.call(null)},n.noClick=function(){this.cancelCommand(),Object(l.isFunc)(this.fNoAction)&&this.fNoAction.call(null)},n.onShow=function(e,t,n,i,o,a){void 0===t&&(t=null),void 0===n&&(n=null),void 0===i&&(i=""),void 0===o&&(o=""),void 0===a&&(a=!0),this.clearPopup(),this.fYesAction=t||null,this.fNoAction=n||null,this.askDesc(e||""),i&&this.yesButton(i),o&&this.noButton(o),this.bFocusYesOnShow=!!a},n.onShowWithDelay=function(){this.bFocusYesOnShow&&this.yesFocus(!0)},n.onBuild=function(){var e=this;s()("tab, shift+tab, right, left",c.KeyState.PopupAsk,(function(){return e.yesFocus()?e.noFocus(!0):e.yesFocus(!0),!1})),s()("esc",c.KeyState.PopupAsk,(function(){return e.noClick(),!1}))},t}(p.a))||i},function(e,t,n){"use strict";var i=n(4),o=n.n(i),a=n(1),r=n(0),s=function(){function e(){var e=this;this.quota=a.a.observable(0),this.usage=a.a.observable(0),this.percentage=a.a.computed((function(){var t=e.quota(),n=e.usage();return 0<t?o.a.Math.ceil(n/t*100):0}))}return e.prototype.populateData=function(e,t){this.quota(e*r.Magics.BitLength1024),this.usage(t*r.Magics.BitLength1024)},e}();t.a=new s},function(e,t){e.exports=window.ifvisible},function(e,t,n){var i=n(55),o=n(66),a=n(42),r=n(234);e.exports=i?Object.defineProperties:function(e,t){a(e);for(var n,i=r(t),s=i.length,c=0;s>c;)o.f(e,n=i[c++],t[n]);return e}},function(e,t,n){var i=n(49),o=n(74),a=n(39)("match");e.exports=function(e){var t;return i(e)&&(void 0!==(t=e[a])?!!t:"RegExp"==o(e))}},function(e,t,n){var i=n(37);e.exports=!i((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},function(e,t,n){var i=n(49);e.exports=function(e){if(!i(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},,function(e,t,n){"use strict";var i=n(185).IteratorPrototype,o=n(168),a=n(96),r=n(170),s=n(113),c=function(){return this};e.exports=function(e,t,n){var l=t+" Iterator";return e.prototype=o(i,{next:a(1,n)}),r(e,l,!1,!0),s[l]=c,e}},function(e,t,n){var i=n(30),o=n(219),a=n(220),r=n(47),s=n(39),c=s("iterator"),l=s("toStringTag"),u=a.values;for(var d in o){var p=i[d],f=p&&p.prototype;if(f){if(f[c]!==u)try{r(f,c,u)}catch(e){f[c]=u}if(f[l]||r(f,l,d),o[d])for(var h in a)if(f[h]!==a[h])try{r(f,h,a[h])}catch(e){f[h]=a[h]}}}},function(e,t,n){n(186);var i=n(51);e.exports=i.setTimeout},function(e,t,n){"use strict";var i={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,a=o&&!i.call({1:2},1);t.f=a?function(e){var t=o(this,e);return!!t&&t.enumerable}:i},,function(e,t,n){var i=n(253);e.exports=i},function(e,t,n){n(254),n(265),n(266),n(276),n(277),n(278),n(279),n(162);var i=n(51);e.exports=i.Promise},function(e,t,n){"use strict";var i=n(34),o=n(140),a=n(160),r=n(161),s=n(52),c=n(91),l=n(108),u=function(e,t){var n=this;if(!(n instanceof u))return new u(e,t);a&&(n=a(new Error(void 0),o(n))),void 0!==t&&s(n,"message",String(t));var i=[];return l(e,i.push,{that:i}),s(n,"errors",i),n};u.prototype=r(Error.prototype,{constructor:c(5,u),message:c(5,""),name:c(5,"AggregateError")}),i({global:!0},{AggregateError:u})},function(e,t,n){var i=n(31),o=n(52);e.exports=function(e,t){try{o(i,e,t)}catch(n){i[e]=t}return t}},function(e,t,n){var i=n(43);e.exports=!i((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},function(e,t,n){var i=n(50);e.exports=function(e){if(!i(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},function(e,t,n){var i=n(53),o=n(82),a=n(58),r=n(221);e.exports=i?Object.defineProperties:function(e,t){a(e);for(var n,i=r(t),s=i.length,c=0;s>c;)o.f(e,n=i[c++],t[n]);return e}},function(e,t,n){var i=n(54),o=n(81),a=n(260).indexOf,r=n(144);e.exports=function(e,t){var n,s=o(e),c=0,l=[];for(n in s)!i(r,n)&&i(s,n)&&l.push(n);for(;t.length>c;)i(s,n=t[c++])&&(~a(l,n)||l.push(n));return l}},function(e,t,n){var i=n(81),o=n(92),a=n(222),r=function(e){return function(t,n,r){var s,c=i(t),l=o(c.length),u=a(r,l);if(e&&n!=n){for(;l>u;)if((s=c[u++])!=s)return!0}else for(;l>u;u++)if((e||u in c)&&c[u]===n)return e||u||0;return!e&&-1}};e.exports={includes:r(!0),indexOf:r(!1)}},function(e,t,n){var i=n(38),o=n(76),a=i("iterator"),r=Array.prototype;e.exports=function(e){return void 0!==e&&(o.Array===e||r[a]===e)}},function(e,t,n){var i=n(193);e.exports=i&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(e,t,n){var i=n(93),o=n(76),a=n(38)("iterator");e.exports=function(e){if(null!=e)return e[a]||e["@@iterator"]||o[i(e)]}},function(e,t,n){var i=n(58);e.exports=function(e){var t=e.return;if(void 0!==t)return i(t.call(e)).value}},function(e,t){},function(e,t,n){"use strict";var i,o,a,r,s=n(34),c=n(87),l=n(31),u=n(75),d=n(194),p=n(109),f=n(267),h=n(146),m=n(269),b=n(50),g=n(70),v=n(270),y=n(195),S=n(108),O=n(271),w=n(196),T=n(197).set,C=n(272),A=n(199),E=n(274),j=n(110),F=n(147),R=n(148),N=n(188),I=n(38),L=n(118),P=n(149),_=I("species"),M="Promise",D=R.get,k=R.set,x=R.getterFor(M),U=d,H=l.TypeError,G=l.document,B=l.process,V=u("fetch"),K=j.f,q=K,z=!!(G&&G.createEvent&&l.dispatchEvent),W="function"==typeof PromiseRejectionEvent,Y="unhandledrejection",$=N(M,(function(){if(!(y(U)!==String(U))){if(66===P)return!0;if(!L&&!W)return!0}if(c&&!U.prototype.finally)return!0;if(P>=51&&/native code/.test(U))return!1;var e=U.resolve(1),t=function(e){e((function(){}),(function(){}))};return(e.constructor={})[_]=t,!(e.then((function(){}))instanceof t)})),J=$||!O((function(e){U.all(e).catch((function(){}))})),X=function(e){var t;return!(!b(e)||"function"!=typeof(t=e.then))&&t},Z=function(e,t){if(!e.notified){e.notified=!0;var n=e.reactions;C((function(){for(var i=e.value,o=1==e.state,a=0;n.length>a;){var r,s,c,l=n[a++],u=o?l.ok:l.fail,d=l.resolve,p=l.reject,f=l.domain;try{u?(o||(2===e.rejection&&ne(e),e.rejection=1),!0===u?r=i:(f&&f.enter(),r=u(i),f&&(f.exit(),c=!0)),r===l.promise?p(H("Promise-chain cycle")):(s=X(r))?s.call(r,d,p):d(r)):p(i)}catch(e){f&&!c&&f.exit(),p(e)}}e.reactions=[],e.notified=!1,t&&!e.rejection&&ee(e)}))}},Q=function(e,t,n){var i,o;z?((i=G.createEvent("Event")).promise=t,i.reason=n,i.initEvent(e,!1,!0),l.dispatchEvent(i)):i={promise:t,reason:n},!W&&(o=l["on"+e])?o(i):e===Y&&E("Unhandled promise rejection",n)},ee=function(e){T.call(l,(function(){var t,n=e.facade,i=e.value;if(te(e)&&(t=F((function(){L?B.emit("unhandledRejection",i,n):Q(Y,n,i)})),e.rejection=L||te(e)?2:1,t.error))throw t.value}))},te=function(e){return 1!==e.rejection&&!e.parent},ne=function(e){T.call(l,(function(){var t=e.facade;L?B.emit("rejectionHandled",t):Q("rejectionhandled",t,e.value)}))},ie=function(e,t,n){return function(i){e(t,i,n)}},oe=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,Z(e,!0))},ae=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw H("Promise can't be resolved itself");var i=X(t);i?C((function(){var n={done:!1};try{i.call(t,ie(ae,n,e),ie(oe,n,e))}catch(t){oe(n,t,e)}})):(e.value=t,e.state=1,Z(e,!1))}catch(t){oe({done:!1},t,e)}}};$&&(U=function(e){v(this,U,M),g(e),i.call(this);var t=D(this);try{e(ie(ae,t),ie(oe,t))}catch(e){oe(t,e)}},(i=function(e){k(this,{type:M,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=f(U.prototype,{then:function(e,t){var n=x(this),i=K(w(this,U));return i.ok="function"!=typeof e||e,i.fail="function"==typeof t&&t,i.domain=L?B.domain:void 0,n.parent=!0,n.reactions.push(i),0!=n.state&&Z(n,!1),i.promise},catch:function(e){return this.then(void 0,e)}}),o=function(){var e=new i,t=D(e);this.promise=e,this.resolve=ie(ae,t),this.reject=ie(oe,t)},j.f=K=function(e){return e===U||e===a?new o(e):q(e)},c||"function"!=typeof d||(r=d.prototype.then,p(d.prototype,"then",(function(e,t){var n=this;return new U((function(e,t){r.call(n,e,t)})).then(e,t)}),{unsafe:!0}),"function"==typeof V&&s({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return A(U,V.apply(l,arguments))}}))),s({global:!0,wrap:!0,forced:$},{Promise:U}),h(U,M,!1,!0),m(M),a=u(M),s({target:M,stat:!0,forced:$},{reject:function(e){var t=K(this);return t.reject.call(void 0,e),t.promise}}),s({target:M,stat:!0,forced:c||$},{resolve:function(e){return A(c&&this===a?U:this,e)}}),s({target:M,stat:!0,forced:J},{all:function(e){var t=this,n=K(t),i=n.resolve,o=n.reject,a=F((function(){var n=g(t.resolve),a=[],r=0,s=1;S(e,(function(e){var c=r++,l=!1;a.push(void 0),s++,n.call(t,e).then((function(e){l||(l=!0,a[c]=e,--s||i(a))}),o)})),--s||i(a)}));return a.error&&o(a.value),n.promise},race:function(e){var t=this,n=K(t),i=n.reject,o=F((function(){var o=g(t.resolve);S(e,(function(e){o.call(t,e).then(n.resolve,i)}))}));return o.error&&i(o.value),n.promise}})},function(e,t,n){var i=n(109);e.exports=function(e,t,n){for(var o in t)n&&n.unsafe&&e[o]?e[o]=t[o]:i(e,o,t[o],n);return e}},function(e,t,n){"use strict";var i=n(145),o=n(93);e.exports=i?{}.toString:function(){return"[object "+o(this)+"]"}},function(e,t,n){"use strict";var i=n(75),o=n(82),a=n(38),r=n(53),s=a("species");e.exports=function(e){var t=i(e),n=o.f;r&&t&&!t[s]&&n(t,s,{configurable:!0,get:function(){return this}})}},function(e,t){e.exports=function(e,t,n){if(!(e instanceof t))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return e}},function(e,t,n){var i=n(38)("iterator"),o=!1;try{var a=0,r={next:function(){return{done:!!a++}},return:function(){o=!0}};r[i]=function(){return this},Array.from(r,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!o)return!1;var n=!1;try{var a={};a[i]=function(){return{next:function(){return{done:n=!0}}}},e(a)}catch(e){}return n}},function(e,t,n){var i,o,a,r,s,c,l,u,d=n(31),p=n(158).f,f=n(197).set,h=n(198),m=n(273),b=n(118),g=d.MutationObserver||d.WebKitMutationObserver,v=d.document,y=d.process,S=d.Promise,O=p(d,"queueMicrotask"),w=O&&O.value;w||(i=function(){var e,t;for(b&&(e=y.domain)&&e.exit();o;){t=o.fn,o=o.next;try{t()}catch(e){throw o?r():a=void 0,e}}a=void 0,e&&e.enter()},h||b||m||!g||!v?S&&S.resolve?(l=S.resolve(void 0),u=l.then,r=function(){u.call(l,i)}):r=b?function(){y.nextTick(i)}:function(){f.call(d,i)}:(s=!0,c=v.createTextNode(""),new g(i).observe(c,{characterData:!0}),r=function(){c.data=s=!s})),e.exports=w||function(e){var t={fn:e,next:void 0};a&&(a.next=t),o||(o=t,r()),a=t}},function(e,t,n){var i=n(107);e.exports=/web0s(?!.*chrome)/i.test(i)},function(e,t,n){var i=n(31);e.exports=function(e,t){var n=i.console;n&&n.error&&(1===arguments.length?n.error(e):n.error(e,t))}},function(e,t,n){var i=n(31),o=n(195),a=i.WeakMap;e.exports="function"==typeof a&&/native code/.test(o(a))},function(e,t,n){"use strict";var i=n(34),o=n(70),a=n(110),r=n(147),s=n(108);i({target:"Promise",stat:!0},{allSettled:function(e){var t=this,n=a.f(t),i=n.resolve,c=n.reject,l=r((function(){var n=o(t.resolve),a=[],r=0,c=1;s(e,(function(e){var o=r++,s=!1;a.push(void 0),c++,n.call(t,e).then((function(e){s||(s=!0,a[o]={status:"fulfilled",value:e},--c||i(a))}),(function(e){s||(s=!0,a[o]={status:"rejected",reason:e},--c||i(a))}))})),--c||i(a)}));return l.error&&c(l.value),n.promise}})},function(e,t,n){"use strict";var i=n(34),o=n(70),a=n(75),r=n(110),s=n(147),c=n(108),l="No one promise resolved";i({target:"Promise",stat:!0},{any:function(e){var t=this,n=r.f(t),i=n.resolve,u=n.reject,d=s((function(){var n=o(t.resolve),r=[],s=0,d=1,p=!1;c(e,(function(e){var o=s++,c=!1;r.push(void 0),d++,n.call(t,e).then((function(e){c||p||(p=!0,i(e))}),(function(e){c||p||(c=!0,r[o]=e,--d||u(new(a("AggregateError"))(r,l)))}))})),--d||u(new(a("AggregateError"))(r,l))}));return d.error&&u(d.value),n.promise}})},function(e,t,n){"use strict";var i=n(34),o=n(87),a=n(194),r=n(43),s=n(75),c=n(196),l=n(199),u=n(109);i({target:"Promise",proto:!0,real:!0,forced:!!a&&r((function(){a.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var t=c(this,s("Promise")),n="function"==typeof e;return this.then(n?function(n){return l(t,e()).then((function(){return n}))}:e,n?function(n){return l(t,e()).then((function(){throw n}))}:e)}}),o||"function"!=typeof a||a.prototype.finally||u(a.prototype,"finally",s("Promise").prototype.finally)},function(e,t,n){"use strict";var i=n(280).charAt,o=n(148),a=n(200),r="String Iterator",s=o.set,c=o.getterFor(r);a(String,"String",(function(e){s(this,{type:r,string:String(e),index:0})}),(function(){var e,t=c(this),n=t.string,o=t.index;return o>=n.length?{value:void 0,done:!0}:(e=i(n,o),t.index+=e.length,{value:e,done:!1})}))},function(e,t,n){var i=n(143),o=n(115),a=function(e){return function(t,n){var a,r,s=String(o(t)),c=i(n),l=s.length;return c<0||c>=l?e?"":void 0:(a=s.charCodeAt(c))<55296||a>56319||c+1===l||(r=s.charCodeAt(c+1))<56320||r>57343?e?s.charAt(c):a:e?s.slice(c,c+2):r-56320+(a-55296<<10)+65536}};e.exports={codeAt:a(!1),charAt:a(!0)}},function(e,t,n){"use strict";var i=n(201).IteratorPrototype,o=n(161),a=n(91),r=n(146),s=n(76),c=function(){return this};e.exports=function(e,t,n){var l=t+" Iterator";return e.prototype=o(i,{next:a(1,n)}),r(e,l,!1,!0),s[l]=c,e}},function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(e,t,n){var i=n(90),o=Math.floor,a="".replace,r=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,s=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,n,c,l,u){var d=n+e.length,p=c.length,f=s;return void 0!==l&&(l=i(l),f=r),a.call(u,f,(function(i,a){var r;switch(a.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,n);case"'":return t.slice(d);case"<":r=l[a.slice(1,-1)];break;default:var s=+a;if(0===s)return i;if(s>p){var u=o(s/10);return 0===u?i:u<=p?void 0===c[u-1]?a.charAt(1):c[u-1]+a.charAt(1):i}r=c[s-1]}return void 0===r?"":r}))}},function(e,t,n){n(186);var i=n(51);e.exports=i.setInterval},function(e,t,n){"use strict";var i=n(37);e.exports=function(e,t){var n=[][e];return!!n&&i((function(){n.call(null,t||function(){throw 1},1)}))}},function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},function(e,t,n){var i=n(50),o=n(174),a=n(38)("species");e.exports=function(e,t){var n;return o(e)&&("function"!=typeof(n=e.constructor)||n!==Array&&!o(n.prototype)?i(n)&&null===(n=n[a])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===t?0:t)}},function(e,t,n){"use strict";var i=n(159),o=n(82),a=n(91);e.exports=function(e,t,n){var r=i(t);r in e?o.f(e,r,a(0,n)):e[r]=n}},function(e,t,n){var i=n(346),o=Array.prototype;e.exports=function(e){var t=e.reduce;return e===o||e instanceof Array&&t===o.reduce?i:t}},function(e,t,n){"use strict";var i=n(43);e.exports=function(e,t){var n=[][e];return!!n&&i((function(){n.call(null,t||function(){throw 1},1)}))}},function(e,t,n){var i=n(215),o=n(129),a=n(90),r=n(85),s=n(353),c=[].push,l=function(e){var t=1==e,n=2==e,l=3==e,u=4==e,d=6==e,p=7==e,f=5==e||d;return function(h,m,b,g){for(var v,y,S=a(h),O=o(S),w=i(m,b,3),T=r(O.length),C=0,A=g||s,E=t?A(h,T):n||p?A(h,0):void 0;T>C;C++)if((f||C in O)&&(y=w(v=O[C],C,S),e))if(t)E[C]=y;else if(y)switch(e){case 3:return!0;case 5:return v;case 6:return C;case 2:c.call(E,v)}else switch(e){case 4:return!1;case 7:c.call(E,v)}return d?-1:l||u?u:E}};e.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6),filterOut:l(7)}},function(e,t,n){"use strict";n.r(t),n.d(t,"LanguagesPopupView",(function(){return f})),n.d(t,"default",(function(){return f}));var i,o=n(10),a=n(17),r=n.n(a),s=n(3),c=n.n(s),l=n(1),u=n(2),d=n(7),p=n(25),f=Object(d.popup)({name:"View/Popup/Languages",templateID:"PopupsLanguages"})(i=function(e){function t(){var t;return(t=e.call(this)||this).fLang=null,t.userLanguage=l.a.observable(""),t.langs=l.a.observableArray([]),t.languages=l.a.computed((function(){var e=t.userLanguage();return r()(c.a).call(c.a,t.langs(),(function(t){return{key:t,user:t===e,selected:l.a.observable(!1),fullName:Object(u.convertLangName)(t)}}))})),t.langs.subscribe((function(){t.setLanguageSelection()})),t}Object(o.a)(t,e);var n=t.prototype;return n.languageTooltipName=function(e){return Object(u.convertLangName)(e,!0)},n.setLanguageSelection=function(){var e=this.fLang?l.a.unwrap(this.fLang):"";c.a.each(this.languages(),(function(t){t.selected(t.key===e)}))},n.onBeforeShow=function(){this.fLang=null,this.userLanguage(""),this.langs([])},n.onShow=function(e,t,n){this.fLang=e,this.userLanguage(n||""),this.langs(t)},n.changeLanguage=function(e){this.fLang&&this.fLang(e),this.cancelCommand()},t}(p.a))||i},function(e,t,n){"use strict";var i=n(33),o=n.n(i),a=n(4),r=n.n(a),s=n(2),c=n(6),l=n(0),u=n(36),d=n(9),p=n(83);t.a=function(e){c.data.__APP__=e,c.$win.on("keydown",s.killCtrlACtrlS).on("unload",(function(){c.data.bUnload=!0})),c.$html.addClass(c.bMobileDevice?"mobile":"no-mobile").on("click.dropdown.data-api",s.detectDropdownVisibility);var t=r.a.rl||{};t.i18n=d.i18n,t.createCommand=s.createCommandLegacy,t.addSettingsViewModel=u.b,t.addSettingsViewModelForAdmin=u.c,t.addHook=u.a,t.settingsGet=u.d,t.pluginSettingsGet=u.h,t.pluginRemoteRequest=u.e,t.EmailModel=p.EmailModel,t.Enums=l,r.a.rl=t;var n=function(){o()((function(){c.$html.removeClass("no-js rl-booted-trigger").addClass("rl-booted"),e.bootstart()}),l.Magics.Time10ms)};r.a.__APP_BOOT=function(e){Object(s.domReady)((function(){o()((function(){r.a.document.getElementById("rainloop-templates-id")?n():r.a.rainloopTEMPLATES&&r.a.rainloopTEMPLATES[0]?(r.a.document.getElementById("rl-templates").innerHTML=r.a.rainloopTEMPLATES[0],n()):e(),r.a.__APP_BOOT=null}),l.Magics.Time10ms)}))}}},function(e,t,n){e.exports=n(363)},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n(296),o=n.n(i);function a(e,t){return(a=o.a||function(e,t){return e.__proto__=t,e})(e,t)}},function(e,t,n){e.exports=n(366)},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(1),o=n(6),a=n(5),r=function(){function e(){this.allowLanguagesOnSettings=i.a.observable(!0),this.allowLanguagesOnLogin=i.a.observable(!0),this.newMoveToFolder=i.a.observable(!0),this.interfaceAnimation=i.a.observable(!0),this.interfaceAnimation.subscribe((function(e){var t=o.bMobileDevice||!e;o.$html.toggleClass("rl-anim",!t).toggleClass("no-rl-anim",t)})),this.interfaceAnimation.valueHasMutated(),this.prem=i.a.observable(!1),this.community=i.a.observable(!0)}return e.prototype.populate=function(){this.allowLanguagesOnLogin(!!a.settingsGet("AllowLanguagesOnLogin")),this.allowLanguagesOnSettings(!!a.settingsGet("AllowLanguagesOnSettings")),this.newMoveToFolder(!!a.settingsGet("NewMoveToFolder")),this.interfaceAnimation(!!a.settingsGet("InterfaceAnimation")),this.prem(!!a.settingsGet("PremType")),this.community(!!a.settingsGet("Community"))},e}()},function(e,t,n){e.exports=n(369)},function(e,t,n){e.exports=n(375)},function(e,t,n){e.exports=n(378)},function(e,t,n){e.exports=n(379)},function(e,t,n){e.exports=n(383)},function(e,t,n){e.exports=n(387)},function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var i=n(4),o=n.n(i),a=n(3),r=n.n(a),s=n(8),c=n.n(s),l=n(24),u=n(0),d=n(2),p=n(6),f=n(15),h=n(36),m=n(5),b=function(){function e(){this.oRequests={}}var t=e.prototype;return t.defaultResponse=function(e,t,n,i,o,a){var s=function(){u.StorageResultType.Success!==n&&p.data.bUnload&&(n=u.StorageResultType.Unload),u.StorageResultType.Success===n&&i&&!i.Result?(i&&-1<Object(d.inArray)(i.ErrorCode,[u.Notification.AuthError,u.Notification.AccessError,u.Notification.ConnectionError,u.Notification.DomainNotAllowed,u.Notification.AccountNotAllowed,u.Notification.MailServerError,u.Notification.UnknownNotification,u.Notification.UnknownError])&&(p.data.iAjaxErrorCount+=1),i&&u.Notification.InvalidToken===i.ErrorCode&&(p.data.iTokenErrorCount+=1),l.q<p.data.iTokenErrorCount&&p.data.__APP__&&p.data.__APP__.loginAndLogoutReload&&p.data.__APP__.loginAndLogoutReload(!1,!0),(i.ClearAuth||i.Logout||l.a<p.data.iAjaxErrorCount)&&p.data.__APP__&&p.data.__APP__.clearClientSideToken&&(p.data.__APP__.clearClientSideToken(),!i.ClearAuth&&p.data.__APP__.loginAndLogoutReload&&p.data.__APP__.loginAndLogoutReload(!1,!0))):u.StorageResultType.Success===n&&i&&i.Result&&(p.data.iAjaxErrorCount=0,p.data.iTokenErrorCount=0),Object(h.f)("ajax-default-response",[t,u.StorageResultType.Success===n?i:null,n,o,a]),e&&e(n,u.StorageResultType.Success===n?i:null,o,t,a)};switch(n){case"success":n=u.StorageResultType.Success;break;case"abort":n=u.StorageResultType.Abort;break;default:n=u.StorageResultType.Error}u.StorageResultType.Error===n?r.a.delay(s,300):s()},t.ajaxRequest=function(e,t,n,i,a){var s=this;void 0===n&&(n=2e4),void 0===i&&(i=""),void 0===a&&(a=[]);var l,u=""===i,h=(new o.a.Date).getTime();(l=(t=t||{}).Action||"")&&0<a.length&&r.a.each(a,(function(e){s.oRequests[e]&&(s.oRequests[e].__aborted=!0,s.oRequests[e].abort&&s.oRequests[e].abort(),s.oRequests[e]=null)})),u&&(t.XToken=m.appSettingsGet("token"));var b=c.a.ajax({type:u?"POST":"GET",url:Object(f.a)(i),async:!0,dataType:"json",data:u?t:{},headers:{},timeout:n,global:!0});return b.always((function(n,i){var a=!1;n&&n.Time&&(a=Object(d.pInt)(n.Time)>(new o.a.Date).getTime()-h),n&&n.UpdateToken&&p.data.__APP__&&p.data.__APP__.setClientSideToken&&p.data.__APP__.setClientSideToken(n.UpdateToken),l&&s.oRequests[l]&&(s.oRequests[l].__aborted&&(i="abort"),s.oRequests[l]=null),s.defaultResponse(e,l,i,n,a,t)})),l&&0<a.length&&-1<Object(d.inArray)(l,a)&&(this.oRequests[l]&&(this.oRequests[l].__aborted=!0,this.oRequests[l].abort&&this.oRequests[l].abort(),this.oRequests[l]=null),this.oRequests[l]=b),b.catch(console.log),b},t.defaultRequest=function(e,t,n,i,o,a){return(n=n||{}).Action=t,o=Object(d.pString)(o),Object(h.f)("ajax-default-request",[t,n,o]),this.ajaxRequest(e,n,Object(d.isUnd)(i)?l.g:Object(d.pInt)(i),o,a)},t.noop=function(e){this.defaultRequest(e,"Noop")},t.getPublicKey=function(e){this.defaultRequest(e,"GetPublicKey")},t.jsVersion=function(e,t){this.defaultRequest(e,"Version",{Version:t})},e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var i=n(10),o=n(12),a=n.n(o),r=n(3),s=n.n(r),c=n(8),l=n.n(c),u=n(1),d=n(6),p=n(2),f=n(15),h=n(7),m=function(e){function t(t){var n;return(n=e.call(this,"settings",t)||this).menu=u.a.observableArray([]),n.oCurrentSubScreen=null,n.oViewModelPlace=null,n.setupSettings(),n}Object(i.a)(t,e);var n=t.prototype;return n.setupSettings=function(e){void 0===e&&(e=null),e&&e()},n.onRoute=function(e){var t=this,n=null,i=null,o=null,r=null;if((i=a()(s.a).call(s.a,d.VIEW_MODELS.settings,(function(t){return t&&t.__rlSettingsData&&e===t.__rlSettingsData.Route})))&&(a()(s.a).call(s.a,d.VIEW_MODELS["settings-removed"],(function(e){return e&&e===i}))&&(i=null),i&&a()(s.a).call(s.a,d.VIEW_MODELS["settings-disabled"],(function(e){return e&&e===i}))&&(i=null)),i){if(i.__builded&&i.__vm)n=i.__vm;else if((o=this.oViewModelPlace)&&1===o.length){n=new i,(r=l()("<div></div>").addClass("rl-settings-view-model").hide()).appendTo(o),n.viewModelDom=r,n.__rlSettingsData=i.__rlSettingsData,i.__dom=r,i.__builded=!0,i.__vm=n;var c={name:i.__rlSettingsData.Template};u.a.applyBindingAccessorsToNode(r[0],{translatorInit:!0,template:function(){return c}},n),Object(p.delegateRun)(n,"onBuild",[r])}else Object(p.log)("Cannot find sub settings view model position: SettingsSubScreen");n&&s.a.defer((function(){t.oCurrentSubScreen&&(Object(p.delegateRun)(t.oCurrentSubScreen,"onHide"),t.oCurrentSubScreen.viewModelDom.hide()),t.oCurrentSubScreen=n,t.oCurrentSubScreen&&(Object(p.delegateRun)(t.oCurrentSubScreen,"onBeforeShow"),t.oCurrentSubScreen.viewModelDom.show(),Object(p.delegateRun)(t.oCurrentSubScreen,"onShow"),Object(p.delegateRun)(t.oCurrentSubScreen,"onShowWithDelay",[],200),s.a.each(t.menu(),(function(e){e.selected(n&&n.__rlSettingsData&&e.route===n.__rlSettingsData.Route)})),l()("#rl-content .b-settings .b-content .content").scrollTop(0)),Object(p.windowResize)()}))}else Object(h.setHash)(Object(f.z)(),!1,!0)},n.onHide=function(){this.oCurrentSubScreen&&this.oCurrentSubScreen.viewModelDom&&(Object(p.delegateRun)(this.oCurrentSubScreen,"onHide"),this.oCurrentSubScreen.viewModelDom.hide())},n.onBuild=function(){var e=this;s.a.each(d.VIEW_MODELS.settings,(function(t){t&&t.__rlSettingsData&&!a()(s.a).call(s.a,d.VIEW_MODELS["settings-removed"],(function(e){return e&&e===t}))&&e.menu.push({route:t.__rlSettingsData.Route,label:t.__rlSettingsData.Label,selected:u.a.observable(!1),disabled:!!a()(s.a).call(s.a,d.VIEW_MODELS["settings-disabled"],(function(e){return e&&e===t}))})})),this.oViewModelPlace=l()("#rl-content #rl-settings-subscreen")},n.routes=function(){var e=a()(s.a).call(s.a,d.VIEW_MODELS.settings,(function(e){return e&&e.__rlSettingsData&&e.__rlSettingsData.IsDefault})),t=e&&e.__rlSettingsData?e.__rlSettingsData.Route:"general",n={subname:/^(.*)$/,normalize_:function(e,n){return n.subname=Object(p.isUnd)(n.subname)?t:Object(p.pString)(n.subname),[n.subname]}};return[["{subname}/",n],["{subname}",n],["",n]]},t}(n(153).a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return E}));var i=n(10),o=n(4),a=n.n(o),r=n(8),s=n.n(r),c=n(3),l=n.n(c),u=n(1),d=n(20),p=n.n(d),f=n(155),h=n.n(f),m=n(6),b=n(2),g=n(0),v=n(15),y=n(9),S=n(23),O=n(5),w=n(72),T=n(123),C=n(26),A=n(7),E=function(e){function t(){var t;return(t=e.call(this)||this).googlePreviewSupportedCache=null,t.isLocalAutocomplete=!0,t.iframe=null,t.lastErrorTime=0,t.iframe=s()('<iframe class="internal-hiddden" />').appendTo("body"),m.$win.on("resize",(function(){S.a("window.resize")})),S.b("window.resize",l.a.throttle((function(){var e=m.$win.height(),t=m.$win.height();m.$win.__sizes[0]===e&&m.$win.__sizes[1]===t||(m.$win.__sizes[0]=e,m.$win.__sizes[1]=t,S.a("window.resize.real"))}),g.Magics.Time50ms)),m.$doc.on("keydown",(function(e){e&&e.ctrlKey&&m.$html.addClass("rl-ctrl-key-pressed")})).on("keyup",(function(e){e&&!e.ctrlKey&&m.$html.removeClass("rl-ctrl-key-pressed")})),m.$doc.on("mousemove keypress click",l.a.debounce((function(){S.a("rl.auto-logout-refresh")}),g.Magics.Time5s)),p()("esc, enter",g.KeyState.All,(function(){Object(b.detectDropdownVisibility)()})),t}Object(i.a)(t,e);var o=t.prototype;return o.remote=function(){return null},o.data=function(){return null},o.getApplicationConfiguration=function(e,t){return this.applicationConfiguration[e]||t},o.download=function(e){if(m.sUserAgent&&(-1<m.sUserAgent.indexOf("chrome")||-1<m.sUserAgent.indexOf("chrome"))){var t=a.a.document.createElement("a");if(t.href=e,a.a.document&&a.a.document.createEvent){var n=a.a.document.createEvent.MouseEvents;if(n&&n.initEvent&&t.dispatchEvent)return n.initEvent("click",!0,!0),t.dispatchEvent(n),!0}}return m.bMobileDevice?(a.a.open(e,"_self"),a.a.focus()):this.iframe.attr("src",e),!0},o.googlePreviewSupported=function(){return null===this.googlePreviewSupportedCache&&(this.googlePreviewSupportedCache=!!O.settingsGet("AllowGoogleSocial")&&!!O.settingsGet("AllowGoogleSocialPreview")),this.googlePreviewSupportedCache},o.setWindowTitle=function(e){e=Object(b.isNormal)(e)&&0<e.length?""+e:"",O.settingsGet("Title")&&(e+=(e?" - ":"")+O.settingsGet("Title")),a.a.document.title=e+" ...",a.a.document.title=e},o.redirectToAdminPanel=function(){l.a.delay((function(){a.a.location.href=Object(v.x)()}),g.Magics.Time100ms)},o.clearClientSideToken=function(){a.a.__rlah_clear&&a.a.__rlah_clear()},o.setClientSideToken=function(e){a.a.__rlah_set&&(a.a.__rlah_set(e),O.settingsSet("AuthAccountHash",e),Object(v.v)())},o.loginAndLogoutReload=function(e,t,n){void 0===e&&(e=!1),void 0===t&&(t=!1),void 0===n&&(n=!1);var i=!!O.appSettingsGet("inIframe"),o=Object(b.pString)(O.appSettingsGet("customLogoutLink"));t&&this.clearClientSideToken(),t&&n&&a.a.close&&a.a.close(),o=o||(e?Object(v.x)():Object(v.y)()),t&&a.a.location.href!==o?l.a.delay((function(){i&&a.a.parent?a.a.parent.location.href=o:a.a.location.href=o,m.$win.trigger("rl.tooltips.diactivate")}),g.Magics.Time100ms):(Object(A.routeOff)(),Object(A.setHash)(Object(v.w)(),!0),Object(A.routeOff)(),l.a.delay((function(){i&&a.a.parent?a.a.parent.location.reload():a.a.location.reload(),m.$win.trigger("rl.tooltips.diactivate")}),g.Magics.Time100ms))},o.historyBack=function(){a.a.history.back()},o.bootstart=function(){S.a("rl.bootstart");var e=O.appSettingsGet("mobile");u.a.components.register("SaveTrigger",n(395).default),u.a.components.register("Input",n(396).default),u.a.components.register("Select",n(397).default),u.a.components.register("Radio",n(398).default),u.a.components.register("TextArea",n(399).default),u.a.components.register("Date",n(400).default),u.a.components.register("x-script",n(401).default),O.appSettingsGet("materialDesign")&&m.bAnimationSupported?(u.a.components.register("Checkbox",n(402).default),u.a.components.register("CheckboxSimple",n(226).default)):(u.a.components.register("Checkbox",n(226).default),u.a.components.register("CheckboxSimple",n(226).default)),Object(y.initOnStartOrLangChange)(y.initNotificationLanguage),l.a.delay(b.windowResizeCallback,g.Magics.Time1s),S.b("ssm.mobile-enter",(function(){Object(m.leftPanelDisabled)(!0)})),S.b("ssm.mobile-leave",(function(){Object(m.leftPanelDisabled)(!1)})),e?(m.$html.addClass("ssm-state-mobile").addClass("rl-mobile"),S.a("ssm.mobile-enter")):(m.$html.addClass("rl-desktop"),h.a.addState({id:"mobile",query:"(max-width: 767px)",onEnter:function(){m.$html.addClass("ssm-state-mobile"),S.a("ssm.mobile-enter")},onLeave:function(){m.$html.removeClass("ssm-state-mobile"),S.a("ssm.mobile-leave")}}),h.a.addState({id:"tablet",query:"(min-width: 768px) and (max-width: 999px)",onEnter:function(){m.$html.addClass("ssm-state-tablet")},onLeave:function(){m.$html.removeClass("ssm-state-tablet")}}),h.a.addState({id:"desktop",query:"(min-width: 1000px) and (max-width: 1400px)",onEnter:function(){m.$html.addClass("ssm-state-desktop")},onLeave:function(){m.$html.removeClass("ssm-state-desktop")}}),h.a.addState({id:"desktop-large",query:"(min-width: 1401px)",onEnter:function(){m.$html.addClass("ssm-state-desktop-large")},onLeave:function(){m.$html.removeClass("ssm-state-desktop-large")}})),m.leftPanelDisabled.subscribe((function(e){m.$html.toggleClass("rl-left-panel-disabled",e),m.$html.toggleClass("rl-left-panel-enabled",!e)})),m.leftPanelType.subscribe((function(e){m.$html.toggleClass("rl-left-panel-none","none"===e),m.$html.toggleClass("rl-left-panel-short","short"===e)})),m.leftPanelDisabled.valueHasMutated(),w.a.populate(),T.a.populate(),C.a.populate()},t}(n(307).a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(){function e(){}return e.prototype.bootstart=function(){},e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var i=n(29),o=n(10),a=n(122),r=n.n(a),s=n(17),c=n.n(s),l=(n(220),n(86),n(248),n(3)),u=n.n(l),d=n(1),p=n(2),f=function(e){function t(t){var n;return(n=e.call(this)||this).values=d.a.observableArray([]),n.value=t.value,!Object(p.isUnd)(n.value)&&n.value.subscribe||(n.value=d.a.observable("")),n.inline=!Object(p.isUnd)(t.inline)&&t.inline,n.readOnly=!Object(p.isUnd)(t.readOnly)&&!!t.readOnly,r()(t)&&r()(n).call(n,c()(u.a).call(u.a,r()(t),(function(e,t){return{label:e,value:t}}))),n.click=u.a.bind(n.click,Object(i.a)(n)),n}return Object(o.a)(t,e),t.prototype.click=function(e){!this.readOnly&&e&&this.value(e.value)},t}(n(32).a)},function(e,t,n){e.exports=n(550)},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n(10),o=n(1),a=n(2),r=n(208),s=function(e){function t(t,n,i,r,s,c,l){var u;return void 0===i&&(i=null),void 0===r&&(r=!1),void 0===s&&(s=!1),void 0===c&&(c=""),void 0===l&&(l=""),(u=e.call(this,"ComposeAttachmentModel")||this).id=t,u.isInline=!!r,u.isLinked=!!s,u.CID=c,u.contentLocation=l,u.fromMessage=!1,u.fileName=o.a.observable(n),u.size=o.a.observable(i),u.tempName=o.a.observable(""),u.progress=o.a.observable(0),u.error=o.a.observable(""),u.waiting=o.a.observable(!0),u.uploading=o.a.observable(!1),u.enabled=o.a.observable(!0),u.complete=o.a.observable(!1),u.progressText=o.a.computed((function(){var e=u.progress();return 0===e?"":(98<e?100:e)+"%"})),u.progressStyle=o.a.computed((function(){var e=u.progress();return 0===e?"":"width:"+(98<e?100:e)+"%"})),u.title=o.a.computed((function(){var e=u.error();return""!==e?e:u.fileName()})),u.friendlySize=o.a.computed((function(){var e=u.size();return null===e?"":Object(a.friendlySize)(e)})),u.mimeType=o.a.computed((function(){return Object(a.mimeContentType)(u.fileName())})),u.fileExt=o.a.computed((function(){return Object(a.getFileExtension)(u.fileName())})),u.regDisposables([u.progressText,u.progressStyle,u.title,u.friendlySize,u.mimeType,u.fileExt]),u}Object(i.a)(t,e);var n=t.prototype;return n.initByUploadJson=function(e){var t=!1;return e&&(this.fileName(e.Name),this.size(Object(a.isUnd)(e.Size)?0:Object(a.pInt)(e.Size)),this.tempName(Object(a.isUnd)(e.TempName)?"":e.TempName),this.isInline=!1,t=!0),t},n.iconClass=function(){return Object(r.d)(Object(r.c)(this.fileExt(),this.mimeType()))[0]},n.iconText=function(){return Object(r.d)(Object(r.c)(this.fileExt(),this.mimeType()))[1]},t}(n(67).a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n(10),o=n(1),a=n(0),r=n(2),s=n(9),c=function(e){function t(t,n,i,c,l){var u;return void 0===t&&(t=a.ContactPropertyType.Unknown),void 0===n&&(n=""),void 0===i&&(i=""),void 0===c&&(c=!1),void 0===l&&(l=""),(u=e.call(this,"ContactPropertyModel")||this).type=o.a.observable(Object(r.pInt)(t)),u.typeStr=o.a.observable(Object(r.pString)(n)),u.focused=o.a.observable(!!c),u.value=o.a.observable(Object(r.pString)(i)),u.placeholder=o.a.observable(l),u.placeholderValue=o.a.computed((function(){var e=u.placeholder();return e?Object(s.i18n)(e):""})),u.largeValue=o.a.computed((function(){return a.ContactPropertyType.Note===u.type()})),u.regDisposables([u.placeholderValue,u.largeValue]),u}return Object(i.a)(t,e),t}(n(67).a)},,,,function(e,t,n){"use strict";var i=n(65),o=n(291).filter;i({target:"Array",proto:!0,forced:!n(355)("filter")},{filter:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){"use strict";var i=n(150),o=n(42),a=n(56),r=n(357),s=n(151);i("search",1,(function(e,t,n){return[function(t){var n=a(this),i=null==t?void 0:t[e];return void 0!==i?i.call(t,n):new RegExp(t)[e](String(n))},function(e){var i=n(t,e,this);if(i.done)return i.value;var a=o(e),c=String(this),l=a.lastIndex;r(l,0)||(a.lastIndex=0);var u=s(a,c);return r(a.lastIndex,l)||(a.lastIndex=l),null===u?-1:u.index}]}))},function(e,t,n){"use strict";n.r(t),n.d(t,"FolderSystemPopupView",(function(){return g})),n.d(t,"default",(function(){return g}));var i,o=n(10),a=n(3),r=n.n(a),s=n(1),c=n(0),l=n(24),u=n(2),d=n(9),p=n(11),f=n(5),h=n(16),m=n(7),b=n(25),g=Object(m.popup)({name:"View/Popup/FolderSystem",templateID:"PopupsFolderSystem"})(i=function(e){function t(){var t;(t=e.call(this)||this).sChooseOnText="",t.sUnuseText="",Object(d.initOnStartOrLangChange)((function(){t.sChooseOnText=Object(d.i18n)("POPUPS_SYSTEM_FOLDERS/SELECT_CHOOSE_ONE"),t.sUnuseText=Object(d.i18n)("POPUPS_SYSTEM_FOLDERS/SELECT_UNUSE_NAME")})),t.notification=s.a.observable(""),t.folderSelectList=s.a.computed((function(){return Object(u.folderListOptionsBuilder)([],p.a.folderList(),p.a.folderListSystemNames(),[["",t.sChooseOnText],[l.r,t.sUnuseText]],null,null,null,null,null,!0)})),t.sentFolder=p.a.sentFolder,t.draftFolder=p.a.draftFolder,t.spamFolder=p.a.spamFolder,t.trashFolder=p.a.trashFolder,t.archiveFolder=p.a.archiveFolder;var n=function(){f.settingsSet("SentFolder",p.a.sentFolder()),f.settingsSet("DraftFolder",p.a.draftFolder()),f.settingsSet("SpamFolder",p.a.spamFolder()),f.settingsSet("TrashFolder",p.a.trashFolder()),f.settingsSet("ArchiveFolder",p.a.archiveFolder())},i=r.a.debounce((function(){n(),h.a.saveSystemFolders(u.noop,{SentFolder:p.a.sentFolder(),DraftFolder:p.a.draftFolder(),SpamFolder:p.a.spamFolder(),TrashFolder:p.a.trashFolder(),ArchiveFolder:p.a.archiveFolder(),NullFolder:"NullFolder"})}),c.Magics.Time1s),o=function(){n(),i()};return p.a.sentFolder.subscribe(o),p.a.draftFolder.subscribe(o),p.a.spamFolder.subscribe(o),p.a.trashFolder.subscribe(o),p.a.archiveFolder.subscribe(o),t.defautOptionsAfterRender=u.defautOptionsAfterRender,t}return Object(o.a)(t,e),t.prototype.onShow=function(e){void 0===e&&(e=c.SetSystemFoldersNotification.None);var t="";switch(e){case c.SetSystemFoldersNotification.Sent:t=Object(d.i18n)("POPUPS_SYSTEM_FOLDERS/NOTIFICATION_SENT");break;case c.SetSystemFoldersNotification.Draft:t=Object(d.i18n)("POPUPS_SYSTEM_FOLDERS/NOTIFICATION_DRAFTS");break;case c.SetSystemFoldersNotification.Spam:t=Object(d.i18n)("POPUPS_SYSTEM_FOLDERS/NOTIFICATION_SPAM");break;case c.SetSystemFoldersNotification.Trash:t=Object(d.i18n)("POPUPS_SYSTEM_FOLDERS/NOTIFICATION_TRASH");break;case c.SetSystemFoldersNotification.Archive:t=Object(d.i18n)("POPUPS_SYSTEM_FOLDERS/NOTIFICATION_ARCHIVE")}this.notification(t)},t}(b.a))||i},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n(152);var i=n(62),o=n.n(i),a=(n(4),n(2)),r=function(){function e(){this.oPromisesStack={}}var t=e.prototype;return t.func=function(e){return e(),this},t.fastResolve=function(e){return o.a.resolve(e)},t.fastReject=function(e){return o.a.reject(e)},t.setTrigger=function(e,t){e&&(t=!!t,(Object(a.isArray)(e)?e:[e]).forEach((function(e){e&&e(t)})))},e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return S}));var i=n(29),o=n(10),a=n(3),r=n.n(a),s=n(1),c=n(20),l=n.n(c),u=n(27),d=n(46),p=n(13),f=n(0),h=n(2),m=n(15),b=n(23),g=n(5),v=n(21),y=n(7),S=function(e){function t(){var t;return(t=e.call(this)||this).logoImg=Object(h.trim)(g.settingsGet("UserLogo")),t.logoTitle=Object(h.trim)(g.settingsGet("UserLogoTitle")),t.mobile=!!g.appSettingsGet("mobile"),t.mobileDevice=!!g.appSettingsGet("mobileDevice"),t.allowSettings=!!g.capa(f.Capa.Settings),t.allowHelp=!!g.capa(f.Capa.Help),t.currentAudio=u.a.currentAudio,t.accountEmail=d.a.email,t.accounts=d.a.accounts,t.accountsUnreadCount=d.a.accountsUnreadCount,t.accountMenuDropdownTrigger=s.a.observable(!1),t.capaAdditionalAccounts=s.a.observable(g.capa(f.Capa.AdditionalAccounts)),t.addAccountClick=r.a.bind(t.addAccountClick,Object(i.a)(t)),b.b("audio.stop",(function(){return u.a.currentAudio("")})),b.b("audio.start",(function(e){return u.a.currentAudio(e)})),t}Object(o.a)(t,e);var a=t.prototype;return a.stopPlay=function(){b.a("audio.api.stop")},a.accountClick=function(e,t){return e&&t&&!Object(h.isUnd)(t.which)&&1===t.which&&(d.a.accounts.loading(!0),r.a.delay((function(){return d.a.accounts.loading(!1)}),f.Magics.Time1s)),!0},a.emailTitle=function(){return d.a.email()},a.settingsClick=function(){g.capa(f.Capa.Settings)&&Object(y.setHash)(Object(m.z)())},a.settingsHelp=function(){g.capa(f.Capa.Help)&&Object(y.showScreenPopup)(n(427))},a.addAccountClick=function(){this.capaAdditionalAccounts()&&Object(y.showScreenPopup)(n(393))},a.logoutClick=function(){Object(v.a)().logout()},a.onBuild=function(){var e=this;l()("`",[f.KeyState.MessageList,f.KeyState.MessageView,f.KeyState.Settings],(function(){e.viewModelVisibility()&&(p.a.messageFullScreenMode(!1),e.accountMenuDropdownTrigger(!0))})),l()("shift+/",[f.KeyState.MessageList,f.KeyState.MessageView,f.KeyState.Settings],(function(){return!e.viewModelVisibility()||(Object(y.showScreenPopup)(n(427)),!1)}))},t}(n(25).a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));n(86),n(119);var i=n(28),o=n.n(i),a=n(12),r=n.n(a),s=n(8),c=n.n(s),l=n(3),u=n.n(l),d=n(20),p=n.n(d),f=n(1),h=n(0),m=n(2),b=function(){function e(e,t,n,i,a,s,c){var l=this;this.list=void 0,this.listChecked=void 0,this.isListChecked=void 0,this.focusedItem=void 0,this.selectedItem=void 0,this.itemSelectedThrottle=void 0,this.selectedItemUseCallback=!0,this.iSelectNextHelper=0,this.iFocusedNextHelper=0,this.oContentVisible=void 0,this.oContentScrollable=void 0,this.sItemSelector=void 0,this.sItemSelectedSelector=void 0,this.sItemCheckedSelector=void 0,this.sItemFocusedSelector=void 0,this.sLastUid="",this.oCallbacks={},this.list=e,this.listChecked=f.a.computed((function(){return o()(u.a).call(u.a,l.list(),(function(e){return e.checked()}))})).extend({rateLimit:0}),this.isListChecked=f.a.computed((function(){return 0<l.listChecked().length})),this.focusedItem=n||f.a.observable(null),this.selectedItem=t||f.a.observable(null),this.itemSelectedThrottle=u.a.debounce(u.a.bind(this.itemSelected,this),300),this.listChecked.subscribe((function(e){0<e.length?null===l.selectedItem()?l.selectedItem.valueHasMutated&&l.selectedItem.valueHasMutated():l.selectedItem(null):l.autoSelect()&&l.focusedItem()&&l.selectedItem(l.focusedItem())}),this),this.selectedItem.subscribe((function(e){e?(l.isListChecked()&&u.a.each(l.listChecked(),(function(e){e.checked(!1)})),l.selectedItemUseCallback&&l.itemSelectedThrottle(e)):l.selectedItemUseCallback&&l.itemSelected(null)}),this),this.selectedItem=this.selectedItem.extend({toggleSubscribeProperty:[this,"selected"]}),this.focusedItem=this.focusedItem.extend({toggleSubscribeProperty:[null,"focused"]}),this.sItemSelector=i,this.sItemSelectedSelector=a,this.sItemCheckedSelector=s,this.sItemFocusedSelector=c,this.focusedItem.subscribe((function(e){e&&(l.sLastUid=l.getItemUid(e))}),this);var d=[],p=[],h=null,b=null;this.list.subscribe((function(e){Object(m.isArray)(e)&&u.a.each(e,(function(e){if(e){var t=l.getItemUid(e);d.push(t),e.checked()&&p.push(t),null===h&&e.focused()&&(h=t),null===b&&e.selected()&&(b=t)}}))}),this,"beforeChange"),this.list.subscribe((function(e){var t=null,n=!1,i=h,o=!1,a=!1,s=0,c=[];l.selectedItemUseCallback=!1,l.focusedItem(null),l.selectedItem(null),Object(m.isArray)(e)&&(s=p.length,u.a.each(e,(function(e){var t=l.getItemUid(e);c.push(t),null!==h&&h===t&&(l.focusedItem(e),h=null),0<s&&-1<Object(m.inArray)(t,p)&&(o=!0,e.checked(!0),s-=1),o||null===b||b!==t||(a=!0,l.selectedItem(e),b=null)})),l.selectedItemUseCallback=!0,o||a||!l.autoSelect()||(l.focusedItem()?l.selectedItem(l.focusedItem()):0<e.length&&(null!==i&&(n=!1,(i=r()(u.a).call(u.a,d,(function(e){return n&&-1<Object(m.inArray)(e,c)?e:(i===e&&(n=!0),!1)})))&&(t=r()(u.a).call(u.a,e,(function(e){return i===l.getItemUid(e)})))),l.selectedItem(t||null),l.focusedItem(l.selectedItem()))),(0!==l.iSelectNextHelper||0!==l.iFocusedNextHelper)&&0<e.length&&!l.focusedItem()&&(t=null,0!==l.iFocusedNextHelper&&(t=e[-1===l.iFocusedNextHelper?e.length-1:0]||null),t||0===l.iSelectNextHelper||(t=e[-1===l.iSelectNextHelper?e.length-1:0]||null),t&&(0!==l.iSelectNextHelper&&l.selectedItem(t||null),l.focusedItem(t||null),l.scrollToFocused(),u.a.delay((function(){return l.scrollToFocused()}),100)),l.iSelectNextHelper=0,l.iFocusedNextHelper=0)),d=[],p=[],h=null,b=null}))}var t=e.prototype;return t.itemSelected=function(e){this.isListChecked()?e||(this.oCallbacks.onItemSelect||m.noop)(e||null):e&&(this.oCallbacks.onItemSelect||m.noop)(e)},t.goDown=function(e){this.newSelectPosition(h.EventKeyCode.Down,!1,e)},t.goUp=function(e){this.newSelectPosition(h.EventKeyCode.Up,!1,e)},t.unselect=function(){this.selectedItem(null),this.focusedItem(null)},t.init=function(e,t,n){var i=this;void 0===n&&(n="all"),this.oContentVisible=e,this.oContentScrollable=t,this.oContentVisible&&this.oContentScrollable&&(c()(this.oContentVisible).on("selectstart",(function(e){e&&e.preventDefault&&e.preventDefault()})).on("click",this.sItemSelector,(function(e){i.actionClick(f.a.dataFor(e.currentTarget),e)})).on("click",this.sItemCheckedSelector,(function(e){var t=f.a.dataFor(e.currentTarget);t&&(e&&e.shiftKey?i.actionClick(t,e):(i.focusedItem(t),t.checked(!t.checked())))})),p()("enter",n,(function(){return!(i.focusedItem()&&!i.focusedItem().selected())||(i.actionClick(i.focusedItem()),!1)})),p()("ctrl+up, command+up, ctrl+down, command+down",n,(function(){return!1})),p()("up, shift+up, down, shift+down, home, end, pageup, pagedown, insert, space",n,(function(e,t){if(e&&t&&t.shortcut){var n=0;switch(t.shortcut){case"up":case"shift+up":n=h.EventKeyCode.Up;break;case"down":case"shift+down":n=h.EventKeyCode.Down;break;case"insert":n=h.EventKeyCode.Insert;break;case"space":n=h.EventKeyCode.Space;break;case"home":n=h.EventKeyCode.Home;break;case"end":n=h.EventKeyCode.End;break;case"pageup":n=h.EventKeyCode.PageUp;break;case"pagedown":n=h.EventKeyCode.PageDown}if(0<n)return i.newSelectPosition(n,p.a.shift),!1}return!0})))},t.autoSelect=function(){return!!(this.oCallbacks.onAutoSelect||m.noopTrue)()},t.doUpUpOrDownDown=function(e){(this.oCallbacks.onUpUpOrDownDown||m.noopTrue)(!!e)},t.getItemUid=function(e){var t="",n=this.oCallbacks.onItemGetUid||null;return n&&e&&(t=n(e)),t.toString()},t.newSelectPosition=function(e,t,n){var i=0,o=!1,a=!1,r=null,s=this.list(),c=s?s.length:0,l=this.focusedItem();if(0<c)if(l){if(l)if(h.EventKeyCode.Down===e||h.EventKeyCode.Up===e||h.EventKeyCode.Insert===e||h.EventKeyCode.Space===e)u.a.each(s,(function(t){if(!a)switch(e){case h.EventKeyCode.Up:l===t?a=!0:r=t;break;case h.EventKeyCode.Down:case h.EventKeyCode.Insert:o?(r=t,a=!0):l===t&&(o=!0)}})),r||h.EventKeyCode.Down!==e&&h.EventKeyCode.Up!==e||this.doUpUpOrDownDown(h.EventKeyCode.Up===e);else if(h.EventKeyCode.Home===e||h.EventKeyCode.End===e)h.EventKeyCode.Home===e?r=s[0]:h.EventKeyCode.End===e&&(r=s[s.length-1]);else if(h.EventKeyCode.PageDown===e){for(;i<c;i++)if(l===s[i]){r=s[i=c-1<(i+=10)?c-1:i];break}}else if(h.EventKeyCode.PageUp===e)for(i=c;0<=i;i--)if(l===s[i]){r=s[i=0>(i-=10)?0:i];break}}else h.EventKeyCode.Down===e||h.EventKeyCode.Insert===e||h.EventKeyCode.Space===e||h.EventKeyCode.Home===e||h.EventKeyCode.PageUp===e?r=s[0]:h.EventKeyCode.Up!==e&&h.EventKeyCode.End!==e&&h.EventKeyCode.PageDown!==e||(r=s[s.length-1]);r?(this.focusedItem(r),l&&(t?h.EventKeyCode.Up!==e&&h.EventKeyCode.Down!==e||l.checked(!l.checked()):h.EventKeyCode.Insert!==e&&h.EventKeyCode.Space!==e||l.checked(!l.checked())),!this.autoSelect()&&!n||this.isListChecked()||h.EventKeyCode.Space===e||this.selectedItem(r),this.scrollToFocused()):l&&((!t||h.EventKeyCode.Up!==e&&h.EventKeyCode.Down!==e)&&h.EventKeyCode.Insert!==e&&h.EventKeyCode.Space!==e||l.checked(!l.checked()),this.focusedItem(l))},t.scrollToFocused=function(){if(!this.oContentVisible||!this.oContentScrollable)return!1;var e=this.list(),t=c()(this.sItemFocusedSelector,this.oContentScrollable),n=t.position(),i=this.oContentVisible.height(),o=t.outerHeight();return e&&e[0]&&e[0].focused()?(this.oContentScrollable.scrollTop(0),!0):!(!n||!(0>n.top||n.top+o>i))&&(this.oContentScrollable.scrollTop(0>n.top?this.oContentScrollable.scrollTop()+n.top-20:this.oContentScrollable.scrollTop()+n.top-i+o+20),!0)},t.scrollToTop=function(e){return void 0===e&&(e=!1),!(!this.oContentVisible||!this.oContentScrollable)&&(e||50>this.oContentScrollable.scrollTop()?this.oContentScrollable.scrollTop(0):this.oContentScrollable.stop().animate({scrollTop:0},200),!0)},t.eventClickFunction=function(e,t){var n=0,i=0,o=!1,a=!1,r=[],s=!1,c=null,l="",u=this.getItemUid(e);if(t&&t.shiftKey&&""!==u&&""!==this.sLastUid&&u!==this.sLastUid)for(r=this.list(),s=e.checked(),n=0,i=r.length;n<i;n++)c=r[n],o=!1,(l=this.getItemUid(c))!==this.sLastUid&&l!==u||(o=!0),o&&(a=!a),(a||o)&&c.checked(s);this.sLastUid=""===u?"":u},t.actionClick=function(e,t){if(void 0===t&&(t=null),e){var n=!0;t&&(!t.shiftKey||t.ctrlKey||t.metaKey||t.altKey?!t.ctrlKey&&!t.metaKey||t.shiftKey||t.altKey||(n=!1,this.focusedItem(e),this.selectedItem()&&e!==this.selectedItem()&&this.selectedItem().checked(!0),e.checked(!e.checked())):(n=!1,""===this.sLastUid&&(this.sLastUid=this.getItemUid(e)),e.checked(!e.checked()),this.eventClickFunction(e,t),this.focusedItem(e))),n&&this.selectMessageItem(e)}},t.on=function(e,t){this.oCallbacks[e]=t},t.selectMessageItem=function(e){this.focusedItem(e),this.selectedItem(e),this.scrollToFocused()},e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return P}));var i=n(10),o=(n(45),n(59),n(77),n(17)),a=n.n(o),r=n(228),s=n.n(r),c=n(176),l=n.n(c),u=n(12),d=n.n(u),p=n(3),f=n.n(p),h=n(8),m=n.n(h),b=n(1),g=n(101),v=n.n(g),y=n(437),S=n.n(y),O=n(438),w=n.n(O),T=n(0),C=n(9),A=n(24),E=n(2),j=n(6),F=n(15),R=n(11),N=n(41),I=n(64),L=n(208),P=function(e){function t(){var t;return(t=e.call(this,"MessageModel")||this).folderFullNameRaw="",t.uid="",t.hash="",t.requestHash="",t.subject=b.a.observable(""),t.subjectPrefix=b.a.observable(""),t.subjectSuffix=b.a.observable(""),t.size=b.a.observable(0),t.dateTimeStampInUTC=b.a.observable(0),t.priority=b.a.observable(T.MessagePriority.Normal),t.proxy=!1,t.fromEmailString=b.a.observable(""),t.fromClearEmailString=b.a.observable(""),t.toEmailsString=b.a.observable(""),t.toClearEmailsString=b.a.observable(""),t.senderEmailsString=b.a.observable(""),t.senderClearEmailsString=b.a.observable(""),t.emails=[],t.from=[],t.to=[],t.cc=[],t.bcc=[],t.replyTo=[],t.deliveredTo=[],t.unsubsribeLinks=[],t.newForAnimation=b.a.observable(!1),t.deleted=b.a.observable(!1),t.deletedMark=b.a.observable(!1),t.unseen=b.a.observable(!1),t.flagged=b.a.observable(!1),t.answered=b.a.observable(!1),t.forwarded=b.a.observable(!1),t.isReadReceipt=b.a.observable(!1),t.focused=b.a.observable(!1),t.selected=b.a.observable(!1),t.checked=b.a.observable(!1),t.hasAttachments=b.a.observable(!1),t.attachmentsSpecData=b.a.observableArray([]),t.attachmentIconClass=b.a.computed((function(){return Object(L.b)(t.hasAttachments()?t.attachmentsSpecData():[])})),t.body=null,t.isHtml=b.a.observable(!1),t.hasImages=b.a.observable(!1),t.attachments=b.a.observableArray([]),t.isPgpSigned=b.a.observable(!1),t.isPgpEncrypted=b.a.observable(!1),t.pgpSignedVerifyStatus=b.a.observable(T.SignedVerifyStatus.None),t.pgpSignedVerifyUser=b.a.observable(""),t.priority=b.a.observable(T.MessagePriority.Normal),t.readReceipt=b.a.observable(""),t.aDraftInfo=[],t.sMessageId="",t.sInReplyTo="",t.sReferences="",t.hasUnseenSubMessage=b.a.observable(!1),t.hasFlaggedSubMessage=b.a.observable(!1),t.threads=b.a.observableArray([]),t.threadsLen=b.a.computed((function(){return t.threads().length})),t.isImportant=b.a.computed((function(){return T.MessagePriority.High===t.priority()})),t.regDisposables([t.attachmentIconClass,t.threadsLen,t.isImportant]),t}Object(i.a)(t,e),t.newInstanceFromJson=function(e){var n=new t;return n.initByJson(e)?n:null};var n=t.prototype;return n.clear=function(){this.folderFullNameRaw="",this.uid="",this.hash="",this.requestHash="",this.subject(""),this.subjectPrefix(""),this.subjectSuffix(""),this.size(0),this.dateTimeStampInUTC(0),this.priority(T.MessagePriority.Normal),this.proxy=!1,this.fromEmailString(""),this.fromClearEmailString(""),this.toEmailsString(""),this.toClearEmailsString(""),this.senderEmailsString(""),this.senderClearEmailsString(""),this.emails=[],this.from=[],this.to=[],this.cc=[],this.bcc=[],this.replyTo=[],this.deliveredTo=[],this.unsubsribeLinks=[],this.newForAnimation(!1),this.deleted(!1),this.deletedMark(!1),this.unseen(!1),this.flagged(!1),this.answered(!1),this.forwarded(!1),this.isReadReceipt(!1),this.selected(!1),this.checked(!1),this.hasAttachments(!1),this.attachmentsSpecData([]),this.body=null,this.isHtml(!1),this.hasImages(!1),this.attachments([]),this.isPgpSigned(!1),this.isPgpEncrypted(!1),this.pgpSignedVerifyStatus(T.SignedVerifyStatus.None),this.pgpSignedVerifyUser(""),this.priority(T.MessagePriority.Normal),this.readReceipt(""),this.aDraftInfo=[],this.sMessageId="",this.sInReplyTo="",this.sReferences="",this.threads([]),this.hasUnseenSubMessage(!1),this.hasFlaggedSubMessage(!1)},n.getEmails=function(e){var t=this;return f.a.compact(f.a.uniq(a()(f.a).call(f.a,s()(f.a).call(f.a,e,(function(e,n){return l()(e).call(e,t[n])}),[]),(function(e){return e?e.email:""}))))},n.getRecipientsEmails=function(){return this.getEmails(["to","cc"])},n.friendlySize=function(){return Object(E.friendlySize)(this.size())},n.computeSenderEmail=function(){var e=R.a.sentFolder(),t=R.a.draftFolder();this.senderEmailsString(this.folderFullNameRaw===e||this.folderFullNameRaw===t?this.toEmailsString():this.fromEmailString()),this.senderClearEmailsString(this.folderFullNameRaw===e||this.folderFullNameRaw===t?this.toClearEmailsString():this.fromClearEmailString())},n.initByJson=function(e){var t=!1,n=T.MessagePriority.Normal;return e&&"Object/Message"===e["@Object"]&&(n=Object(E.pInt)(e.Priority),this.priority(-1<Object(E.inArray)(n,[T.MessagePriority.High,T.MessagePriority.Low])?n:T.MessagePriority.Normal),this.folderFullNameRaw=e.Folder,this.uid=e.Uid,this.hash=e.Hash,this.requestHash=e.RequestHash,this.proxy=!!e.ExternalProxy,this.size(Object(E.pInt)(e.Size)),this.from=Object(I.a)(e.From),this.to=Object(I.a)(e.To),this.cc=Object(I.a)(e.Cc),this.bcc=Object(I.a)(e.Bcc),this.replyTo=Object(I.a)(e.ReplyTo),this.deliveredTo=Object(I.a)(e.DeliveredTo),this.unsubsribeLinks=Object(E.isNonEmptyArray)(e.UnsubsribeLinks)?e.UnsubsribeLinks:[],this.subject(e.Subject),Object(E.isArray)(e.SubjectParts)?(this.subjectPrefix(e.SubjectParts[0]),this.subjectSuffix(e.SubjectParts[1])):(this.subjectPrefix(""),this.subjectSuffix(this.subject())),this.dateTimeStampInUTC(Object(E.pInt)(e.DateTimeStampInUTC)),this.hasAttachments(!!e.HasAttachments),this.attachmentsSpecData(Object(E.isArray)(e.AttachmentsSpecData)?e.AttachmentsSpecData:[]),this.fromEmailString(Object(I.b)(this.from,!0)),this.fromClearEmailString(Object(I.c)(this.from)),this.toEmailsString(Object(I.b)(this.to,!0)),this.toClearEmailsString(Object(I.c)(this.to)),this.threads(Object(E.isArray)(e.Threads)?e.Threads:[]),this.initFlagsByJson(e),this.computeSenderEmail(),t=!0),t},n.initUpdateByMessageJson=function(e){var t=!1,n=T.MessagePriority.Normal;return e&&"Object/Message"===e["@Object"]&&(n=Object(E.pInt)(e.Priority),this.priority(-1<Object(E.inArray)(n,[T.MessagePriority.High,T.MessagePriority.Low])?n:T.MessagePriority.Normal),this.aDraftInfo=e.DraftInfo,this.sMessageId=e.MessageId,this.sInReplyTo=e.InReplyTo,this.sReferences=e.References,this.proxy=!!e.ExternalProxy,N.a.capaOpenPGP()&&(this.isPgpSigned(!!e.PgpSigned),this.isPgpEncrypted(!!e.PgpEncrypted)),this.hasAttachments(!!e.HasAttachments),this.attachmentsSpecData(Object(E.isArray)(e.AttachmentsSpecData)?e.AttachmentsSpecData:[]),this.foundedCIDs=Object(E.isArray)(e.FoundedCIDs)?e.FoundedCIDs:[],this.attachments(this.initAttachmentsFromJson(e.Attachments)),this.readReceipt(e.ReadReceipt||""),this.computeSenderEmail(),t=!0),t},n.initAttachmentsFromJson=function(e){var t=0,n=0,i=null,o=[];if(e&&"Collection/AttachmentCollection"===e["@Object"]&&Object(E.isNonEmptyArray)(e["@Collection"]))for(t=0,n=e["@Collection"].length;t<n;t++)(i=L.a.newInstanceFromJson(e["@Collection"][t]))&&(""!==i.cidWithOutTags&&0<this.foundedCIDs.length&&0<=Object(E.inArray)(i.cidWithOutTags,this.foundedCIDs)&&(i.isLinked=!0),o.push(i));return o},n.hasUnsubsribeLinks=function(){return this.unsubsribeLinks&&0<this.unsubsribeLinks.length},n.getFirstUnsubsribeLink=function(){return this.unsubsribeLinks&&0<this.unsubsribeLinks.length&&this.unsubsribeLinks[0]||""},n.initFlagsByJson=function(e){var t=!1;return e&&"Object/Message"===e["@Object"]&&(this.unseen(!e.IsSeen),this.flagged(!!e.IsFlagged),this.answered(!!e.IsAnswered),this.forwarded(!!e.IsForwarded),this.isReadReceipt(!!e.IsReadReceipt),this.deletedMark(!!e.IsDeleted),t=!0),t},n.fromToLine=function(e,t){return void 0===t&&(t=!1),Object(I.b)(this.from,e,t)},n.fromDkimData=function(){var e=["none",""];return Object(E.isNonEmptyArray)(this.from)&&1===this.from.length&&this.from[0]&&this.from[0].dkimStatus&&(e=[this.from[0].dkimStatus,this.from[0].dkimValue||""]),e},n.toToLine=function(e,t){return void 0===t&&(t=!1),Object(I.b)(this.to,e,t)},n.ccToLine=function(e,t){return void 0===t&&(t=!1),Object(I.b)(this.cc,e,t)},n.bccToLine=function(e,t){return void 0===t&&(t=!1),Object(I.b)(this.bcc,e,t)},n.replyToToLine=function(e,t){return void 0===t&&(t=!1),Object(I.b)(this.replyTo,e,t)},n.lineAsCss=function(){return S()({deleted:this.deleted(),"deleted-mark":this.deletedMark(),selected:this.selected(),checked:this.checked(),flagged:this.flagged(),unseen:this.unseen(),answered:this.answered(),forwarded:this.forwarded(),focused:this.focused(),important:this.isImportant(),withAttachments:this.hasAttachments(),new:this.newForAnimation(),emptySubject:""===this.subject(),hasUnseenSubMessage:this.hasUnseenSubMessage(),hasFlaggedSubMessage:this.hasFlaggedSubMessage()})},n.hasVisibleAttachments=function(){return!!d()(f.a).call(f.a,this.attachments(),(function(e){return!e.isLinked}))},n.findAttachmentByCid=function(e){var t=null,n=this.attachments();return Object(E.isNonEmptyArray)(n)&&(e=e.replace(/^<+/,"").replace(/>+$/,""),t=d()(f.a).call(f.a,n,(function(t){return e===t.cidWithOutTags}))),t||null},n.findAttachmentByContentLocation=function(e){var t=null,n=this.attachments();return Object(E.isNonEmptyArray)(n)&&(t=d()(f.a).call(f.a,n,(function(t){return e===t.contentLocation}))),t||null},n.messageId=function(){return this.sMessageId},n.inReplyTo=function(){return this.sInReplyTo},n.references=function(){return this.sReferences},n.fromAsSingleEmail=function(){return Object(E.isArray)(this.from)&&this.from[0]?this.from[0].email:""},n.viewLink=function(){return Object(F.q)(this.requestHash)},n.downloadLink=function(){return Object(F.p)(this.requestHash)},n.replyEmails=function(e,t){void 0===t&&(t=!1);var n=[],i=Object(E.isUnd)(e)?{}:e;return Object(I.d)(this.replyTo,i,n),0===n.length&&Object(I.d)(this.from,i,n),0!==n.length||t?n:this.replyEmails({},!0)},n.replyAllEmails=function(e,t){void 0===t&&(t=!1);var n=[],i=[],o=Object(E.isUnd)(e)?{}:e;return Object(I.d)(this.replyTo,o,n),0===n.length&&Object(I.d)(this.from,o,n),Object(I.d)(this.to,o,n),Object(I.d)(this.cc,o,i),0!==n.length||t?[n,i]:[this.replyAllEmails({},!0)[0],i]},n.textBodyToString=function(){return this.body?this.body.html():""},n.attachmentsToStringLine=function(){var e=a()(f.a).call(f.a,this.attachments(),(function(e){return e.fileName+" ("+e.friendlySize+")"}));return e&&0<e.length?e.join(", "):""},n.viewPopupMessage=function(e){void 0===e&&(e=!1),this.showLazyExternalImagesInBody();var t=this.dateTimeStampInUTC()||0,n=this.ccToLine(!1),i=0<t?v.a.unix(t):null;Object(E.previewMessage)({title:this.subject(),subject:this.subject(),date:i?i.format("LLL"):"",fromCreds:this.fromToLine(!1),toLabel:Object(C.i18n)("MESSAGE/LABEL_TO"),toCreds:this.toToLine(!1),ccClass:n?"":"rl-preview-hide",ccLabel:Object(C.i18n)("MESSAGE/LABEL_CC"),ccCreds:n},this.body,this.isHtml(),e)},n.printMessage=function(){this.viewPopupMessage(!0)},n.generateUid=function(){return this.folderFullNameRaw+"/"+this.uid},n.populateByMessageListItem=function(e){return e&&(this.folderFullNameRaw=e.folderFullNameRaw,this.uid=e.uid,this.hash=e.hash,this.requestHash=e.requestHash,this.subject(e.subject())),this.subjectPrefix(this.subjectPrefix()),this.subjectSuffix(this.subjectSuffix()),e&&(this.size(e.size()),this.dateTimeStampInUTC(e.dateTimeStampInUTC()),this.priority(e.priority()),this.proxy=e.proxy,this.fromEmailString(e.fromEmailString()),this.fromClearEmailString(e.fromClearEmailString()),this.toEmailsString(e.toEmailsString()),this.toClearEmailsString(e.toClearEmailsString()),this.emails=e.emails,this.from=e.from,this.to=e.to,this.cc=e.cc,this.bcc=e.bcc,this.replyTo=e.replyTo,this.deliveredTo=e.deliveredTo,this.unsubsribeLinks=e.unsubsribeLinks,this.unseen(e.unseen()),this.flagged(e.flagged()),this.answered(e.answered()),this.forwarded(e.forwarded()),this.isReadReceipt(e.isReadReceipt()),this.deletedMark(e.deletedMark()),this.priority(e.priority()),this.selected(e.selected()),this.checked(e.checked()),this.hasAttachments(e.hasAttachments()),this.attachmentsSpecData(e.attachmentsSpecData())),this.body=null,this.aDraftInfo=[],this.sMessageId="",this.sInReplyTo="",this.sReferences="",e&&this.threads(e.threads()),this.computeSenderEmail(),this},n.showLazyExternalImagesInBody=function(){this.body&&m()(".lazy[data-original]",this.body).each((function(){m()(this).attr("src",m()(this).attr("data-original")).removeAttr("data-original").removeAttr("data-loaded")}))},n.lozad=function(){w()("img.lazy:not(.lazy-inited)",{threshold:.4,load:function(e){e.src=A.e,m()(e).addClass("lazy-inited").attr("src",e.dataset.original).removeAttr("data-loaded").removeAttr("data-original").css({opacity:.3}).animate({opacity:1},500)}}).observe()},n.showExternalImages=function(e){if(void 0===e&&(e=!1),this.body&&this.body.data("rl-has-images")){this.hasImages(!1),this.body.data("rl-has-images",!1);var t=this.proxy?"data-x-additional-src":"data-x-src";m()("["+t+"]",this.body).each((function(){var n=m()(this);e&&n.is("img")?n.addClass("lazy").attr("data-original",n.attr(t)).removeAttr("data-loaded"):n.attr("src",n.attr(t)).removeAttr("data-loaded")})),t=this.proxy?"data-x-additional-style-url":"data-x-style-url",m()("["+t+"]",this.body).each((function(){var e=m()(this),n=Object(E.trim)(e.attr("style"));n=""===n?"":";"===n.substr(-1)?n+" ":n+"; ",e.attr("style",n+e.attr(t))})),e&&(this.lozad(),j.$win.resize()),Object(E.windowResize)(500)}},n.showInternalImages=function(e){var t=this;if(void 0===e&&(e=!1),this.body&&!this.body.data("rl-init-internal-images")){this.body.data("rl-init-internal-images",!0);var n=this;m()("[data-x-src-cid]",this.body).each((function(){var t=m()(this),i=n.findAttachmentByCid(t.attr("data-x-src-cid"));i&&i.download&&(e&&t.is("img")?t.addClass("lazy").attr("data-original",i.linkPreview()):t.attr("src",i.linkPreview()))})),m()("[data-x-src-location]",this.body).each((function(){var t=m()(this),i=n.findAttachmentByContentLocation(t.attr("data-x-src-location"));i||(i=n.findAttachmentByCid(t.attr("data-x-src-location"))),i&&i.download&&(e&&t.is("img")?t.addClass("lazy").attr("data-original",i.linkPreview()):t.attr("src",i.linkPreview()))})),m()("[data-x-style-cid]",this.body).each((function(){var e="",t="",i=m()(this),o=n.findAttachmentByCid(i.attr("data-x-style-cid"));o&&o.linkPreview&&""!==(t=i.attr("data-x-style-cid-name"))&&(e=""===(e=Object(E.trim)(i.attr("style")))?"":";"===e.substr(-1)?e+" ":e+"; ",i.attr("style",e+t+": url('"+o.linkPreview()+"')"))})),e&&f.a.delay((function(){return t.lozad()}),300),Object(E.windowResize)(500)}},n.storeDataInDom=function(){this.body&&(this.body.data("rl-is-html",!!this.isHtml()),this.body.data("rl-has-images",!!this.hasImages()))},n.fetchDataFromDom=function(){this.body&&(this.isHtml(!!this.body.data("rl-is-html")),this.hasImages(!!this.body.data("rl-has-images")))},n.replacePlaneTextBody=function(e){this.body&&this.body.html(e).addClass("b-text-part plain")},n.flagHash=function(){return[this.deleted(),this.deletedMark(),this.unseen(),this.flagged(),this.answered(),this.forwarded(),this.isReadReceipt()].join(",")},t}(n(67).a)},function(e,t,n){var i,o;!function(a){if(void 0===(o="function"==typeof(i=a)?i.call(t,n,t,e):i)||(e.exports=o),!0,e.exports=a(),!!0){var r=window.Cookies,s=window.Cookies=a();s.noConflict=function(){return window.Cookies=r,s}}}((function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var i in n)t[i]=n[i]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(i){function o(){}function a(t,n,a){if("undefined"!=typeof document){"number"==typeof(a=e({path:"/"},o.defaults,a)).expires&&(a.expires=new Date(1*new Date+864e5*a.expires)),a.expires=a.expires?a.expires.toUTCString():"";try{var r=JSON.stringify(n);/^[\{\[]/.test(r)&&(n=r)}catch(e){}n=i.write?i.write(n,t):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var s="";for(var c in a)a[c]&&(s+="; "+c,!0!==a[c]&&(s+="="+a[c].split(";")[0]));return document.cookie=t+"="+n+s}}function r(e,n){if("undefined"!=typeof document){for(var o={},a=document.cookie?document.cookie.split("; "):[],r=0;r<a.length;r++){var s=a[r].split("="),c=s.slice(1).join("=");n||'"'!==c.charAt(0)||(c=c.slice(1,-1));try{var l=t(s[0]);if(c=(i.read||i)(c,l)||t(c),n)try{c=JSON.parse(c)}catch(e){}if(o[l]=c,e===l)break}catch(e){}}return e?o[e]:o}}return o.set=a,o.get=function(e){return r(e,!1)},o.getJSON=function(e){return r(e,!0)},o.remove=function(t,n){a(t,"",e(n,{expires:-1}))},o.defaults={},o.withConverter=n,o}((function(){}))}))},,,,function(e,t,n){var i=n(56),o=/"/g;e.exports=function(e,t,n,a){var r=String(i(e)),s="<"+t;return""!==n&&(s+=" "+n+'="'+String(a).replace(o,"&quot;")+'"'),s+">"+r+"</"+t+">"}},function(e,t,n){var i=n(37);e.exports=function(e){return i((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}))}},function(e,t,n){var i=n(329);e.exports=i},function(e,t,n){var i=n(330),o=String.prototype;e.exports=function(e){var t=e.trim;return"string"==typeof e||e===o||e instanceof String&&t===o.trim?i:t}},function(e,t,n){n(331);var i=n(71);e.exports=i("String").trim},function(e,t,n){"use strict";var i=n(34),o=n(332).trim;i({target:"String",proto:!0,forced:n(333)("trim")},{trim:function(){return o(this)}})},function(e,t,n){var i=n(115),o="["+n(286)+"]",a=RegExp("^"+o+o+"*"),r=RegExp(o+o+"*$"),s=function(e){return function(t){var n=String(i(t));return 1&e&&(n=n.replace(a,"")),2&e&&(n=n.replace(r,"")),n}};e.exports={start:s(1),end:s(2),trim:s(3)}},function(e,t,n){var i=n(43),o=n(286);e.exports=function(e){return i((function(){return!!o[e]()||"​᠎"!="​᠎"[e]()||o[e].name!==e}))}},function(e,t,n){var i=n(335);e.exports=i},function(e,t,n){var i=n(336),o=Array.prototype;e.exports=function(e){var t=e.find;return e===o||e instanceof Array&&t===o.find?i:t}},function(e,t,n){n(337);var i=n(71);e.exports=i("Array").find},function(e,t,n){"use strict";var i=n(34),o=n(173).find,a=n(223),r=n(120),s="find",c=!0,l=r(s);s in[]&&Array(1).find((function(){c=!1})),i({target:"Array",proto:!0,forced:c||!l},{find:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),a(s)},function(e,t,n){var i=n(339);e.exports=i},function(e,t,n){var i=n(340),o=Array.prototype;e.exports=function(e){var t=e.concat;return e===o||e instanceof Array&&t===o.concat?i:t}},function(e,t,n){n(341);var i=n(71);e.exports=i("Array").concat},function(e,t,n){"use strict";var i=n(34),o=n(43),a=n(174),r=n(50),s=n(117),c=n(92),l=n(288),u=n(287),d=n(175),p=n(38),f=n(149),h=p("isConcatSpreadable"),m=9007199254740991,b="Maximum allowed index exceeded",g=f>=51||!o((function(){var e=[];return e[h]=!1,e.concat()[0]!==e})),v=d("concat"),y=function(e){if(!r(e))return!1;var t=e[h];return void 0!==t?!!t:a(e)};i({target:"Array",proto:!0,forced:!g||!v},{concat:function(e){var t,n,i,o,a,r=s(this),d=u(r,0),p=0;for(t=-1,i=arguments.length;t<i;t++)if(y(a=-1===t?r:arguments[t])){if(p+(o=c(a.length))>m)throw TypeError(b);for(n=0;n<o;n++,p++)n in a&&l(d,p,a[n])}else{if(p>=m)throw TypeError(b);l(d,p++,a)}return d.length=p,d}})},function(e,t,n){n(162);var i=n(343),o=n(93),a=Array.prototype,r={DOMTokenList:!0,NodeList:!0};e.exports=function(e){var t=e.values;return e===a||e instanceof Array&&t===a.values||r.hasOwnProperty(o(e))?i:t}},function(e,t,n){var i=n(344);e.exports=i},function(e,t,n){n(202);var i=n(71);e.exports=i("Array").values},function(e,t,n){var i=n(289);e.exports=i},function(e,t,n){n(347);var i=n(71);e.exports=i("Array").reduce},function(e,t,n){"use strict";var i=n(34),o=n(348).left,a=n(290),r=n(120),s=n(149),c=n(118),l=a("reduce"),u=r("reduce",{1:0});i({target:"Array",proto:!0,forced:!l||!u||!c&&s>79&&s<83},{reduce:function(e){return o(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){var i=n(70),o=n(117),a=n(171),r=n(92),s=function(e){return function(t,n,s,c){i(n);var l=o(t),u=a(l),d=r(l.length),p=e?d-1:0,f=e?-1:1;if(s<2)for(;;){if(p in u){c=u[p],p+=f;break}if(p+=f,e?p<0:d<=p)throw TypeError("Reduce of empty array with no initial value")}for(;e?p>=0:d>p;p+=f)p in u&&(c=n(c,u[p],p,l));return c}};e.exports={left:s(!1),right:s(!0)}},function(e,t,n){var i=n(350);e.exports=i},function(e,t,n){var i=n(351),o=Array.prototype;e.exports=function(e){var t=e.map;return e===o||e instanceof Array&&t===o.map?i:t}},function(e,t,n){n(352);var i=n(71);e.exports=i("Array").map},function(e,t,n){"use strict";var i=n(34),o=n(173).map,a=n(175),r=n(120),s=a("map"),c=r("map");i({target:"Array",proto:!0,forced:!s||!c},{map:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){var i=n(49),o=n(354),a=n(39)("species");e.exports=function(e,t){var n;return o(e)&&("function"!=typeof(n=e.constructor)||n!==Array&&!o(n.prototype)?i(n)&&null===(n=n[a])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===t?0:t)}},function(e,t,n){var i=n(74);e.exports=Array.isArray||function(e){return"Array"==i(e)}},function(e,t,n){var i=n(37),o=n(39),a=n(157),r=o("species");e.exports=function(e){return a>=51||!i((function(){var t=[];return(t.constructor={})[r]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},function(e,t,n){"use strict";var i=n(291).forEach,o=n(285)("forEach");e.exports=o?[].forEach:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}},function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},function(e,t,n){"use strict";n.r(t),t.default='<html>\n<head>\n\t<meta charset="utf-8" />\n\t<meta name="viewport" content="user-scalable=no" />\n\t<meta name="apple-mobile-web-app-capable" content="yes" />\n\t<meta name="robots" content="noindex, nofollow, noodp" />\n\t<title>{{title}}</title>\n\t<style>\nhtml, body {\n\tbackground-color: #fff;\n\tfont-size: 13px;\n\tfont-family: arial, sans-serif;\n\tmargin: 0;\n\tpadding: 0;\n}\n\na {color: blue; text-decoration: underline}\na:visited {color: #609}\na:active {color: red}\nblockquote {border-left: 2px solid black; margin: 0; padding: 0px 10px}\n\npre {\n\tmargin: 0px;\n\tpadding: 0px;\n\tfont-family: Monaco, Menlo, Consolas, \'Courier New\', monospace;\n\tbackground: #fff;\n\tborder: none;\n\twhite-space: pre-wrap;\n\tword-wrap: break-word;\n\tword-break: break-all;\n}\n\n.body-wrp {\n\tpadding: 10px;\n}\n\n.body-wrp.html pre {\n\tfont-family: Monaco, Menlo, Consolas, \'Courier New\', monospace;\n\twhite-space: pre-wrap;\n\tword-wrap: break-word;\n\tword-break: normal;\n}\n\n.body-wrp.plain {\n\tpadding: 15px;\n\twhite-space: pre-wrap;\n\tfont-family: Monaco, Menlo, Consolas, \'Courier New\', monospace;\n}\n\n.body-wrp.plain pre {\n\tmargin: 0px;\n\tpadding: 0px;\n\tbackground: #fff;\n\tborder: none;\n\tfont-family: Monaco, Menlo, Consolas, \'Courier New\', monospace;\n\twhite-space: pre-wrap;\n\tword-wrap: break-word;\n\tword-break: normal;\n}\n\n.body-wrp.plain blockquote {\n\tborder-left: 2px solid blue;\n\tcolor: blue;\n}\n\n.body-wrp.plain blockquote blockquote {\n\tborder-left: 2px solid green;\n\tcolor: green;\n}\n\n.body-wrp.plain blockquote blockquote blockquote {\n\tborder-left: 2px solid red;\n\tcolor: red;\n}\n.rl-preview-subject {\n\tfont-size: 16px;\n\tfont-weight: bold;\n\tpadding: 15px;\n}\n.rl-preview-creds-from, .rl-preview-creds-to, .rl-preview-creds-cc {\n\tfont-size: 12px;\n\tpadding: 5px 15px;\n}\n.rl-preview-date {\n\tfloat: right;\n\tfont-size: 12px;\n\tpadding: 10px 15px;\n}\n.rl-preview-section {\n\tpadding: 0;\n\tmargin: 0;\n\tborder-bottom: 1px solid #ccc;\n}\n.rl-preview-hide {\n\tdisplay: none;\n}\n\t</style>\n</head>\n<body>\n\t<div class="rl-preview-section">\n\t\t<div class="rl-preview-subject">{{subject}}</div>\n\t</div>\n\t<div class="rl-preview-section">\n\t\t<div class="rl-preview-date">{{date}}</div>\n\t\t<div class="rl-preview-creds-from">{{fromCreds}}</div>\n\t\t<div class="rl-preview-creds-to">{{toLabel}}: {{toCreds}}</div>\n\t\t<div class="rl-preview-creds-cc {{ccClass}}">{{ccLabel}}: {{ccCreds}}</div>\n\t</div>\n\t<div class="body-wrp {{bodyClass}}">{{html}}</div>\n</body>\n</html>'},function(e,t,n){var i=n(360);e.exports=i},function(e,t,n){var i=n(361),o=Array.prototype;e.exports=function(e){var t=e.filter;return e===o||e instanceof Array&&t===o.filter?i:t}},function(e,t,n){n(362);var i=n(71);e.exports=i("Array").filter},function(e,t,n){"use strict";var i=n(34),o=n(173).filter,a=n(175),r=n(120),s=a("filter"),c=r("filter");i({target:"Array",proto:!0,forced:!s||!c},{filter:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){var i=n(364);e.exports=i},function(e,t,n){n(365);var i=n(51).Object;e.exports=function(e,t){return i.create(e,t)}},function(e,t,n){n(34)({target:"Object",stat:!0,sham:!n(53)},{create:n(161)})},function(e,t,n){var i=n(367);e.exports=i},function(e,t,n){n(368);var i=n(51);e.exports=i.Object.setPrototypeOf},function(e,t,n){n(34)({target:"Object",stat:!0},{setPrototypeOf:n(160)})},function(e,t,n){var i=n(370);e.exports=i},function(e,t,n){n(162);var i=n(371),o=n(93),a=Array.prototype,r={DOMTokenList:!0,NodeList:!0};e.exports=function(e){var t=e.forEach;return e===a||e instanceof Array&&t===a.forEach||r.hasOwnProperty(o(e))?i:t}},function(e,t,n){var i=n(372);e.exports=i},function(e,t,n){n(373);var i=n(71);e.exports=i("Array").forEach},function(e,t,n){"use strict";var i=n(34),o=n(374);i({target:"Array",proto:!0,forced:[].forEach!=o},{forEach:o})},function(e,t,n){"use strict";var i=n(173).forEach,o=n(290),a=n(120),r=o("forEach"),s=a("forEach");e.exports=r&&s?[].forEach:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}},function(e,t,n){var i=n(376);e.exports=i},function(e,t,n){n(377);var i=n(51);e.exports=i.Object.keys},function(e,t,n){var i=n(34),o=n(117),a=n(221);i({target:"Object",stat:!0,forced:n(43)((function(){a(1)}))},{keys:function(e){return a(o(e))}})},function(e,t,n){var i=n(289);e.exports=i},function(e,t,n){var i=n(380);e.exports=i},function(e,t,n){var i=n(381),o=Array.prototype;e.exports=function(e){var t=e.reverse;return e===o||e instanceof Array&&t===o.reverse?i:t}},function(e,t,n){n(382);var i=n(71);e.exports=i("Array").reverse},function(e,t,n){"use strict";var i=n(34),o=n(174),a=[].reverse,r=[1,2];i({target:"Array",proto:!0,forced:String(r)===String(r.reverse())},{reverse:function(){return o(this)&&(this.length=this.length),a.call(this)}})},function(e,t,n){var i=n(384);e.exports=i},function(e,t,n){var i=n(385),o=Array.prototype;e.exports=function(e){var t=e.slice;return e===o||e instanceof Array&&t===o.slice?i:t}},function(e,t,n){n(386);var i=n(71);e.exports=i("Array").slice},function(e,t,n){"use strict";var i=n(34),o=n(50),a=n(174),r=n(222),s=n(92),c=n(81),l=n(288),u=n(38),d=n(175),p=n(120),f=d("slice"),h=p("slice",{ACCESSORS:!0,0:0,1:2}),m=u("species"),b=[].slice,g=Math.max;i({target:"Array",proto:!0,forced:!f||!h},{slice:function(e,t){var n,i,u,d=c(this),p=s(d.length),f=r(e,p),h=r(void 0===t?p:t,p);if(a(d)&&("function"!=typeof(n=d.constructor)||n!==Array&&!a(n.prototype)?o(n)&&null===(n=n[m])&&(n=void 0):n=void 0,n===Array||void 0===n))return b.call(d,f,h);for(i=new(void 0===n?Array:n)(g(h-f,0)),u=0;f<h;f++,u++)f in d&&l(i,u,d[f]);return i.length=u,i}})},function(e,t,n){var i=n(388);e.exports=i},function(e,t,n){n(389);var i=n(51).Object,o=e.exports=function(e,t,n){return i.defineProperty(e,t,n)};i.defineProperty.sham&&(o.sham=!0)},function(e,t,n){var i=n(34),o=n(53);i({target:"Object",stat:!0,forced:!o,sham:!o},{defineProperty:n(82).f})},function(e,t,n){var i=n(391);e.exports=i},function(e,t,n){n(392);var i=n(51).Object,o=e.exports=function(e,t){return i.getOwnPropertyDescriptor(e,t)};i.getOwnPropertyDescriptor.sham&&(o.sham=!0)},function(e,t,n){var i=n(34),o=n(43),a=n(81),r=n(158).f,s=n(53),c=o((function(){r(1)}));i({target:"Object",stat:!0,forced:!s||c,sham:!s},{getOwnPropertyDescriptor:function(e,t){return r(a(e),t)}})},function(e,t,n){"use strict";n.r(t),n.d(t,"AccountPopupView",(function(){return y})),n.d(t,"default",(function(){return y}));var i,o,a,r,s=n(10),c=n(18),l=n(19),u=n.n(l),d=n(1),p=n(0),f=n(2),h=n(9),m=n(16),b=n(21),g=n(7),v=n(25),y=(i=Object(g.popup)({name:"View/Popup/Account",templateID:"PopupsAccount"}),o=Object(g.command)((function(e){return!e.submitRequest()})),i((r=function(e){function t(){var t;return(t=e.call(this)||this).isNew=d.a.observable(!0),t.email=d.a.observable(""),t.password=d.a.observable(""),t.emailError=d.a.observable(!1),t.passwordError=d.a.observable(!1),t.email.subscribe((function(){t.emailError(!1)})),t.password.subscribe((function(){t.passwordError(!1)})),t.submitRequest=d.a.observable(!1),t.submitError=d.a.observable(""),t.submitErrorAdditional=d.a.observable(""),t.emailFocus=d.a.observable(!1),t}Object(s.a)(t,e);var n=t.prototype;return n.addAccountCommand=function(){var e=this;return this.emailError(""===Object(f.trim)(this.email())),this.passwordError(""===Object(f.trim)(this.password())),!this.emailError()&&!this.passwordError()&&(this.submitRequest(!0),m.a.accountSetup((function(t,n){e.submitRequest(!1),p.StorageResultType.Success===t&&n?n.Result?(Object(b.a)().accountsAndIdentities(),e.cancelCommand()):(e.submitError(n.ErrorCode?Object(h.getNotification)(n.ErrorCode):Object(h.getNotification)(p.Notification.UnknownError)),n.ErrorMessageAdditional&&e.submitErrorAdditional(n.ErrorMessageAdditional)):(e.submitError(Object(h.getNotification)(p.Notification.UnknownError)),e.submitErrorAdditional(""))}),this.email(),this.password(),this.isNew()),!0)},n.clearPopup=function(){this.isNew(!0),this.email(""),this.password(""),this.emailError(!1),this.passwordError(!1),this.submitRequest(!1),this.submitError(""),this.submitErrorAdditional("")},n.onShow=function(e){this.clearPopup(),e&&e.canBeEdit()&&(this.isNew(!1),this.email(e.email))},n.onShowWithDelay=function(){this.emailFocus(!0)},t}(v.a),Object(c.a)(r.prototype,"addAccountCommand",[o],u()(r.prototype,"addAccountCommand"),r.prototype),a=r))||a)},function(e,t,n){"use strict";n.r(t),n.d(t,"IdentityPopupView",(function(){return S})),n.d(t,"default",(function(){return S}));var i,o,a,r,s=n(10),c=n(18),l=n(19),u=n.n(l),d=(n(48),n(1)),p=n(0),f=n(6),h=n(2),m=n(9),b=n(16),g=n(21),v=n(7),y=n(25),S=(i=Object(v.popup)({name:"View/Popup/Identity",templateID:"PopupsIdentity"}),o=Object(v.command)((function(e){return!e.submitRequest()})),i((r=function(e){function t(){var t;return(t=e.call(this)||this).id="",t.edit=d.a.observable(!1),t.owner=d.a.observable(!1),t.email=d.a.observable("").validateEmail(),t.email.focused=d.a.observable(!1),t.name=d.a.observable(""),t.name.focused=d.a.observable(!1),t.replyTo=d.a.observable("").validateSimpleEmail(),t.replyTo.focused=d.a.observable(!1),t.bcc=d.a.observable("").validateSimpleEmail(),t.bcc.focused=d.a.observable(!1),t.signature=d.a.observable(""),t.signatureInsertBefore=d.a.observable(!1),t.showBcc=d.a.observable(!1),t.showReplyTo=d.a.observable(!1),t.submitRequest=d.a.observable(!1),t.submitError=d.a.observable(""),t.bcc.subscribe((function(e){!1===t.showBcc()&&0<e.length&&t.showBcc(!0)})),t.replyTo.subscribe((function(e){!1===t.showReplyTo()&&0<e.length&&t.showReplyTo(!0)})),t}Object(s.a)(t,e);var n=t.prototype;return n.addOrEditIdentityCommand=function(){var e=this;return this.signature&&this.signature.__fetchEditorValue&&this.signature.__fetchEditorValue(),this.email.hasError()||this.email.hasError(""===Object(h.trim)(this.email())),this.email.hasError()?(this.owner()||this.email.focused(!0),!1):this.replyTo.hasError()?(this.replyTo.focused(!0),!1):this.bcc.hasError()?(this.bcc.focused(!0),!1):(this.submitRequest(!0),b.a.identityUpdate((function(t,n){e.submitRequest(!1),p.StorageResultType.Success===t&&n?n.Result?(Object(g.a)().accountsAndIdentities(),e.cancelCommand()):n.ErrorCode&&e.submitError(Object(m.getNotification)(n.ErrorCode)):e.submitError(Object(m.getNotification)(p.Notification.UnknownError))}),this.id,this.email(),this.name(),this.replyTo(),this.bcc(),this.signature(),this.signatureInsertBefore()),!0)},n.clearPopup=function(){this.id="",this.edit(!1),this.owner(!1),this.name(""),this.email(""),this.replyTo(""),this.bcc(""),this.signature(""),this.signatureInsertBefore(!1),this.email.hasError(!1),this.replyTo.hasError(!1),this.bcc.hasError(!1),this.showBcc(!1),this.showReplyTo(!1),this.submitRequest(!1),this.submitError("")},n.onShow=function(e){this.clearPopup(),e?(this.edit(!0),this.id=e.id()||"",this.name(e.name()),this.email(e.email()),this.replyTo(e.replyTo()),this.bcc(e.bcc()),this.signature(e.signature()),this.signatureInsertBefore(e.signatureInsertBefore()),this.owner(""===this.id)):this.id=Object(h.fakeMd5)()},n.onShowWithDelay=function(){this.owner()||f.bMobileDevice||this.email.focused(!0)},n.onHideWithDelay=function(){this.clearPopup()},t}(y.a),Object(c.a)(r.prototype,"addOrEditIdentityCommand",[o],u()(r.prototype,"addOrEditIdentityCommand"),r.prototype),a=r))||a)},function(e,t,n){"use strict";n.r(t);var i=n(29),o=n(10),a=n(12),r=n.n(a),s=n(2),c=n(0),l=n(32),u=function(e){function t(t){var n;return(n=e.call(this)||this).element=t.element||null,n.value=t.value&&t.value.subscribe?t.value:null,n.element&&(n.value?(n.element.css("display","inline-block"),t.verticalAlign&&n.element.css("vertical-align",t.verticalAlign),n.setState(n.value()),n.disposable.push(n.value.subscribe(n.setState,Object(i.a)(n)))):n.element.hide()),n}return Object(o.a)(t,e),t.prototype.setState=function(e){var t,n,i,o,a,l,u,d;switch(Object(s.pInt)(e)){case c.SaveSettingsStep.TrueResult:r()(t=r()(n=this.element).call(n,".animated,.error").hide().removeClass("visible").end()).call(t,".success").show().addClass("visible");break;case c.SaveSettingsStep.FalseResult:r()(i=r()(o=this.element).call(o,".animated,.success").hide().removeClass("visible").end()).call(i,".error").show().addClass("visible");break;case c.SaveSettingsStep.Animate:r()(a=r()(l=this.element).call(l,".error,.success").hide().removeClass("visible").end()).call(a,".animated").show().addClass("visible");break;case c.SaveSettingsStep.Idle:default:r()(u=r()(d=this.element).call(d,".animated").hide().end()).call(u,".error,.success").removeClass("visible")}},t}(l.a);t.default=Object(l.b)(u,"SaveTriggerComponent")},function(e,t,n){"use strict";n.r(t);var i=n(10),o=n(32),a=function(e){function t(){return e.apply(this,arguments)||this}return Object(i.a)(t,e),t}(n(88).a);t.default=Object(o.b)(a,"InputComponent")},function(e,t,n){"use strict";n.r(t);var i=n(10),o=n(9),a=n(2),r=n(32),s=function(e){function t(t){var n;return(n=e.call(this,t)||this).options=t.options||"",n.optionsText=t.optionsText||null,n.optionsValue=t.optionsValue||null,n.optionsCaption=t.optionsCaption||null,n.optionsCaption&&(n.optionsCaption=Object(o.i18n)(n.optionsCaption)),n.defautOptionsAfterRender=a.defautOptionsAfterRender,n}return Object(i.a)(t,e),t}(n(88).a);t.default=Object(r.b)(s,"SelectComponent")},function(e,t,n){"use strict";n.r(t);var i=n(10),o=n(32),a=function(e){function t(){return e.apply(this,arguments)||this}return Object(i.a)(t,e),t}(n(308).a);t.default=Object(o.b)(a,"RadioComponent")},function(e,t,n){"use strict";n.r(t);var i=n(10),o=n(2),a=n(32),r=n(88),s=function(e){function t(t){var n;return(n=e.call(this,t)||this).rows=t.rows||5,n.spellcheck=!Object(o.isUnd)(t.spellcheck)&&!!t.spellcheck,n}return Object(i.a)(t,e),t}(r.a);t.default=Object(a.b)(s,"TextAreaComponent")},function(e,t,n){"use strict";n.r(t);var i=n(10),o=n(32),a=function(e){function t(){return e.apply(this,arguments)||this}return Object(i.a)(t,e),t}(n(88).a);t.default=Object(o.b)(a,"DateComponent")},function(e,t,n){"use strict";n.r(t);var i=n(10),o=(n(45),n(59),n(8)),a=n.n(o),r=n(32),s=function(e){function t(t){var n;if(n=e.call(this)||this,t.component&&t.component.templateNodes&&t.element&&t.element[0]&&t.element[0].outerHTML){var i=t.element[0].outerHTML;(i=i?i.replace(/<x-script/i,"<script").replace(/<b><\/b><\/x-script>/i,"<\/script>"):"")?(t.element.text(""),t.element.replaceWith(a()(i).text(t.component.templateNodes[0]&&t.component.templateNodes[0].nodeValue?t.component.templateNodes[0].nodeValue:""))):t.element.remove()}return n}return Object(i.a)(t,e),t}(r.a);t.default=Object(r.b)(s,"ScriptComponent")},function(e,t,n){"use strict";n.r(t);var i=n(29),o=n(10),a=n(3),r=n.n(a),s=n(1),c=n(32),l=function(e){function t(t){var n;return(n=e.call(this,t)||this).animationBox=s.a.observable(!1).extend({falseTimeout:200}),n.animationCheckmark=s.a.observable(!1).extend({falseTimeout:200}),n.animationBoxSetTrue=r.a.bind(n.animationBoxSetTrue,Object(i.a)(n)),n.animationCheckmarkSetTrue=r.a.bind(n.animationCheckmarkSetTrue,Object(i.a)(n)),n.disposable.push(n.value.subscribe((function(e){n.triggerAnimation(e)}),Object(i.a)(n))),n}Object(o.a)(t,e);var n=t.prototype;return n.animationBoxSetTrue=function(){this.animationBox(!0)},n.animationCheckmarkSetTrue=function(){this.animationCheckmark(!0)},n.triggerAnimation=function(e){e?(this.animationBoxSetTrue(),r.a.delay(this.animationCheckmarkSetTrue,200)):(this.animationCheckmarkSetTrue(),r.a.delay(this.animationBoxSetTrue,200))},t}(n(178).a);t.default=Object(c.b)(l,"CheckboxMaterialDesignComponent")},function(e,t,n){"use strict";n.r(t);var i=n(29),o=n(10),a=(n(48),n(86),n(119),n(57)),r=n.n(a),s=n(33),c=n.n(s),l=n(17),u=n.n(l),d=n(12),p=n.n(d),f=n(4),h=n.n(f),m=n(3),b=n.n(m),g=n(8),v=n.n(g),y=n(102),S=n.n(y),O=n(2),w=n(0),T=n(6),C=n(24),A=n(36),E=n(61),j=n(14),F=n(15),R=n(23),N=n(9),I=n(26),L=n(27),P=n(35),_=n(124),M=n(46),D=n(104),k=n(103),x=n(207),U=n(11),H=n(41),G=n(13),B=n(240),V=n(60),K=n(5),q=n(164),z=n(16),W=n(94),Y=n(83),$=n(443),J=n(444),X=n(445),Z=n(446),Q=n(447),ee=n(449),te=n(455),ne=n(7),ie=function(e){function t(){var t;return(t=e.call(this,z.a)||this).moveCache={},t.quotaDebounce=b.a.debounce(t.quota,w.Magics.Time30s),t.moveOrDeleteResponseHelper=b.a.bind(t.moveOrDeleteResponseHelper,Object(i.a)(t)),t.messagesMoveTrigger=b.a.debounce(t.messagesMoveTrigger,500),r()((function(){return R.a("interval.30s")}),w.Magics.Time30s),r()((function(){return R.a("interval.1m")}),w.Magics.Time1m),r()((function(){return R.a("interval.2m")}),w.Magics.Time2m),r()((function(){return R.a("interval.3m")}),w.Magics.Time3m),r()((function(){return R.a("interval.5m")}),w.Magics.Time5m),r()((function(){return R.a("interval.10m")}),w.Magics.Time10m),r()((function(){return R.a("interval.15m")}),w.Magics.Time15m),r()((function(){return R.a("interval.20m")}),w.Magics.Time20m),c()((function(){return r()((function(){return R.a("interval.2m-after5m")}),w.Magics.Time2m)}),w.Magics.Time5m),c()((function(){return r()((function(){return R.a("interval.5m-after5m")}),w.Magics.Time5m)}),w.Magics.Time5m),c()((function(){return r()((function(){return R.a("interval.10m-after5m")}),w.Magics.Time10m)}),w.Magics.Time5m),v.a.wakeUp((function(){Object(q.a)()&&t.reload(),z.a.jsVersion((function(e,n){w.StorageResultType.Success===e&&n&&!n.Result&&t.reload()}),K.appSettingsGet("version"))}),{},w.Magics.Time60m),Object(q.a)()&&t.reload(),K.settingsGet("UserBackgroundHash")&&b.a.delay((function(){v()("#rl-bg").attr("style","background-image: none !important;").backstretch(Object(F.J)(K.settingsGet("UserBackgroundHash")),{fade:T.bAnimationSupported?w.Magics.Time1s:0,centeredX:!0,centeredY:!0}).removeAttr("style")}),w.Magics.Time1s),t.socialUsers=b.a.bind(t.socialUsers,Object(i.a)(t)),t}Object(o.a)(t,e);var a=t.prototype;return a.remote=function(){return z.a},a.reload=function(){h.a.parent&&K.appSettingsGet("inIframe")?h.a.parent.location.reload():h.a.location.reload()},a.reloadFlagsCurrentMessageListAndMessageFromCache=function(){b.a.each(G.a.messageList(),(function(e){Object(j.n)(e)})),Object(j.n)(G.a.message())},a.reloadMessageList=function(e,t){void 0===e&&(e=!1),void 0===t&&(t=!1);var n=(G.a.messageListPage()-1)*P.a.messagesPerPage();t&&Object(j.q)(U.a.currentFolderFullNameRaw(),""),e&&(G.a.messageListPage(1),G.a.messageListPageBeforeThread(1),n=0,Object(ne.setHash)(Object(F.o)(U.a.currentFolderFullNameHash(),G.a.messageListPage(),G.a.messageListSearch(),G.a.messageListThreadUid()),!0,!0)),G.a.messageListLoading(!0),z.a.messageList((function(e,t,n){w.StorageResultType.Success===e&&t&&t.Result?(G.a.messageListError(""),G.a.messageListLoading(!1),G.a.setMessageList(t,n)):w.StorageResultType.Unload===e?(G.a.messageListError(""),G.a.messageListLoading(!1)):w.StorageResultType.Abort!==e&&(G.a.messageList([]),G.a.messageListLoading(!1),G.a.messageListError(t&&t.ErrorCode?Object(N.getNotification)(t.ErrorCode):Object(N.i18n)("NOTIFICATIONS/CANT_GET_MESSAGE_LIST")))}),U.a.currentFolderFullNameRaw(),n,P.a.messagesPerPage(),G.a.messageListSearch(),G.a.messageListThreadUid())},a.recacheInboxMessageList=function(){z.a.messageList(O.noop,Object(j.h)(),0,P.a.messagesPerPage(),"","",!0)},a.contactsSync=function(e){var t=D.a.contacts;return!(t.importing()||t.syncing()||!D.a.enableContactsSync()||!D.a.allowContactsSync())&&(t.syncing(!0),z.a.contactsSync((function(n,i){t.syncing(!1),e&&e(n,i)})),!0)},a.messagesMoveTrigger=function(){var e=this,t=U.a.trashFolder(),n=U.a.spamFolder();b.a.each(this.moveCache,(function(i){var o=n===i.To,a=t===i.To,r=!o&&n===i.From&&Object(j.h)()===i.To;z.a.messagesMove(e.moveOrDeleteResponseHelper,i.From,i.To,i.Uid,o?"SPAM":r?"HAM":"",o||a)})),this.moveCache={}},a.messagesMoveHelper=function(e,t,n){var i="$$"+e+"$$"+t+"$$";this.moveCache[i]||(this.moveCache[i]={From:e,To:t,Uid:[]}),this.moveCache[i].Uid=b.a.union(this.moveCache[i].Uid,n),this.messagesMoveTrigger()},a.messagesCopyHelper=function(e,t,n){z.a.messagesCopy(this.moveOrDeleteResponseHelper,e,t,n)},a.messagesDeleteHelper=function(e,t){z.a.messagesDelete(this.moveOrDeleteResponseHelper,e,t)},a.moveOrDeleteResponseHelper=function(e,t){w.StorageResultType.Success===e&&U.a.currentFolder()&&(t&&Object(O.isArray)(t.Result)&&2===t.Result.length?Object(j.q)(t.Result[0],t.Result[1]):(Object(j.q)(U.a.currentFolderFullNameRaw(),""),t&&-1<Object(O.inArray)(t.ErrorCode,[w.Notification.CantMoveMessage,w.Notification.CantCopyMessage])&&h.a.alert(Object(N.getNotification)(t.ErrorCode))),this.reloadMessageList(0===G.a.messageList().length),this.quotaDebounce())},a.deleteMessagesFromFolderWithoutCheck=function(e,t){this.messagesDeleteHelper(e,t),G.a.removeMessagesFromList(e,t)},a.deleteMessagesFromFolder=function(e,t,i,o){var a=this,r=null,s=null;switch(e){case w.FolderType.Spam:r=Object(j.e)(U.a.spamFolder()),s=w.SetSystemFoldersNotification.Spam;break;case w.FolderType.NotSpam:r=Object(j.e)(Object(j.h)());break;case w.FolderType.Trash:r=Object(j.e)(U.a.trashFolder()),s=w.SetSystemFoldersNotification.Trash;break;case w.FolderType.Archive:r=Object(j.e)(U.a.archiveFolder()),s=w.SetSystemFoldersNotification.Archive}(o=!!Object(O.isUnd)(o)||!!o)&&(w.FolderType.Spam===e&&C.r===U.a.spamFolder()||w.FolderType.Trash===e&&C.r===U.a.trashFolder()||w.FolderType.Archive===e&&C.r===U.a.archiveFolder())&&(o=!1),!r&&o?Object(ne.showScreenPopup)(n(317),[s]):o&&(w.FolderType.Trash!==e||t!==U.a.spamFolder()&&t!==U.a.trashFolder())?r&&(this.messagesMoveHelper(t,r.fullNameRaw,i),G.a.removeMessagesFromList(t,i,r.fullNameRaw)):Object(ne.showScreenPopup)(n(239),[Object(N.i18n)("POPUPS_ASK/DESC_WANT_DELETE_MESSAGES"),function(){a.messagesDeleteHelper(t,i),G.a.removeMessagesFromList(t,i)}])},a.moveMessagesToFolder=function(e,t,n,i){if(e!==n&&Object(O.isArray)(t)&&0<t.length){var o=Object(j.e)(e),a=Object(j.e)(n);if(o&&a)return!Object(O.isUnd)(i)&&i?this.messagesCopyHelper(o.fullNameRaw,a.fullNameRaw,t):this.messagesMoveHelper(o.fullNameRaw,a.fullNameRaw,t),G.a.removeMessagesFromList(o.fullNameRaw,t,a.fullNameRaw,i),!0}return!1},a.foldersReload=function(e){void 0===e&&(e=null);var t=W.a.foldersReload(U.a.foldersLoading);e&&t.then((function(e){return!!e})).then(e).catch((function(){b.a.delay((function(){e&&e(!1)}),1)}))},a.foldersPromisesActionHelper=function(e,t){W.a.abort("Folders").fastResolve(!0).then((function(){return e})).then((function(){W.a.foldersReloadWithTimeout(U.a.foldersLoading)}),(function(e){U.a.folderList.error(Object(N.getNotification)(e,"",t)),W.a.foldersReloadWithTimeout(U.a.foldersLoading)}))},a.reloadOpenPgpKeys=function(){if(H.a.capaOpenPGP()){var e=[],t=new Y.EmailModel,n=H.a.openpgpKeyring,i=n?n.getAllKeys():[];b.a.each(i,(function(n,i){if(n&&n.primaryKey){var o=[],a=[],r=n.getPrimaryUser(),s=r&&r.user?r.user.userId.userid:n.users&&n.users[0]?n.users[0].userId.userid:"";n.users&&b.a.each(n.users,(function(e){e.userId&&(t.clear(),t.parse(e.userId.userid),t.validate()&&(o.push(t.email),a.push(e.userId.userid)))})),o.length&&e.push(new Z.a(i,n.primaryKey.getFingerprint(),n.primaryKey.getKeyId().toHex().toLowerCase(),b.a.uniq(b.a.compact(u()(b.a).call(b.a,n.getKeyIds(),(function(e){return e&&e.toHex?e.toHex():null})))),a,o,n.isPrivate(),n.armor(),s))}})),Object(O.delegateRunOnDestroy)(H.a.openpgpkeys()),H.a.openpgpkeys(e)}},a.accountsCounts=function(){return!1},a.accountsAndIdentities=function(e){var t=this;M.a.accounts.loading(!0),k.a.identities.loading(!0),z.a.accountsAndIdentities((function(n,i){if(M.a.accounts.loading(!1),k.a.identities.loading(!1),w.StorageResultType.Success===n&&i.Result){var o={},a=M.a.email(),r=K.settingsGet("ParentEmail");r=""===r?a:r,Object(O.isArray)(i.Result.Accounts)&&(b.a.each(M.a.accounts(),(function(e){o[e.email]=e.count()})),Object(O.delegateRunOnDestroy)(M.a.accounts()),M.a.accounts(u()(b.a).call(b.a,i.Result.Accounts,(function(e){return new $.a(e,e!==r,o[e]||0)})))),!Object(O.isUnd)(e)&&e&&(b.a.delay((function(){return t.accountsCounts()}),5e3),R.b("interval.10m-after5m",(function(){return t.accountsCounts()}))),Object(O.isArray)(i.Result.Identities)&&(Object(O.delegateRunOnDestroy)(k.a.identities()),k.a.identities(u()(b.a).call(b.a,i.Result.Identities,(function(e){var t=Object(O.pString)(e.Id),n=Object(O.pString)(e.Email),i=new J.a(t,n);return i.name(Object(O.pString)(e.Name)),i.replyTo(Object(O.pString)(e.ReplyTo)),i.bcc(Object(O.pString)(e.Bcc)),i.signature(Object(O.pString)(e.Signature)),i.signatureInsertBefore(!!e.SignatureInsertBefore),i}))))}}))},a.templates=function(){x.a.templates.loading(!0),z.a.templates((function(e,t){x.a.templates.loading(!1),w.StorageResultType.Success===e&&t.Result&&Object(O.isArray)(t.Result.Templates)&&(Object(O.delegateRunOnDestroy)(x.a.templates()),x.a.templates(b.a.compact(u()(b.a).call(b.a,t.Result.Templates,(function(e){var t=new X.a;return t.parse(e)?t:null})))))}))},a.quota=function(){z.a.quota((function(e,t){w.StorageResultType.Success===e&&t&&t.Result&&Object(O.isArray)(t.Result)&&1<t.Result.length&&Object(O.isPosNumeric)(t.Result[0],!0)&&Object(O.isPosNumeric)(t.Result[1],!0)&&B.a.populateData(Object(O.pInt)(t.Result[1]),Object(O.pInt)(t.Result[0]))}))},a.folderInformation=function(e,t){var n=this;""!==Object(O.trim)(e)&&z.a.folderInformation((function(e,t){if(w.StorageResultType.Success===e&&t&&t.Result&&t.Result.Hash&&t.Result.Folder){var i="",o=!1,a=!1,r=Object(j.e)(t.Result.Folder);if(r){if(r.interval=Object(E.momentNowUnix)(),t.Result.Hash&&Object(j.q)(t.Result.Folder,t.Result.Hash),Object(O.isNormal)(t.Result.MessageCount)&&r.messageCountAll(t.Result.MessageCount),Object(O.isNormal)(t.Result.MessageUnseenCount)&&(Object(O.pInt)(r.messageCountUnread())!==Object(O.pInt)(t.Result.MessageUnseenCount)&&(a=!0),r.messageCountUnread(t.Result.MessageUnseenCount)),a&&Object(j.c)(r.fullNameRaw),t.Result.Flags){for(i in t.Result.Flags)if(Object(O.has)(t.Result.Flags,i)){o=!0;var s=t.Result.Flags[i];Object(j.v)(r.fullNameRaw,i.toString(),[!s.IsSeen,!!s.IsFlagged,!!s.IsAnswered,!!s.IsForwarded,!!s.IsReadReceipt])}o&&n.reloadFlagsCurrentMessageListAndMessageFromCache()}G.a.initUidNextAndNewMessages(r.fullNameRaw,t.Result.UidNext,t.Result.NewMessages);var c=Object(j.g)(t.Result.Folder);(t.Result.Hash!==c||""===c||a)&&(r.fullNameRaw===U.a.currentFolderFullNameRaw()?n.reloadMessageList():Object(j.h)()===r.fullNameRaw&&n.recacheInboxMessageList())}}}),e,t)},a.folderInformationMultiply=function(e){var t=this;void 0===e&&(e=!1);var n=U.a.getNextFolderNames();Object(O.isNonEmptyArray)(n)&&z.a.folderInformationMultiply((function(n,i){if(w.StorageResultType.Success===n&&i&&i.Result&&i.Result.List&&Object(O.isNonEmptyArray)(i.Result.List)){var o=Object(E.momentNowUnix)();b.a.each(i.Result.List,(function(e){var n=Object(j.g)(e.Folder),i=Object(j.e)(e.Folder),a=!1;if(i)if(i.interval=o,e.Hash&&Object(j.q)(e.Folder,e.Hash),Object(O.isNormal)(e.MessageCount)&&i.messageCountAll(e.MessageCount),Object(O.isNormal)(e.MessageUnseenCount)&&(Object(O.pInt)(i.messageCountUnread())!==Object(O.pInt)(e.MessageUnseenCount)&&(a=!0),i.messageCountUnread(e.MessageUnseenCount)),a&&Object(j.c)(i.fullNameRaw),e.Hash!==n||""===n)i.fullNameRaw===U.a.currentFolderFullNameRaw()&&t.reloadMessageList();else if(a&&i.fullNameRaw===U.a.currentFolderFullNameRaw()){var r=G.a.messageList();Object(O.isNonEmptyArray)(r)&&t.folderInformation(i.fullNameRaw,r)}})),e&&b.a.delay((function(){return t.folderInformationMultiply(!0)}),2e3)}}),n)},a.messageListAction=function(e,t,n){var i,o=null,a=0;if(!Object(O.isUnd)(n)&&n||(n=G.a.messageListChecked()),i=b.a.uniq(b.a.compact(u()(b.a).call(b.a,n,(function(e){return e&&e.uid?e.uid:null})))),""!==e&&0<i.length){switch(t){case w.MessageSetAction.SetSeen:b.a.each(i,(function(n){a+=Object(j.w)(e,n,t)})),(o=Object(j.e)(e))&&o.messageCountUnread(o.messageCountUnread()-a),z.a.messageSetSeen(O.noop,e,i,!0);break;case w.MessageSetAction.UnsetSeen:b.a.each(i,(function(n){a+=Object(j.w)(e,n,t)})),(o=Object(j.e)(e))&&o.messageCountUnread(o.messageCountUnread()-a+i.length),z.a.messageSetSeen(O.noop,e,i,!1);break;case w.MessageSetAction.SetFlag:b.a.each(i,(function(n){Object(j.w)(e,n,t)})),z.a.messageSetFlagged(O.noop,e,i,!0);break;case w.MessageSetAction.UnsetFlag:b.a.each(i,(function(n){Object(j.w)(e,n,t)})),z.a.messageSetFlagged(O.noop,e,i,!1)}this.reloadFlagsCurrentMessageListAndMessageFromCache(),G.a.message.viewTrigger(!G.a.message.viewTrigger())}},a.googleConnect=function(){h.a.open(Object(F.B)(),"Google","left=200,top=100,width=650,height=600,menubar=no,status=no,resizable=yes,scrollbars=yes")},a.twitterConnect=function(){h.a.open(Object(F.C)(),"Twitter","left=200,top=100,width=650,height=350,menubar=no,status=no,resizable=yes,scrollbars=yes")},a.facebookConnect=function(){h.a.open(Object(F.A)(),"Facebook","left=200,top=100,width=650,height=335,menubar=no,status=no,resizable=yes,scrollbars=yes")},a.socialUsers=function(e){void 0===e&&(e=!1),!0===e&&(I.a.google.loading(!0),I.a.facebook.loading(!0),I.a.twitter.loading(!0)),z.a.socialUsers((function(e,t){w.StorageResultType.Success===e&&t&&t.Result?(I.a.google.userName(t.Result.Google||""),I.a.facebook.userName(t.Result.Facebook||""),I.a.twitter.userName(t.Result.Twitter||"")):(I.a.google.userName(""),I.a.facebook.userName(""),I.a.twitter.userName("")),I.a.google.loading(!1),I.a.facebook.loading(!1),I.a.twitter.loading(!1)}))},a.googleDisconnect=function(){I.a.google.loading(!0),z.a.googleDisconnect(this.socialUsers)},a.facebookDisconnect=function(){I.a.facebook.loading(!0),z.a.facebookDisconnect(this.socialUsers)},a.twitterDisconnect=function(){I.a.twitter.loading(!0),z.a.twitterDisconnect(this.socialUsers)},a.getAutocomplete=function(e,t){z.a.suggestions((function(e,n){w.StorageResultType.Success===e&&n&&Object(O.isArray)(n.Result)?t(b.a.compact(u()(b.a).call(b.a,n.Result,(function(e){return e&&e[0]?new Y.EmailModel(e[0],e[1]):null})))):w.StorageResultType.Abort!==e&&t([])}),e)},a.setExpandedFolder=function(e,t){var n=V.a(w.ClientSideKeyName.ExpandedFolders);Object(O.isArray)(n)||(n=[]),t?(n.push(e),n=b.a.uniq(n)):n=b.a.without(n,e),V.b(w.ClientSideKeyName.ExpandedFolders,n)},a.initHorizontalLayoutResizer=function(e){var t=null,n=null,i=function(e){e&&(t&&t.attr("style","height:"+e+"px"),n&&n.attr("style","top:"+(55+e)+"px"))},o={helper:"ui-resizable-helper-h",minHeight:200,maxHeight:500,handles:"s",create:function(e){var t;e&&e.target&&p()(t=v()(e.target)).call(t,".ui-resizable-handle").on("mousedown",(function(){T.$html.addClass("rl-resizer")})).on("mouseup",(function(){T.$html.removeClass("rl-resizer")}))},resize:b.a.debounce((function(){T.$html.addClass("rl-resizer")}),500,!0),start:function(){T.$html.addClass("rl-resizer")},stop:function(t,n){T.$html.removeClass("rl-resizer"),n&&n.size&&n.size.height&&(V.b(e,n.size.height),i(n.size.height),Object(O.windowResize)())}},a=function(a){if(a)t&&t.hasClass("ui-resizable")&&t.resizable("destroy").removeAttr("style"),n&&n.removeAttr("style");else if(T.$html.hasClass("rl-bottom-preview-pane")){t=v()(".b-message-list-wrapper"),n=v()(".b-message-view-wrapper"),t.hasClass("ui-resizable")||t.resizable(o);var r=Object(O.pInt)(V.a(e))||300;i(r>200?r:200)}};a(!1),R.b("layout",(function(e){a(w.Layout.BottomPreview!==e)}))},a.initVerticalLayoutResizer=function(e){var t=155,n=v()("#rl-left"),i=v()("#rl-right"),o=V.a(e)||null,a=function(e){e&&(Object(T.leftPanelWidth)(e),T.$html.removeClass("rl-resizer"),n.css({width:e+"px"}),i.css({left:e+"px"}))},r=function(i){if(i)n.resizable("disable"),a(60);else{n.resizable("enable");var o=Object(O.pInt)(V.a(e))||t;a(o>t?o:t)}},s=b.a.debounce((function(){T.$html.addClass("rl-resizer")}),500,!0);null!==o&&a(o>t?o:t),n.resizable({helper:"ui-resizable-helper-w",minWidth:t,maxWidth:w.Magics.Size350px,handles:"e",create:function(e){var t;e&&e.target&&p()(t=v()(e.target)).call(t,".ui-resizable-handle").on("mousedown",(function(){T.$html.addClass("rl-resizer")})).on("mouseup",(function(){T.$html.removeClass("rl-resizer")}))},resize:s,start:function(){T.$html.addClass("rl-resizer")},stop:function(t,o){T.$html.removeClass("rl-resizer"),o&&o.size&&o.size.width&&(V.b(e,o.size.width),Object(T.leftPanelWidth)(o.size.width),i.css({left:o.size.width+"px"}),n.css({position:"",top:"",left:"",height:""}))}}),R.b("left-panel.off",(function(){r(!0)})),R.b("left-panel.on",(function(){r(!1)}))},a.logout=function(){var e=this;z.a.logout((function(){e.loginAndLogoutReload(!1,!0,K.settingsGet("ParentEmail")&&0<K.settingsGet("ParentEmail").length)}))},a.bootstartTwoFactorScreen=function(){Object(ne.showScreenPopup)(n(431),[!0])},a.bootstartWelcomePopup=function(e){Object(ne.showScreenPopup)(n(560),[e])},a.bootstartLoginScreen=function(){T.$html.removeClass("rl-user-auth").addClass("rl-user-no-auth");var e=Object(O.pString)(K.appSettingsGet("customLoginLink"));e?(Object(ne.routeOff)(),Object(ne.setHash)(Object(F.w)(),!0),Object(ne.routeOff)(),b.a.defer((function(){h.a.location.href=e}))):(Object(ne.startScreens)([Q.a]),Object(A.f)("rl-start-login-screens"),R.a("rl.bootstart-login-screens"))},a.bootend=function(){S.a&&S.a.set(100).end(),Object(ne.hideLoading)()},a.bootstart=function(){var t=this;e.prototype.bootstart.call(this),L.a.populate(),P.a.populate(),_.a.populate(),M.a.populate(),D.a.populate();var i=Object(O.pInt)(K.settingsGet("ContactsSyncInterval")),o=K.appSettingsGet("jsHash"),a=Object(O.pString)(K.settingsGet("StartupUrl")),s=K.settingsGet("AllowGoogleSocial"),c=K.settingsGet("AllowFacebookSocial"),l=K.settingsGet("AllowTwitterSocial");S.a&&S.a.set(90),T.leftPanelDisabled.subscribe((function(e){R.a("left-panel."+(e?"off":"on"))})),this.setWindowTitle(""),K.settingsGet("Auth")?(T.$html.addClass("rl-user-auth"),K.capa(w.Capa.TwoFactor)&&K.capa(w.Capa.TwoFactorForce)&&K.settingsGet("RequireTwoFactor")?(this.bootend(),this.bootstartTwoFactorScreen()):(this.setWindowTitle(Object(N.i18n)("TITLES/LOADING")),this.foldersReload((function(e){if(t.bootend(),e){if(""!==a&&(Object(ne.routeOff)(),Object(ne.setHash)(Object(F.w)(a),!0),Object(ne.routeOn)()),O.jassl&&h.a.crypto&&h.a.crypto.getRandomValues&&K.capa(w.Capa.OpenPGP)){var o=function(e){if(H.a.openpgp=e,h.a.Worker)try{H.a.openpgp.initWorker({path:Object(F.t)()})}catch(e){Object(O.log)(e)}H.a.openpgpKeyring=new e.Keyring,H.a.capaOpenPGP(!0),R.a("openpgp.init"),t.reloadOpenPgpKeys()};h.a.openpgp?o(h.a.openpgp):Object(O.jassl)(Object(F.s)()).then((function(){h.a.openpgp&&o(h.a.openpgp)}))}else H.a.capaOpenPGP(!1);Object(ne.startScreens)([ee.a,K.capa(w.Capa.Settings)?te.a:null]),(s||c||l)&&t.socialUsers(!0),R.b("interval.2m",(function(){return t.folderInformation(Object(j.h)())})),R.b("interval.3m",(function(){var e=U.a.currentFolderFullNameRaw();Object(j.h)()!==e&&t.folderInformation(e)})),R.b("interval.2m-after5m",(function(){return t.folderInformationMultiply()})),R.b("interval.15m",(function(){return t.quota()})),R.b("interval.20m",(function(){return t.foldersReload()})),i=320>=(i=5<=i?i:20)?i:320,b.a.delay((function(){return t.contactsSync()}),w.Magics.Time10s),b.a.delay((function(){return t.folderInformationMultiply(!0)}),w.Magics.Time2s),r()((function(){return t.contactsSync()}),6e4*i+5e3),t.accountsAndIdentities(!0),b.a.delay((function(){var e=U.a.currentFolderFullNameRaw();Object(j.h)()!==e&&t.folderInformation(e)}),1e3),b.a.delay((function(){return t.quota()}),5e3),b.a.delay((function(){return z.a.appDelayStart(O.noop)}),35e3),R.b("rl.auto-logout",(function(){return t.logout()})),Object(A.f)("rl-start-user-screens"),R.a("rl.bootstart-user-screens"),K.settingsGet("WelcomePageUrl")&&b.a.delay((function(){return t.bootstartWelcomePopup(K.settingsGet("WelcomePageUrl"))}),1e3),K.settingsGet("AccountSignMe")&&h.a.navigator.registerProtocolHandler&&K.capa(w.Capa.Composer)&&b.a.delay((function(){try{h.a.navigator.registerProtocolHandler("mailto",h.a.location.protocol+"//"+h.a.location.host+h.a.location.pathname+"?mailto&to=%s",""+(K.settingsGet("Title")||"RainLoop"))}catch(e){}K.settingsGet("MailToEmail")&&Object(O.mailToHelper)(K.settingsGet("MailToEmail"),n(133))}),500),T.bMobileDevice||b.a.defer((function(){return t.initVerticalLayoutResizer(w.ClientSideKeyName.FolderListSize)}))}else t.logout()})))):(this.bootend(),this.bootstartLoginScreen()),s&&(h.a["rl_"+o+"_google_service"]=function(){I.a.google.loading(!0),t.socialUsers()}),c&&(h.a["rl_"+o+"_facebook_service"]=function(){I.a.facebook.loading(!0),t.socialUsers()}),l&&(h.a["rl_"+o+"_twitter_service"]=function(){I.a.twitter.loading(!0),t.socialUsers()}),R.b("interval.1m",(function(){return Object(E.reload)()})),Object(A.f)("rl-start-screens"),R.a("rl.bootstart-end")},t}(n(306).a);t.default=new ie},,,function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n(45),n(59);var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",o={urlsafe_encode:function(e){return o.encode(e).replace(/[+]/g,"-").replace(/[\/]/g,"_").replace(/[=]/g,"")},encode:function(e){var t,n,a,r,s,c,l,u="",d=0;for(e=o._utf8_encode(e);d<e.length;)r=(t=e.charCodeAt(d++))>>2,s=(3&t)<<4|(n=e.charCodeAt(d++))>>4,c=(15&n)<<2|(a=e.charCodeAt(d++))>>6,l=63&a,isNaN(n)?c=l=64:isNaN(a)&&(l=64),u=u+i.charAt(r)+i.charAt(s)+i.charAt(c)+i.charAt(l);return u},decode:function(e){var t,n,a,r,s,c,l="",u=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");u<e.length;)t=i.indexOf(e.charAt(u++))<<2|(r=i.indexOf(e.charAt(u++)))>>4,n=(15&r)<<4|(s=i.indexOf(e.charAt(u++)))>>2,a=(3&s)<<6|(c=i.indexOf(e.charAt(u++))),l+=String.fromCharCode(t),64!==s&&(l+=String.fromCharCode(n)),64!==c&&(l+=String.fromCharCode(a));return o._utf8_decode(l)},_utf8_encode:function(e){for(var t="",n=0,i=(e=e.replace(/\r\n/g,"\n")).length,o=0;n<i;n++)(o=e.charCodeAt(n))<128?t+=String.fromCharCode(o):o>127&&o<2048?(t+=String.fromCharCode(o>>6|192),t+=String.fromCharCode(63&o|128)):(t+=String.fromCharCode(o>>12|224),t+=String.fromCharCode(o>>6&63|128),t+=String.fromCharCode(63&o|128));return t},_utf8_decode:function(e){for(var t="",n=0,i=0,o=0,a=0;n<e.length;)(i=e.charCodeAt(n))<128?(t+=String.fromCharCode(i),n++):i>191&&i<224?(o=e.charCodeAt(n+1),t+=String.fromCharCode((31&i)<<6|63&o),n+=2):(o=e.charCodeAt(n+1),a=e.charCodeAt(n+2),t+=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a),n+=3);return t}},a=(o.decode,o.encode,o.urlsafe_encode)},function(e,t,n){"use strict";var i=n(10),o=n(3),a=n.n(o),r=n(24),s=n(2),c=n(0),l=n(14),u=n(5),d=n(60),p=n(27),f=n(11),h=n(16),m=n(441),b=function(e){function t(){return e.apply(this,arguments)||this}Object(i.a)(t,e);var n=t.prototype;return n.isFolderExpanded=function(e,t){return t&&Object(s.isArray)(t)&&-1!==a.a.indexOf(t,e)},n.normalizeFolder=function(e){return""===e||r.r===e||null!==l.e(e)?e:""},n.folderResponseParseRec=function(e,t,n){var i=this,o=f.a.displaySpecSetting(),r=[];return a.a.each(t,(function(t){if(t){var a=l.e(t.FullNameRaw);a||(a=m.a.newInstanceFromJson(t))&&(l.r(t.FullNameRaw,a),l.p(a.fullNameHash,t.FullNameRaw,a)),a&&(o?a.checkable(!!t.Checkable):a.checkable(!0),a.collapsed(!i.isFolderExpanded(a.fullNameHash,n)),t.Extended&&(t.Extended.Hash&&l.q(a.fullNameRaw,t.Extended.Hash),Object(s.isNormal)(t.Extended.MessageCount)&&a.messageCountAll(t.Extended.MessageCount),Object(s.isNormal)(t.Extended.MessageUnseenCount)&&a.messageCountUnread(t.Extended.MessageUnseenCount)),t.SubFolders&&"Collection/FolderCollection"===t.SubFolders["@Object"]&&t.SubFolders["@Collection"]&&Object(s.isArray)(t.SubFolders["@Collection"])&&a.subFolders(i.folderResponseParseRec(e,t.SubFolders["@Collection"],n)),r.push(a))}})),r},n.foldersList=function(e){if(e&&"Collection/FolderCollection"===e["@Object"]&&e["@Collection"]&&Object(s.isArray)(e["@Collection"])){var t=d.a(c.ClientSideKeyName.ExpandedFolders),n=Object(s.pInt)(e.CountRec),i=Object(s.pInt)(u.appSettingsGet("folderSpecLimit"));i=100<i?100:10>i?10:i,f.a.displaySpecSetting(0>=n||i<n),f.a.folderList(this.folderResponseParseRec(Object(s.isUnd)(e.Namespace)?"":e.Namespace,e["@Collection"],t))}},n.foldersAdditionalParameters=function(e){if(e&&e&&"Collection/FolderCollection"===e["@Object"]&&e["@Collection"]&&Object(s.isArray)(e["@Collection"])){Object(s.isUnd)(e.Namespace)||(f.a.namespace=e.Namespace),p.a.threadsAllowed(!!u.appSettingsGet("useImapThread")&&e.IsThreadsSupported&&!0),f.a.folderList.optimized(!!e.Optimized);var t=!1;e.SystemFolders&&""==""+u.settingsGet("SentFolder")+u.settingsGet("DraftFolder")+u.settingsGet("SpamFolder")+u.settingsGet("TrashFolder")+u.settingsGet("ArchiveFolder")+u.settingsGet("NullFolder")&&(u.settingsSet("SentFolder",e.SystemFolders[c.ServerFolderType.SENT]||null),u.settingsSet("DraftFolder",e.SystemFolders[c.ServerFolderType.DRAFTS]||null),u.settingsSet("SpamFolder",e.SystemFolders[c.ServerFolderType.JUNK]||null),u.settingsSet("TrashFolder",e.SystemFolders[c.ServerFolderType.TRASH]||null),u.settingsSet("ArchiveFolder",e.SystemFolders[c.ServerFolderType.ALL]||null),t=!0),f.a.sentFolder(this.normalizeFolder(u.settingsGet("SentFolder"))),f.a.draftFolder(this.normalizeFolder(u.settingsGet("DraftFolder"))),f.a.spamFolder(this.normalizeFolder(u.settingsGet("SpamFolder"))),f.a.trashFolder(this.normalizeFolder(u.settingsGet("TrashFolder"))),f.a.archiveFolder(this.normalizeFolder(u.settingsGet("ArchiveFolder"))),t&&h.a.saveSystemFolders(s.noop,{SentFolder:f.a.sentFolder(),DraftFolder:f.a.draftFolder(),SpamFolder:f.a.spamFolder(),TrashFolder:f.a.trashFolder(),ArchiveFolder:f.a.archiveFolder(),NullFolder:"NullFolder"}),d.b(c.ClientSideKeyName.FoldersLashHash,e.FoldersHash)}},t}(n(318).a);t.a=new b},function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var i=n(10),o=n(12),a=n.n(o),r=n(17),s=n.n(r),c=(n(48),n(45),n(59),n(77),n(3)),l=n.n(c),u=n(1),d=n(0),p=n(2),f=n(9),h=n(14),m=n(46),b=n(409),g=function(e){function t(){var t;(t=e.call(this,"FilterModel")||this).enabled=u.a.observable(!0),t.id="",t.name=u.a.observable(""),t.name.error=u.a.observable(!1),t.name.focused=u.a.observable(!1),t.conditions=u.a.observableArray([]),t.conditionsType=u.a.observable(d.FilterRulesType.Any),t.actionValue=u.a.observable(""),t.actionValue.error=u.a.observable(!1),t.actionValueSecond=u.a.observable(""),t.actionValueThird=u.a.observable(""),t.actionValueFourth=u.a.observable(""),t.actionValueFourth.error=u.a.observable(!1),t.actionMarkAsRead=u.a.observable(!1),t.actionKeep=u.a.observable(!0),t.actionNoStop=u.a.observable(!1),t.actionType=u.a.observable(d.FiltersAction.MoveTo),t.actionType.subscribe((function(){t.actionValue(""),t.actionValue.error(!1),t.actionValueSecond(""),t.actionValueThird(""),t.actionValueFourth(""),t.actionValueFourth.error(!1)}));return t.nameSub=u.a.computed((function(){var e,n,i="",o=t.actionValue();switch(t.actionType()){case d.FiltersAction.MoveTo:i=Object(f.i18n)("SETTINGS_FILTERS/SUBNAME_MOVE_TO",{FOLDER:(e=o,n=Object(h.e)(e),n?n.fullName.replace("."===n.delimiter?/\./:/[\\/]+/," / "):e)});break;case d.FiltersAction.Forward:i=Object(f.i18n)("SETTINGS_FILTERS/SUBNAME_FORWARD_TO",{EMAIL:o});break;case d.FiltersAction.Vacation:i=Object(f.i18n)("SETTINGS_FILTERS/SUBNAME_VACATION_MESSAGE");break;case d.FiltersAction.Reject:i=Object(f.i18n)("SETTINGS_FILTERS/SUBNAME_REJECT");break;case d.FiltersAction.Discard:i=Object(f.i18n)("SETTINGS_FILTERS/SUBNAME_DISCARD")}return i?"("+i+")":""})),t.actionTemplate=u.a.computed((function(){var e="";switch(t.actionType()){case d.FiltersAction.Forward:e="SettingsFiltersActionForward";break;case d.FiltersAction.Vacation:e="SettingsFiltersActionVacation";break;case d.FiltersAction.Reject:e="SettingsFiltersActionReject";break;case d.FiltersAction.None:e="SettingsFiltersActionNone";break;case d.FiltersAction.Discard:e="SettingsFiltersActionDiscard";break;case d.FiltersAction.MoveTo:default:e="SettingsFiltersActionMoveToFolder"}return e})),t.regDisposables(t.conditions.subscribe(p.windowResizeCallback)),t.regDisposables(t.name.subscribe((function(e){t.name.error(""===e)}))),t.regDisposables(t.actionValue.subscribe((function(e){t.actionValue.error(""===e)}))),t.regDisposables([t.actionNoStop,t.actionTemplate]),t.deleteAccess=u.a.observable(!1),t.canBeDeleted=u.a.observable(!0),t}Object(i.a)(t,e);var n=t.prototype;return n.generateID=function(){this.id=Object(p.fakeMd5)()},n.verify=function(){return""===this.name()?(this.name.error(!0),!1):!(0<this.conditions().length&&a()(l.a).call(l.a,this.conditions(),(function(e){return e&&!e.verify()})))&&(""===this.actionValue()&&-1<Object(p.inArray)(this.actionType(),[d.FiltersAction.MoveTo,d.FiltersAction.Forward,d.FiltersAction.Reject,d.FiltersAction.Vacation])||d.FiltersAction.Forward===this.actionType()&&-1===this.actionValue().indexOf("@")?(this.actionValue.error(!0),!1):d.FiltersAction.Vacation===this.actionType()&&""!==this.actionValueFourth()&&-1===this.actionValueFourth().indexOf("@")?(this.actionValueFourth.error(!0),!1):(this.name.error(!1),this.actionValue.error(!1),!0))},n.toJson=function(){return{ID:this.id,Enabled:this.enabled()?"1":"0",Name:this.name(),ConditionsType:this.conditionsType(),Conditions:s()(l.a).call(l.a,this.conditions(),(function(e){return e.toJson()})),ActionValue:this.actionValue(),ActionValueSecond:this.actionValueSecond(),ActionValueThird:this.actionValueThird(),ActionValueFourth:this.actionValueFourth(),ActionType:this.actionType(),Stop:this.actionNoStop()?"0":"1",Keep:this.actionKeep()?"1":"0",MarkAsRead:this.actionMarkAsRead()?"1":"0"}},n.addCondition=function(){this.conditions.push(new b.a)},n.removeCondition=function(e){this.conditions.remove(e),Object(p.delegateRunOnDestroy)(e)},n.setRecipients=function(){this.actionValueFourth(m.a.accountsEmails().join(", "))},n.parse=function(e){var t=!1;return e&&"Object/Filter"===e["@Object"]&&(this.id=Object(p.pString)(e.ID),this.name(Object(p.pString)(e.Name)),this.enabled(!!e.Enabled),this.conditionsType(Object(p.pString)(e.ConditionsType)),this.conditions([]),Object(p.isNonEmptyArray)(e.Conditions)&&this.conditions(l.a.compact(s()(l.a).call(l.a,e.Conditions,(function(e){var t=new b.a;return t&&t.parse(e)?t:null})))),this.actionType(Object(p.pString)(e.ActionType)),this.actionValue(Object(p.pString)(e.ActionValue)),this.actionValueSecond(Object(p.pString)(e.ActionValueSecond)),this.actionValueThird(Object(p.pString)(e.ActionValueThird)),this.actionValueFourth(Object(p.pString)(e.ActionValueFourth)),this.actionNoStop(!e.Stop),this.actionKeep(!!e.Keep),this.actionMarkAsRead(!!e.MarkAsRead),t=!0),t},n.cloneSelf=function(){var e=new t;return e.id=this.id,e.enabled(this.enabled()),e.name(this.name()),e.name.error(this.name.error()),e.conditionsType(this.conditionsType()),e.actionMarkAsRead(this.actionMarkAsRead()),e.actionType(this.actionType()),e.actionValue(this.actionValue()),e.actionValue.error(this.actionValue.error()),e.actionValueSecond(this.actionValueSecond()),e.actionValueThird(this.actionValueThird()),e.actionValueFourth(this.actionValueFourth()),e.actionKeep(this.actionKeep()),e.actionNoStop(this.actionNoStop()),e.conditions(s()(l.a).call(l.a,this.conditions(),(function(e){return e.cloneSelf()}))),e},t}(n(67).a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n(29),o=n(10),a=n(1),r=n(0),s=n(2),c=function(e){function t(){var t;return(t=e.call(this,"FilterConditionModel")||this).field=a.a.observable(r.FilterConditionField.From),t.type=a.a.observable(r.FilterConditionType.Contains),t.value=a.a.observable(""),t.value.error=a.a.observable(!1),t.valueSecond=a.a.observable(""),t.valueSecond.error=a.a.observable(!1),t.template=a.a.computed((function(){var e="";switch(t.field()){case r.FilterConditionField.Size:e="SettingsFiltersConditionSize";break;case r.FilterConditionField.Header:e="SettingsFiltersConditionMore";break;default:e="SettingsFiltersConditionDefault"}return e}),Object(i.a)(t)),t.field.subscribe((function(){t.value(""),t.valueSecond("")})),t.regDisposables([t.template]),t}Object(o.a)(t,e);var n=t.prototype;return n.verify=function(){return""===this.value()?(this.value.error(!0),!1):r.FilterConditionField.Header!==this.field()||""!==this.valueSecond()||(this.valueSecond.error(!0),!1)},n.parse=function(e){return!!(e&&e.Field&&e.Type)&&(this.field(Object(s.pString)(e.Field)),this.type(Object(s.pString)(e.Type)),this.value(Object(s.pString)(e.Value)),this.valueSecond(Object(s.pString)(e.ValueSecond)),!0)},n.toJson=function(){return{Field:this.field(),Type:this.type(),Value:this.value(),ValueSecond:this.valueSecond()}},n.cloneSelf=function(){var e=new t;return e.field(this.field()),e.type(this.type()),e.value(this.value()),e.valueSecond(this.valueSecond()),e},t}(n(67).a)},function(e,t){e.exports=window.qr},,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t),n.d(t,"KeyboardShortcutsHelpPopupView",(function(){return b})),n.d(t,"default",(function(){return b}));var i,o=n(10),a=n(12),r=n.n(a),s=n(28),c=n.n(s),l=n(3),u=n.n(l),d=n(20),p=n.n(d),f=n(0),h=n(7),m=n(25),b=Object(h.popup)({name:"View/Popup/KeyboardShortcutsHelp",templateID:"PopupsKeyboardShortcutsHelp"})(i=function(e){function t(){var t;return(t=e.call(this)||this).sDefaultKeyScope=f.KeyState.PopupKeyboardShortcutsHelp,t}return Object(o.a)(t,e),t.prototype.onBuild=function(e){p()("tab, shift+tab, left, right",f.KeyState.PopupKeyboardShortcutsHelp,u.a.throttle((function(t,n){if(t&&n){var i,o=r()(e).call(e,".nav.nav-tabs > li"),a=n&&("tab"===n.shortcut||"right"===n.shortcut),s=o.index(c()(o).call(o,".active"));return!a&&0<s?s-=1:a&&s<o.length-1?s+=1:s=a?0:o.length-1,r()(i=o.eq(s)).call(i,'a[data-toggle="tab"]').tab("show"),!1}return!0}),f.Magics.Time100ms))},t}(m.a))||i},function(e,t,n){"use strict";n.r(t),n.d(t,"ContactsPopupView",(function(){return J})),n.d(t,"default",(function(){return J}));var i,o,a,r,s,c,l,u,d,p=n(10),f=n(18),h=n(28),m=n.n(h),b=n(12),g=n.n(b),v=n(17),y=n.n(v),S=n(19),O=n.n(S),w=(n(45),n(316),n(77),n(4)),T=n.n(w),C=n(3),A=n.n(C),E=n(8),j=n.n(E),F=n(1),R=n(20),N=n.n(R),I=n(206),L=n.n(I),P=n(0),_=n(2),M=n(24),D=n(6),k=n(320),x=n(15),U=n(9),H=n(35),G=n(104),B=n(16),V=n(5),K=n(83),q=n(452),z=n(311),W=n(21),Y=n(7),$=n(25),J=(i=Object(Y.popup)({name:"View/Popup/Contacts",templateID:"PopupsContacts"}),o=Object(Y.command)(),a=Object(Y.command)((function(e){return 0<e.contactsCheckedOrSelected().length})),r=Object(Y.command)((function(e){return 0<e.contactsCheckedOrSelected().length})),s=Object(Y.command)(),c=Object(Y.command)((function(e){var t=e.viewHasNonEmptyRequiredProperties(),n=e.viewReadOnly();return!e.viewSaving()&&t&&!n})),l=Object(Y.command)((function(e){return!e.contacts.syncing()&&!e.contacts.importing()})),i((d=function(e){function t(){var t,n=function(e){e&&0<e.length&&(t.viewProperties.removeAll(e),Object(_.delegateRunOnDestroy)(e))};(t=e.call(this)||this).bBackToCompose=!1,t.sLastComposeFocusedField="",t.allowContactsSync=G.a.allowContactsSync,t.enableContactsSync=G.a.enableContactsSync,t.allowExport=!D.bMobileDevice,t.search=F.a.observable(""),t.contactsCount=F.a.observable(0),t.contacts=G.a.contacts,t.currentContact=F.a.observable(null),t.importUploaderButton=F.a.observable(null),t.contactsPage=F.a.observable(1),t.contactsPageCount=F.a.computed((function(){var e=T.a.Math.ceil(t.contactsCount()/M.c);return 0>=e?1:e})),t.contactsPagenator=F.a.computed(Object(_.computedPagenatorHelper)(t.contactsPage,t.contactsPageCount)),t.emptySelection=F.a.observable(!0),t.viewClearSearch=F.a.observable(!1),t.viewID=F.a.observable(""),t.viewReadOnly=F.a.observable(!1),t.viewProperties=F.a.observableArray([]),t.viewSaveTrigger=F.a.observable(P.SaveSettingsStep.Idle),t.viewPropertiesNames=F.a.computed((function(){return m()(A.a).call(A.a,t.viewProperties(),(function(e){return-1<Object(_.inArray)(e.type(),[P.ContactPropertyType.FirstName,P.ContactPropertyType.LastName])}))})),t.viewPropertiesOther=F.a.computed((function(){return m()(A.a).call(A.a,t.viewProperties(),(function(e){return-1<Object(_.inArray)(e.type(),[P.ContactPropertyType.Nick])}))})),t.viewPropertiesEmails=F.a.computed((function(){return m()(A.a).call(A.a,t.viewProperties(),(function(e){return P.ContactPropertyType.Email===e.type()}))})),t.viewPropertiesWeb=F.a.computed((function(){return m()(A.a).call(A.a,t.viewProperties(),(function(e){return P.ContactPropertyType.Web===e.type()}))})),t.viewHasNonEmptyRequiredProperties=F.a.computed((function(){var e=t.viewPropertiesNames(),n=t.viewPropertiesEmails(),i=function(e){return""!==Object(_.trim)(e.value())};return!(!g()(A.a).call(A.a,e,i)&&!g()(A.a).call(A.a,n,i))})),t.viewPropertiesPhones=F.a.computed((function(){return m()(A.a).call(A.a,t.viewProperties(),(function(e){return P.ContactPropertyType.Phone===e.type()}))})),t.viewPropertiesEmailsNonEmpty=F.a.computed((function(){return m()(A.a).call(A.a,t.viewPropertiesNames(),(function(e){return""!==Object(_.trim)(e.value())}))}));var i=function(e){var t=e.focused();return""===Object(_.trim)(e.value())&&!t};return t.viewPropertiesEmailsEmptyAndOnFocused=F.a.computed((function(){return m()(A.a).call(A.a,t.viewPropertiesEmails(),i)})),t.viewPropertiesPhonesEmptyAndOnFocused=F.a.computed((function(){return m()(A.a).call(A.a,t.viewPropertiesPhones(),i)})),t.viewPropertiesWebEmptyAndOnFocused=F.a.computed((function(){return m()(A.a).call(A.a,t.viewPropertiesWeb(),i)})),t.viewPropertiesOtherEmptyAndOnFocused=F.a.computed((function(){return m()(A.a).call(A.a,t.viewPropertiesOther(),i)})),t.viewPropertiesEmailsEmptyAndOnFocused.subscribe(n),t.viewPropertiesPhonesEmptyAndOnFocused.subscribe(n),t.viewPropertiesWebEmptyAndOnFocused.subscribe(n),t.viewPropertiesOtherEmptyAndOnFocused.subscribe(n),t.viewSaving=F.a.observable(!1),t.useCheckboxesInList=H.a.useCheckboxesInList,t.search.subscribe((function(){t.reloadContactList()})),t.contacts.subscribe(_.windowResizeCallback),t.viewProperties.subscribe(_.windowResizeCallback),t.contactsChecked=F.a.computed((function(){return m()(A.a).call(A.a,t.contacts(),(function(e){return e.checked()}))})),t.contactsCheckedOrSelected=F.a.computed((function(){var e=t.contactsChecked(),n=t.currentContact();return A.a.union(e,n?[n]:[])})),t.contactsCheckedOrSelectedUids=F.a.computed((function(){return y()(A.a).call(A.a,t.contactsCheckedOrSelected(),(function(e){return e.idContact}))})),t.selector=new k.a(t.contacts,t.currentContact,null,".e-contact-item .actionHandle",".e-contact-item.selected",".e-contact-item .checkboxItem",".e-contact-item.focused"),t.selector.on("onItemSelect",(function(e){t.populateViewContact(e||null),e||t.emptySelection(!0)})),t.selector.on("onItemGetUid",(function(e){return e?e.generateUid():""})),t.bDropPageAfterDelete=!1,t.watchDirty=F.a.observable(!1),t.watchHash=F.a.observable(!1),t.viewHash=F.a.computed((function(){return""+y()(A.a).call(A.a,t.viewProperties(),(function(e){return e.value()})).join("")})),t.viewHash.subscribe((function(){!t.watchHash()||t.viewReadOnly()||t.watchDirty()||t.watchDirty(!0)})),t.sDefaultKeyScope=P.KeyState.ContactList,t}Object(p.a)(t,e);var i=t.prototype;return i.newCommand=function(){this.populateViewContact(null),this.currentContact(null)},i.deleteCommand=function(){this.deleteSelectedContacts(),this.emptySelection(!0)},i.newMessageCommand=function(){if(!V.capa(P.Capa.Composer))return!1;var e=[],i=null,o=null,a=null,r=this.contactsCheckedOrSelected();if(Object(_.isNonEmptyArray)(r)&&(e=y()(A.a).call(A.a,r,(function(e){if(e){var t=e.getNameAndEmailHelper(),n=t?new K.EmailModel(t[0],t[1]):null;if(n&&n.validate())return n}return null})),e=A.a.compact(e)),Object(_.isNonEmptyArray)(e)){switch(this.bBackToCompose=!1,Object(Y.hideScreenPopup)(t),this.sLastComposeFocusedField){case"cc":o=e;break;case"bcc":a=e;break;case"to":default:i=e}this.sLastComposeFocusedField="",A.a.delay((function(){Object(Y.showScreenPopup)(n(133),[P.ComposeType.Empty,null,i,o,a])}),P.Magics.Time200ms)}return!0},i.clearCommand=function(){this.search("")},i.saveCommand=function(){var e=this;this.viewSaving(!0),this.viewSaveTrigger(P.SaveSettingsStep.Animate);var t=Object(_.fakeMd5)(),n=[];A.a.each(this.viewProperties(),(function(e){e.type()&&e.type()!==P.ContactPropertyType.FullName&&""!==Object(_.trim)(e.value())&&n.push([e.type(),e.value(),e.typeStr()])})),B.a.contactSave((function(n,i){var o=!1;e.viewSaving(!1),P.StorageResultType.Success===n&&i&&i.Result&&i.Result.RequestUid===t&&0<Object(_.pInt)(i.Result.ResultID)&&(""===e.viewID()&&e.viewID(Object(_.pInt)(i.Result.ResultID)),e.reloadContactList(),o=!0),A.a.delay((function(){e.viewSaveTrigger(o?P.SaveSettingsStep.TrueResult:P.SaveSettingsStep.FalseResult)}),P.Magics.Time350ms),o&&(e.watchDirty(!1),A.a.delay((function(){e.viewSaveTrigger(P.SaveSettingsStep.Idle)}),P.Magics.Time1s))}),t,this.viewID(),n)},i.syncCommand=function(){var e=this;Object(W.a)().contactsSync((function(t,n){P.StorageResultType.Success===t&&n&&n.Result||T.a.alert(Object(U.getNotification)(n&&n.ErrorCode?n.ErrorCode:P.Notification.ContactsSyncError)),e.reloadContactList(!0)}))},i.getPropertyPlaceholder=function(e){var t="";switch(e){case P.ContactPropertyType.LastName:t="CONTACTS/PLACEHOLDER_ENTER_LAST_NAME";break;case P.ContactPropertyType.FirstName:t="CONTACTS/PLACEHOLDER_ENTER_FIRST_NAME";break;case P.ContactPropertyType.Nick:t="CONTACTS/PLACEHOLDER_ENTER_NICK_NAME"}return t},i.addNewProperty=function(e,t){this.viewProperties.push(new z.a(e,t||"","",!0,this.getPropertyPlaceholder(e)))},i.addNewOrFocusProperty=function(e,t){var n=g()(A.a).call(A.a,this.viewProperties(),(function(t){return e===t.type()}));n?n.focused(!0):this.addNewProperty(e,t)},i.addNewEmail=function(){this.addNewProperty(P.ContactPropertyType.Email,"Home")},i.addNewPhone=function(){this.addNewProperty(P.ContactPropertyType.Phone,"Mobile")},i.addNewWeb=function(){this.addNewProperty(P.ContactPropertyType.Web)},i.addNewNickname=function(){this.addNewOrFocusProperty(P.ContactPropertyType.Nick)},i.addNewNotes=function(){this.addNewOrFocusProperty(P.ContactPropertyType.Note)},i.addNewBirthday=function(){this.addNewOrFocusProperty(P.ContactPropertyType.Birthday)},i.exportVcf=function(){Object(W.a)().download(Object(x.l)())},i.exportCsv=function(){Object(W.a)().download(Object(x.k)())},i.initUploader=function(){var e=this;if(this.importUploaderButton()){var t=new L.a({action:Object(x.I)(),name:"uploader",queueSize:1,multipleSizeLimit:1,disableDragAndDrop:!0,disableMultiple:!0,disableDocumentDropPrevent:!0,clickElement:this.importUploaderButton()});t&&t.on("onStart",(function(){e.contacts.importing(!0)})).on("onComplete",(function(t,n,i){e.contacts.importing(!1),e.reloadContactList(),t&&n&&i&&i.Result||T.a.alert(Object(U.i18n)("CONTACTS/ERROR_IMPORT_FILE"))}))}},i.removeCheckedOrSelectedContactsFromList=function(){var e=this,t=this.contacts,n=this.contactsCheckedOrSelected(),i=this.currentContact(),o=this.contacts().length;0<n.length&&(A.a.each(n,(function(t){i&&i.idContact===t.idContact&&(i=null,e.currentContact(null)),t.deleted(!0),o-=1})),0>=o&&(this.bDropPageAfterDelete=!0),A.a.delay((function(){A.a.each(n,(function(e){t.remove(e),Object(_.delegateRunOnDestroy)(e)}))}),P.Magics.Time500ms))},i.deleteSelectedContacts=function(){0<this.contactsCheckedOrSelected().length&&(B.a.contactsDelete(A.a.bind(this.deleteResponse,this),this.contactsCheckedOrSelectedUids()),this.removeCheckedOrSelectedContactsFromList())},i.deleteResponse=function(e,t){var n=this;P.Magics.Time500ms<(P.StorageResultType.Success===e&&t&&t.Time?Object(_.pInt)(t.Time):0)?this.reloadContactList(this.bDropPageAfterDelete):A.a.delay((function(){n.reloadContactList(n.bDropPageAfterDelete)}),P.Magics.Time500ms)},i.removeProperty=function(e){this.viewProperties.remove(e),Object(_.delegateRunOnDestroy)(e)},i.populateViewContact=function(e){var t="",n="",i="",o=[];this.watchHash(!1),this.emptySelection(!1),this.viewReadOnly(!1),e&&(t=e.idContact,Object(_.isNonEmptyArray)(e.properties)&&A.a.each(e.properties,(function(e){e&&e[0]&&(P.ContactPropertyType.LastName===e[0]?n=e[1]:P.ContactPropertyType.FirstName===e[0]?i=e[1]:o.push(new z.a(e[0],e[2]||"",e[1])))})),this.viewReadOnly(!!e.readOnly)),o.unshift(new z.a(P.ContactPropertyType.LastName,"",n,!1,this.getPropertyPlaceholder(P.ContactPropertyType.LastName))),o.unshift(new z.a(P.ContactPropertyType.FirstName,"",i,!e,this.getPropertyPlaceholder(P.ContactPropertyType.FirstName))),this.viewID(t),Object(_.delegateRunOnDestroy)(this.viewProperties()),this.viewProperties([]),this.viewProperties(o),this.watchDirty(!1),this.watchHash(!0)},i.reloadContactList=function(e){var t=this;void 0===e&&(e=!1);var n=(this.contactsPage()-1)*M.c;this.bDropPageAfterDelete=!1,e&&(this.contactsPage(1),n=0),this.contacts.loading(!0),B.a.contacts((function(e,n){var i=0,o=[];P.StorageResultType.Success===e&&n&&n.Result&&n.Result.List&&Object(_.isNonEmptyArray)(n.Result.List)&&(o=y()(A.a).call(A.a,n.Result.List,(function(e){var t=new q.a;return t.parse(e)?t:null})),o=A.a.compact(o),i=0<(i=Object(_.pInt)(n.Result.Count))?i:0),t.contactsCount(i),Object(_.delegateRunOnDestroy)(t.contacts()),t.contacts(o),t.contacts.loading(!1),t.viewClearSearch(""!==t.search())}),n,M.c,this.search())},i.onBuild=function(e){var t=this;this.oContentVisible=j()(".b-list-content",e),this.oContentScrollable=j()(".content",this.oContentVisible),this.selector.init(this.oContentVisible,this.oContentScrollable,P.KeyState.ContactList),N()("delete",P.KeyState.ContactList,(function(){return t.deleteCommand(),!1})),N()("c, w",P.KeyState.ContactList,(function(){return t.newMessageCommand(),!1}));var n=this;e.on("click",".e-pagenator .e-page",(function(){var e=F.a.dataFor(this);e&&(n.contactsPage(Object(_.pInt)(e.value)),n.reloadContactList())})),this.initUploader()},i.onShow=function(e,t){this.bBackToCompose=!Object(_.isUnd)(e)&&!!e,this.sLastComposeFocusedField=Object(_.isUnd)(t)?"":t,Object(Y.routeOff)(),this.reloadContactList(!0)},i.onHide=function(){Object(Y.routeOn)(),this.currentContact(null),this.emptySelection(!0),this.search(""),this.contactsCount(0),Object(_.delegateRunOnDestroy)(this.contacts()),this.contacts([]),this.sLastComposeFocusedField="",this.bBackToCompose&&(this.bBackToCompose=!1,V.capa(P.Capa.Composer)&&Object(Y.showScreenPopup)(n(133)))},t}($.a),Object(f.a)(d.prototype,"newCommand",[o],O()(d.prototype,"newCommand"),d.prototype),Object(f.a)(d.prototype,"deleteCommand",[a],O()(d.prototype,"deleteCommand"),d.prototype),Object(f.a)(d.prototype,"newMessageCommand",[r],O()(d.prototype,"newMessageCommand"),d.prototype),Object(f.a)(d.prototype,"clearCommand",[s],O()(d.prototype,"clearCommand"),d.prototype),Object(f.a)(d.prototype,"saveCommand",[c],O()(d.prototype,"saveCommand"),d.prototype),Object(f.a)(d.prototype,"syncCommand",[l],O()(d.prototype,"syncCommand"),d.prototype),u=d))||u)},function(e,t,n){"use strict";n.r(t),n.d(t,"FolderCreateView",(function(){return O})),n.d(t,"default",(function(){return O}));var i,o,a,r,s=n(10),c=n(18),l=n(19),u=n.n(l),d=(n(48),n(1)),p=n(0),f=n(24),h=n(6),m=n(2),b=n(11),g=n(94),v=n(21),y=n(7),S=n(25),O=(i=Object(y.popup)({name:"View/Popup/FolderCreate",templateID:"PopupsFolderCreate"}),o=Object(y.command)((function(e){return e.simpleFolderNameValidation(e.folderName())})),i((r=function(e){function t(){var t;return(t=e.call(this)||this).folderName=d.a.observable(""),t.folderName.focused=d.a.observable(!1),t.selectedParentValue=d.a.observable(f.r),t.parentFolderSelectList=d.a.computed((function(){var e=[],t=b.a.folderList();e.push(["",""]);var n=null;return""!==b.a.namespace&&(n=function(e){return b.a.namespace!==e.fullNameRaw.substr(0,b.a.namespace.length)}),Object(m.folderListOptionsBuilder)([],t,[],e,null,n,null,(function(e){return e?e.isSystemFolder()?e.name()+" "+e.manageFolderSystemName():e.name():""}))})),t.defautOptionsAfterRender=m.defautOptionsAfterRender,t}Object(s.a)(t,e);var n=t.prototype;return n.createFolderCommand=function(){var e=this.selectedParentValue();""===e&&1<b.a.namespace.length&&(e=b.a.namespace.substr(0,b.a.namespace.length-1)),Object(v.a)().foldersPromisesActionHelper(g.a.folderCreate(this.folderName(),e,b.a.foldersCreating),p.Notification.CantCreateFolder),this.cancelCommand()},n.simpleFolderNameValidation=function(e){return/^[^\\/]+$/g.test(Object(m.trim)(e))},n.clearPopup=function(){this.folderName(""),this.selectedParentValue(""),this.folderName.focused(!1)},n.onShow=function(){this.clearPopup()},n.onShowWithDelay=function(){h.bMobileDevice||this.folderName.focused(!0)},t}(S.a),Object(c.a)(r.prototype,"createFolderCommand",[o],u()(r.prototype,"createFolderCommand"),r.prototype),a=r))||a)},function(e,t,n){"use strict";n.r(t),n.d(t,"FilterPopupView",(function(){return A})),n.d(t,"default",(function(){return A}));var i,o,a,r,s=n(29),c=n(10),l=n(18),u=n(28),d=n.n(u),p=n(19),f=n.n(p),h=(n(315),n(48),n(3)),m=n.n(h),b=n(1),g=n(0),v=n(6),y=n(2),S=n(9),O=n(233),w=n(11),T=n(7),C=n(25),A=(i=Object(T.popup)({name:"View/Popup/Filter",templateID:"PopupsFilter"}),o=Object(T.command)(),i((r=function(e){function t(){var t;return(t=e.call(this)||this).isNew=b.a.observable(!0),t.modules=O.a.modules,t.fTrueCallback=null,t.filter=b.a.observable(null),t.allowMarkAsRead=b.a.observable(!1),t.defautOptionsAfterRender=y.defautOptionsAfterRender,t.folderSelectList=w.a.folderMenuForFilters,t.selectedFolderValue=b.a.observable(""),t.selectedFolderValue.subscribe((function(){d()(t).call(t)&&d()(t).call(t).actionValue.error(!1)})),t.actionTypeOptions=b.a.observableArray([]),t.fieldOptions=b.a.observableArray([]),t.typeOptions=b.a.observableArray([]),t.typeOptionsSize=b.a.observableArray([]),Object(S.initOnStartOrLangChange)(m.a.bind(t.populateOptions,Object(s.a)(t))),t.modules.subscribe(t.populateOptions,Object(s.a)(t)),t}Object(c.a)(t,e);var n=t.prototype;return n.saveFilterCommand=function(){if(d()(this).call(this)){if(g.FiltersAction.MoveTo===d()(this).call(this).actionType())d()(this).call(this).actionValue(this.selectedFolderValue());if(!d()(this).call(this).verify())return!1;if(this.fTrueCallback)this.fTrueCallback(d()(this).call(this));this.modalVisibility()&&Object(y.delegateRun)(this,"closeCommand")}return!0},n.populateOptions=function(){this.actionTypeOptions([]);var e=this.modules();e&&(e.markasread&&this.allowMarkAsRead(!0),e.moveto&&this.actionTypeOptions.push({id:g.FiltersAction.MoveTo,name:Object(S.i18n)("POPUPS_FILTER/SELECT_ACTION_MOVE_TO")}),e.redirect&&this.actionTypeOptions.push({id:g.FiltersAction.Forward,name:Object(S.i18n)("POPUPS_FILTER/SELECT_ACTION_FORWARD_TO")}),e.reject&&this.actionTypeOptions.push({id:g.FiltersAction.Reject,name:Object(S.i18n)("POPUPS_FILTER/SELECT_ACTION_REJECT")}),e.vacation&&this.actionTypeOptions.push({id:g.FiltersAction.Vacation,name:Object(S.i18n)("POPUPS_FILTER/SELECT_ACTION_VACATION_MESSAGE")})),this.actionTypeOptions.push({id:g.FiltersAction.Discard,name:Object(S.i18n)("POPUPS_FILTER/SELECT_ACTION_DISCARD")}),this.fieldOptions([{id:g.FilterConditionField.From,name:Object(S.i18n)("POPUPS_FILTER/SELECT_FIELD_FROM")},{id:g.FilterConditionField.Recipient,name:Object(S.i18n)("POPUPS_FILTER/SELECT_FIELD_RECIPIENTS")},{id:g.FilterConditionField.Subject,name:Object(S.i18n)("POPUPS_FILTER/SELECT_FIELD_SUBJECT")},{id:g.FilterConditionField.Size,name:Object(S.i18n)("POPUPS_FILTER/SELECT_FIELD_SIZE")},{id:g.FilterConditionField.Header,name:Object(S.i18n)("POPUPS_FILTER/SELECT_FIELD_HEADER")}]),this.typeOptions([{id:g.FilterConditionType.Contains,name:Object(S.i18n)("POPUPS_FILTER/SELECT_TYPE_CONTAINS")},{id:g.FilterConditionType.NotContains,name:Object(S.i18n)("POPUPS_FILTER/SELECT_TYPE_NOT_CONTAINS")},{id:g.FilterConditionType.EqualTo,name:Object(S.i18n)("POPUPS_FILTER/SELECT_TYPE_EQUAL_TO")},{id:g.FilterConditionType.NotEqualTo,name:Object(S.i18n)("POPUPS_FILTER/SELECT_TYPE_NOT_EQUAL_TO")}]),e&&e.regex&&this.typeOptions.push({id:g.FilterConditionType.Regex,name:"Regex"}),this.typeOptionsSize([{id:g.FilterConditionType.Over,name:Object(S.i18n)("POPUPS_FILTER/SELECT_TYPE_OVER")},{id:g.FilterConditionType.Under,name:Object(S.i18n)("POPUPS_FILTER/SELECT_TYPE_UNDER")}])},n.removeCondition=function(e){d()(this).call(this)&&d()(this).call(this).removeCondition(e)},n.clearPopup=function(){this.isNew(!0),this.fTrueCallback=null,d()(this).call(this,null)},n.onShow=function(e,t,n){this.clearPopup(),this.fTrueCallback=t,d()(this).call(this,e),e&&this.selectedFolderValue(e.actionValue()),this.isNew(!n),!n&&e&&e.name.focused(!0)},n.onShowWithDelay=function(){this.isNew()&&d()(this).call(this)&&!v.bMobileDevice&&d()(this).call(this).name.focused(!0)},t}(C.a),Object(l.a)(r.prototype,"saveFilterCommand",[o],f()(r.prototype,"saveFilterCommand"),r.prototype),a=r))||a)},function(e,t,n){"use strict";n.r(t),n.d(t,"TwoFactorConfigurationPopupView",(function(){return O})),n.d(t,"default",(function(){return O}));var i,o=n(29),a=n(10),r=(n(45),n(59),n(4)),s=n.n(r),c=n(3),l=n.n(c),u=n(1),d=n(410),p=n.n(d),f=n(0),h=n(2),m=n(9),b=n(5),g=n(16),v=n(21),y=n(7),S=n(25),O=Object(y.popup)({name:"View/Popup/TwoFactorConfiguration",templateID:"PopupsTwoFactorConfiguration"})(i=function(e){function t(){var t;return(t=e.call(this)||this).lock=u.a.observable(!1),t.capaTwoFactor=b.capa(f.Capa.TwoFactor),t.processing=u.a.observable(!1),t.clearing=u.a.observable(!1),t.secreting=u.a.observable(!1),t.viewUser=u.a.observable(""),t.twoFactorStatus=u.a.observable(!1),t.twoFactorTested=u.a.observable(!1),t.viewSecret=u.a.observable(""),t.viewBackupCodes=u.a.observable(""),t.viewUrlTitle=u.a.observable(""),t.viewUrl=u.a.observable(""),t.viewEnable_=u.a.observable(!1),t.viewEnable=u.a.computed({read:t.viewEnable_,write:function(e){(e=!!e)&&t.twoFactorTested()?(t.viewEnable_(e),g.a.enableTwoFactor((function(e,n){f.StorageResultType.Success===e&&n&&n.Result||t.viewEnable_(!1)}),!0)):(e||t.viewEnable_(e),g.a.enableTwoFactor((function(e,n){f.StorageResultType.Success===e&&n&&n.Result||t.viewEnable_(!1)}),!1))}}),t.viewTwoFactorEnableTooltip=u.a.computed((function(){return Object(m.trigger)(),t.twoFactorTested()||t.viewEnable_()?"":Object(m.i18n)("POPUPS_TWO_FACTOR_CFG/TWO_FACTOR_SECRET_TEST_BEFORE_DESC")})),t.viewTwoFactorStatus=u.a.computed((function(){return Object(m.trigger)(),Object(m.i18n)(t.twoFactorStatus()?"POPUPS_TWO_FACTOR_CFG/TWO_FACTOR_SECRET_CONFIGURED_DESC":"POPUPS_TWO_FACTOR_CFG/TWO_FACTOR_SECRET_NOT_CONFIGURED_DESC")})),t.twoFactorAllowedEnable=u.a.computed((function(){return t.viewEnable()||t.twoFactorTested()})),t.onResult=l.a.bind(t.onResult,Object(o.a)(t)),t.onShowSecretResult=l.a.bind(t.onShowSecretResult,Object(o.a)(t)),t}Object(a.a)(t,e);var i=t.prototype;return i.showSecret=function(){this.secreting(!0),g.a.showTwoFactorSecret(this.onShowSecretResult)},i.hideSecret=function(){this.viewSecret(""),this.viewBackupCodes(""),this.viewUrlTitle(""),this.viewUrl("")},i.createTwoFactor=function(){this.processing(!0),g.a.createTwoFactor(this.onResult)},i.logout=function(){Object(v.a)().logout()},i.testTwoFactor=function(){Object(y.showScreenPopup)(n(556),[this.twoFactorTested])},i.clearTwoFactor=function(){this.viewSecret(""),this.viewBackupCodes(""),this.viewUrlTitle(""),this.viewUrl(""),this.twoFactorTested(!1),this.clearing(!0),g.a.clearTwoFactor(this.onResult)},i.onShow=function(e){this.lock(!!e),this.viewSecret(""),this.viewBackupCodes(""),this.viewUrlTitle(""),this.viewUrl("")},i.onHide=function(){this.lock()&&s.a.location.reload()},i.getQr=function(){return"otpauth://totp/"+s.a.encodeURIComponent(this.viewUser())+"?secret="+s.a.encodeURIComponent(this.viewSecret())+"&issuer="+s.a.encodeURIComponent("")},i.onResult=function(e,t){this.processing(!1),this.clearing(!1),f.StorageResultType.Success===e&&t&&t.Result?(this.viewUser(Object(h.pString)(t.Result.User)),this.viewEnable_(!!t.Result.Enable),this.twoFactorStatus(!!t.Result.IsSet),this.twoFactorTested(!!t.Result.Tested),this.viewSecret(Object(h.pString)(t.Result.Secret)),this.viewBackupCodes(Object(h.pString)(t.Result.BackupCodes).replace(/[\s]+/g,"  ")),this.viewUrlTitle(Object(h.pString)(t.Result.UrlTitle)),this.viewUrl(p.a.toDataURL({level:"M",size:8,value:this.getQr()}))):(this.viewUser(""),this.viewEnable_(!1),this.twoFactorStatus(!1),this.twoFactorTested(!1),this.viewSecret(""),this.viewBackupCodes(""),this.viewUrlTitle(""),this.viewUrl(""))},i.onShowSecretResult=function(e,t){this.secreting(!1),f.StorageResultType.Success===e&&t&&t.Result?(this.viewSecret(Object(h.pString)(t.Result.Secret)),this.viewUrlTitle(Object(h.pString)(t.Result.UrlTitle)),this.viewUrl(p.a.toDataURL({level:"M",size:6,value:this.getQr()}))):(this.viewSecret(""),this.viewUrlTitle(""),this.viewUrl(""))},i.onBuild=function(){this.capaTwoFactor&&(this.processing(!0),g.a.getTwoFactor(this.onResult))},t}(S.a))||i},function(e,t,n){"use strict";n.r(t),n.d(t,"TemplatePopupView",(function(){return S})),n.d(t,"default",(function(){return S}));var i,o,a,r,s=n(10),c=n(18),l=n(19),u=n.n(l),d=(n(48),n(1)),p=n(0),f=n(2),h=n(9),m=n(227),b=n(16),g=n(21),v=n(7),y=n(25),S=(i=Object(v.popup)({name:"View/Popup/Template",templateID:"PopupsTemplate"}),o=Object(v.command)((function(e){return!e.submitRequest()})),i((r=function(e){function t(){var t;return(t=e.call(this)||this).editor=null,t.signatureDom=d.a.observable(null),t.id=d.a.observable(""),t.name=d.a.observable(""),t.name.error=d.a.observable(!1),t.name.focus=d.a.observable(!1),t.body=d.a.observable(""),t.body.loading=d.a.observable(!1),t.body.error=d.a.observable(!1),t.name.subscribe((function(){t.name.error(!1)})),t.body.subscribe((function(){t.body.error(!1)})),t.submitRequest=d.a.observable(!1),t.submitError=d.a.observable(""),t}Object(s.a)(t,e);var n=t.prototype;return n.addTemplateCommand=function(){var e=this;return this.populateBodyFromEditor(),this.name.error(""===Object(f.trim)(this.name())),this.body.error(""===Object(f.trim)(this.body())||":HTML:"===Object(f.trim)(this.body())),!this.name.error()&&!this.body.error()&&(this.submitRequest(!0),b.a.templateSetup((function(t,n){e.submitRequest(!1),p.StorageResultType.Success===t&&n?n.Result?(Object(g.a)().templates(),e.cancelCommand()):n.ErrorCode&&e.submitError(Object(h.getNotification)(n.ErrorCode)):e.submitError(Object(h.getNotification)(p.Notification.UnknownError))}),this.id(),this.name(),this.body()),!0)},n.clearPopup=function(){this.id(""),this.name(""),this.name.error(!1),this.body(""),this.body.loading(!1),this.body.error(!1),this.submitRequest(!1),this.submitError(""),this.editor&&this.editor.setPlain("",!1)},n.populateBodyFromEditor=function(){this.editor&&this.body(this.editor.getDataWithHtmlMark())},n.editorSetBody=function(e){var t=this;!this.editor&&this.signatureDom()?this.editor=new m.HtmlEditor(this.signatureDom(),(function(){t.populateBodyFromEditor()}),(function(){t.editor.setHtmlOrPlain(e)})):this.editor.setHtmlOrPlain(e)},n.onShow=function(e){var t=this;this.clearPopup(),e&&e.id?(this.id(e.id),this.name(e.name),this.body(e.body),e.populated?this.editorSetBody(this.body()):(this.body.loading(!0),this.body.error(!1),b.a.templateGetById((function(n,i){t.body.loading(!1),p.StorageResultType.Success===n&&i&&i.Result&&"Object/Template"===i.Result["@Object"]&&Object(f.isNormal)(i.Result.Body)?(e.body=i.Result.Body,e.populated=!0,t.body(e.body),t.body.error(!1)):(t.body(""),t.body.error(!0)),t.editorSetBody(t.body())}),this.id()))):this.editorSetBody("")},n.onShowWithDelay=function(){this.name.focus(!0)},t}(y.a),Object(c.a)(r.prototype,"addTemplateCommand",[o],u()(r.prototype,"addTemplateCommand"),r.prototype),a=r))||a)},,,,,function(e,t,n){var i;!function(){"use strict";var n={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var i=arguments[t];if(i){var a=typeof i;if("string"===a||"number"===a)e.push(i);else if(Array.isArray(i)){if(i.length){var r=o.apply(null,i);r&&e.push(r)}}else if("object"===a)if(i.toString===Object.prototype.toString)for(var s in i)n.call(i,s)&&i[s]&&e.push(s);else e.push(i.toString())}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(i=function(){return o}.apply(t,[]))||(e.exports=i)}()},function(e,t,n){e.exports=function(){"use strict";var e="undefined"!=typeof document&&document.documentMode,t={rootMargin:"0px",threshold:0,load:function(t){if("picture"===t.nodeName.toLowerCase()){var n=t.querySelector("img"),i=!1;null===n&&(n=document.createElement("img"),i=!0),e&&t.getAttribute("data-iesrc")&&(n.src=t.getAttribute("data-iesrc")),t.getAttribute("data-alt")&&(n.alt=t.getAttribute("data-alt")),i&&t.append(n)}if("video"===t.nodeName.toLowerCase()&&!t.getAttribute("data-src")&&t.children){for(var o=t.children,a=void 0,r=0;r<=o.length-1;r++)(a=o[r].getAttribute("data-src"))&&(o[r].src=a);t.load()}t.getAttribute("data-poster")&&(t.poster=t.getAttribute("data-poster")),t.getAttribute("data-src")&&(t.src=t.getAttribute("data-src")),t.getAttribute("data-srcset")&&t.setAttribute("srcset",t.getAttribute("data-srcset"));var s=",";if(t.getAttribute("data-background-delimiter")&&(s=t.getAttribute("data-background-delimiter")),t.getAttribute("data-background-image"))t.style.backgroundImage="url('"+t.getAttribute("data-background-image").split(s).join("'),url('")+"')";else if(t.getAttribute("data-background-image-set")){var c=t.getAttribute("data-background-image-set").split(s),l=c[0].substr(0,c[0].indexOf(" "))||c[0];l=-1===l.indexOf("url(")?"url("+l+")":l,1===c.length?t.style.backgroundImage=l:t.setAttribute("style",(t.getAttribute("style")||"")+"background-image: "+l+"; background-image: -webkit-image-set("+c+"); background-image: image-set("+c+")")}t.getAttribute("data-toggle-class")&&t.classList.toggle(t.getAttribute("data-toggle-class"))},loaded:function(){}};function n(e){e.setAttribute("data-loaded",!0)}var i=function(e){return"true"===e.getAttribute("data-loaded")},o=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:document;return e instanceof Element?[e]:e instanceof NodeList?e:t.querySelectorAll(e)};return function(){var e,a,r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:".lozad",s=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},c=Object.assign({},t,s),l=c.root,u=c.rootMargin,d=c.threshold,p=c.load,f=c.loaded,h=void 0;"undefined"!=typeof window&&window.IntersectionObserver&&(h=new IntersectionObserver((e=p,a=f,function(t,o){t.forEach((function(t){(0<t.intersectionRatio||t.isIntersecting)&&(o.unobserve(t.target),i(t.target)||(e(t.target),n(t.target),a(t.target)))}))}),{root:l,rootMargin:u,threshold:d}));for(var m,b=o(r,l),g=0;g<b.length;g++)(m=b[g]).getAttribute("data-placeholder-background")&&(m.style.background=m.getAttribute("data-placeholder-background"));return{observe:function(){for(var e=o(r,l),t=0;t<e.length;t++)i(e[t])||(h?h.observe(e[t]):(p(e[t]),n(e[t]),f(e[t])))},triggerLoad:function(e){i(e)||(p(e),n(e),f(e))},observer:h}}}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n(4),o=n.n(i),a=n(322),r=n.n(a),s=n(2),c=n(24),l=function(){function e(){}var t=e.prototype;return t.set=function(e,t){var n=!1,i=null;try{i=r.a.getJSON(c.b)}catch(e){}(i||(i={}))[e]=t;try{r.a.set(c.b,i,{expires:30}),n=!0}catch(e){}return n},t.get=function(e){var t=null;try{var n=r.a.getJSON(c.b);t=n&&!Object(s.isUnd)(n[e])?n[e]:null}catch(e){}return t},e.supported=function(){return!(!o.a.navigator||!o.a.navigator.cookieEnabled)},e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n(4),o=n.n(i),a=n(2),r=n(164),s=n(24),c=function(){function e(){this.s=null,this.s=o.a.localStorage||null}var t=e.prototype;return t.set=function(e,t){if(!this.s)return!1;var n=null;try{var i=this.s.getItem(s.b)||null;n=null===i?null:o.a.JSON.parse(i)}catch(e){}(n||(n={}))[e]=t;try{return this.s.setItem(s.b,o.a.JSON.stringify(n)),!0}catch(e){}return!1},t.get=function(e){if(!this.s)return null;try{var t=this.s.getItem(s.b)||null,n=null===t?null:o.a.JSON.parse(t);return n&&!Object(a.isUnd)(n[e])?n[e]:null}catch(e){}return null},e.supported=function(){return Object(r.d)("localStorage")},e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var i=n(10),o=n(12),a=n.n(o),r=(n(48),n(45),n(204),n(77),n(3)),s=n.n(r),c=n(1),l=n(0),u=n(2),d=n(9),p=n(14),f=n(23),h=function(e){function t(){var t;return(t=e.call(this,"FolderModel")||this).name=c.a.observable(""),t.fullName="",t.fullNameRaw="",t.fullNameHash="",t.delimiter="",t.namespace="",t.deep=0,t.interval=0,t.selectable=!1,t.existen=!0,t.type=c.a.observable(l.FolderType.User),t.focused=c.a.observable(!1),t.selected=c.a.observable(!1),t.edited=c.a.observable(!1),t.subScribed=c.a.observable(!0),t.checkable=c.a.observable(!1),t.subFolders=c.a.observableArray([]),t.deleteAccess=c.a.observable(!1),t.actionBlink=c.a.observable(!1).extend({falseTimeout:1e3}),t.nameForEdit=c.a.observable(""),t.privateMessageCountAll=c.a.observable(0),t.privateMessageCountUnread=c.a.observable(0),t.collapsedPrivate=c.a.observable(!0),t}Object(i.a)(t,e),t.newInstanceFromJson=function(e){var n=new t;return n.initByJson(e)?n.initComputed():null};var n=t.prototype;return n.initComputed=function(){var e=this,t=Object(p.h)();return this.isInbox=c.a.computed((function(){return l.FolderType.Inbox===e.type()})),this.hasSubScribedSubfolders=c.a.computed((function(){return!!a()(s.a).call(s.a,e.subFolders(),(function(e){return(e.subScribed()||e.hasSubScribedSubfolders())&&!e.isSystemFolder()}))})),this.canBeEdited=c.a.computed((function(){return l.FolderType.User===e.type()&&e.existen&&e.selectable})),this.visible=c.a.computed((function(){var t=e.subScribed(),n=e.hasSubScribedSubfolders();return t||n&&(!e.existen||!e.selectable)})),this.isSystemFolder=c.a.computed((function(){return l.FolderType.User!==e.type()})),this.hidden=c.a.computed((function(){var t=e.isSystemFolder(),n=e.hasSubScribedSubfolders();return t&&!n||!e.selectable&&!n})),this.selectableForFolderList=c.a.computed((function(){return!e.isSystemFolder()&&e.selectable})),this.messageCountAll=c.a.computed({read:this.privateMessageCountAll,write:function(t){Object(u.isPosNumeric)(t,!0)?e.privateMessageCountAll(t):e.privateMessageCountAll.valueHasMutated()}}).extend({notify:"always"}),this.messageCountUnread=c.a.computed({read:this.privateMessageCountUnread,write:function(t){Object(u.isPosNumeric)(t,!0)?e.privateMessageCountUnread(t):e.privateMessageCountUnread.valueHasMutated()}}).extend({notify:"always"}),this.printableUnreadCount=c.a.computed((function(){var t=e.messageCountAll(),n=e.messageCountUnread(),i=e.type();if(0<t){if(l.FolderType.Draft===i)return""+t;if(0<n&&l.FolderType.Trash!==i&&l.FolderType.Archive!==i&&l.FolderType.SentItems!==i)return""+n}return""})),this.canBeDeleted=c.a.computed((function(){return!e.isSystemFolder()&&0===e.subFolders().length&&t!==e.fullNameRaw})),this.canBeSubScribed=c.a.computed((function(){return!e.isSystemFolder()&&e.selectable&&t!==e.fullNameRaw})),this.canBeChecked=this.canBeSubScribed,this.localName=c.a.computed((function(){Object(d.trigger)();var t=e.name(),n=e.type();if(e.isSystemFolder())switch(n){case l.FolderType.Inbox:t=Object(d.i18n)("FOLDER_LIST/INBOX_NAME");break;case l.FolderType.SentItems:t=Object(d.i18n)("FOLDER_LIST/SENT_NAME");break;case l.FolderType.Draft:t=Object(d.i18n)("FOLDER_LIST/DRAFTS_NAME");break;case l.FolderType.Spam:t=Object(d.i18n)("FOLDER_LIST/SPAM_NAME");break;case l.FolderType.Trash:t=Object(d.i18n)("FOLDER_LIST/TRASH_NAME");break;case l.FolderType.Archive:t=Object(d.i18n)("FOLDER_LIST/ARCHIVE_NAME")}return t})),this.manageFolderSystemName=c.a.computed((function(){Object(d.trigger)();var t="",n=e.type(),i=e.name();if(e.isSystemFolder())switch(n){case l.FolderType.Inbox:t="("+Object(d.i18n)("FOLDER_LIST/INBOX_NAME")+")";break;case l.FolderType.SentItems:t="("+Object(d.i18n)("FOLDER_LIST/SENT_NAME")+")";break;case l.FolderType.Draft:t="("+Object(d.i18n)("FOLDER_LIST/DRAFTS_NAME")+")";break;case l.FolderType.Spam:t="("+Object(d.i18n)("FOLDER_LIST/SPAM_NAME")+")";break;case l.FolderType.Trash:t="("+Object(d.i18n)("FOLDER_LIST/TRASH_NAME")+")";break;case l.FolderType.Archive:t="("+Object(d.i18n)("FOLDER_LIST/ARCHIVE_NAME")+")"}return(""!==t&&"("+i+")"===t||"(inbox)"===t.toLowerCase())&&(t=""),t})),this.collapsed=c.a.computed({read:function(){return!e.hidden()&&e.collapsedPrivate()},write:function(t){e.collapsedPrivate(t)}}),this.hasUnreadMessages=c.a.computed((function(){return 0<e.messageCountUnread()&&""!==e.printableUnreadCount()})),this.hasSubScribedUnreadMessagesSubfolders=c.a.computed((function(){return!!a()(s.a).call(s.a,e.subFolders(),(function(e){return e.hasUnreadMessages()||e.hasSubScribedUnreadMessagesSubfolders()}))})),this.name.subscribe((function(t){e.nameForEdit(t)})),this.edited.subscribe((function(t){t&&e.nameForEdit(e.name())})),this.messageCountUnread.subscribe((function(t){l.FolderType.Inbox===e.type()&&f.a("mailbox.inbox-unread-count",[t])})),this},n.collapsedCss=function(){return this.hasSubScribedSubfolders()?this.collapsed()?"icon-right-mini e-collapsed-sign":"icon-down-mini e-collapsed-sign":"icon-none e-collapsed-sign"},n.initByJson=function(e){var t=!1,n=Object(p.h)();return e&&"Object/Folder"===e["@Object"]&&(this.name(e.Name),this.delimiter=e.Delimiter,this.fullName=e.FullName,this.fullNameRaw=e.FullNameRaw,this.fullNameHash=e.FullNameHash,this.deep=e.FullNameRaw.split(this.delimiter).length-1,this.selectable=!!e.IsSelectable,this.existen=!!e.IsExists,this.subScribed(!!e.IsSubscribed),this.checkable(!!e.Checkable),this.type(n===this.fullNameRaw?l.FolderType.Inbox:l.FolderType.User),t=!0),t},n.printableFullName=function(){return this.fullName.split(this.delimiter).join(" / ")},t}(n(67).a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var i=n(10),o=n(62),a=n.n(o),r=(n(4),n(8)),s=n.n(r),c=n(15),l=n(2),u=n(24),d=n(0),p=n(6),f=n(36),h=n(5),m=function(e){function t(){var t;return(t=e.call(this)||this).oRequests={},t.clear(),t}Object(i.a)(t,e);var n=t.prototype;return n.clear=function(){this.oRequests={}},n.abort=function(e,t){return this.oRequests[e]&&(!t&&this.oRequests[e].abort&&(this.oRequests[e].__aborted__=!0,this.oRequests[e].abort()),this.oRequests[e]=null,delete this.oRequests[e]),this},n.ajaxRequest=function(e,t,n,i,o,r){var m=this;return new a.a((function(a,b){var g=Object(l.microtime)();n=Object(l.isNormal)(n)?n:u.g,o=Object(l.isUnd)(o)?"":Object(l.pString)(o),t&&(i.XToken=h.appSettingsGet("token")),f.f("ajax-default-request",[e,i,o]),m.setTrigger(r,!0);var v=s.a.ajax({type:t?"POST":"GET",url:Object(c.a)(o),async:!0,dataType:"json",data:t&&i||{},timeout:n,global:!0}).always((function(t,n){var o=!1,s=null;t&&t.Time&&(o=Object(l.pInt)(t.Time)>Object(l.microtime)()-g),t&&t.UpdateToken&&p.data.__APP__&&p.data.__APP__.setClientSideToken&&p.data.__APP__.setClientSideToken(t.UpdateToken);var c="";switch(!0){case"success"===n&&t&&t.Result&&e===t.Action:c=d.StorageResultType.Success;break;case!("abort"!==n||t&&t.__aborted__):c=d.StorageResultType.Abort;break;default:c=d.StorageResultType.Error}f.f("ajax-default-response",[e,d.StorageResultType.Success===c?t:null,c,o,i]),"success"===n?t&&t.Result&&e===t.Action?(t.__cached__=o,a(t)):t&&t.Action?(s=t,b(t.ErrorCode?t.ErrorCode:d.Notification.AjaxFalse)):(s=t,b(d.Notification.AjaxParse)):"timeout"===n?(s=t,b(d.Notification.AjaxTimeout)):"abort"===n?t&&t.__aborted__||b(d.Notification.AjaxAbort):(s=t,b(d.Notification.AjaxParse)),m.oRequests[e]&&(m.oRequests[e]=null,delete m.oRequests[e]),m.setTrigger(r,!1),s&&(-1<Object(l.inArray)(s.ErrorCode,[d.Notification.AuthError,d.Notification.AccessError,d.Notification.ConnectionError,d.Notification.DomainNotAllowed,d.Notification.AccountNotAllowed,d.Notification.MailServerError,d.Notification.UnknownNotification,d.Notification.UnknownError])&&(p.data.iAjaxErrorCount+=1),d.Notification.InvalidToken===s.ErrorCode&&(p.data.iTokenErrorCount+=1),u.q<p.data.iTokenErrorCount&&p.data.__APP__&&p.data.__APP__.loginAndLogoutReload&&p.data.__APP__.loginAndLogoutReload(!1,!0),(s.ClearAuth||s.Logout||u.a<p.data.iAjaxErrorCount)&&(p.data.__APP__&&p.data.__APP__.clearClientSideToken&&p.data.__APP__.clearClientSideToken(),p.data.__APP__&&!s.ClearAuth&&p.data.__APP__.loginAndLogoutReload&&p.data.__APP__.loginAndLogoutReload(!1,!0)))}));v&&(m.oRequests[e]&&(m.oRequests[e]=null,delete m.oRequests[e]),m.oRequests[e]=v)}))},n.getRequest=function(e,t,n,i){return n=e+"/"+(n=Object(l.isUnd)(n)?"":Object(l.pString)(n)),this.ajaxRequest(e,!1,i,null,n,t)},n.postRequest=function(e,t,n,i){return(n=n||{}).Action=e,this.ajaxRequest(e,!0,i,n,"",t)},t}(n(318).a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(10),o=n(1),a=n(15),r=function(e){function t(t,n,i){var a;return void 0===n&&(n=!0),void 0===i&&(i=0),(a=e.call(this,"AccountModel")||this).email=t,a.count=o.a.observable(i),a.deleteAccess=o.a.observable(!1),a.canBeDeleted=o.a.observable(!!n),a.canBeEdit=a.canBeDeleted,a}return Object(i.a)(t,e),t.prototype.changeAccountLink=function(){return Object(a.i)(this.email)},t}(n(67).a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n(10),o=(n(48),n(1)),a=function(e){function t(t,n){var i;return(i=e.call(this,"IdentityModel")||this).id=o.a.observable(t||""),i.email=o.a.observable(n),i.name=o.a.observable(""),i.replyTo=o.a.observable(""),i.bcc=o.a.observable(""),i.signature=o.a.observable(""),i.signatureInsertBefore=o.a.observable(!1),i.deleteAccess=o.a.observable(!1),i.canBeDeleted=o.a.computed((function(){return""!==i.id()})),i}return Object(i.a)(t,e),t.prototype.formattedName=function(){var e=this.name(),t=this.email();return""!==e?e+" ("+t+")":t},t}(n(67).a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(10),o=(n(48),n(1)),a=n(2),r=function(e){function t(t,n,i){var a;return(a=e.call(this,"TemplateModel")||this).id=t,a.name=n,a.body=i,a.populated=!0,a.deleteAccess=o.a.observable(!1),a}return Object(i.a)(t,e),t.prototype.parse=function(e){var t=!1;return e&&"Object/Template"===e["@Object"]&&(this.id=Object(a.pString)(e.ID),this.name=Object(a.pString)(e.Name),this.body=Object(a.pString)(e.Body),this.populated=!!e.Populated,t=!0),t},t}(n(67).a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var i=n(10),o=n(309),a=n.n(o),r=n(1),s=n(2),c=n(67),l=n(41),u=function(e){function t(t,n,i,o,a,c,l,u,d){var p;return(p=e.call(this,"OpenPgpKeyModel")||this).index=t,p.id=i,p.ids=Object(s.isNonEmptyArray)(o)?o:[i],p.guid=n,p.user="",p.users=a,p.email="",p.emails=c,p.armor=u,p.isPrivate=!!l,p.selectUser(d),p.deleteAccess=r.a.observable(!1),p}Object(i.a)(t,e);var n=t.prototype;return n.getNativeKey=function(){var e=null;try{if((e=l.a.openpgp.key.readArmored(this.armor))&&!e.err&&a()(e)&&a()(e)[0])return e}catch(e){Object(s.log)(e)}return null},n.getNativeKeys=function(){var e=this.getNativeKey();return e&&a()(e)?a()(e):null},n.select=function(e,t){if(this[t]){var n=this[t].indexOf(e);-1!==n&&(this.user=this.users[n],this.email=this.emails[n])}},n.selectUser=function(e){this.select(e,"users")},n.selectEmail=function(e){this.select(e,"emails")},t}(c.a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n(10),o=n(153),a=n(448),r=n(21),s=function(e){function t(){return e.call(this,"login",[a.a])||this}return Object(i.a)(t,e),t.prototype.onShow=function(){Object(r.a)().setWindowTitle("")},t}(o.a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));var i,o,a,r,s,c,l,u,d=n(10),p=n(18),f=n(19),h=n.n(f),m=n(4),b=n.n(m),g=n(3),v=n.n(g),y=n(1),S=n(0),O=n(2),w=n(6),T=n(15),C=n(9),A=n(36),E=n(27),j=n(72),F=n(5),R=n(60),N=n(16),I=n(21),L=n(7),P=n(25),_=(i=Object(L.view)({name:["View/App/Login","View/User/Login"],type:L.ViewType.Center,templateID:"Login"}),o=Object(L.command)((function(e){return!e.submitRequest()&&e.facebookLoginEnabled()})),a=Object(L.command)((function(e){return!e.submitRequest()&&e.googleLoginEnabled()})),r=Object(L.command)((function(e){return!e.submitRequest()&&e.googleGmailLoginEnabled()})),s=Object(L.command)((function(e){return!e.submitRequest()&&e.twitterLoginEnabled()})),c=Object(L.command)((function(e){return!e.submitRequest()})),i((u=function(e){function t(){var t;return(t=e.call(this)||this).hideSubmitButton=!!F.appSettingsGet("hideSubmitButton"),t.welcome=y.a.observable(!!F.settingsGet("UseLoginWelcomePage")),t.email=y.a.observable(""),t.password=y.a.observable(""),t.signMe=y.a.observable(!1),t.additionalCode=y.a.observable(""),t.additionalCode.error=y.a.observable(!1),t.additionalCode.errorAnimation=y.a.observable(!1).extend({falseTimeout:500}),t.additionalCode.focused=y.a.observable(!1),t.additionalCode.visibility=y.a.observable(!1),t.additionalCodeSignMe=y.a.observable(!1),t.logoImg=Object(O.trim)(F.settingsGet("LoginLogo")),t.loginDescription=Object(O.trim)(F.settingsGet("LoginDescription")),t.mobile=!!F.appSettingsGet("mobile"),t.mobileDevice=!!F.appSettingsGet("mobileDevice"),t.forgotPasswordLinkUrl=F.appSettingsGet("forgotPasswordLinkUrl"),t.registrationLinkUrl=F.appSettingsGet("registrationLinkUrl"),t.emailError=y.a.observable(!1),t.passwordError=y.a.observable(!1),t.emailErrorAnimation=y.a.observable(!1).extend({falseTimeout:500}),t.passwordErrorAnimation=y.a.observable(!1).extend({falseTimeout:500}),t.formHidden=y.a.observable(!1),t.formError=y.a.computed((function(){return t.emailErrorAnimation()||t.passwordErrorAnimation()||t.additionalCode.visibility()&&t.additionalCode.errorAnimation()})),t.emailFocus=y.a.observable(!1),t.passwordFocus=y.a.observable(!1),t.email.subscribe((function(){t.emailError(!1),t.additionalCode(""),t.additionalCode.visibility(!1)})),t.password.subscribe((function(){t.passwordError(!1)})),t.additionalCode.subscribe((function(){t.additionalCode.error(!1)})),t.additionalCode.visibility.subscribe((function(){t.additionalCode.error(!1)})),t.emailError.subscribe((function(e){t.emailErrorAnimation(!!e)})),t.passwordError.subscribe((function(e){t.passwordErrorAnimation(!!e)})),t.additionalCode.error.subscribe((function(e){t.additionalCode.errorAnimation(!!e)})),t.submitRequest=y.a.observable(!1),t.submitError=y.a.observable(""),t.submitErrorAddidional=y.a.observable(""),t.submitError.subscribe((function(e){""===e&&t.submitErrorAddidional("")})),t.allowLanguagesOnLogin=E.a.allowLanguagesOnLogin,t.langRequest=y.a.observable(!1),t.language=j.a.language,t.languages=j.a.languages,t.bSendLanguage=!1,t.languageFullName=y.a.computed((function(){return Object(O.convertLangName)(t.language())})),t.signMeType=y.a.observable(S.LoginSignMeType.Unused),t.signMeType.subscribe((function(e){t.signMe(S.LoginSignMeType.DefaultOn===e)})),t.signMeVisibility=y.a.computed((function(){return S.LoginSignMeType.Unused!==t.signMeType()})),t.facebookLoginEnabled=y.a.observable(!1),t.googleLoginEnabled=y.a.observable(!1),t.googleGmailLoginEnabled=y.a.observable(!1),t.twitterLoginEnabled=y.a.observable(!1),t.socialLoginEnabled=y.a.computed((function(){var e=t.facebookLoginEnabled(),n=t.googleLoginEnabled(),i=t.twitterLoginEnabled();return e||n||i})),F.settingsGet("AdditionalLoginError")&&!t.submitError()&&t.submitError(F.settingsGet("AdditionalLoginError")),t}Object(d.a)(t,e);var i=t.prototype;return i.windowOpenFeatures=function(e){return"left=200,top=100,width="+e+",height="+e+",menubar=no,status=no,resizable=yes,scrollbars=yes"},i.facebookCommand=function(){return b.a.open(Object(T.A)(),"Facebook",this.windowOpenFeatures(500)),!0},i.googleCommand=function(){return b.a.open(Object(T.B)(),"Google",this.windowOpenFeatures(550)),!0},i.googleGmailCommand=function(){return b.a.open(Object(T.B)(!0),"Google",this.windowOpenFeatures(550)),!0},i.twitterCommand=function(){return b.a.open(Object(T.C)(),"Twitter",this.windowOpenFeatures(500)),!0},i.submitCommand=function(){var e=this;if(Object(O.triggerAutocompleteInputChange)(),this.emailError(!1),this.passwordError(!1),this.emailError(""===Object(O.trim)(this.email())),this.passwordError(""===Object(O.trim)(this.password())),this.additionalCode.visibility()&&(this.additionalCode.error(!1),this.additionalCode.error(""===Object(O.trim)(this.additionalCode()))),this.emailError()||this.passwordError()||this.additionalCode.visibility()&&this.additionalCode.error()){switch(!0){case this.emailError():this.emailFocus(!0);break;case this.passwordError():this.passwordFocus(!0);break;case this.additionalCode.visibility()&&this.additionalCode.error():this.additionalCode.focused(!0)}return!1}var t=0,n="";if(A.f("user-login-submit",[function(e,i){t=e||0,n=i||""}]),0<t)return this.submitError(Object(C.getNotification)(t)),!1;if(""!==n)return this.submitError(n),!1;this.submitRequest(!0),w.$win.trigger("rl.tooltips.diactivate");var i;return i=this.password(),N.a.login((function(t,n){w.$win.trigger("rl.tooltips.diactivate"),w.$win.trigger("rl.tooltips.activate"),S.StorageResultType.Success===t&&n&&"Login"===n.Action?n.Result?n.TwoFactorAuth?(e.additionalCode(""),e.additionalCode.visibility(!0),e.submitRequest(!1),v.a.delay((function(){return e.additionalCode.focused(!0)}),S.Magics.Time100ms)):n.Admin?Object(I.a)().redirectToAdminPanel():Object(I.a)().loginAndLogoutReload(!1):n.ErrorCode?(e.submitRequest(!1),-1<Object(O.inArray)(n.ErrorCode,[S.Notification.InvalidInputArgument])&&(n.ErrorCode=S.Notification.AuthError),e.submitError(Object(C.getNotificationFromResponse)(n)),""===e.submitError()?e.submitError(Object(C.getNotification)(S.Notification.UnknownError)):n.ErrorMessageAdditional&&e.submitErrorAddidional(n.ErrorMessageAdditional)):e.submitRequest(!1):(e.submitRequest(!1),e.submitError(Object(C.getNotification)(S.Notification.UnknownError)))}),e.email(),"",i,!!e.signMe(),e.bSendLanguage?e.language():"",e.additionalCode.visibility()?e.additionalCode():"",!!e.additionalCode.visibility()&&!!e.additionalCodeSignMe()),R.b(S.ClientSideKeyName.LastSignMe,e.signMe()?"-1-":"-0-"),!0},i.displayMainForm=function(){this.welcome(!1)},i.onShow=function(){Object(L.routeOff)()},i.onShowWithDelay=function(){""!==this.email()&&""!==this.password()?this.passwordFocus(!0):""===this.email()?this.emailFocus(!0):""===this.password()?this.passwordFocus(!0):this.emailFocus(!0)},i.onHide=function(){this.emailFocus(!1),this.passwordFocus(!1)},i.onBuild=function(){var e=this,t=R.a(S.ClientSideKeyName.LastSignMe),n=(F.settingsGet("SignMe")||"unused").toLowerCase(),i=F.appSettingsGet("jsHash"),o=function(t){0===(t=Object(O.pInt)(t))?(e.submitRequest(!0),Object(I.a)().loginAndLogoutReload(!1)):e.submitError(Object(C.getNotification)(t))};switch(this.facebookLoginEnabled(!!F.settingsGet("AllowFacebookSocial")),this.twitterLoginEnabled(!!F.settingsGet("AllowTwitterSocial")),this.googleLoginEnabled(!!F.settingsGet("AllowGoogleSocial")&&!!F.settingsGet("AllowGoogleSocialAuth")),this.googleGmailLoginEnabled(!!F.settingsGet("AllowGoogleSocial")&&!!F.settingsGet("AllowGoogleSocialAuthGmail")),n){case S.LoginSignMeTypeAsString.DefaultOff:case S.LoginSignMeTypeAsString.DefaultOn:switch(this.signMeType(S.LoginSignMeTypeAsString.DefaultOn===n?S.LoginSignMeType.DefaultOn:S.LoginSignMeType.DefaultOff),t){case"-1-":this.signMeType(S.LoginSignMeType.DefaultOn);break;case"-0-":this.signMeType(S.LoginSignMeType.DefaultOff)}break;case S.LoginSignMeTypeAsString.Unused:default:this.signMeType(S.LoginSignMeType.Unused)}this.email(E.a.devEmail),this.password(E.a.devPassword),(this.googleLoginEnabled()||this.googleGmailLoginEnabled())&&(b.a["rl_"+i+"_google_login_service"]=o),this.facebookLoginEnabled()&&(b.a["rl_"+i+"_facebook_login_service"]=o),this.twitterLoginEnabled()&&(b.a["rl_"+i+"_twitter_login_service"]=o),v.a.delay((function(){j.a.language.subscribe((function(t){e.langRequest(!0),Object(C.reload)(!1,t).then((function(){e.langRequest(!1),e.bSendLanguage=!0}),(function(){e.langRequest(!1)}))}))}),S.Magics.Time50ms),Object(O.triggerAutocompleteInputChange)(!0)},i.submitForm=function(){this.submitCommand()},i.selectLanguage=function(){Object(L.showScreenPopup)(n(292),[this.language,this.languages(),j.a.userLanguage()])},i.selectLanguageOnTab=function(e){var t=this;return!!e||(v.a.delay((function(){t.emailFocus(!0)}),S.Magics.Time50ms),!1)},t}(P.a),Object(p.a)(u.prototype,"facebookCommand",[o],h()(u.prototype,"facebookCommand"),u.prototype),Object(p.a)(u.prototype,"googleCommand",[a],h()(u.prototype,"googleCommand"),u.prototype),Object(p.a)(u.prototype,"googleGmailCommand",[r],h()(u.prototype,"googleGmailCommand"),u.prototype),Object(p.a)(u.prototype,"twitterCommand",[s],h()(u.prototype,"twitterCommand"),u.prototype),Object(p.a)(u.prototype,"submitCommand",[c],h()(u.prototype,"submitCommand"),u.prototype),l=u))||l)},function(e,t,n){"use strict";n.d(t,"a",(function(){return C}));var i=n(10),o=(n(45),n(59),n(3)),a=n.n(o),r=n(0),s=n(6),c=n(2),l=n(14),u=n(9),d=n(23),p=n(5),f=n(27),h=n(46),m=n(35),b=n(11),g=n(13),v=n(450),y=n(451),S=n(453),O=n(454),w=n(21),T=n(7),C=function(e){function t(){return e.call(this,"mailbox",[v.a,y.a,S.a,O.a])||this}Object(i.a)(t,e);var o=t.prototype;return o.updateWindowTitle=function(){var e=b.a.foldersInboxUnreadCount(),t=h.a.email();p.appSettingsGet("listPermanentFiltered")&&(e=0),Object(w.a)().setWindowTitle((""===t?"":(0<e?"("+e+") ":" ")+t+" - ")+Object(u.i18n)("TITLES/MAILBOX"))},o.onShow=function(){this.updateWindowTitle(),f.a.focusedState(r.Focused.None),f.a.focusedState(r.Focused.MessageList),p.appSettingsGet("mobile")&&Object(s.leftPanelDisabled)(!0),p.capa(r.Capa.Folders)?Object(s.leftPanelType)(""):Object(s.leftPanelType)(p.capa(r.Capa.Composer)||p.capa(r.Capa.Contacts)?"short":"none")},o.onRoute=function(e,t,n){var i=e.replace(/^(.+)~([\d]+)$/,"$2"),o=Object(l.e)(Object(l.f)(e.replace(/~([\d]+)$/,"")));o&&(e===i&&(i=""),b.a.currentFolder(o),g.a.messageListPage(t),g.a.messageListSearch(n),g.a.messageListThreadUid(i),Object(w.a)().reloadMessageList())},o.onStart=function(){var e=this;b.a.folderList.subscribe(c.windowResizeCallback),g.a.messageList.subscribe(c.windowResizeCallback),g.a.message.subscribe(c.windowResizeCallback),a.a.delay((function(){return m.a.layout.valueHasMutated()}),r.Magics.Time50ms),a.a.delay((function(){return Object(T.warmUpScreenPopup)(n(133))}),r.Magics.Time500ms),d.b("mailbox.inbox-unread-count",(function(t){b.a.foldersInboxUnreadCount(t);var n=h.a.email();a.a.each(h.a.accounts(),(function(e){e&&n===e.email&&e.count(t)})),e.updateWindowTitle()}))},o.onBuild=function(){s.bMobileDevice||p.appSettingsGet("mobile")||a.a.defer((function(){Object(w.a)().initHorizontalLayoutResizer(r.ClientSideKeyName.MessageListSize)})),s.$html.on("click","#rl-right",(function(){Object(s.moveAction)(!1)}))},o.routes=function(){var e=Object(l.h)(),t=function(t,n){return n[0]=Object(c.pString)(n[0]),n[1]=Object(c.pInt)(n[1]),n[1]=0>=n[1]?1:n[1],n[2]=Object(c.pString)(n[2]),""===t&&(n[0]=e,n[1]=1),[Object(c.decodeURI)(n[0]),n[1],Object(c.decodeURI)(n[2])]};return[[/^([a-zA-Z0-9~]+)\/p([1-9][0-9]*)\/(.+)\/?$/,{normalize_:t}],[/^([a-zA-Z0-9~]+)\/p([1-9][0-9]*)$/,{normalize_:t}],[/^([a-zA-Z0-9~]+)\/(.+)\/?$/,{normalize_:function(t,n){return n[0]=Object(c.pString)(n[0]),n[1]=Object(c.pString)(n[1]),""===t&&(n[0]=e),[Object(c.decodeURI)(n[0]),1,Object(c.decodeURI)(n[1])]}}],[/^([^/]*)$/,{normalize_:t}]]},t}(n(153).a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i,o=n(10),a=n(7),r=n(319),s=Object(a.view)({name:"View/User/MailBox/SystemDropDown",type:a.ViewType.Right,templateID:"SystemDropDown"})(i=function(e){function t(){return e.apply(this,arguments)||this}return Object(o.a)(t,e),t}(r.a))||i},function(e,t,n){"use strict";n.d(t,"a",(function(){return R}));var i,o=n(10),a=n(28),r=n.n(a),s=n(33),c=n.n(s),l=n(4),u=n.n(l),d=n(8),p=n.n(d),f=n(1),h=n(20),m=n.n(h),b=n(2),g=n(0),v=n(6),y=n(15),S=n(14),O=n(27),w=n(35),T=n(11),C=n(13),A=n(5),E=n(21),j=n(7),F=n(25),R=Object(j.view)({name:"View/User/MailBox/FolderList",type:j.ViewType.Left,templateID:"MailFolderList"})(i=function(e){function t(){var t;return(t=e.call(this)||this).oContentVisible=null,t.oContentScrollable=null,t.composeInEdit=O.a.composeInEdit,t.messageList=C.a.messageList,t.folderList=T.a.folderList,t.folderListSystem=T.a.folderListSystem,t.foldersChanging=T.a.foldersChanging,t.moveAction=v.moveAction,t.foldersListWithSingleInboxRootFolder=T.a.foldersListWithSingleInboxRootFolder,t.leftPanelDisabled=v.leftPanelDisabled,t.iDropOverTimer=0,t.allowComposer=!!A.capa(g.Capa.Composer),t.allowContacts=!!O.a.contactsIsAllowed(),t.allowFolders=!!A.capa(g.Capa.Folders),t.folderListFocused=f.a.computed((function(){return g.Focused.FolderList===O.a.focusedState()})),t.isInboxStarred=f.a.computed((function(){return T.a.currentFolder()&&T.a.currentFolder().isInbox()&&-1<Object(b.trim)(C.a.messageListSearch()).indexOf("is:flagged")})),t}Object(o.a)(t,e);var i=t.prototype;return i.onBuild=function(e){this.oContentVisible=p()(".b-content",e),this.oContentScrollable=p()(".content",this.oContentVisible);var t=this,n=A.appSettingsGet("mobile"),i=function(e,t,i){var o=Object(v.moveAction)();n&&Object(v.leftPanelDisabled)(!0),t.preventDefault(),i&&t.stopPropagation();var a=f.a.dataFor(e);a&&(o?(Object(v.moveAction)(!1),Object(E.a)().moveMessagesToFolder(T.a.currentFolderFullNameRaw(),C.a.messageListCheckedOrSelectedUidsWithSubMails(),a.fullNameRaw,!1)):(g.Layout.NoPreview===w.a.layout()&&C.a.message(null),a.fullNameRaw===T.a.currentFolderFullNameRaw()&&Object(S.q)(a.fullNameRaw,""),i?Object(j.setHash)(Object(y.o)(a.fullNameHash,1,"is:flagged")):Object(j.setHash)(Object(y.o)(a.fullNameHash))),O.a.focusedState(g.Focused.MessageList))};e.on("click",".b-folders .e-item .e-link .e-collapsed-sign",(function(e){var t=f.a.dataFor(this);if(t&&e){var n=t.collapsed();Object(E.a)().setExpandedFolder(t.fullNameHash,n),t.collapsed(!n),e.preventDefault(),e.stopPropagation()}})).on("click",".b-folders .e-item .e-link.selectable .inbox-star-icon",(function(e){i(this,e,!t.isInboxStarred())})).on("click",".b-folders .e-item .e-link.selectable",(function(e){i(this,e,!1)})),m()("up, down",g.KeyState.FolderList,(function(n,i){var o=i&&"up"===i.shortcut?g.EventKeyCode.Up:g.EventKeyCode.Down,a=p()(".b-folders .e-item .e-link:not(.hidden):visible",e);if(n&&a.length){var s=a.index(r()(a).call(a,".focused"));-1<s&&a.eq(s).removeClass("focused"),g.EventKeyCode.Up===o&&0<s?s-=1:g.EventKeyCode.Down===o&&s<a.length-1&&(s+=1),a.eq(s).addClass("focused"),t.scrollToFocused()}return!1})),m()("enter",g.KeyState.FolderList,(function(){var t=p()(".b-folders .e-item .e-link:not(.hidden).focused",e);return t.length&&t[0]&&(O.a.focusedState(g.Focused.MessageList),t.click()),!1})),m()("space",g.KeyState.FolderList,(function(){var t=p()(".b-folders .e-item .e-link:not(.hidden).focused",e);if(t.length&&t[0]){var n=f.a.dataFor(t[0]);if(n){var i=n.collapsed();Object(E.a)().setExpandedFolder(n.fullNameHash,i),n.collapsed(!i)}}return!1})),m()("esc, tab, shift+tab, right",g.KeyState.FolderList,(function(){return O.a.focusedState(g.Focused.MessageList),Object(v.moveAction)(!1),!1})),O.a.focusedState.subscribe((function(t){p()(".b-folders .e-item .e-link.focused",e).removeClass("focused"),g.Focused.FolderList===t&&p()(".b-folders .e-item .e-link.selected",e).addClass("focused")}))},i.messagesDropOver=function(e){u.a.clearTimeout(this.iDropOverTimer),e&&e.collapsed()&&(this.iDropOverTimer=c()((function(){e.collapsed(!1),Object(E.a)().setExpandedFolder(e.fullNameHash,!0),Object(b.windowResize)()}),g.Magics.Time500ms))},i.messagesDropOut=function(){u.a.clearTimeout(this.iDropOverTimer)},i.scrollToFocused=function(){if(!this.oContentVisible||!this.oContentScrollable)return!1;var e=p()(".e-item .e-link.focused",this.oContentScrollable),t=e.position(),n=this.oContentVisible.height(),i=e.outerHeight();return!(!t||!(0>t.top||t.top+i>n))&&(0>t.top?this.oContentScrollable.scrollTop(this.oContentScrollable.scrollTop()+t.top-20):this.oContentScrollable.scrollTop(this.oContentScrollable.scrollTop()+t.top-n+i+20),!0)},i.messagesDrop=function(e,t){if(e&&t&&t.helper){var n=t.helper.data("rl-folder"),i=v.$html.hasClass("rl-ctrl-key-pressed"),o=t.helper.data("rl-uids");Object(b.isNormal)(n)&&""!==n&&Object(b.isArray)(o)&&Object(E.a)().moveMessagesToFolder(n,o,e.fullNameRaw,i)}},i.composeClick=function(){A.capa(g.Capa.Composer)&&Object(j.showScreenPopup)(n(133))},i.createFolder=function(){Object(j.showScreenPopup)(n(429))},i.configureFolders=function(){Object(j.setHash)(Object(y.z)("folders"))},i.contactsClick=function(){this.allowContacts&&Object(j.showScreenPopup)(n(428))},t}(F.a))||i},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var i=n(10),o=(n(77),n(3)),a=n.n(o),r=n(1),s=n(0),c=n(2),l=n(15),u=function(e){function t(){var t;return(t=e.call(this,"ContactModel")||this).idContact=0,t.display="",t.properties=[],t.readOnly=!1,t.focused=r.a.observable(!1),t.selected=r.a.observable(!1),t.checked=r.a.observable(!1),t.deleted=r.a.observable(!1),t}Object(i.a)(t,e);var n=t.prototype;return n.getNameAndEmailHelper=function(){var e="",t="";return Object(c.isNonEmptyArray)(this.properties)&&a.a.each(this.properties,(function(n){n&&(s.ContactPropertyType.FirstName===n[0]?e=Object(c.trim)(n[1]+" "+e):s.ContactPropertyType.LastName===n[0]?e=Object(c.trim)(e+" "+n[1]):""===t&&s.ContactPropertyType.Email===n[0]&&(t=n[1]))})),""===t?null:[t,e]},n.parse=function(e){var t=this,n=!1;return e&&"Object/Contact"===e["@Object"]&&(this.idContact=Object(c.pInt)(e.IdContact),this.display=Object(c.pString)(e.Display),this.readOnly=!!e.ReadOnly,Object(c.isNonEmptyArray)(e.Properties)&&a.a.each(e.Properties,(function(e){e&&e.Type&&Object(c.isNormal)(e.Value)&&Object(c.isNormal)(e.TypeStr)&&t.properties.push([Object(c.pInt)(e.Type),Object(c.pString)(e.Value),Object(c.pString)(e.TypeStr)])})),n=!0),n},n.srcAttr=function(){return Object(l.j)()},n.generateUid=function(){return Object(c.pString)(this.idContact)},n.lineAsCss=function(){var e=[];return this.deleted()&&e.push("deleted"),this.selected()&&e.push("selected"),this.checked()&&e.push("checked"),this.focused()&&e.push("focused"),e.join(" ")},t}(n(67).a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return ce}));var i,o,a,r,s,c,l,u,d,p,f,h,m,b=n(29),g=n(10),v=n(18),y=n(12),S=n.n(y),O=n(33),w=n.n(O),T=n(17),C=n.n(T),A=n(28),E=n.n(A),j=n(19),F=n.n(j),R=n(4),N=n.n(R),I=n(3),L=n.n(I),P=n(8),_=n.n(P),M=n(1),D=n(20),k=n.n(D),x=n(206),U=n.n(x),H=n(241),G=n.n(H),B=n(0),V=n(24),K=n(6),q=n(2),z=n(15),W=n(320),Y=n(23),$=n(9),J=n(14),X=n(27),Z=n(240),Q=n(35),ee=n(11),te=n(13),ne=n(5),ie=n(16),oe=n(21),ae=n(7),re=n(25),se=function(e){return e.canBeMoved()},ce=(i=Object(ae.view)({name:"View/User/MailBox/MessageList",type:ae.ViewType.Right,templateID:"MailMessageList"}),o=Object(ae.command)(),a=Object(ae.command)(),r=Object(ae.command)(se),s=Object(ae.command)(se),c=Object(ae.command)(se),l=Object(ae.command)(se),u=Object(ae.command)(se),d=Object(ae.command)(se),p=Object(ae.command)(se),f=Object(ae.command)(se),i((m=function(e){function t(){var t;return(t=e.call(this)||this).sLastUid=null,t.bPrefetch=!1,t.emptySubjectValue="",t.iGoToUpUpOrDownDownTimeout=0,t.mobile=!!ne.appSettingsGet("mobile"),t.newMoveToFolder=X.a.newMoveToFolder,t.allowReload=!!ne.capa(B.Capa.Reload),t.allowSearch=!!ne.capa(B.Capa.Search),t.allowSearchAdv=!!ne.capa(B.Capa.SearchAdv),t.allowComposer=!!ne.capa(B.Capa.Composer),t.allowMessageListActions=!!ne.capa(B.Capa.MessageListActions),t.allowDangerousActions=!!ne.capa(B.Capa.DangerousActions),t.allowFolders=!!ne.capa(B.Capa.Folders),t.popupVisibility=K.popupVisibility,t.message=te.a.message,t.messageList=te.a.messageList,t.messageListDisableAutoSelect=te.a.messageListDisableAutoSelect,t.folderList=ee.a.folderList,t.composeInEdit=X.a.composeInEdit,t.leftPanelDisabled=K.leftPanelDisabled,t.selectorMessageSelected=te.a.selectorMessageSelected,t.selectorMessageFocused=te.a.selectorMessageFocused,t.isMessageSelected=te.a.isMessageSelected,t.messageListSearch=te.a.messageListSearch,t.messageListThreadUid=te.a.messageListThreadUid,t.messageListError=te.a.messageListError,t.folderMenuForMove=ee.a.folderMenuForMove,t.useCheckboxesInList=Q.a.useCheckboxesInList,t.mainMessageListSearch=te.a.mainMessageListSearch,t.messageListEndFolder=te.a.messageListEndFolder,t.messageListEndThreadUid=te.a.messageListEndThreadUid,t.messageListChecked=te.a.messageListChecked,t.messageListCheckedOrSelected=te.a.messageListCheckedOrSelected,t.messageListCheckedOrSelectedUidsWithSubMails=te.a.messageListCheckedOrSelectedUidsWithSubMails,t.messageListCompleteLoadingThrottle=te.a.messageListCompleteLoadingThrottle,t.messageListCompleteLoadingThrottleForAnimation=te.a.messageListCompleteLoadingThrottleForAnimation,Object($.initOnStartOrLangChange)((function(){t.emptySubjectValue=Object($.i18n)("MESSAGE_LIST/EMPTY_SUBJECT_TEXT")})),t.userQuota=Z.a.quota,t.userUsageSize=Z.a.usage,t.userUsageProc=Z.a.percentage,t.moveDropdownTrigger=M.a.observable(!1),t.moreDropdownTrigger=M.a.observable(!1),t.dragOver=M.a.observable(!1).extend({throttle:1}),t.dragOverEnter=M.a.observable(!1).extend({throttle:1}),t.dragOverArea=M.a.observable(null),t.dragOverBodyArea=M.a.observable(null),t.messageListItemTemplate=M.a.computed((function(){return t.mobile||B.Layout.SidePreview===Q.a.layout()?"MailMessageListItem":"MailMessageListItemNoPreviewPane"})),t.messageListSearchDesc=M.a.computed((function(){var e=te.a.messageListEndSearch();return""===e?"":Object($.i18n)("MESSAGE_LIST/SEARCH_RESULT_FOR",{SEARCH:e})})),t.messageListPagenator=M.a.computed(Object(q.computedPagenatorHelper)(te.a.messageListPage,te.a.messageListPageCount)),t.checkAll=M.a.computed({read:function(){return 0<te.a.messageListChecked().length},write:function(e){e=!!e,L.a.each(te.a.messageList(),(function(t){t.checked(e)}))}}),t.inputMessageListSearchFocus=M.a.observable(!1),t.sLastSearchValue="",t.inputProxyMessageListSearch=M.a.computed({read:t.mainMessageListSearch,write:function(e){t.sLastSearchValue=e}}),t.isIncompleteChecked=M.a.computed((function(){var e=te.a.messageList().length,t=te.a.messageListChecked().length;return 0<e&&0<t&&e>t})),t.hasMessages=M.a.computed((function(){return 0<t.messageList().length})),t.hasCheckedOrSelectedLines=M.a.computed((function(){return 0<t.messageListCheckedOrSelected().length})),t.isSpamFolder=M.a.computed((function(){return ee.a.spamFolder()===t.messageListEndFolder()&&""!==ee.a.spamFolder()})),t.isSpamDisabled=M.a.computed((function(){return V.r===ee.a.spamFolder()})),t.isTrashFolder=M.a.computed((function(){return ee.a.trashFolder()===t.messageListEndFolder()&&""!==ee.a.trashFolder()})),t.isDraftFolder=M.a.computed((function(){return ee.a.draftFolder()===t.messageListEndFolder()&&""!==ee.a.draftFolder()})),t.isSentFolder=M.a.computed((function(){return ee.a.sentFolder()===t.messageListEndFolder()&&""!==ee.a.sentFolder()})),t.isArchiveFolder=M.a.computed((function(){return ee.a.archiveFolder()===t.messageListEndFolder()&&""!==ee.a.archiveFolder()})),t.isArchiveDisabled=M.a.computed((function(){return V.r===ee.a.archiveFolder()})),t.isArchiveVisible=M.a.computed((function(){return!t.isArchiveFolder()&&!t.isArchiveDisabled()&&!t.isDraftFolder()})),t.isSpamVisible=M.a.computed((function(){return!(t.isSpamFolder()||t.isSpamDisabled()||t.isDraftFolder()||t.isSentFolder())})),t.isUnSpamVisible=M.a.computed((function(){return t.isSpamFolder()&&!t.isSpamDisabled()&&!t.isDraftFolder()&&!t.isSentFolder()})),t.mobileCheckedStateShow=M.a.computed((function(){var e=0<t.messageListChecked().length;return!t.mobile||e})),t.mobileCheckedStateHide=M.a.computed((function(){var e=0<t.messageListChecked().length;return!t.mobile||!e})),t.messageListFocused=M.a.computed((function(){return B.Focused.MessageList===X.a.focusedState()})),t.canBeMoved=t.hasCheckedOrSelectedLines,t.quotaTooltip=L.a.bind(t.quotaTooltip,Object(b.a)(t)),t.selector=new W.a(t.messageList,t.selectorMessageSelected,t.selectorMessageFocused,".messageListItem .actionHandle",".messageListItem.selected",".messageListItem .checkboxMessage",".messageListItem.focused"),t.selector.on("onItemSelect",(function(e){te.a.selectMessage(e)})),t.selector.on("onItemGetUid",(function(e){return e?e.generateUid():""})),t.selector.on("onAutoSelect",(function(){return t.useAutoSelect()})),t.selector.on("onUpUpOrDownDown",(function(e){t.goToUpUpOrDownDown(e)})),Y.b("mailbox.message-list.selector.go-down",(function(e){t.selector.goDown(e)})),Y.b("mailbox.message-list.selector.go-up",(function(e){t.selector.goUp(e)})),Y.b("mailbox.message.show",(function(e,n){var i=S()(L.a).call(L.a,t.messageList(),(function(t){return t&&e===t.folderFullNameRaw&&n===t.uid}));"INBOX"===e&&Object(ae.setHash)(Object(z.o)(e,1)),i?t.selector.selectMessageItem(i):("INBOX"!==e&&Object(ae.setHash)(Object(z.o)(e,1)),te.a.selectMessageByFolderAndUid(e,n))})),te.a.messageListEndHash.subscribe((function(){t.selector.scrollToTop()})),t}Object(g.a)(t,e);var i=t.prototype;return i.clearCommand=function(){ne.capa(B.Capa.DangerousActions)&&Object(ae.showScreenPopup)(n(554),[ee.a.currentFolder()])},i.reloadCommand=function(){!te.a.messageListCompleteLoadingThrottleForAnimation()&&this.allowReload&&Object(oe.a)().reloadMessageList(!1,!0)},i.multyForwardCommand=function(){ne.capa(B.Capa.Composer)&&Object(ae.showScreenPopup)(n(133),[B.ComposeType.ForwardAsAttachment,te.a.messageListCheckedOrSelected()])},i.deleteWithoutMoveCommand=function(){ne.capa(B.Capa.DangerousActions)&&Object(oe.a)().deleteMessagesFromFolder(B.FolderType.Trash,ee.a.currentFolderFullNameRaw(),te.a.messageListCheckedOrSelectedUidsWithSubMails(),!1)},i.deleteCommand=function(){Object(oe.a)().deleteMessagesFromFolder(B.FolderType.Trash,ee.a.currentFolderFullNameRaw(),te.a.messageListCheckedOrSelectedUidsWithSubMails(),!0)},i.archiveCommand=function(){Object(oe.a)().deleteMessagesFromFolder(B.FolderType.Archive,ee.a.currentFolderFullNameRaw(),te.a.messageListCheckedOrSelectedUidsWithSubMails(),!0)},i.spamCommand=function(){Object(oe.a)().deleteMessagesFromFolder(B.FolderType.Spam,ee.a.currentFolderFullNameRaw(),te.a.messageListCheckedOrSelectedUidsWithSubMails(),!0)},i.notSpamCommand=function(){Object(oe.a)().deleteMessagesFromFolder(B.FolderType.NotSpam,ee.a.currentFolderFullNameRaw(),te.a.messageListCheckedOrSelectedUidsWithSubMails(),!0)},i.moveCommand=function(){},i.moveNewCommand=function(e,t){this.newMoveToFolder()&&this.mobileCheckedStateShow()&&(e&&t&&t.preventDefault&&(t.preventDefault(),t.stopPropagation&&t.stopPropagation()),Object(K.moveAction)()?(X.a.focusedState(B.Focused.MessageList),Object(K.moveAction)(!1)):(X.a.focusedState(B.Focused.FolderList),Object(K.moveAction)(!0)))},i.hideLeft=function(e,t){t.preventDefault(),t.stopPropagation(),Object(K.leftPanelDisabled)(!0)},i.showLeft=function(e,t){t.preventDefault(),t.stopPropagation(),Object(K.leftPanelDisabled)(!1)},i.composeClick=function(){ne.capa(B.Capa.Composer)&&Object(ae.showScreenPopup)(n(133))},i.goToUpUpOrDownDown=function(e){var t=this;return!(0<this.messageListChecked().length)&&(N.a.clearTimeout(this.iGoToUpUpOrDownDownTimeout),this.iGoToUpUpOrDownDownTimeout=w()((function(){var n=null,i=null,o=null,a=null;S()(L.a).call(L.a,t.messageListPagenator(),(function(e){if(e){if(a&&(i=e),e.current&&(a=e,n=o),i)return!0;o=e}return!1})),B.Layout.NoPreview!==Q.a.layout()||t.message()?t.selector.iSelectNextHelper=e?-1:1:t.selector.iFocusedNextHelper=e?-1:1,(e?n:i)&&(t.selector.unselect(),t.gotoPage(e?n:i))}),B.Magics.Time350ms),!0)},i.useAutoSelect=function(){return!this.messageListDisableAutoSelect()&&(!/is:unseen/.test(this.mainMessageListSearch())&&B.Layout.NoPreview!==Q.a.layout())},i.searchEnterAction=function(){this.mainMessageListSearch(this.sLastSearchValue),this.inputMessageListSearchFocus(!1)},i.printableMessageCountForDeletion=function(){var e=this.messageListCheckedOrSelectedUidsWithSubMails().length;return 1<e?" ("+(100>e?e:"99+")+")":""},i.cancelSearch=function(){this.mainMessageListSearch(""),this.inputMessageListSearchFocus(!1)},i.cancelThreadUid=function(){Object(ae.setHash)(Object(z.o)(ee.a.currentFolderFullNameHash(),te.a.messageListPageBeforeThread(),te.a.messageListSearch()))},i.moveSelectedMessagesToFolder=function(e,t){return this.canBeMoved()&&Object(oe.a)().moveMessagesToFolder(ee.a.currentFolderFullNameRaw(),te.a.messageListCheckedOrSelectedUidsWithSubMails(),e,t),!1},i.dragAndDronHelper=function(e){e&&e.checked(!0);var t=Object(q.draggablePlace)(),n=function(){var e=te.a.messageListCheckedOrSelectedUidsWithSubMails();t.data("rl-uids",e),S()(t).call(t,".text").text(""+e.length)};return t.data("rl-folder",ee.a.currentFolderFullNameRaw()),n(),L.a.defer(n),t},i.setAction=function(e,t,n){Object(oe.a)().messageListAction(e,t,n)},i.setActionForAll=function(e,t,n){if(void 0===n&&(n=""),""!==e){var i=0,o=[],a=Object(J.e)(e);if(a){switch(t){case B.MessageSetAction.SetSeen:(a=Object(J.e)(e))&&(L.a.each(te.a.messageList(),(function(e){e.unseen()&&(i+=1),e.unseen(!1),o.push(e.uid)})),n?(a.messageCountUnread(a.messageCountUnread()-i),0>a.messageCountUnread()&&a.messageCountUnread(0)):a.messageCountUnread(0),Object(J.c)(e)),ie.a.messageSetSeenToAll(q.noop,e,!0,n?o:null);break;case B.MessageSetAction.UnsetSeen:(a=Object(J.e)(e))&&(L.a.each(te.a.messageList(),(function(e){e.unseen()||(i+=1),e.unseen(!0),o.push(e.uid)})),n?(a.messageCountUnread(a.messageCountUnread()+i),a.messageCountAll()<a.messageCountUnread()&&a.messageCountUnread(a.messageCountAll())):a.messageCountUnread(a.messageCountAll()),Object(J.c)(e)),ie.a.messageSetSeenToAll(q.noop,e,!1,n?o:null)}Object(oe.a)().reloadFlagsCurrentMessageListAndMessageFromCache()}}},i.listSetSeen=function(){this.setAction(ee.a.currentFolderFullNameRaw(),B.MessageSetAction.SetSeen,te.a.messageListCheckedOrSelected())},i.listSetAllSeen=function(){this.setActionForAll(ee.a.currentFolderFullNameRaw(),B.MessageSetAction.SetSeen,this.messageListEndThreadUid())},i.listUnsetSeen=function(){this.setAction(ee.a.currentFolderFullNameRaw(),B.MessageSetAction.UnsetSeen,te.a.messageListCheckedOrSelected())},i.listSetFlags=function(){this.setAction(ee.a.currentFolderFullNameRaw(),B.MessageSetAction.SetFlag,te.a.messageListCheckedOrSelected())},i.listUnsetFlags=function(){this.setAction(ee.a.currentFolderFullNameRaw(),B.MessageSetAction.UnsetFlag,te.a.messageListCheckedOrSelected())},i.flagMessages=function(e){var t=this.messageListCheckedOrSelected();if(e){var n=C()(L.a).call(L.a,t,(function(e){return e.uid}));0<n.length&&-1<Object(q.inArray)(e.uid,n)?this.setAction(e.folderFullNameRaw,e.flagged()?B.MessageSetAction.UnsetFlag:B.MessageSetAction.SetFlag,t):this.setAction(e.folderFullNameRaw,e.flagged()?B.MessageSetAction.UnsetFlag:B.MessageSetAction.SetFlag,[e])}},i.flagMessagesFast=function(e){var t=this.messageListCheckedOrSelected();if(0<t.length)if(Object(q.isUnd)(e)){var n=E()(L.a).call(L.a,t,(function(e){return e.flagged()}));this.setAction(t[0].folderFullNameRaw,t.length===n.length?B.MessageSetAction.UnsetFlag:B.MessageSetAction.SetFlag,t)}else this.setAction(t[0].folderFullNameRaw,e?B.MessageSetAction.SetFlag:B.MessageSetAction.UnsetFlag,t)},i.seenMessagesFast=function(e){var t=this.messageListCheckedOrSelected();if(0<t.length)if(Object(q.isUnd)(e)){var n=E()(L.a).call(L.a,t,(function(e){return e.unseen()}));this.setAction(t[0].folderFullNameRaw,0<n.length?B.MessageSetAction.SetSeen:B.MessageSetAction.UnsetSeen,t)}else this.setAction(t[0].folderFullNameRaw,e?B.MessageSetAction.SetSeen:B.MessageSetAction.UnsetSeen,t)},i.gotoPage=function(e){e&&Object(ae.setHash)(Object(z.o)(ee.a.currentFolderFullNameHash(),e.value,te.a.messageListSearch(),te.a.messageListThreadUid()))},i.gotoThread=function(e){e&&0<e.threadsLen()&&(te.a.messageListPageBeforeThread(te.a.messageListPage()),Object(ae.setHash)(Object(z.o)(ee.a.currentFolderFullNameHash(),1,te.a.messageListSearch(),e.uid)))},i.clearListIsVisible=function(){return""===this.messageListSearchDesc()&&""===this.messageListError()&&""===this.messageListEndThreadUid()&&0<this.messageList().length&&(this.isSpamFolder()||this.isTrashFolder())},i.onBuild=function(e){var t=this,n=this;this.oContentVisible=_()(".b-content",e),this.oContentScrollable=_()(".content",this.oContentVisible),this.selector.init(this.oContentVisible,this.oContentScrollable,B.KeyState.MessageList),this.mobile&&e.on("click",(function(){Object(K.leftPanelDisabled)(!0)})),e.on("click",".messageList .b-message-list-wrapper",(function(){B.Focused.MessageView===X.a.focusedState()&&X.a.focusedState(B.Focused.MessageList)})).on("click",".e-pagenator .e-page",(function(){n.gotoPage(M.a.dataFor(this))})).on("click",".messageList .checkboxCkeckAll",(function(){t.checkAll(!t.checkAll())})).on("click",".messageList .messageListItem .flagParent",(function(){n.flagMessages(M.a.dataFor(this))})).on("click",".messageList .messageListItem .threads-len",(function(){n.gotoThread(M.a.dataFor(this))})).on("dblclick",".messageList .messageListItem .actionHandle",(function(){n.gotoThread(M.a.dataFor(this))})),this.initUploaderForAppend(),this.initShortcuts(),!K.bMobileDevice&&G.a&&ne.capa(B.Capa.Prefetch)&&(G.a.setIdleDuration(B.Magics.ifvisibleIdle10s),G.a.idle((function(){t.prefetchNextTick()})))},i.initShortcuts=function(){var e=this;k()("enter",B.KeyState.MessageList,(function(){return!e.message()||!e.useAutoSelect()||(Y.a("mailbox.message-view.toggle-full-screen"),!1)})),ne.capa(B.Capa.MessageListActions)&&(k()("z",[B.KeyState.MessageList,B.KeyState.MessageView],(function(){return e.archiveCommand(),!1})),k()("delete, shift+delete, shift+3",B.KeyState.MessageList,(function(t,n){return!t||(0<te.a.messageListCheckedOrSelected().length&&(n&&"shift+delete"===n.shortcut?e.deleteWithoutMoveCommand():e.deleteCommand()),!1)}))),ne.capa(B.Capa.Reload)&&k()("ctrl+r, command+r",[B.KeyState.FolderList,B.KeyState.MessageList,B.KeyState.MessageView],(function(){return e.reloadCommand(),!1})),k()("ctrl+a, command+a",B.KeyState.MessageList,(function(){return e.checkAll(!(e.checkAll()&&!e.isIncompleteChecked())),!1})),ne.capa(B.Capa.Composer)&&k()("w,c",[B.KeyState.MessageList,B.KeyState.MessageView],(function(){return Object(ae.showScreenPopup)(n(133)),!1})),ne.capa(B.Capa.MessageListActions)&&k()("i",[B.KeyState.MessageList,B.KeyState.MessageView],(function(){return e.flagMessagesFast(),!1})),k()("t",[B.KeyState.MessageList],(function(){var t=e.selectorMessageSelected();return t||(t=e.selectorMessageFocused()),t&&0<t.threadsLen()&&e.gotoThread(t),!1})),ne.capa(B.Capa.MessageListActions)&&k()("m",B.KeyState.MessageList,(function(){return e.newMoveToFolder()?e.moveNewCommand():e.moveDropdownTrigger(!0),!1})),ne.capa(B.Capa.MessageListActions)&&(k()("q",[B.KeyState.MessageList,B.KeyState.MessageView],(function(){return e.seenMessagesFast(!0),!1})),k()("u",[B.KeyState.MessageList,B.KeyState.MessageView],(function(){return e.seenMessagesFast(!1),!1}))),ne.capa(B.Capa.Composer)&&k()("shift+f",[B.KeyState.MessageList,B.KeyState.MessageView],(function(){return e.multyForwardCommand(),!1})),ne.capa(B.Capa.Search)&&k()("/",[B.KeyState.MessageList,B.KeyState.MessageView],(function(){return e.inputMessageListSearchFocus(!0),!1})),k()("esc",B.KeyState.MessageList,(function(){return""!==e.messageListSearchDesc()?(e.cancelSearch(),!1):""===e.messageListEndThreadUid()||(e.cancelThreadUid(),!1)})),k()("tab, shift+tab, left, right",B.KeyState.MessageList,(function(t,n){return t&&n&&("shift+tab"===n.shortcut||"left"===n.shortcut)?X.a.focusedState(B.Focused.FolderList):e.message()&&X.a.focusedState(B.Focused.MessageView),!1})),k()("ctrl+left, command+left",B.KeyState.MessageView,q.noopFalse),k()("ctrl+right, command+right",B.KeyState.MessageView,q.noopFalse)},i.prefetchNextTick=function(){var e=this;if(G.a&&!this.bPrefetch&&!G.a.now()&&this.viewModelVisibility()){var t=S()(L.a).call(L.a,this.messageList(),(function(e){return e&&!Object(J.m)(e.folderFullNameRaw,e.uid)}));t&&(this.bPrefetch=!0,Object(J.b)(t.folderFullNameRaw,t.uid),ie.a.message((function(t,n){var i=!(B.StorageResultType.Success!==t||!n||!n.Result);L.a.delay((function(){e.bPrefetch=!1,i&&e.prefetchNextTick()}),B.Magics.Time1s)}),t.folderFullNameRaw,t.uid))}},i.advancedSearchClick=function(){ne.capa(B.Capa.SearchAdv)&&Object(ae.showScreenPopup)(n(555),[this.mainMessageListSearch()])},i.quotaTooltip=function(){return Object($.i18n)("MESSAGE_LIST/QUOTA_SIZE",{SIZE:Object(q.friendlySize)(this.userUsageSize()),PROC:this.userUsageProc(),LIMIT:Object(q.friendlySize)(this.userQuota())})},i.initUploaderForAppend=function(){var e=this;if(!ne.appSettingsGet("allowAppendMessage")||!this.dragOverArea())return!1;var t=new U.a({action:Object(z.b)(),name:"AppendFile",queueSize:1,multipleSizeLimit:1,hidden:{Folder:function(){return ee.a.currentFolderFullNameRaw()}},dragAndDropElement:this.dragOverArea(),dragAndDropBodyElement:this.dragOverBodyArea()});return this.dragOver.subscribe((function(t){t&&e.selector.scrollToTop()})),t.on("onDragEnter",(function(){e.dragOverEnter(!0)})).on("onDragLeave",(function(){e.dragOverEnter(!1)})).on("onBodyDragEnter",(function(){e.dragOver(!0)})).on("onBodyDragLeave",(function(){e.dragOver(!1)})).on("onSelect",(function(e,t){return!(!e||!t||"message/rfc822"!==t.Type)&&(te.a.messageListLoading(!0),!0)})).on("onComplete",(function(){Object(oe.a)().reloadMessageList(!0,!0)})),!!t},t}(re.a),Object(v.a)(m.prototype,"clearCommand",[o],F()(m.prototype,"clearCommand"),m.prototype),Object(v.a)(m.prototype,"reloadCommand",[a],F()(m.prototype,"reloadCommand"),m.prototype),Object(v.a)(m.prototype,"multyForwardCommand",[r],F()(m.prototype,"multyForwardCommand"),m.prototype),Object(v.a)(m.prototype,"deleteWithoutMoveCommand",[s],F()(m.prototype,"deleteWithoutMoveCommand"),m.prototype),Object(v.a)(m.prototype,"deleteCommand",[c],F()(m.prototype,"deleteCommand"),m.prototype),Object(v.a)(m.prototype,"archiveCommand",[l],F()(m.prototype,"archiveCommand"),m.prototype),Object(v.a)(m.prototype,"spamCommand",[u],F()(m.prototype,"spamCommand"),m.prototype),Object(v.a)(m.prototype,"notSpamCommand",[d],F()(m.prototype,"notSpamCommand"),m.prototype),Object(v.a)(m.prototype,"moveCommand",[p],F()(m.prototype,"moveCommand"),m.prototype),Object(v.a)(m.prototype,"moveNewCommand",[f],F()(m.prototype,"moveNewCommand"),m.prototype),h=m))||h)},function(e,t,n){"use strict";n.d(t,"a",(function(){return X}));var i,o,a,r,s,c,l,u,d=n(29),p=n(10),f=n(18),h=n(17),m=n.n(h),b=n(12),g=n.n(b),v=n(19),y=n.n(v),S=n(4),O=n.n(S),w=n(3),T=n.n(w),C=n(8),A=n.n(C),E=n(1),j=n(20),F=n.n(j),R=n(24),N=n(0),I=n(6),L=n(2),P=n(84),_=n(23),M=n(9),D=n(15),k=n(14),x=n(26),U=n(27),H=n(35),G=n(46),B=n(11),V=n(13),K=n(60),q=n(5),z=n(16),W=n(94),Y=n(21),$=n(7),J=n(25),X=(i=Object($.view)({name:"View/User/MailBox/MessageView",type:$.ViewType.Right,templateID:"MailMessageView"}),o=Object($.command)(),a=Object($.command)((function(e){return e.messageVisibility()})),r=Object($.command)((function(e){return e.messageVisibility()})),s=Object($.command)((function(e){return!e.messageListAndMessageViewLoading()})),c=Object($.command)((function(e){return!e.messageListAndMessageViewLoading()})),i((u=function(e){function t(){var t;t=e.call(this)||this;var n="",i=function(e){return Object($.createCommand)((function(){t.lastReplyAction(e),t.replyOrforward(e)}),t.canBeRepliedOrForwarded)},o=function(e,n){return Object($.createCommand)((function(){var i=t.message();i&&t.allowMessageListActions&&(t.message(null),Object(Y.a)().deleteMessagesFromFolder(e,i.folderFullNameRaw,[i.uid],n))}),t.messageVisibility)};return t.oDom=null,t.oHeaderDom=null,t.oMessageScrollerDom=null,t.bodyBackgroundColor=E.a.observable(""),t.pswp=null,t.moveAction=I.moveAction,t.allowComposer=!!q.capa(N.Capa.Composer),t.allowMessageActions=!!q.capa(N.Capa.MessageActions),t.allowMessageListActions=!!q.capa(N.Capa.MessageListActions),t.logoImg=Object(L.trim)(q.settingsGet("UserLogoMessage")),t.logoIframe=Object(L.trim)(q.settingsGet("UserIframeMessage")),t.mobile=!!q.appSettingsGet("mobile"),t.attachmentsActions=U.a.attachmentsActions,t.message=V.a.message,t.messageListChecked=V.a.messageListChecked,t.hasCheckedMessages=V.a.hasCheckedMessages,t.messageListCheckedOrSelectedUidsWithSubMails=V.a.messageListCheckedOrSelectedUidsWithSubMails,t.messageLoadingThrottle=V.a.messageLoadingThrottle,t.messagesBodiesDom=V.a.messagesBodiesDom,t.useThreads=H.a.useThreads,t.replySameFolder=H.a.replySameFolder,t.layout=H.a.layout,t.usePreviewPane=H.a.usePreviewPane,t.isMessageSelected=V.a.isMessageSelected,t.messageActiveDom=V.a.messageActiveDom,t.messageError=V.a.messageError,t.fullScreenMode=V.a.messageFullScreenMode,t.messageListOfThreadsLoading=E.a.observable(!1).extend({rateLimit:1}),t.highlightUnselectedAttachments=E.a.observable(!1).extend({falseTimeout:2e3}),t.showAttachmnetControls=E.a.observable(!1),t.showAttachmnetControlsState=function(e){K.b(N.ClientSideKeyName.MessageAttachmnetControls,!!e)},t.allowAttachmnetControls=E.a.computed((function(){return 0<t.attachmentsActions().length&&q.capa(N.Capa.AttachmentsActions)})),t.downloadAsZipAllowed=E.a.computed((function(){return-1<Object(L.inArray)("zip",t.attachmentsActions())&&t.allowAttachmnetControls()})),t.downloadAsZipLoading=E.a.observable(!1),t.downloadAsZipError=E.a.observable(!1).extend({falseTimeout:7e3}),t.saveToOwnCloudAllowed=E.a.computed((function(){return-1<Object(L.inArray)("owncloud",t.attachmentsActions())&&t.allowAttachmnetControls()})),t.saveToOwnCloudLoading=E.a.observable(!1),t.saveToOwnCloudSuccess=E.a.observable(!1).extend({falseTimeout:2e3}),t.saveToOwnCloudError=E.a.observable(!1).extend({falseTimeout:7e3}),t.saveToOwnCloudSuccess.subscribe((function(e){e&&t.saveToOwnCloudError(!1)})),t.saveToOwnCloudError.subscribe((function(e){e&&t.saveToOwnCloudSuccess(!1)})),t.saveToDropboxAllowed=E.a.computed((function(){return-1<Object(L.inArray)("dropbox",t.attachmentsActions())&&t.allowAttachmnetControls()})),t.saveToDropboxLoading=E.a.observable(!1),t.saveToDropboxSuccess=E.a.observable(!1).extend({falseTimeout:2e3}),t.saveToDropboxError=E.a.observable(!1).extend({falseTimeout:7e3}),t.saveToDropboxSuccess.subscribe((function(e){e&&t.saveToDropboxError(!1)})),t.saveToDropboxError.subscribe((function(e){e&&t.saveToDropboxSuccess(!1)})),t.showAttachmnetControls.subscribe((function(e){t.message()&&T.a.each(t.message().attachments(),(function(t){t&&t.checked(!!e)}))})),t.lastReplyAction_=E.a.observable(""),t.lastReplyAction=E.a.computed({read:t.lastReplyAction_,write:function(e){t.lastReplyAction_(-1===Object(L.inArray)(e,[N.ComposeType.Reply,N.ComposeType.ReplyAll,N.ComposeType.Forward])?N.ComposeType.Reply:e)}}),t.lastReplyAction(K.a(N.ClientSideKeyName.LastReplyAction)||N.ComposeType.Reply),t.lastReplyAction_.subscribe((function(e){K.b(N.ClientSideKeyName.LastReplyAction,e)})),t.showFullInfo=E.a.observable("1"===K.a(N.ClientSideKeyName.MessageHeaderFullInfo)),t.moreDropdownTrigger=E.a.observable(!1),t.messageDomFocused=E.a.observable(!1).extend({rateLimit:0}),t.messageVisibility=E.a.computed((function(){return!t.messageLoadingThrottle()&&!!t.message()})),t.message.subscribe((function(e){e||V.a.selectorMessageSelected(null)})),t.canBeRepliedOrForwarded=E.a.computed((function(){var e=t.messageVisibility();return!t.isDraftFolder()&&e})),t.replyCommand=i(N.ComposeType.Reply),t.replyAllCommand=i(N.ComposeType.ReplyAll),t.forwardCommand=i(N.ComposeType.Forward),t.forwardAsAttachmentCommand=i(N.ComposeType.ForwardAsAttachment),t.editAsNewCommand=i(N.ComposeType.EditAsNew),t.deleteCommand=o(N.FolderType.Trash,!0),t.deleteWithoutMoveCommand=o(N.FolderType.Trash,!1),t.archiveCommand=o(N.FolderType.Archive,!0),t.spamCommand=o(N.FolderType.Spam,!0),t.notSpamCommand=o(N.FolderType.NotSpam,!0),t.dropboxEnabled=x.a.dropbox.enabled,t.dropboxApiKey=x.a.dropbox.apiKey,t.viewBodyTopValue=E.a.observable(0),t.viewFolder="",t.viewUid="",t.viewHash="",t.viewSubject=E.a.observable(""),t.viewFromShort=E.a.observable(""),t.viewFromDkimData=E.a.observable(["none",""]),t.viewToShort=E.a.observable(""),t.viewFrom=E.a.observable(""),t.viewTo=E.a.observable(""),t.viewCc=E.a.observable(""),t.viewBcc=E.a.observable(""),t.viewReplyTo=E.a.observable(""),t.viewTimeStamp=E.a.observable(0),t.viewSize=E.a.observable(""),t.viewLineAsCss=E.a.observable(""),t.viewViewLink=E.a.observable(""),t.viewUnsubscribeLink=E.a.observable(""),t.viewDownloadLink=E.a.observable(""),t.viewUserPic=E.a.observable(R.f),t.viewUserPicVisible=E.a.observable(!1),t.viewIsImportant=E.a.observable(!1),t.viewIsFlagged=E.a.observable(!1),t.viewFromDkimVisibility=E.a.computed((function(){return"none"!==t.viewFromDkimData()[0]})),t.viewFromDkimStatusIconClass=E.a.computed((function(){switch(t.viewFromDkimData()[0]){case"none":return"icon-none iconcolor-display-none";case"pass":return"icon-ok iconcolor-green";default:return"icon-warning-alt iconcolor-red"}})),t.viewFromDkimStatusTitle=E.a.computed((function(){var e=t.viewFromDkimData();if(Object(L.isNonEmptyArray)(e)){if(e[0]&&e[1])return e[1];if(e[0])return"DKIM: "+e[0]}return""})),t.messageActiveDom.subscribe((function(e){t.bodyBackgroundColor(e?t.detectDomBackgroundColor(e):"")}),Object(d.a)(t)),t.message.subscribe((function(e){t.messageActiveDom(null),e?(t.showAttachmnetControls(!1),K.a(N.ClientSideKeyName.MessageAttachmnetControls)&&T.a.delay((function(){t.showAttachmnetControls(!0)}),N.Magics.Time50ms),t.viewHash!==e.hash&&t.scrollMessageToTop(),t.viewFolder=e.folderFullNameRaw,t.viewUid=e.uid,t.viewHash=e.hash,t.viewSubject(e.subject()),t.viewFromShort(e.fromToLine(!0,!0)),t.viewFromDkimData(e.fromDkimData()),t.viewToShort(e.toToLine(!0,!0)),t.viewFrom(e.fromToLine(!1)),t.viewTo(e.toToLine(!1)),t.viewCc(e.ccToLine(!1)),t.viewBcc(e.bccToLine(!1)),t.viewReplyTo(e.replyToToLine(!1)),t.viewTimeStamp(e.dateTimeStampInUTC()),t.viewSize(e.friendlySize()),t.viewLineAsCss(e.lineAsCss()),t.viewViewLink(e.viewLink()),t.viewUnsubscribeLink(e.getFirstUnsubsribeLink()),t.viewDownloadLink(e.downloadLink()),t.viewIsImportant(e.isImportant()),t.viewIsFlagged(e.flagged()),n=e.fromAsSingleEmail(),Object(k.k)(n,(function(e,i){e!==t.viewUserPic()&&n===i&&(t.viewUserPicVisible(!1),t.viewUserPic(R.f),""!==e&&(t.viewUserPicVisible(!0),t.viewUserPic(e)))}))):(t.viewFolder="",t.viewUid="",t.viewHash="",t.scrollMessageToTop())})),t.message.viewTrigger.subscribe((function(){var e=t.message();e?t.viewIsFlagged(e.flagged()):t.viewIsFlagged(!1)})),t.fullScreenMode.subscribe((function(e){I.$html.toggleClass("rl-message-fullscreen",e),Object(L.windowResize)()})),t.messageLoadingThrottle.subscribe(L.windowResizeCallback),t.messageFocused=E.a.computed((function(){return N.Focused.MessageView===U.a.focusedState()})),t.messageListAndMessageViewLoading=E.a.computed((function(){return V.a.messageListCompleteLoadingThrottle()||V.a.messageLoadingThrottle()})),_.b("mailbox.message-view.toggle-full-screen",(function(){t.toggleFullScreen()})),t.attachmentPreview=T.a.bind(t.attachmentPreview,Object(d.a)(t)),t}Object(p.a)(t,e);var i=t.prototype;return i.closeMessageCommand=function(){V.a.message(null)},i.messageVisibilityCommand=function(){},i.messageEditCommand=function(){this.editMessage()},i.goUpCommand=function(){_.a("mailbox.message-list.selector.go-up",[N.Layout.NoPreview!==this.layout()||!!this.message()])},i.goDownCommand=function(){_.a("mailbox.message-list.selector.go-down",[N.Layout.NoPreview!==this.layout()||!!this.message()])},i.detectDomBackgroundColor=function(e){var t,n,i=5,o="",a=function(e){var t="";return e&&(t=e.css("background-color")||"",e.is("table")||(t=Object(L.isTransparent)(t)?"":t)),t};if(e&&1===e.length){for(var r=e;""===o&&!(0>=(i-=1))&&(n=void 0,r=(n=(t=r)?t.children():null)&&1===n.length&&n.is("table,div,center")?n:null);)o=a(r);o=Object(L.isTransparent)(o)?"":o}return o},i.fullScreen=function(){this.fullScreenMode(!0),Object(L.windowResize)()},i.unFullScreen=function(){this.fullScreenMode(!1),Object(L.windowResize)()},i.toggleFullScreen=function(){Object(L.removeSelection)(),this.fullScreenMode(!this.fullScreenMode()),Object(L.windowResize)()},i.replyOrforward=function(e){q.capa(N.Capa.Composer)&&Object($.showScreenPopup)(n(133),[e,V.a.message()])},i.checkHeaderHeight=function(){this.oHeaderDom&&this.viewBodyTopValue(this.message()?this.oHeaderDom.height()+N.Magics.Size20px+N.Magics.Size1px:0)},i.attachmentPreview=function(e){if(e&&e.isImage()&&!e.isLinked&&this.message()&&this.message().attachments()){var t=0,n=0,i=A()("<div>"),o=T.a.compact(m()(T.a).call(T.a,this.message().attachments(),(function(i){return i&&!i.isLinked&&i.isImage()?(i===e&&(t=n),n+=1,{src:i.linkPreview(),thumb:i.linkThumbnail(),subHtml:i.fileName,downloadUrl:i.linkPreview()}):null})));return 0<o.length&&(i.on("onBeforeOpen.lg",(function(){Object(I.useKeyboardShortcuts)(!1),Object(L.removeInFocus)(!0)})),i.on("onCloseAfter.lg",(function(){Object(I.useKeyboardShortcuts)(!0)})),i.lightGallery({dynamic:!0,loadYoutubeThumbnail:!1,loadVimeoThumbnail:!1,thumbWidth:80,thumbContHeight:95,showThumbByDefault:!1,mode:"lg-lollipop",index:t,dynamicEl:o})),!1}return!0},i.onBuild=function(e){var t=this,i=this,o=T.a.bind(this.checkHeaderHeight,this);this.oDom=e,this.fullScreenMode.subscribe((function(e){e&&t.message()&&U.a.focusedState(N.Focused.MessageView)})),this.showAttachmnetControls.subscribe(o),this.fullScreenMode.subscribe(o),this.showFullInfo.subscribe(o),this.message.subscribe(o),_.b("window.resize",T.a.throttle((function(){T.a.delay(o,1),T.a.delay(o,N.Magics.Time200ms),T.a.delay(o,N.Magics.Time500ms)}),N.Magics.Time50ms)),this.showFullInfo.subscribe((function(e){Object(L.windowResize)(),Object(L.windowResize)(N.Magics.Time200ms),K.b(N.ClientSideKeyName.MessageHeaderFullInfo,e?"1":"0")})),x.a.appendDropbox(),this.oHeaderDom=A()(".messageItemHeader",e),this.oHeaderDom=this.oHeaderDom[0]?this.oHeaderDom:null,this.mobile&&e.on("click",(function(){Object(I.leftPanelDisabled)(!0)})),e.on("click","a",(function(e){return!(e&&N.Magics.EventWhichMouseMiddle!==e.which&&Object(L.mailToHelper)(A()(this).attr("href"),q.capa(N.Capa.Composer)?n(133):null))})).on("click",".attachmentsPlace .attachmentIconParent",(function(e){e&&e.stopPropagation&&e.stopPropagation()})).on("click",".attachmentsPlace .showPreplay",(function(e){e&&e.stopPropagation&&e.stopPropagation();var t=E.a.dataFor(this);if(t&&P.a.supported)switch(!0){case P.a.supportedMp3&&t.isMp3():P.a.playMp3(t.linkDownload(),t.fileName);break;case P.a.supportedOgg&&t.isOgg():P.a.playOgg(t.linkDownload(),t.fileName);break;case P.a.supportedWav&&t.isWav():P.a.playWav(t.linkDownload(),t.fileName)}})).on("click",".attachmentsPlace .attachmentItem .attachmentNameParent",(function(){var e=E.a.dataFor(this);e&&e.download&&Object(Y.a)().download(e.linkDownload())})).on("click",".messageItemHeader .subjectParent .flagParent",(function(){var e=i.message();e&&Object(Y.a)().messageListAction(e.folderFullNameRaw,e.flagged()?N.MessageSetAction.UnsetFlag:N.MessageSetAction.SetFlag,[e])})).on("click",".thread-list .flagParent",(function(){var e=E.a.dataFor(this);return e&&e.folder&&e.uid&&Object(Y.a)().messageListAction(e.folder,e.flagged()?N.MessageSetAction.UnsetFlag:N.MessageSetAction.SetFlag,[e]),i.threadsDropdownTrigger(!0),!1})),U.a.focusedState.subscribe((function(e){N.Focused.MessageView!==e&&(t.scrollMessageToTop(),t.scrollMessageToLeft())})),I.keyScopeReal.subscribe((function(e){t.messageDomFocused(N.KeyState.MessageView===e&&!Object(L.inFocus)())})),this.oMessageScrollerDom=g()(e).call(e,".messageItem .content"),this.oMessageScrollerDom=this.oMessageScrollerDom&&this.oMessageScrollerDom[0]?this.oMessageScrollerDom:null,this.initShortcuts()},i.escShortcuts=function(){return!this.viewModelVisibility()||!this.message()||(this.fullScreenMode()?(this.fullScreenMode(!1),N.Layout.NoPreview!==this.layout()&&U.a.focusedState(N.Focused.MessageList)):N.Layout.NoPreview===this.layout()?this.message(null):U.a.focusedState(N.Focused.MessageList),!1)},i.initShortcuts=function(){var e=this;F()("esc, backspace",N.KeyState.MessageView,T.a.bind(this.escShortcuts,this)),F()("enter",N.KeyState.MessageView,(function(){return e.toggleFullScreen(),!1})),F()("r",[N.KeyState.MessageList,N.KeyState.MessageView],(function(){return!V.a.message()||(e.replyCommand(),!1)})),F()("a",[N.KeyState.MessageList,N.KeyState.MessageView],(function(){return!V.a.message()||(e.replyAllCommand(),!1)})),F()("f",[N.KeyState.MessageList,N.KeyState.MessageView],(function(){return!V.a.message()||(e.forwardCommand(),!1)})),F()("ctrl+i, command+i",[N.KeyState.MessageList,N.KeyState.MessageView],(function(){return V.a.message()&&e.showFullInfo(!e.showFullInfo()),!1})),F()("b",[N.KeyState.MessageList,N.KeyState.MessageView],(function(){var e;return!V.a.message()||!V.a.message().body||(g()(e=V.a.message().body).call(e,".rlBlockquoteSwitcher").click(),!1)})),F()("ctrl+up, command+up, ctrl+left, command+left",[N.KeyState.MessageList,N.KeyState.MessageView],(function(){return e.goUpCommand(),!1})),F()("ctrl+down, command+down, ctrl+right, command+right",[N.KeyState.MessageList,N.KeyState.MessageView],(function(){return e.goDownCommand(),!1})),F()("ctrl+p, command+p",[N.KeyState.MessageView,N.KeyState.MessageList],(function(){return e.message()&&e.message().printMessage(),!1})),F()("delete, shift+delete",N.KeyState.MessageView,(function(t,n){return!t||(n&&"shift+delete"===n.shortcut?e.deleteWithoutMoveCommand():e.deleteCommand(),!1)})),F()("tab, shift+tab, left",N.KeyState.MessageView,(function(t,n){if(!e.fullScreenMode()&&e.message()&&N.Layout.NoPreview!==e.layout())if(t&&n&&"left"===n.shortcut){if(e.oMessageScrollerDom&&0<e.oMessageScrollerDom.scrollLeft())return!0;U.a.focusedState(N.Focused.MessageList)}else U.a.focusedState(N.Focused.MessageList);else if(e.message()&&N.Layout.NoPreview===e.layout()&&t&&n&&"left"===n.shortcut)return!0;return!1}))},i.isDraftFolder=function(){return V.a.message()&&B.a.draftFolder()===V.a.message().folderFullNameRaw},i.isSentFolder=function(){return V.a.message()&&B.a.sentFolder()===V.a.message().folderFullNameRaw},i.isSpamFolder=function(){return V.a.message()&&B.a.spamFolder()===V.a.message().folderFullNameRaw},i.isSpamDisabled=function(){return V.a.message()&&B.a.spamFolder()===R.r},i.isArchiveFolder=function(){return V.a.message()&&B.a.archiveFolder()===V.a.message().folderFullNameRaw},i.isArchiveDisabled=function(){return V.a.message()&&B.a.archiveFolder()===R.r},i.isDraftOrSentFolder=function(){return this.isDraftFolder()||this.isSentFolder()},i.composeClick=function(){q.capa(N.Capa.Composer)&&Object($.showScreenPopup)(n(133))},i.editMessage=function(){q.capa(N.Capa.Composer)&&V.a.message()&&Object($.showScreenPopup)(n(133),[N.ComposeType.Draft,V.a.message()])},i.scrollMessageToTop=function(){this.oMessageScrollerDom&&(N.Magics.Size50px<this.oMessageScrollerDom.scrollTop()?this.oMessageScrollerDom.scrollTop(N.Magics.Size50px).animate({scrollTop:0},N.Magics.Time200ms):this.oMessageScrollerDom.scrollTop(0),Object(L.windowResize)())},i.scrollMessageToLeft=function(){this.oMessageScrollerDom&&(this.oMessageScrollerDom.scrollLeft(0),Object(L.windowResize)())},i.getAttachmentsHashes=function(){var e=this.message()?this.message().attachments():[];return T.a.compact(m()(T.a).call(T.a,e,(function(e){return e&&!e.isLinked&&e.checked()?e.download:""})))},i.downloadAsZip=function(){var e=this,t=this.getAttachmentsHashes();0<t.length?W.a.attachmentsActions("Zip",t,this.downloadAsZipLoading).then((function(t){t&&t.Result&&t.Result.Files&&t.Result.Files[0]&&t.Result.Files[0].Hash?Object(Y.a)().download(Object(D.c)(t.Result.Files[0].Hash)):e.downloadAsZipError(!0)})).catch((function(){e.downloadAsZipError(!0)})):this.highlightUnselectedAttachments(!0)},i.saveToOwnCloud=function(){var e=this,t=this.getAttachmentsHashes();0<t.length?W.a.attachmentsActions("OwnCloud",t,this.saveToOwnCloudLoading).then((function(t){t&&t.Result?e.saveToOwnCloudSuccess(!0):e.saveToOwnCloudError(!0)})).catch((function(){e.saveToOwnCloudError(!0)})):this.highlightUnselectedAttachments(!0)},i.saveToDropbox=function(){var e=this,t=[],n=this.getAttachmentsHashes();0<n.length?O.a.Dropbox&&W.a.attachmentsActions("Dropbox",n,this.saveToDropboxLoading).then((function(n){n&&n.Result&&n.Result.Url&&n.Result.ShortLife&&n.Result.Files&&(O.a.Dropbox&&Object(L.isArray)(n.Result.Files)?(T.a.each(n.Result.Files,(function(e){t.push({url:n.Result.Url+Object(D.c)(e.Hash,n.Result.ShortLife),filename:e.FileName})})),O.a.Dropbox.save({files:t,progress:function(){e.saveToDropboxLoading(!0),e.saveToDropboxError(!1),e.saveToDropboxSuccess(!1)},cancel:function(){e.saveToDropboxSuccess(!1),e.saveToDropboxError(!1),e.saveToDropboxLoading(!1)},success:function(){e.saveToDropboxSuccess(!0),e.saveToDropboxLoading(!1)},error:function(){e.saveToDropboxError(!0),e.saveToDropboxLoading(!1)}})):e.saveToDropboxError(!0))})).catch((function(){e.saveToDropboxError(!0)})):this.highlightUnselectedAttachments(!0)},i.showImages=function(e){e&&e.showExternalImages&&e.showExternalImages(!0),this.checkHeaderHeight()},i.printableCheckedMessageCount=function(){var e=this.messageListCheckedOrSelectedUidsWithSubMails().length;return 0<e?100>e?e:"99+":""},i.readReceipt=function(e){e&&""!==e.readReceipt()&&(z.a.sendReadReceiptMessage(L.noop,e.folderFullNameRaw,e.uid,e.readReceipt(),Object(M.i18n)("READ_RECEIPT/SUBJECT",{SUBJECT:e.subject()}),Object(M.i18n)("READ_RECEIPT/BODY",{"READ-RECEIPT":G.a.email()})),e.isReadReceipt(!0),Object(k.u)(e),Object(Y.a)().reloadFlagsCurrentMessageListAndMessageFromCache()),this.checkHeaderHeight()},t}(J.a),Object(f.a)(u.prototype,"closeMessageCommand",[o],y()(u.prototype,"closeMessageCommand"),u.prototype),Object(f.a)(u.prototype,"messageVisibilityCommand",[a],y()(u.prototype,"messageVisibilityCommand"),u.prototype),Object(f.a)(u.prototype,"messageEditCommand",[r],y()(u.prototype,"messageEditCommand"),u.prototype),Object(f.a)(u.prototype,"goUpCommand",[s],y()(u.prototype,"goUpCommand"),u.prototype),Object(f.a)(u.prototype,"goDownCommand",[c],y()(u.prototype,"goDownCommand"),u.prototype),l=u))||l)},function(e,t,n){"use strict";n.d(t,"a",(function(){return F}));var i=n(10),o=n(0),a=n(6),r=n(36),s=n(9),c=n(27),l=n(46),u=n(5),d=n(7),p=n(305),f=n(456),h=n(457),m=n(458),b=n(459),g=n(460),v=n(461),y=n(462),S=n(463),O=n(464),w=n(465),T=n(466),C=n(467),A=n(468),E=n(469),j=n(21),F=function(e){function t(){var t;return t=e.call(this,[C.a,A.a,E.a])||this,Object(s.initOnStartOrLangChange)((function(){t.sSettingsTitle=Object(s.i18n)("TITLES/SETTINGS")}),(function(){t.setSettingsTitle()})),t}Object(i.a)(t,e);var n=t.prototype;return n.setupSettings=function(e){return void 0===e&&(e=null),u.capa(o.Capa.Settings)?(Object(d.addSettingsViewModel)(f.a,"SettingsGeneral","SETTINGS_LABELS/LABEL_GENERAL_NAME","general",!0),c.a.contactsIsAllowed()&&Object(d.addSettingsViewModel)(h.a,"SettingsContacts","SETTINGS_LABELS/LABEL_CONTACTS_NAME","contacts"),(u.capa(o.Capa.AdditionalAccounts)||u.capa(o.Capa.Identities))&&Object(d.addSettingsViewModel)(m.a,"SettingsAccounts",u.capa(o.Capa.AdditionalAccounts)?"SETTINGS_LABELS/LABEL_ACCOUNTS_NAME":"SETTINGS_LABELS/LABEL_IDENTITIES_NAME","accounts"),u.capa(o.Capa.Sieve)&&Object(d.addSettingsViewModel)(b.a,"SettingsFilters","SETTINGS_LABELS/LABEL_FILTERS_NAME","filters"),(u.capa(o.Capa.AutoLogout)||u.capa(o.Capa.TwoFactor))&&Object(d.addSettingsViewModel)(g.a,"SettingsSecurity","SETTINGS_LABELS/LABEL_SECURITY_NAME","security"),l.a.isRootAccount()&&(u.settingsGet("AllowGoogleSocial")&&u.settingsGet("AllowGoogleSocialAuth")||u.settingsGet("AllowFacebookSocial")||u.settingsGet("AllowTwitterSocial"))&&Object(d.addSettingsViewModel)(v.a,"SettingsSocial","SETTINGS_LABELS/LABEL_SOCIAL_NAME","social"),u.settingsGet("ChangePasswordIsAllowed")&&Object(d.addSettingsViewModel)(y.a,"SettingsChangePassword","SETTINGS_LABELS/LABEL_CHANGE_PASSWORD_NAME","change-password"),u.capa(o.Capa.Templates)&&Object(d.addSettingsViewModel)(S.a,"SettingsTemplates","SETTINGS_LABELS/LABEL_TEMPLATES_NAME","templates"),u.capa(o.Capa.Folders)&&Object(d.addSettingsViewModel)(O.a,"SettingsFolders","SETTINGS_LABELS/LABEL_FOLDERS_NAME","folders"),u.capa(o.Capa.Themes)&&Object(d.addSettingsViewModel)(w.a,"SettingsThemes","SETTINGS_LABELS/LABEL_THEMES_NAME","themes"),u.capa(o.Capa.OpenPGP)&&Object(d.addSettingsViewModel)(T.a,"SettingsOpenPGP","SETTINGS_LABELS/LABEL_OPEN_PGP_NAME","openpgp"),Object(r.g)(!1),e&&e(),!0):(e&&e(),!1)},n.onShow=function(){this.setSettingsTitle(),Object(a.keyScope)(o.KeyState.Settings),Object(a.leftPanelType)(""),u.appSettingsGet("mobile")&&Object(a.leftPanelDisabled)(!0)},n.setSettingsTitle=function(){var e=l.a.email();Object(j.a)().setWindowTitle((""===e?"":e+" - ")+this.sSettingsTitle)},t}(p.a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var i=n(12),o=n.n(i),a=n(3),r=n.n(a),s=n(1),c=n(24),l=n(6),u=n(0),d=n(2),p=n(9),f=n(7),h=n(27),m=n(72),b=n(35),g=n(103),v=n(124),y=n(13),S=n(16),O=function(){function e(){var e=this;this.language=m.a.language,this.languages=m.a.languages,this.messagesPerPage=b.a.messagesPerPage,this.messagesPerPageArray=c.j,this.editorDefaultType=b.a.editorDefaultType,this.layout=b.a.layout,this.usePreviewPane=b.a.usePreviewPane,this.soundNotificationIsSupported=v.a.soundNotificationIsSupported,this.enableSoundNotification=v.a.enableSoundNotification,this.enableDesktopNotification=v.a.enableDesktopNotification,this.isDesktopNotificationSupported=v.a.isDesktopNotificationSupported,this.isDesktopNotificationDenied=v.a.isDesktopNotificationDenied,this.showImages=b.a.showImages,this.useCheckboxesInList=b.a.useCheckboxesInList,this.threadsAllowed=h.a.threadsAllowed,this.useThreads=b.a.useThreads,this.replySameFolder=b.a.replySameFolder,this.allowLanguagesOnSettings=h.a.allowLanguagesOnSettings,this.languageFullName=s.a.computed((function(){return Object(d.convertLangName)(e.language())})),this.languageTrigger=s.a.observable(u.SaveSettingsStep.Idle).extend({throttle:u.Magics.Time100ms}),this.mppTrigger=s.a.observable(u.SaveSettingsStep.Idle),this.editorDefaultTypeTrigger=s.a.observable(u.SaveSettingsStep.Idle),this.layoutTrigger=s.a.observable(u.SaveSettingsStep.Idle),this.isAnimationSupported=l.bAnimationSupported,this.identities=g.a.identities,this.identityMain=s.a.computed((function(){var t=e.identities();return Object(d.isArray)(t)?o()(r.a).call(r.a,t,(function(e){return e&&""===e.id()})):null})),this.identityMainDesc=s.a.computed((function(){var t=e.identityMain();return t?t.formattedName():"---"})),this.editorDefaultTypes=s.a.computed((function(){return Object(p.trigger)(),[{id:u.EditorDefaultType.Html,name:Object(p.i18n)("SETTINGS_GENERAL/LABEL_EDITOR_HTML")},{id:u.EditorDefaultType.Plain,name:Object(p.i18n)("SETTINGS_GENERAL/LABEL_EDITOR_PLAIN")},{id:u.EditorDefaultType.HtmlForced,name:Object(p.i18n)("SETTINGS_GENERAL/LABEL_EDITOR_HTML_FORCED")},{id:u.EditorDefaultType.PlainForced,name:Object(p.i18n)("SETTINGS_GENERAL/LABEL_EDITOR_PLAIN_FORCED")}]})),this.layoutTypes=s.a.computed((function(){return Object(p.trigger)(),[{id:u.Layout.NoPreview,name:Object(p.i18n)("SETTINGS_GENERAL/LABEL_LAYOUT_NO_SPLIT")},{id:u.Layout.SidePreview,name:Object(p.i18n)("SETTINGS_GENERAL/LABEL_LAYOUT_VERTICAL_SPLIT")},{id:u.Layout.BottomPreview,name:Object(p.i18n)("SETTINGS_GENERAL/LABEL_LAYOUT_HORIZONTAL_SPLIT")}]}))}var t=e.prototype;return t.editMainIdentity=function(){var e=this.identityMain();e&&Object(f.showScreenPopup)(n(394),[e])},t.testSoundNotification=function(){v.a.playSoundNotification(!0)},t.onBuild=function(){var e=this;r.a.delay((function(){var t=Object(d.settingsSaveHelperSimpleFunction)(e.editorDefaultTypeTrigger,e),n=Object(d.settingsSaveHelperSimpleFunction)(e.mppTrigger,e),i=Object(d.settingsSaveHelperSimpleFunction)(e.layoutTrigger,e),o=function(t){return function(){e.languageTrigger(t),r.a.delay((function(){return e.languageTrigger(u.SaveSettingsStep.Idle)}),u.Magics.Time1s)}};e.language.subscribe((function(t){e.languageTrigger(u.SaveSettingsStep.Animate),Object(p.reload)(!1,t).then(o(u.SaveSettingsStep.TrueResult),o(u.SaveSettingsStep.FalseResult)).then((function(){S.a.saveSettings(null,{Language:t})}))})),e.editorDefaultType.subscribe(S.a.saveSettingsHelper("EditorDefaultType",null,t)),e.messagesPerPage.subscribe(S.a.saveSettingsHelper("MPP",null,n)),e.showImages.subscribe(S.a.saveSettingsHelper("ShowImages",d.boolToAjax)),e.useCheckboxesInList.subscribe(S.a.saveSettingsHelper("UseCheckboxesInList",d.boolToAjax)),e.enableDesktopNotification.subscribe((function(e){Object(d.timeOutAction)("SaveDesktopNotifications",(function(){S.a.saveSettings(null,{DesktopNotifications:Object(d.boolToAjax)(e)})}),u.Magics.Time3s)})),e.enableSoundNotification.subscribe((function(e){Object(d.timeOutAction)("SaveSoundNotification",(function(){S.a.saveSettings(null,{SoundNotification:Object(d.boolToAjax)(e)})}),u.Magics.Time3s)})),e.replySameFolder.subscribe((function(e){Object(d.timeOutAction)("SaveReplySameFolder",(function(){S.a.saveSettings(null,{ReplySameFolder:Object(d.boolToAjax)(e)})}),u.Magics.Time3s)})),e.useThreads.subscribe((function(e){y.a.messageList([]),S.a.saveSettings(null,{UseThreads:Object(d.boolToAjax)(e)})})),e.layout.subscribe((function(e){y.a.messageList([]),S.a.saveSettings(i,{Layout:e})}))}),u.Magics.Time50ms)},t.onShow=function(){this.enableDesktopNotification.valueHasMutated()},t.selectLanguage=function(){Object(f.showScreenPopup)(n(292),[this.language,this.languages(),m.a.userLanguage()])},e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));n(77);var i=n(1),o=n(0),a=n(2),r=n(27),s=n(104),c=n(16),l=function(){function e(){var e=this;this.contactsAutosave=r.a.contactsAutosave,this.allowContactsSync=s.a.allowContactsSync,this.enableContactsSync=s.a.enableContactsSync,this.contactsSyncUrl=s.a.contactsSyncUrl,this.contactsSyncUser=s.a.contactsSyncUser,this.contactsSyncPass=s.a.contactsSyncPass,this.saveTrigger=i.a.computed((function(){return[e.enableContactsSync()?"1":"0",e.contactsSyncUrl(),e.contactsSyncUser(),e.contactsSyncPass()].join("|")})).extend({throttle:o.Magics.Time500ms})}return e.prototype.onBuild=function(){var e=this;this.contactsAutosave.subscribe((function(e){c.a.saveSettings(null,{ContactsAutosave:Object(a.boolToAjax)(e)})})),this.saveTrigger.subscribe((function(){c.a.saveContactsSyncData(null,e.enableContactsSync(),e.contactsSyncUrl(),e.contactsSyncUser(),e.contactsSyncPass())}))},e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var i=n(4),o=n.n(i),a=n(3),r=n.n(a),s=n(1),c=n(0),l=n(15),u=n(5),d=n(46),p=n(103),f=n(16),h=n(21),m=n(7),b=function(){function e(){this.allowAdditionalAccount=Object(u.capa)(c.Capa.AdditionalAccounts),this.allowIdentities=Object(u.capa)(c.Capa.Identities),this.accounts=d.a.accounts,this.identities=p.a.identities,this.accountForDeletion=s.a.observable(null).deleteAccessHelper(),this.identityForDeletion=s.a.observable(null).deleteAccessHelper()}var t=e.prototype;return t.scrollableOptions=function(e){return{handle:".drag-handle",containment:e||"parent",axis:"y"}},t.addNewAccount=function(){Object(m.showScreenPopup)(n(393))},t.editAccount=function(e){e&&e.canBeEdit()&&Object(m.showScreenPopup)(n(393),[e])},t.addNewIdentity=function(){Object(m.showScreenPopup)(n(394))},t.editIdentity=function(e){Object(m.showScreenPopup)(n(394),[e])},t.deleteAccount=function(e){e&&e.deleteAccess()&&(this.accountForDeletion(null),e&&(this.accounts.remove((function(t){return e===t})),f.a.accountDelete((function(e,t){c.StorageResultType.Success===e&&t&&t.Result&&t.Reload?(Object(m.routeOff)(),Object(m.setHash)(Object(l.w)(),!0),Object(m.routeOff)(),r.a.defer((function(){return o.a.location.reload()}))):Object(h.a)().accountsAndIdentities()}),e.email)))},t.deleteIdentity=function(e){e&&e.deleteAccess()&&(this.identityForDeletion(null),e&&(p.a.identities.remove((function(t){return e===t})),f.a.identityDelete((function(){Object(h.a)().accountsAndIdentities()}),e.id)))},t.accountsAndIdentitiesAfterMove=function(){f.a.accountsAndIdentitiesSortOrder(null,d.a.accountsEmails.peek(),p.a.identitiesIDS.peek())},t.onBuild=function(e){var t=this;e.on("click",".accounts-list .account-item .e-action",(function(){var e=s.a.dataFor(this);e&&t.editAccount(e)})).on("click",".identities-list .identity-item .e-action",(function(){var e=s.a.dataFor(this);e&&t.editIdentity(e)}))},e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return S}));var i,o,a=n(18),r=(n(77),n(17)),s=n.n(r),c=n(19),l=n.n(c),u=n(3),d=n.n(u),p=n(1),f=n(2),h=n(0),m=n(9),b=n(233),g=n(16),v=n(408),y=n(7),S=(i=Object(y.command)((function(e){return e.haveChanges()})),o=function(){function e(){var e=this;this.modules=b.a.modules,this.filters=b.a.filters,this.inited=p.a.observable(!1),this.serverError=p.a.observable(!1),this.serverErrorDesc=p.a.observable(""),this.haveChanges=p.a.observable(!1),this.saveErrorText=p.a.observable(""),this.filters.subscribe(f.windowResizeCallback),this.serverError.subscribe((function(t){t||e.serverErrorDesc("")}),this),this.filterRaw=b.a.raw,this.filterRaw.capa=b.a.capa,this.filterRaw.active=p.a.observable(!1),this.filterRaw.allow=p.a.observable(!1),this.filterRaw.error=p.a.observable(!1),this.filterForDeletion=p.a.observable(null).deleteAccessHelper(),this.filters.subscribe((function(){e.haveChanges(!0)})),this.filterRaw.subscribe((function(){e.haveChanges(!0),e.filterRaw.error(!1)})),this.haveChanges.subscribe((function(){e.saveErrorText("")})),this.filterRaw.active.subscribe((function(){e.haveChanges(!0),e.filterRaw.error(!1)}))}var t=e.prototype;return t.saveChangesCommand=function(){var e=this;if(!this.filters.saving()){if(this.filterRaw.active()&&""===Object(f.trim)(this.filterRaw()))return this.filterRaw.error(!0),!1;this.filters.saving(!0),this.saveErrorText(""),g.a.filtersSave((function(t,n){e.filters.saving(!1),h.StorageResultType.Success===t&&n&&n.Result?(e.haveChanges(!1),e.updateList()):n&&n.ErrorCode?e.saveErrorText(n.ErrorMessageAdditional||Object(m.getNotification)(n.ErrorCode)):e.saveErrorText(Object(m.getNotification)(h.Notification.CantSaveFilters))}),this.filters(),this.filterRaw(),this.filterRaw.active())}return!0},t.scrollableOptions=function(e){return{handle:".drag-handle",containment:e||"parent",axis:"y"}},t.updateList=function(){var e=this;this.filters.loading()||(this.filters.loading(!0),g.a.filtersGet((function(t,n){e.filters.loading(!1),e.serverError(!1),h.StorageResultType.Success===t&&n&&n.Result&&Object(f.isArray)(n.Result.Filters)?(e.inited(!0),e.serverError(!1),e.filters(d.a.compact(s()(d.a).call(d.a,n.Result.Filters,(function(e){var t=new v.a;return t&&t.parse(e)?t:null})))),e.modules(n.Result.Modules?n.Result.Modules:{}),e.filterRaw(n.Result.Raw||""),e.filterRaw.capa(Object(f.isArray)(n.Result.Capa)?n.Result.Capa.join(" "):""),e.filterRaw.active(!!n.Result.RawIsActive),e.filterRaw.allow(!!n.Result.RawIsAllow)):(e.filters([]),e.modules({}),e.filterRaw(""),e.filterRaw.capa({}),e.serverError(!0),e.serverErrorDesc(n&&n.ErrorCode?Object(m.getNotification)(n.ErrorCode):Object(m.getNotification)(h.Notification.CantGetFilters))),e.haveChanges(!1)})))},t.deleteFilter=function(e){this.filters.remove(e),Object(f.delegateRunOnDestroy)(e)},t.addFilter=function(){var e=this,t=new v.a;t.generateID(),Object(y.showScreenPopup)(n(430),[t,function(){e.filters.push(t),e.filterRaw.active(!1)},!1])},t.editFilter=function(e){var t=this,i=e.cloneSelf();Object(y.showScreenPopup)(n(430),[i,function(){var n=t.filters(),o=n.indexOf(e);-1<o&&n[o]&&(Object(f.delegateRunOnDestroy)(n[o]),n[o]=i,t.filters(n),t.haveChanges(!0))},!0])},t.onBuild=function(e){var t=this;e.on("click",".filter-item .e-action",(function(){var e=p.a.dataFor(this);e&&t.editFilter(e)}))},t.onShow=function(){this.updateList()},e}(),Object(a.a)(o.prototype,"saveChangesCommand",[i],l()(o.prototype,"saveChangesCommand"),o.prototype),o)},function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var i=n(3),o=n.n(i),a=n(1),r=n(2),s=n(0),c=n(9),l=n(5),u=n(7),d=n(35),p=n(16),f=function(){function e(){this.capaAutoLogout=Object(l.capa)(s.Capa.AutoLogout),this.capaTwoFactor=Object(l.capa)(s.Capa.TwoFactor),this.autoLogout=d.a.autoLogout,this.autoLogout.trigger=a.a.observable(s.SaveSettingsStep.Idle),this.autoLogoutOptions=a.a.computed((function(){return Object(c.trigger)(),[{id:0,name:Object(c.i18n)("SETTINGS_SECURITY/AUTOLOGIN_NEVER_OPTION_NAME")},{id:5,name:Object(c.i18n)("SETTINGS_SECURITY/AUTOLOGIN_MINUTES_OPTION_NAME",{MINUTES:5})},{id:10,name:Object(c.i18n)("SETTINGS_SECURITY/AUTOLOGIN_MINUTES_OPTION_NAME",{MINUTES:10})},{id:30,name:Object(c.i18n)("SETTINGS_SECURITY/AUTOLOGIN_MINUTES_OPTION_NAME",{MINUTES:30})},{id:60,name:Object(c.i18n)("SETTINGS_SECURITY/AUTOLOGIN_MINUTES_OPTION_NAME",{MINUTES:60})},{id:120,name:Object(c.i18n)("SETTINGS_SECURITY/AUTOLOGIN_HOURS_OPTION_NAME",{HOURS:2})},{id:300,name:Object(c.i18n)("SETTINGS_SECURITY/AUTOLOGIN_HOURS_OPTION_NAME",{HOURS:5})},{id:600,name:Object(c.i18n)("SETTINGS_SECURITY/AUTOLOGIN_HOURS_OPTION_NAME",{HOURS:10})}]}))}var t=e.prototype;return t.configureTwoFactor=function(){Object(u.showScreenPopup)(n(431))},t.onBuild=function(){var e=this;this.capaAutoLogout&&o.a.delay((function(){var t=Object(r.settingsSaveHelperSimpleFunction)(e.autoLogout.trigger,e);e.autoLogout.subscribe(p.a.saveSettingsHelper("AutoLogout",r.pInt,t))}))},e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var i,o,a,r,s,c,l,u=n(18),d=n(19),p=n.n(d),f=n(26),h=n(21),m=n(7),b=(i=Object(m.command)((function(e){return!e.googleLoggined()&&!e.googleActions()})),o=Object(m.command)(),a=Object(m.command)((function(e){return!e.facebookLoggined()&&!e.facebookActions()})),r=Object(m.command)(),s=Object(m.command)((function(e){return!e.twitterLoggined()&&!e.twitterActions()})),c=Object(m.command)(),l=function(){function e(){this.googleEnable=f.a.google.enabled,this.googleEnableAuth=f.a.google.capa.auth,this.googleEnableAuthGmail=f.a.google.capa.authGmail,this.googleEnableDrive=f.a.google.capa.drive,this.googleEnablePreview=f.a.google.capa.preview,this.googleActions=f.a.google.loading,this.googleLoggined=f.a.google.loggined,this.googleUserName=f.a.google.userName,this.facebookEnable=f.a.facebook.enabled,this.facebookActions=f.a.facebook.loading,this.facebookLoggined=f.a.facebook.loggined,this.facebookUserName=f.a.facebook.userName,this.twitterEnable=f.a.twitter.enabled,this.twitterActions=f.a.twitter.loading,this.twitterLoggined=f.a.twitter.loggined,this.twitterUserName=f.a.twitter.userName}var t=e.prototype;return t.connectGoogleCommand=function(){this.googleLoggined()||Object(h.a)().googleConnect()},t.disconnectGoogleCommand=function(){Object(h.a)().googleDisconnect()},t.connectFacebookCommand=function(){this.facebookLoggined()||Object(h.a)().facebookConnect()},t.disconnectFacebookCommand=function(){Object(h.a)().facebookDisconnect()},t.connectTwitterCommand=function(){this.twitterLoggined()||Object(h.a)().twitterConnect()},t.disconnectTwitterCommand=function(){Object(h.a)().twitterDisconnect()},e}(),Object(u.a)(l.prototype,"connectGoogleCommand",[i],p()(l.prototype,"connectGoogleCommand"),l.prototype),Object(u.a)(l.prototype,"disconnectGoogleCommand",[o],p()(l.prototype,"disconnectGoogleCommand"),l.prototype),Object(u.a)(l.prototype,"connectFacebookCommand",[a],p()(l.prototype,"connectFacebookCommand"),l.prototype),Object(u.a)(l.prototype,"disconnectFacebookCommand",[r],p()(l.prototype,"disconnectFacebookCommand"),l.prototype),Object(u.a)(l.prototype,"connectTwitterCommand",[s],p()(l.prototype,"connectTwitterCommand"),l.prototype),Object(u.a)(l.prototype,"disconnectTwitterCommand",[c],p()(l.prototype,"disconnectTwitterCommand"),l.prototype),l)},function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var i,o,a=n(18),r=n(19),s=n.n(r),c=n(3),l=n.n(c),u=n(1),d=n(0),p=n(9),f=n(16),h=n(21),m=n(7),b=(i=Object(m.command)((function(e){return!e.changeProcess()&&""!==e.currentPassword()&&""!==e.newPassword()&&""!==e.newPassword2()})),o=function(){function e(){var e=this;this.changeProcess=u.a.observable(!1),this.errorDescription=u.a.observable(""),this.passwordMismatch=u.a.observable(!1),this.passwordUpdateError=u.a.observable(!1),this.passwordUpdateSuccess=u.a.observable(!1),this.currentPassword=u.a.observable(""),this.currentPassword.error=u.a.observable(!1),this.newPassword=u.a.observable(""),this.newPassword2=u.a.observable(""),this.currentPassword.subscribe((function(){e.passwordUpdateError(!1),e.passwordUpdateSuccess(!1),e.currentPassword.error(!1)})),this.newPassword.subscribe((function(){e.passwordUpdateError(!1),e.passwordUpdateSuccess(!1),e.passwordMismatch(!1)})),this.newPassword2.subscribe((function(){e.passwordUpdateError(!1),e.passwordUpdateSuccess(!1),e.passwordMismatch(!1)})),this.onChangePasswordResponse=l.a.bind(this.onChangePasswordResponse,this)}var t=e.prototype;return t.saveNewPasswordCommand=function(){this.newPassword()!==this.newPassword2()?(this.passwordMismatch(!0),this.errorDescription(Object(p.i18n)("SETTINGS_CHANGE_PASSWORD/ERROR_PASSWORD_MISMATCH"))):(this.changeProcess(!0),this.passwordUpdateError(!1),this.passwordUpdateSuccess(!1),this.currentPassword.error(!1),this.passwordMismatch(!1),this.errorDescription(""),f.a.changePassword(this.onChangePasswordResponse,this.currentPassword(),this.newPassword()))},t.onHide=function(){this.changeProcess(!1),this.currentPassword(""),this.newPassword(""),this.newPassword2(""),this.errorDescription(""),this.passwordMismatch(!1),this.currentPassword.error(!1)},t.onChangePasswordResponse=function(e,t){this.changeProcess(!1),this.passwordMismatch(!1),this.errorDescription(""),this.currentPassword.error(!1),d.StorageResultType.Success===e&&t&&t.Result?(this.currentPassword(""),this.newPassword(""),this.newPassword2(""),this.passwordUpdateSuccess(!0),this.currentPassword.error(!1),Object(h.a)().setClientSideToken(t.Result)):(t&&d.Notification.CurrentPasswordIncorrect===t.ErrorCode&&this.currentPassword.error(!0),this.passwordUpdateError(!0),this.errorDescription(Object(p.getNotificationFromResponse)(t,d.Notification.CouldNotSaveNewPassword)))},e}(),Object(a.a)(o.prototype,"saveNewPasswordCommand",[i],s()(o.prototype,"saveNewPasswordCommand"),o.prototype),o)},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n(1),o=n(9),a=n(207),r=n(16),s=n(21),c=n(7),l=function(){function e(){var e=this;this.templates=a.a.templates,this.processText=i.a.computed((function(){return a.a.templates.loading()?Object(o.i18n)("SETTINGS_TEMPLETS/LOADING_PROCESS"):""})),this.visibility=i.a.computed((function(){return""===e.processText()?"hidden":"visible"})),this.templateForDeletion=i.a.observable(null).deleteAccessHelper()}var t=e.prototype;return t.scrollableOptions=function(e){return{handle:".drag-handle",containment:e||"parent",axis:"y"}},t.addNewTemplate=function(){Object(c.showScreenPopup)(n(432))},t.editTemplate=function(e){e&&Object(c.showScreenPopup)(n(432),[e])},t.deleteTemplate=function(e){var t=this;e&&e.deleteAccess()&&(this.templateForDeletion(null),e&&(this.templates.remove((function(t){return e===t})),r.a.templateDelete((function(){t.reloadTemplates()}),e.id)))},t.reloadTemplates=function(){Object(s.a)().templates()},t.onBuild=function(e){var t=this;e.on("click",".templates-list .template-item .e-action",(function(){var e=i.a.dataFor(this);e&&t.editTemplate(e)})),this.reloadTemplates()},e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));n(48);var i=n(1),o=n(0),a=n(2),r=n(9),s=n(14),c=n(5),l=n(60),u=n(11),d=n(94),p=n(16),f=n(21),h=n(7),m=function(){function e(){this.displaySpecSetting=u.a.displaySpecSetting,this.folderList=u.a.folderList,this.folderListHelp=i.a.observable("").extend({throttle:o.Magics.Time100ms}),this.loading=i.a.computed((function(){var e=u.a.foldersLoading(),t=u.a.foldersCreating(),n=u.a.foldersDeleting(),i=u.a.foldersRenaming();return e||t||n||i})),this.folderForDeletion=i.a.observable(null).deleteAccessHelper(),this.folderForEdit=i.a.observable(null).extend({toggleSubscribeProperty:[this,"edited"]}),this.useImapSubscribe=!!Object(c.appSettingsGet)("useImapSubscribe")}var t=e.prototype;return t.folderEditOnEnter=function(e){var t=e?Object(a.trim)(e.nameForEdit()):"";""!==t&&e.name()!==t&&(l.b(o.ClientSideKeyName.FoldersLashHash,""),Object(f.a)().foldersPromisesActionHelper(d.a.folderRename(e.fullNameRaw,t,u.a.foldersRenaming),o.Notification.CantRenameFolder),Object(s.o)(e.fullNameRaw),e.name(t)),e.edited(!1)},t.folderEditOnEsc=function(e){e&&e.edited(!1)},t.onShow=function(){u.a.folderList.error("")},t.onBuild=function(e){var t=this;e.on("mouseover",".delete-folder-parent",(function(){t.folderListHelp(Object(r.i18n)("SETTINGS_FOLDERS/HELP_DELETE_FOLDER"))})).on("mouseover",".subscribe-folder-parent",(function(){t.folderListHelp(Object(r.i18n)("SETTINGS_FOLDERS/HELP_SHOW_HIDE_FOLDER"))})).on("mouseover",".check-folder-parent",(function(){t.folderListHelp(Object(r.i18n)("SETTINGS_FOLDERS/HELP_CHECK_FOR_NEW_MESSAGES"))})).on("mouseout",".subscribe-folder-parent, .check-folder-parent, .delete-folder-parent",(function(){t.folderListHelp("")}))},t.createFolder=function(){Object(h.showScreenPopup)(n(429))},t.systemFolder=function(){Object(h.showScreenPopup)(n(317))},t.deleteFolder=function(e){if(e&&e.canBeDeleted()&&e.deleteAccess()&&0===e.privateMessageCountAll()){if(this.folderForDeletion(null),e){l.b(o.ClientSideKeyName.FoldersLashHash,""),u.a.folderList.remove((function t(n){return e===n||(n.subFolders.remove(t),!1)})),Object(f.a)().foldersPromisesActionHelper(d.a.folderDelete(e.fullNameRaw,u.a.foldersDeleting),o.Notification.CantDeleteFolder),Object(s.o)(e.fullNameRaw)}}else 0<e.privateMessageCountAll()&&u.a.folderList.error(Object(r.getNotification)(o.Notification.CantDeleteNonEmptyFolder))},t.subscribeFolder=function(e){l.b(o.ClientSideKeyName.FoldersLashHash,""),p.a.folderSetSubscribe(a.noop,e.fullNameRaw,!0),e.subScribed(!0)},t.unSubscribeFolder=function(e){l.b(o.ClientSideKeyName.FoldersLashHash,""),p.a.folderSetSubscribe(a.noop,e.fullNameRaw,!1),e.subScribed(!1)},t.checkableTrueFolder=function(e){p.a.folderSetCheckable(a.noop,e.fullNameRaw,!0),e.checkable(!0)},t.checkableFalseFolder=function(e){p.a.folderSetCheckable(a.noop,e.fullNameRaw,!1),e.checkable(!1)},e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var i=n(17),o=n.n(i),a=(n(48),n(3)),r=n.n(a),s=n(8),c=n.n(s),l=n(1),u=n(206),d=n.n(u),p=n(0),f=n(2),h=n(15),m=n(9),b=n(5),g=n(123),v=n(16),y=function(){function e(){var e=this;this.theme=g.a.theme,this.themes=g.a.themes,this.themesObjects=l.a.observableArray([]),this.background={},this.background.name=g.a.themeBackgroundName,this.background.hash=g.a.themeBackgroundHash,this.background.uploaderButton=l.a.observable(null),this.background.loading=l.a.observable(!1),this.background.error=l.a.observable(""),this.capaUserBackground=l.a.observable(Object(b.capa)(p.Capa.UserBackground)),this.themeTrigger=l.a.observable(p.SaveSettingsStep.Idle).extend({throttle:p.Magics.Time100ms}),this.iTimer=0,this.oThemeAjaxRequest=null,this.theme.subscribe((function(t){r.a.each(e.themesObjects(),(function(e){e.selected(t===e.name)})),Object(f.changeTheme)(t,e.themeTrigger),v.a.saveSettings(null,{Theme:t})})),this.background.hash.subscribe((function(e){var t=c()("#rl-bg");e?t.attr("style","background-image: none !important;").backstretch(Object(h.J)(e),{fade:p.Magics.Time1s,centeredX:!0,centeredY:!0}).removeAttr("style"):t.data("backstretch")&&t.backstretch("destroy").attr("style","")}))}var t=e.prototype;return t.onBuild=function(){var e=this.theme();this.themesObjects(o()(r.a).call(r.a,this.themes(),(function(t){return{name:t,nameDisplay:Object(f.convertThemeName)(t),selected:l.a.observable(t===e),themePreviewSrc:Object(h.F)(t)}}))),this.initUploader()},t.onShow=function(){this.background.error("")},t.clearBackground=function(){var e=this;this.capaUserBackground()&&v.a.clearUserBackground((function(){e.background.name(""),e.background.hash("")}))},t.initUploader=function(){var e=this;this.background.uploaderButton()&&this.capaUserBackground()&&new d.a({action:Object(h.H)(),name:"uploader",queueSize:1,multipleSizeLimit:1,disableDragAndDrop:!0,disableMultiple:!0,clickElement:this.background.uploaderButton()}).on("onStart",(function(){return e.background.loading(!0),e.background.error(""),!0})).on("onComplete",(function(t,n,i){if(e.background.loading(!1),n&&t&&i&&i.Result&&i.Result.Name&&i.Result.Hash)e.background.name(i.Result.Name),e.background.hash(i.Result.Hash);else{e.background.name(""),e.background.hash("");var o="";if(i.ErrorCode)switch(i.ErrorCode){case p.UploadErrorCode.FileIsTooBig:o=Object(m.i18n)("SETTINGS_THEMES/ERROR_FILE_IS_TOO_BIG");break;case p.UploadErrorCode.FileType:o=Object(m.i18n)("SETTINGS_THEMES/ERROR_FILE_TYPE_ERROR")}!o&&i.ErrorMessage&&(o=i.ErrorMessage),e.background.error(o||Object(m.i18n)("SETTINGS_THEMES/ERROR_UNKNOWN"))}return!0}))},e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var i=n(12),o=n.n(i),a=n(3),r=n.n(a),s=n(1),c=n(2),l=n(0),u=n(6),d=n(41),p=n(35),f=n(16),h=n(21),m=n(7),b=function(){function e(){this.openpgpkeys=d.a.openpgpkeys,this.openpgpkeysPublic=d.a.openpgpkeysPublic,this.openpgpkeysPrivate=d.a.openpgpkeysPrivate,this.openPgpKeyForDeletion=s.a.observable(null).deleteAccessHelper(),this.allowDraftAutosave=p.a.allowDraftAutosave,this.isHttps=u.bIsHttps}var t=e.prototype;return t.addOpenPgpKey=function(){Object(m.showScreenPopup)(n(557))},t.generateOpenPgpKey=function(){Object(m.showScreenPopup)(n(558))},t.viewOpenPgpKey=function(e){e&&Object(m.showScreenPopup)(n(559),[e])},t.deleteOpenPgpKey=function(e){if(e&&e.deleteAccess()&&(this.openPgpKeyForDeletion(null),e&&d.a.openpgpKeyring)){var t=o()(r.a).call(r.a,d.a.openpgpkeys(),(function(t){return e===t}));t&&(d.a.openpgpkeys.remove(t),Object(c.delegateRunOnDestroy)(t),d.a.openpgpKeyring[t.isPrivate?"privateKeys":"publicKeys"].removeForId(t.guid),d.a.openpgpKeyring.store()),Object(h.a)().reloadOpenPgpKeys()}},t.onBuild=function(){var e=this;r.a.delay((function(){e.allowDraftAutosave.subscribe(f.a.saveSettingsHelper("AllowDraftAutosave",c.boolToAjax))}),l.Magics.Time50ms)},e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i,o=n(10),a=n(7),r=n(319),s=Object(a.view)({name:"View/User/Settings/SystemDropDown",type:a.ViewType.Right,templateID:"SystemDropDown"})(i=function(e){function t(){return e.apply(this,arguments)||this}return Object(o.a)(t,e),t}(r.a))||i},function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var i,o=n(10),a=(n(205),n(8)),r=n.n(a),s=n(20),c=n.n(s),l=n(0),u=n(6),d=n(15),p=n(14),f=n(5),h=n(7),m=n(25),b=Object(h.view)({name:"View/User/Settings/Menu",type:h.ViewType.Left,templateID:"SettingsMenu"})(i=function(e){function t(t){var n;return(n=e.call(this)||this).leftPanelDisabled=u.leftPanelDisabled,n.mobile=f.appSettingsGet("mobile"),n.menu=t.menu,n}Object(o.a)(t,e);var n=t.prototype;return n.onBuild=function(e){this.mobile&&e.on("click",".b-settings-menu .e-item.selectable",(function(){Object(u.leftPanelDisabled)(!0)})),c()("up, down",l.KeyState.Settings,Object(h.settingsMenuKeysHandler)(r()(".b-settings-menu .e-item",e)))},n.link=function(e){return Object(d.z)(e)},n.backToMailBoxClick=function(){Object(h.setHash)(Object(d.m)(Object(p.h)()))},t}(m.a))||i},function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var i,o=n(10),a=n(15),r=n(14),s=n(6),c=n(5),l=n(13),u=n(7),d=n(25),p=Object(u.view)({name:"View/User/Settings/Pane",type:u.ViewType.Right,templateID:"SettingsPane"})(i=function(e){function t(){var t;return(t=e.call(this)||this).mobile=c.appSettingsGet("mobile"),t.leftPanelDisabled=s.leftPanelDisabled,t}Object(o.a)(t,e);var n=t.prototype;return n.onShow=function(){l.a.message(null)},n.hideLeft=function(e,t){t.preventDefault(),t.stopPropagation(),Object(s.leftPanelDisabled)(!0)},n.showLeft=function(e,t){t.preventDefault(),t.stopPropagation(),Object(s.leftPanelDisabled)(!1)},n.onBuild=function(e){this.mobile&&e.on("click",(function(){Object(s.leftPanelDisabled)(!0)}))},n.backToMailBoxClick=function(){Object(u.setHash)(Object(a.m)(Object(r.h)()))},t}(d.a))||i},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t);var i=n(293),o=n(403);Object(i.a)(o.default)},function(e,t,n){"use strict";n.r(t),n.d(t,"MessageOpenPgpPopupView",(function(){return C})),n.d(t,"default",(function(){return C}));var i,o,a,r,s=n(10),c=n(18),l=n(12),u=n.n(l),d=n(19),p=n.n(d),f=n(3),h=n.n(f),m=n(1),b=n(20),g=n.n(b),v=n(8),y=n.n(v),S=n(2),O=n(0),w=n(7),T=n(25),C=(i=Object(w.popup)({name:"View/Popup/MessageOpenPgp",templateID:"PopupsMessageOpenPgp"}),o=Object(w.command)((function(e){return!e.submitRequest()})),i((r=function(e){function t(){var t;return(t=e.call(this)||this).notification=m.a.observable(""),t.selectedKey=m.a.observable(null),t.privateKeys=m.a.observableArray([]),t.password=m.a.observable(""),t.password.focus=m.a.observable(!1),t.buttonFocus=m.a.observable(!1),t.resultCallback=null,t.submitRequest=m.a.observable(!1),t.sDefaultKeyScope=O.KeyState.PopupMessageOpenPGP,t}Object(s.a)(t,e);var n=t.prototype;return n.doCommand=function(){var e=this;this.submitRequest(!0),h.a.delay((function(){var t=null;try{if(e.resultCallback&&e.selectedKey()){var n=e.selectedKey().getNativeKeys();if(t=n&&n[0]?n[0]:null)try{t.decrypt(Object(S.pString)(e.password()))||(Object(S.log)("Error: Private key cannot be decrypted"),t=null)}catch(e){Object(S.log)(e),t=null}else Object(S.log)("Error: Private key cannot be found")}}catch(e){Object(S.log)(e),t=null}e.submitRequest(!1),e.cancelCommand(),e.resultCallback(t)}),O.Magics.Time100ms)},n.clearPopup=function(){this.notification(""),this.password(""),this.password.focus(!1),this.buttonFocus(!1),this.selectedKey(!1),this.submitRequest(!1),this.resultCallback=null,this.privateKeys([])},n.onBuild=function(e){var t=this;g()("tab,shift+tab",O.KeyState.PopupMessageOpenPGP,(function(){switch(!0){case t.password.focus():t.buttonFocus(!0);break;case t.buttonFocus():t.password.focus(!0)}return!1}));var n=this;e.on("click",".key-list__item",(function(){var t;u()(e).call(e,".key-list__item .key-list__item__radio").addClass("icon-radio-unchecked").removeClass("icon-radio-checked"),u()(t=y()(this)).call(t,".key-list__item__radio").removeClass("icon-radio-unchecked").addClass("icon-radio-checked"),n.selectedKey(m.a.dataFor(this)),n.password.focus(!0)}))},n.onHideWithDelay=function(){this.clearPopup()},n.onShowWithDelay=function(){this.password.focus(!0)},n.onShow=function(e,t){var n;(this.clearPopup(),this.resultCallback=e,this.privateKeys(t),this.viewModelDom)&&u()(n=this.viewModelDom).call(n,".key-list__item").first().click()},t}(T.a),Object(c.a)(r.prototype,"doCommand",[o],p()(r.prototype,"doCommand"),r.prototype),a=r))||a)},function(e,t,n){n(162);var i=n(551),o=n(93),a=Array.prototype,r={DOMTokenList:!0,NodeList:!0};e.exports=function(e){var t=e.keys;return e===a||e instanceof Array&&t===a.keys||r.hasOwnProperty(o(e))?i:t}},function(e,t,n){var i=n(552);e.exports=i},function(e,t,n){n(202);var i=n(71);e.exports=i("Array").keys},function(e,t,n){"use strict";n.r(t),n.d(t,"ComposeOpenPgpPopupView",(function(){return D})),n.d(t,"default",(function(){return D}));var i,o,a,r,s,c,l,u=n(29),d=n(10),p=n(18),f=(n(45),n(204),n(77),n(17)),h=n.n(f),m=n(176),b=n.n(m),g=n(12),v=n.n(g),y=n(19),S=n.n(y),O=n(3),w=n.n(O),T=n(8),C=n.n(T),A=n(1),E=n(20),j=n.n(E),F=n(2),R=n(0),N=n(9),I=n(41),L=n(83),P=n(7),_=n(25),M=-8,D=(i=Object(P.popup)({name:"View/Popup/ComposeOpenPgp",templateID:"PopupsComposeOpenPgp"}),o=Object(P.command)((function(e){return!e.submitRequest()&&(e.sign()||e.encrypt())})),a=Object(P.command)(),r=Object(P.command)(),s=Object(P.command)(),i((l=function(e){function t(){var t;return(t=e.call(this)||this).publicKeysOptionsCaption=Object(N.i18n)("PGP_NOTIFICATIONS/ADD_A_PUBLICK_KEY"),t.privateKeysOptionsCaption=Object(N.i18n)("PGP_NOTIFICATIONS/SELECT_A_PRIVATE_KEY"),t.notification=A.a.observable(""),t.sign=A.a.observable(!1),t.encrypt=A.a.observable(!1),t.password=A.a.observable(""),t.password.focus=A.a.observable(!1),t.buttonFocus=A.a.observable(!1),t.text=A.a.observable(""),t.selectedPrivateKey=A.a.observable(null),t.selectedPublicKey=A.a.observable(null),t.signKey=A.a.observable(null),t.encryptKeys=A.a.observableArray([]),t.encryptKeysView=A.a.computed((function(){return w.a.compact(h()(w.a).call(w.a,t.encryptKeys(),(function(e){return e?e.key:null})))})),t.privateKeysOptions=A.a.computed((function(){var e=h()(w.a).call(w.a,I.a.openpgpkeysPrivate(),(function(e,n){return t.signKey()&&t.signKey().key.id===e.id?null:h()(w.a).call(w.a,e.users,(function(t){return{id:e.guid,name:"("+e.id.substr(M).toUpperCase()+") "+t,key:e,class:n%2?"odd":"even"}}))}));return w.a.compact(w.a.flatten(e,!0))})),t.publicKeysOptions=A.a.computed((function(){var e=h()(w.a).call(w.a,I.a.openpgpkeysPublic(),(function(e,n){return-1<Object(F.inArray)(e,t.encryptKeysView())?null:h()(w.a).call(w.a,e.users,(function(t){return{id:e.guid,name:"("+e.id.substr(M).toUpperCase()+") "+t,key:e,class:n%2?"odd":"even"}}))}));return w.a.compact(w.a.flatten(e,!0))})),t.submitRequest=A.a.observable(!1),t.resultCallback=null,t.selectedPrivateKey.subscribe((function(e){e&&(t.selectCommand(),t.updateCommand())})),t.selectedPublicKey.subscribe((function(e){e&&t.addCommand()})),t.sDefaultKeyScope=R.KeyState.PopupComposeOpenPGP,t.defautOptionsAfterRender=F.defautOptionsAfterRender,t.addOptionClass=function(e,n){t.defautOptionsAfterRender(e,n),n&&!Object(F.isUnd)(n.class)&&e&&C()(e).addClass(n.class)},t.deletePublickKey=w.a.bind(t.deletePublickKey,Object(u.a)(t)),t}Object(d.a)(t,e);var n=t.prototype;return n.doCommand=function(){var e=this,t=!0,n=null,i=[];if(this.submitRequest(!0),t&&this.sign()&&(this.signKey()?this.signKey().key||(this.notification(Object(N.i18n)("PGP_NOTIFICATIONS/NO_PRIVATE_KEY_FOUND_FOR",{EMAIL:this.signKey().email})),t=!1):(this.notification(Object(N.i18n)("PGP_NOTIFICATIONS/NO_PRIVATE_KEY_FOUND")),t=!1),t)){var o=this.signKey().key.getNativeKeys();n=o[0]||null;try{n&&n.decrypt(Object(F.pString)(this.password()))}catch(e){n=null}n||(this.notification(Object(N.i18n)("PGP_NOTIFICATIONS/NO_PRIVATE_KEY_FOUND")),t=!1)}return t&&this.encrypt()&&(0===this.encryptKeys().length?(this.notification(Object(N.i18n)("PGP_NOTIFICATIONS/NO_PUBLIC_KEYS_FOUND")),t=!1):this.encryptKeys()&&(i=[],w.a.each(this.encryptKeys(),(function(n){n&&n.key?i=b()(i).call(i,w.a.compact(w.a.flatten(n.key.getNativeKeys()))):n&&n.email&&(e.notification(Object(N.i18n)("PGP_NOTIFICATIONS/NO_PUBLIC_KEYS_FOUND_FOR",{EMAIL:n.email})),t=!1)})),!t||0!==i.length&&this.encryptKeys().length===i.length||(t=!1))),t&&this.resultCallback?w.a.delay((function(){var t=null;try{n&&0===i.length?t=I.a.openpgp.sign({data:e.text(),privateKeys:[n]}):n&&0<i.length?t=I.a.openpgp.encrypt({data:e.text(),publicKeys:i,privateKeys:[n]}):!n&&0<i.length&&(t=I.a.openpgp.encrypt({data:e.text(),publicKeys:i}))}catch(t){Object(F.log)(t),e.notification(Object(N.i18n)("PGP_NOTIFICATIONS/PGP_ERROR",{ERROR:""+t}))}if(t)try{t.then((function(t){e.resultCallback(t.data),e.cancelCommand()})).catch((function(t){e.notification(Object(N.i18n)("PGP_NOTIFICATIONS/PGP_ERROR",{ERROR:""+t}))}))}catch(t){e.notification(Object(N.i18n)("PGP_NOTIFICATIONS/PGP_ERROR",{ERROR:""+t}))}e.submitRequest(!1)}),R.Magics.Time20ms):this.submitRequest(!1),t},n.selectCommand=function(){var e=this.selectedPrivateKey(),t=e?v()(w.a).call(w.a,this.privateKeysOptions(),(function(t){return t&&e===t.id})):null;t&&this.signKey({empty:!t.key,selected:A.a.observable(!!t.key),users:t.key.users,hash:t.key.id.substr(M).toUpperCase(),key:t.key})},n.addCommand=function(){var e=this.selectedPublicKey(),t=this.encryptKeys(),n=e?v()(w.a).call(w.a,this.publicKeysOptions(),(function(t){return t&&e===t.id})):null;n&&(t.push({empty:!n.key,selected:A.a.observable(!!n.key),removable:A.a.observable(!this.sign()||!this.signKey()||this.signKey().key.id!==n.key.id),users:n.key.users,hash:n.key.id.substr(M).toUpperCase(),key:n.key}),this.encryptKeys(t))},n.updateCommand=function(){var e=this;w.a.each(this.encryptKeys(),(function(t){t.removable(!e.sign()||!e.signKey()||e.signKey().key.id!==t.key.id)}))},n.deletePublickKey=function(e){this.encryptKeys.remove(e)},n.clearPopup=function(){this.notification(""),this.sign(!1),this.encrypt(!1),this.password(""),this.password.focus(!1),this.buttonFocus(!1),this.signKey(null),this.encryptKeys([]),this.text(""),this.resultCallback=null},n.onBuild=function(){var e=this;j()("tab,shift+tab",R.KeyState.PopupComposeOpenPGP,(function(){switch(!0){case e.password.focus():e.buttonFocus(!0);break;case e.buttonFocus():e.password.focus(!0)}return!1}))},n.onHideWithDelay=function(){this.clearPopup()},n.onShowWithDelay=function(){this.sign()?this.password.focus(!0):this.buttonFocus(!0)},n.onShow=function(e,t,n,i,o,a){var r=this;this.clearPopup();var s=[],c="",l=new L.EmailModel;if(this.resultCallback=e,""!==i&&s.push(i),""!==o&&s.push(o),""!==a&&s.push(a),s=s.join(", ").split(","),s=w.a.compact(h()(w.a).call(w.a,s,(function(e){return l.clear(),l.parse(Object(F.trim)(e)),""!==l.email&&l.email}))),n&&n.email()){c=n.email(),s.unshift(c);var u=I.a.findAllPrivateKeysByEmailNotNative(c);u&&u[0]&&this.signKey({users:u[0].users||[c],hash:u[0].id.substr(M).toUpperCase(),key:u[0]})}this.signKey()&&this.sign(!0),s&&0<s.length&&(this.encryptKeys(w.a.uniq(w.a.compact(w.a.flatten(h()(w.a).call(w.a,s,(function(e){var t=I.a.findAllPublicKeysByEmailNotNative(e);return t?h()(w.a).call(w.a,t,(function(t){return{empty:!t,selected:A.a.observable(!!t),removable:A.a.observable(!r.sign()||!r.signKey()||r.signKey().key.id!==t.id),users:t&&t.users||[e],hash:t?t.id.substr(M).toUpperCase():"",key:t}})):[]})),!0)),(function(e){return e.hash}))),0<this.encryptKeys().length&&this.encrypt(!0)),this.text(t)},t}(_.a),Object(p.a)(l.prototype,"doCommand",[o],S()(l.prototype,"doCommand"),l.prototype),Object(p.a)(l.prototype,"selectCommand",[a],S()(l.prototype,"selectCommand"),l.prototype),Object(p.a)(l.prototype,"addCommand",[r],S()(l.prototype,"addCommand"),l.prototype),Object(p.a)(l.prototype,"updateCommand",[s],S()(l.prototype,"updateCommand"),l.prototype),c=l))||c)},function(e,t,n){"use strict";n.r(t),n.d(t,"FolderClearPopupView",(function(){return S})),n.d(t,"default",(function(){return S}));var i,o,a,r,s=n(10),c=n(18),l=n(19),u=n.n(l),d=n(1),p=n(0),f=n(9),h=n(14),m=n(13),b=n(16),g=n(21),v=n(7),y=n(25),S=(i=Object(v.popup)({name:"View/Popup/FolderClear",templateID:"PopupsFolderClear"}),o=Object(v.command)((function(e){var t=e.selectedFolder();return!e.clearingProcess()&&null!==t})),i((r=function(e){function t(){var t;return(t=e.call(this)||this).selectedFolder=d.a.observable(null),t.clearingProcess=d.a.observable(!1),t.clearingError=d.a.observable(""),t.folderFullNameForClear=d.a.computed((function(){var e=t.selectedFolder();return e?e.printableFullName():""})),t.folderNameForClear=d.a.computed((function(){var e=t.selectedFolder();return e?e.localName():""})),t.dangerDescHtml=d.a.computed((function(){return Object(f.i18n)("POPUPS_CLEAR_FOLDER/DANGER_DESC_HTML_1",{FOLDER:t.folderNameForClear()})})),t}Object(s.a)(t,e);var n=t.prototype;return n.clearCommand=function(){var e=this,t=this.selectedFolder();t&&(m.a.message(null),m.a.messageList([]),this.clearingProcess(!0),t.messageCountAll(0),t.messageCountUnread(0),Object(h.q)(t.fullNameRaw,""),b.a.folderClear((function(t,n){e.clearingProcess(!1),p.StorageResultType.Success===t&&n&&n.Result?(Object(g.a)().reloadMessageList(!0),e.cancelCommand()):n&&n.ErrorCode?e.clearingError(Object(f.getNotification)(n.ErrorCode)):e.clearingError(Object(f.getNotification)(p.Notification.MailServerError))}),t.fullNameRaw))},n.clearPopup=function(){this.clearingProcess(!1),this.selectedFolder(null)},n.onShow=function(e){this.clearPopup(),e&&this.selectedFolder(e)},t}(y.a),Object(c.a)(r.prototype,"clearCommand",[o],u()(r.prototype,"clearCommand"),r.prototype),a=r))||a)},function(e,t,n){"use strict";n.r(t),n.d(t,"AdvancedSearchPopupView",(function(){return S})),n.d(t,"default",(function(){return S}));var i,o,a,r,s=n(10),c=n(18),l=n(19),u=n.n(l),d=(n(45),n(204),n(77),n(3)),p=n.n(d),f=n(1),h=n(2),m=n(9),b=n(61),g=n(13),v=n(7),y=n(25),S=(i=Object(v.popup)({name:"View/Popup/AdvancedSearch",templateID:"PopupsAdvancedSearch"}),o=Object(v.command)(),i((r=function(e){function t(){var t;return(t=e.call(this)||this).fromFocus=f.a.observable(!1),t.from=f.a.observable(""),t.to=f.a.observable(""),t.subject=f.a.observable(""),t.text=f.a.observable(""),t.selectedDateValue=f.a.observable(-1),t.hasAttachment=f.a.observable(!1),t.starred=f.a.observable(!1),t.unseen=f.a.observable(!1),t.selectedDates=f.a.computed((function(){return Object(m.trigger)(),[{id:-1,name:Object(m.i18n)("SEARCH/LABEL_ADV_DATE_ALL")},{id:3,name:Object(m.i18n)("SEARCH/LABEL_ADV_DATE_3_DAYS")},{id:7,name:Object(m.i18n)("SEARCH/LABEL_ADV_DATE_7_DAYS")},{id:30,name:Object(m.i18n)("SEARCH/LABEL_ADV_DATE_MONTH")},{id:90,name:Object(m.i18n)("SEARCH/LABEL_ADV_DATE_3_MONTHS")},{id:180,name:Object(m.i18n)("SEARCH/LABEL_ADV_DATE_6_MONTHS")},{id:365,name:Object(m.i18n)("SEARCH/LABEL_ADV_DATE_YEAR")}]})),t}Object(s.a)(t,e);var n=t.prototype;return n.searchCommand=function(){var e=this.buildSearchString();""!==e&&g.a.mainMessageListSearch(e),this.cancelCommand()},n.parseSearchStringValue=function(e){var t=this,n=(e||"").split(/[\s]+/g);p.a.each(n,(function(e){switch(e){case"has:attachment":t.hasAttachment(!0);break;case"is:unseen,flagged":t.starred(!0);case"is:unseen":t.unseen(!0)}}))},n.buildSearchStringValue=function(e){return-1<e.indexOf(" ")&&(e='"'+e+'"'),e},n.buildSearchString=function(){var e=[],t=Object(h.trim)(this.from()),n=Object(h.trim)(this.to()),i=Object(h.trim)(this.subject()),o=Object(h.trim)(this.text()),a=[],r=[];return t&&""!==t&&e.push("from:"+this.buildSearchStringValue(t)),n&&""!==n&&e.push("to:"+this.buildSearchStringValue(n)),i&&""!==i&&e.push("subject:"+this.buildSearchStringValue(i)),this.hasAttachment()&&r.push("attachment"),this.unseen()&&a.push("unseen"),this.starred()&&a.push("flagged"),0<r.length&&e.push("has:"+r.join(",")),0<a.length&&e.push("is:"+a.join(",")),-1<this.selectedDateValue()&&e.push("date:"+Object(b.searchSubtractFormatDateHelper)(this.selectedDateValue())+"/"),o&&""!==o&&e.push("text:"+this.buildSearchStringValue(o)),Object(h.trim)(e.join(" "))},n.clearPopup=function(){this.from(""),this.to(""),this.subject(""),this.text(""),this.selectedDateValue(-1),this.hasAttachment(!1),this.starred(!1),this.unseen(!1),this.fromFocus(!0)},n.onShow=function(e){this.clearPopup(),this.parseSearchStringValue(e)},n.onShowWithDelay=function(){this.fromFocus(!0)},t}(y.a),Object(c.a)(r.prototype,"searchCommand",[o],u()(r.prototype,"searchCommand"),r.prototype),a=r))||a)},function(e,t,n){"use strict";n.r(t),n.d(t,"TwoFactorTestPopupView",(function(){return g})),n.d(t,"default",(function(){return g}));var i,o,a,r,s=n(10),c=n(18),l=n(19),u=n.n(l),d=n(1),p=n(0),f=n(6),h=n(16),m=n(7),b=n(25),g=(i=Object(m.popup)({name:"View/Popup/TwoFactorTest",templateID:"PopupsTwoFactorTest"}),o=Object(m.command)((function(e){return""!==e.code()&&!e.testing()})),i((r=function(e){function t(){var t;return(t=e.call(this)||this).code=d.a.observable(""),t.code.focused=d.a.observable(!1),t.code.status=d.a.observable(null),t.koTestedTrigger=null,t.testing=d.a.observable(!1),t}Object(s.a)(t,e);var n=t.prototype;return n.testCodeCommand=function(){var e=this;this.testing(!0),h.a.testTwoFactor((function(t,n){e.testing(!1),e.code.status(p.StorageResultType.Success===t&&n&&!!n.Result),e.koTestedTrigger&&e.code.status()&&e.koTestedTrigger(!0)}),this.code())},n.clearPopup=function(){this.code(""),this.code.focused(!1),this.code.status(null),this.testing(!1),this.koTestedTrigger=null},n.onShow=function(e){this.clearPopup(),this.koTestedTrigger=e},n.onShowWithDelay=function(){f.bMobileDevice||this.code.focused(!0)},t}(b.a),Object(c.a)(r.prototype,"testCodeCommand",[o],u()(r.prototype,"testCodeCommand"),r.prototype),a=r))||a)},function(e,t,n){"use strict";n.r(t),n.d(t,"AddOpenPgpKeyPopupView",(function(){return g})),n.d(t,"default",(function(){return g}));var i,o,a,r,s=n(10),c=n(18),l=n(19),u=n.n(l),d=(n(45),n(59),n(1)),p=n(2),f=n(41),h=n(21),m=n(7),b=n(25),g=(i=Object(m.popup)({name:"View/Popup/AddOpenPgpKey",templateID:"PopupsAddOpenPgpKey"}),o=Object(m.command)(),i((r=function(e){function t(){var t;return(t=e.call(this)||this).key=d.a.observable(""),t.key.focus=d.a.observable(!1),t.key.error=d.a.observable(!1),t.key.errorMessage=d.a.observable(""),t.key.subscribe((function(){t.key.error(!1),t.key.errorMessage("")})),t}Object(s.a)(t,e);var n=t.prototype;return n.addOpenPgpKeyCommand=function(){var e=/[-]{3,6}BEGIN[\s]PGP[\s](PRIVATE|PUBLIC)[\s]KEY[\s]BLOCK[-]{3,6}[\s\S]+?[-]{3,6}END[\s]PGP[\s](PRIVATE|PUBLIC)[\s]KEY[\s]BLOCK[-]{3,6}/gi,t=f.a.openpgpKeyring,n=Object(p.trim)(this.key());if(/[\n]/.test(n)&&(n=n.replace(/[\r]+/g,"").replace(/[\n]{2,}/g,"\n\n")),this.key.error(""===n),this.key.errorMessage(""),!t||this.key.error())return!1;var i=null,o=30,a=!1;do{if((i=e.exec(n))&&0<o){if(i[0]&&i[1]&&i[2]&&i[1]===i[2]){var r=null;"PRIVATE"===i[1]?r=t.privateKeys.importKey(i[0]):"PUBLIC"===i[1]&&(r=t.publicKeys.importKey(i[0])),r&&(this.key.error(!0),this.key.errorMessage(r&&r[0]?""+r[0]:""),Object(p.log)(r))}o-=1,a=!1}else a=!0}while(!a);return t.store(),Object(h.a)().reloadOpenPgpKeys(),!this.key.error()&&(Object(p.delegateRun)(this,"cancelCommand"),!0)},n.clearPopup=function(){this.key(""),this.key.error(!1),this.key.errorMessage("")},n.onShow=function(){this.clearPopup()},n.onShowWithDelay=function(){this.key.focus(!0)},t}(b.a),Object(c.a)(r.prototype,"addOpenPgpKeyCommand",[o],u()(r.prototype,"addOpenPgpKeyCommand"),r.prototype),a=r))||a)},function(e,t,n){"use strict";n.r(t),n.d(t,"NewOpenPgpKeyPopupView",(function(){return S})),n.d(t,"default",(function(){return S}));var i,o,a,r,s=n(10),c=n(18),l=n(19),u=n.n(l),d=(n(48),n(3)),p=n.n(d),f=n(1),h=n(0),m=n(2),b=n(41),g=n(21),v=n(7),y=n(25),S=(i=Object(v.popup)({name:"View/Popup/NewOpenPgpKey",templateID:"PopupsNewOpenPgpKey"}),o=Object(v.command)(),i((r=function(e){function t(){var t;return(t=e.call(this)||this).email=f.a.observable(""),t.email.focus=f.a.observable(""),t.email.error=f.a.observable(!1),t.name=f.a.observable(""),t.password=f.a.observable(""),t.keyBitLength=f.a.observable(h.Magics.BitLength2048),t.submitRequest=f.a.observable(!1),t.submitError=f.a.observable(""),t.email.subscribe((function(){t.email.error(!1)})),t}Object(s.a)(t,e);var n=t.prototype;return n.generateOpenPgpKeyCommand=function(){var e=this,t={},n=b.a.openpgpKeyring;return this.email.error(""===Object(m.trim)(this.email())),!(!n||this.email.error())&&(t.email=this.email(),""!==this.name()&&(t.name=this.name()),this.submitRequest(!0),this.submitError(""),p.a.delay((function(){try{b.a.openpgp.generateKey({userIds:[t],numBits:Object(m.pInt)(e.keyBitLength()),passphrase:Object(m.trim)(e.password())}).then((function(t){e.submitRequest(!1),t&&t.privateKeyArmored&&(n.privateKeys.importKey(t.privateKeyArmored),n.publicKeys.importKey(t.publicKeyArmored),n.store(),Object(g.a)().reloadOpenPgpKeys(),Object(m.delegateRun)(e,"cancelCommand"))})).catch((function(t){e.submitRequest(!1),e.showError(t)}))}catch(t){e.submitRequest(!1),e.showError(t)}}),h.Magics.Time100ms),!0)},n.showError=function(e){Object(m.log)(e),e&&e.message&&this.submitError(e.message)},n.clearPopup=function(){this.name(""),this.password(""),this.email(""),this.email.error(!1),this.keyBitLength(h.Magics.BitLength2048),this.submitError("")},n.onShow=function(){this.clearPopup()},n.onShowWithDelay=function(){this.email.focus(!0)},t}(y.a),Object(c.a)(r.prototype,"generateOpenPgpKeyCommand",[o],u()(r.prototype,"generateOpenPgpKeyCommand"),r.prototype),a=r))||a)},function(e,t,n){"use strict";n.r(t),n.d(t,"ViewOpenPgpKeyPopupView",(function(){return p})),n.d(t,"default",(function(){return p}));var i,o=n(10),a=n(1),r=n(20),s=n.n(r),c=n(0),l=n(2),u=n(7),d=n(25),p=Object(u.popup)({name:"View/Popup/ViewOpenPgpKey",templateID:"PopupsViewOpenPgpKey"})(i=function(e){function t(){var t;return(t=e.call(this)||this).key=a.a.observable(""),t.keyDom=a.a.observable(null),t.sDefaultKeyScope=c.KeyState.PopupViewOpenPGP,t}Object(o.a)(t,e);var n=t.prototype;return n.clearPopup=function(){this.key("")},n.selectKey=function(){var e=this.keyDom();e&&Object(l.selectElement)(e)},n.onShow=function(e){this.clearPopup(),e&&this.key(e.armor)},n.onBuild=function(){var e=this;s()("ctrl+a, command+a",c.KeyState.PopupViewOpenPGP,(function(){return e.selectKey(),!1}))},t}(d.a))||i},function(e,t,n){"use strict";n.r(t),n.d(t,"WelcomePagePopupView",(function(){return l})),n.d(t,"default",(function(){return l}));var i,o=n(10),a=n(1),r=n(94),s=n(7),c=n(25),l=Object(s.popup)({name:"View/Popup/WelcomePage",templateID:"PopupsWelcomePage"})(i=function(e){function t(){var t;return(t=e.call(this)||this).welcomePageURL=a.a.observable(""),t.closeFocused=a.a.observable(!1),t}Object(o.a)(t,e);var n=t.prototype;return n.clearPopup=function(){this.welcomePageURL(""),this.closeFocused(!1)},n.onShow=function(e){this.clearPopup(),this.welcomePageURL(e)},n.onShowWithDelay=function(){this.closeFocused(!0)},n.onHide=function(){r.a.welcomeClose()},t}(c.a))||i}]);
